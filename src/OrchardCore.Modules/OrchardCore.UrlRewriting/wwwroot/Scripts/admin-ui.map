{"version":3,"sources":["<anon>"],"sourcesContent":["urlRewritingAdmin = function () {\n    const initialize = (url, errorLabel, selectedLabel) => {\n        // Create the sortable UI.\n        sortingListManager.create('#rewrite-rules-sortable-list', url, errorLabel);\n        let searchBox = document.getElementById('search-box');\n        let searchAlert = document.getElementById('list-alert');\n        const filterElements = document.querySelectorAll('[data-filter-value]');\n        // If the user press Enter, don't submit.\n        searchBox.addEventListener('keydown', function (e) {\n            if (e.key === 'Enter') {\n                e.preventDefault();\n            }\n        });\n        searchBox.addEventListener('keyup', e => {\n            var search = e.target.value.toLowerCase();\n            // On ESC, clear the search box and display all rules.\n            if (e.key == 'Escape' || search == '') {\n                searchAlert.classList.add('d-none');\n                searchBox.value = '';\n                for (let i = 0; i < filterElements.length; i++) {\n                    filterElements[i].classList.remove(\"d-none\");\n                    filterElements[i].classList.remove(\"first-child-visible\");\n                    filterElements[i].classList.remove(\"last-child-visible\");\n                }\n                if (filterElements.length > 0) {\n                    filterElements[0].classList.add('first-child-visible');\n                    filterElements[filterElements.length - 1].classList.add('last-child-visible');\n                }\n            } else {\n                let visibleElements = [];\n                for (let i = 0; i < filterElements.length; i++) {\n                    let filter = filterElements[i];\n                    var text = filter.getAttribute('data-filter-value');\n                    if (!text) {\n                        filter.classList.add(\"d-none\");\n                        continue;\n                    }\n                    var found = text.indexOf(search) > -1;\n                    if (found) {\n                        filter.classList.remove(\"d-none\");\n                        filter.classList.remove(\"first-child-visible\");\n                        filter.classList.remove(\"last-child-visible\");\n                        visibleElements.push(filter);\n                    } else {\n                        filter.classList.add(\"d-none\");\n                    }\n                }\n                if (visibleElements.length > 0) {\n                    visibleElements[0].classList.add('first-child-visible');\n                    visibleElements[visibleElements.length - 1].classList.add('last-child-visible');\n                    searchAlert.classList.add('d-none');\n                } else {\n                    searchAlert.classList.remove('d-none');\n                }\n            }\n        });\n        var actions = document.getElementById('actions');\n        var items = document.getElementById('items');\n        var filters = document.querySelectorAll('.filter');\n        var selectAllCtrl = document.getElementById('select-all');\n        var selectedItems = document.getElementById('selected-items');\n        var itemsCheckboxes = document.querySelectorAll(\"input[type='checkbox'][name='ruleIds']\");\n        function displayActionsOrFilters() {\n            // Select all checked checkboxes with name 'ruleIds'\n            var checkedCheckboxes = document.querySelectorAll(\"input[type='checkbox'][name='ruleIds']:checked\");\n            if (checkedCheckboxes.length > 1) {\n                actions.classList.remove('d-none');\n                for (let i = 0; i < filters.length; i++) {\n                    filters[i].classList.add('d-none');\n                }\n                selectedItems.classList.remove('d-none');\n                items.classList.add('d-none');\n            } else {\n                actions.classList.add('d-none');\n                for (let i = 0; i < filters.length; i++) {\n                    filters[i].classList.remove('d-none');\n                }\n                selectedItems.classList.add('d-none');\n                items.classList.remove('d-none');\n            }\n        }\n        var dropdownItems = document.querySelectorAll(\".dropdown-menu .dropdown-item\");\n        // Add click event listeners to each dropdown item\n        dropdownItems.forEach(function (item) {\n            // Check if the item has a data-action attribute\n            if (item.dataset.action) {\n                item.addEventListener(\"click\", function () {\n                    // Get all checked checkboxes\n                    var checkedCheckboxes = document.querySelectorAll(\"input[type='checkbox'][name='ruleIds']:checked\");\n                    // Check if more than one checkbox is checked\n                    if (checkedCheckboxes.length > 1) {\n                        // Get data attributes from the clicked item\n                        var actionData = Object.assign({}, item.dataset);\n                        confirmDialog({\n                            ...actionData,\n                            callback: function (r) {\n                                if (r) {\n                                    // Set the value of the BulkAction option\n                                    document.querySelector(\"[name='Options.BulkAction']\").value = actionData.action;\n                                    // Trigger the submit action\n                                    document.querySelector(\"[name='submit.BulkAction']\").click();\n                                }\n                            }\n                        });\n                    }\n                });\n            }\n        });\n        selectAllCtrl.addEventListener(\"click\", function () {\n            itemsCheckboxes.forEach(function (checkbox) {\n                if (checkbox !== selectAllCtrl) {\n                    checkbox.checked = selectAllCtrl.checked; // Set the checked state of all checkboxes\n                }\n            });\n            // Update the selected items text\n            updateSelectedItemsText();\n            displayActionsOrFilters();\n        });\n        // Event listener for individual checkboxes\n        itemsCheckboxes.forEach(function (checkbox) {\n            checkbox.addEventListener(\"click\", function () {\n                var itemsCount = itemsCheckboxes.length;\n                var selectedItemsCount = document.querySelectorAll(\"input[type='checkbox'][name='ruleIds']:checked\").length;\n                // Update selectAllCtrl state\n                selectAllCtrl.checked = selectedItemsCount === itemsCount;\n                selectAllCtrl.indeterminate = selectedItemsCount > 0 && selectedItemsCount < itemsCount;\n                // Update the selected items text\n                updateSelectedItemsText();\n                displayActionsOrFilters();\n            });\n        });\n        // Function to update selected items text\n        function updateSelectedItemsText() {\n            var selectedCount = document.querySelectorAll(\"input[type='checkbox'][name='ruleIds']:checked\").length;\n            selectedItems.textContent = selectedCount + ' ' + selectedLabel;\n        }\n    }\n    return {\n        initialize: initialize\n    }\n}();\n"],"names":["urlRewritingAdmin","initialize","url","errorLabel","selectedLabel","sortingListManager","create","searchBox","document","getElementById","searchAlert","filterElements","querySelectorAll","addEventListener","e","key","preventDefault","search","target","value","toLowerCase","classList","add","i","length","remove","visibleElements","filter","text","getAttribute","indexOf","push","actions","items","filters","selectAllCtrl","selectedItems","itemsCheckboxes","displayActionsOrFilters","checkedCheckboxes","updateSelectedItemsText","selectedCount","textContent","dropdownItems","forEach","item","dataset","action","actionData","Object","assign","confirmDialog","callback","r","querySelector","click","checkbox","checked","itemsCount","selectedItemsCount","indeterminate"],"mappings":"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"}
