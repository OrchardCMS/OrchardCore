@using OrchardCore.Google.Authentication.ViewModels
@model GoogleAuthenticationSettingsViewModel

<p class="alert alert-warning" role="alert">
    @T["The website might be restarted upon saving the settings, potentially leading to temporary unresponsiveness during the process."]
    <a class="seedoc" href="@(OrchardCore.Admin.Constants.DocsUrl)reference/modules/Google/#google-authentication" target="_blank">@T["See documentation"]</a>
</p>

<h3>@T["Google Authentication Settings"]</h3>

<div class="mb-3 row" asp-validation-class-for="ClientID">
    <div class="col-large col-12 col-sm-12 col-md-12 col-lg-12 col-xl-9">
        <label asp-for="ClientID" class="form-label">@T["Client ID"]</label>
        <input asp-for="ClientID" class="form-control" autocomplete="off" />
        <span asp-validation-for="ClientID"></span>
        <span class="hint">@T["The client id defined in Google API console for the application."]</span>
    </div>
</div>

<div class="mb-3 row" asp-validation-class-for="ClientSecretSecretName">
    <div class="col-large col-12 col-sm-12 col-md-12 col-lg-12 col-xl-9">
        <label asp-for="ClientSecretSecretName" class="form-label">@T["API Secret Key"]</label>
        @await Component.InvokeAsync("SelectSecret", new
        {
            secretTypes = new[] { "TextSecret" },
            selectedSecret = Model.ClientSecretSecretName,
            htmlId = "ClientSecretSecretName",
            htmlName = Html.NameFor(m => m.ClientSecretSecretName).ToString(),
            required = false
        })
        <span asp-validation-for="ClientSecretSecretName"></span>
        <span class="hint">@T["Select a secret containing the Google client secret."]</span>
        @if (Model.HasClientSecret && string.IsNullOrWhiteSpace(Model.ClientSecretSecretName))
        {
            <div class="alert alert-warning mt-2">
                <i class="fa-solid fa-exclamation-triangle"></i>
                @T["A legacy client secret is configured. Please migrate to using a secret for improved security."]
            </div>
        }
    </div>
</div>

<div class="mb-3 row" asp-validation-class-for="CallbackPath">
    <div class="col-large col-12 col-sm-12 col-md-12 col-lg-12 col-xl-9">
        <label asp-for="CallbackPath" class="form-label">@T["CallbackPath"]</label>
        <input asp-for="CallbackPath" class="form-control" placeholder="/signin-google" />
        <span asp-validation-for="CallbackPath"></span>
        <span class="hint">@T["The request path within the application's base path where the user-agent will be returned. The middleware will process this request when it arrives."]</span>
    </div>
</div>

<div class="mb-3" asp-validation-class-for="SaveTokens">
    <div class="form-check">
        <input type="checkbox" class="form-check-input" asp-for="SaveTokens">
        <label class="form-check-label" asp-for="SaveTokens">@T["Store tokens"]</label>
        <span class="hint dashed">@T["Store external authentication tokens for reuse"]</span>
    </div>
</div>
