!function(e){var t={picker:'<div{popup:start} id="ui-datepicker-div"{popup:end} class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all{inline:start} ui-datepicker-inline{inline:end}"><div class="ui-datepicker-header ui-widget-header ui-helper-clearfix ui-corner-all">{link:prev}{link:today}{link:next}</div>{months}{popup:start}<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix ui-corner-all">{button:clear}{button:close}</div>{popup:end}<div class="ui-helper-clearfix"></div></div>',monthRow:'<div class="ui-datepicker-row-break">{months}</div>',month:'<div class="ui-datepicker-group"><div class="ui-datepicker-header ui-widget-header ui-helper-clearfix ui-corner-all">{monthHeader:MM yyyy}</div><table class="ui-datepicker-calendar"><thead>{weekHeader}</thead><tbody>{weeks}</tbody></table></div>',weekHeader:"<tr>{days}</tr>",dayHeader:"<th>{day}</th>",week:"<tr>{days}</tr>",day:"<td>{day}</td>",monthSelector:".ui-datepicker-group",daySelector:"td",rtlClass:"ui-datepicker-rtl",multiClass:"ui-datepicker-multi",defaultClass:"ui-state-default",selectedClass:"ui-state-active",highlightedClass:"ui-state-hover",todayClass:"ui-state-highlight",otherMonthClass:"ui-datepicker-other-month",weekendClass:"ui-datepicker-week-end",commandClass:"ui-datepicker-cmd",commandButtonClass:"ui-state-default ui-corner-all",commandLinkClass:"",disabledClass:"ui-datepicker-disabled"};e.extend(e.calendarsPicker,{weekOfYearRenderer:e.extend({},e.calendarsPicker.defaultRenderer,{weekHeader:'<tr><th class="calendars-week"><span title="{l10n:weekStatus}">{l10n:weekText}</span></th>{days}</tr>',week:'<tr><td class="calendars-week">{weekOfYear}</td>{days}</tr>'}),themeRollerRenderer:t,themeRollerWeekOfYearRenderer:e.extend({},t,{weekHeader:'<tr><th class="ui-state-hover"><span>{l10n:weekText}</span></th>{days}</tr>',week:'<tr><td class="ui-state-hover">{weekOfYear}</td>{days}</tr>'}),noWeekends:function(e){return{selectable:e.weekDay()}},changeFirstDay:function(t,a,i){var r=e(this);t.find("th span").each(function(){this.parentNode.className.match(/.*calendars-week.*/)||e('<a href="javascript:void(0)" class="'+this.className+'" title="Change first day of the week">'+e(this).text()+"</a>").click(function(){var e=parseInt(this.className.replace(/^.*calendars-dow-(\d+).*$/,"$1"),10);r.calendarsPicker("option",{firstDay:e})}).replaceAll(this)})},hoverCallback:function(t){return function(a,i,r){if(e.isFunction(t)){var n=this,s=r.options.renderer;a.find(s.daySelector+" a, "+s.daySelector+" span").hover(function(){t.apply(n,[e(n).calendarsPicker("retrieveDate",this),"a"===this.nodeName.toLowerCase()])},function(){t.apply(n,[])})}}},highlightWeek:function(t,a,i){var r=i.options.renderer;t.find(r.daySelector+" a, "+r.daySelector+" span").hover(function(){e(this).parents("tr").find(r.daySelector+" *").addClass(r.highlightedClass)},function(){e(this).parents("tr").find(r.daySelector+" *").removeClass(r.highlightedClass)})},showStatus:function(t,a,i){var r="ui-state-active"===i.options.renderer.selectedClass,n=i.options.defaultStatus||"&#160;",s=e('<div class="'+(r?"ui-datepicker-status ui-widget-header ui-helper-clearfix ui-corner-all":"calendars-status")+'">'+n+"</div>").insertAfter(t.find(".calendars-month-row:last,.ui-datepicker-row-break:last"));t.find("*[title]").each(function(){var t=e(this).attr("title");e(this).removeAttr("title").hover(function(){s.text(t||n)},function(){s.text(n)})})},monthNavigation:function(t,a,i){for(var r=e(this),n="ui-state-active"===i.options.renderer.selectedClass,s=i.curMinDate(),d=i.get("maxDate"),l=i.drawDate.year(),c='<div class="'+(n?"ui-datepicker-month-nav":"calendars-month-nav")+'">',o=0;o<a.monthsInYear(l);o++){var h=a.fromMonthOfYear(l,o+a.minMonth)-a.minMonth,u=(!s||a.newDate(l,o+a.minMonth,a.daysInMonth(l,o+a.minMonth)).compareTo(s)>-1)&&(!d||a.newDate(l,o+a.minMonth,a.minDay).compareTo(d)<1);c+="<div>"+(u?'<a href="#" class="jd'+a.newDate(l,o+a.minMonth,a.minDay).toJD()+'"':"<span")+' title="'+a.local.monthNames[h]+'">'+a.local.monthNamesShort[h]+(u?"</a>":"</span>")+"</div>"}c+="</div>",e(c).insertAfter(t.find("div.calendars-nav,div.ui-datepicker-header:first")).find("a").click(function(){var e=r.calendarsPicker("retrieveDate",this);return r.calendarsPicker("showMonth",e.year(),e.month()),!1})},selectWeek:function(t,a,i){var r=e(this);t.find("td.calendars-week span").each(function(){e('<a href="javascript:void(0)" class="'+this.className+'" title="Select the entire week">'+e(this).text()+"</a>").click(function(){for(var e=r.calendarsPicker("retrieveDate",this),t=[e],n=1;n<a.daysInWeek();n++)t.push(e=e.newDate().add(1,"d"));i.options.rangeSelect&&t.splice(1,t.length-2),r.calendarsPicker("setDate",t).calendarsPicker("hide")}).replaceAll(this)})},selectMonth:function(t,a,i){var r=e(this);t.find("th.calendars-week").each(function(){e('<a href="javascript:void(0)" title="Select the entire month">'+e(this).text()+"</a>").click(function(){for(var t=r.calendarsPicker("retrieveDate",e(this).parents("table").find("td:not(.calendars-week) *:not(.calendars-other-month)")[0]),n=[t.day(1)],s=a.daysInMonth(t),d=1;s>d;d++)n.push(t=t.newDate().add(1,"d"));i.options.rangeSelect&&n.splice(1,n.length-2),r.calendarsPicker("setDate",n).calendarsPicker("hide")}).appendTo(this)})},monthOnly:function(t,a,i){var r=e(this);e('<div style="text-align: center;"><button type="button">Select</button></div>').insertAfter(t.find(".calendars-month-row:last,.ui-datepicker-row-break:last")).children().click(function(){var e=t.find(".calendars-month-year:first").val().split("/");r.calendarsPicker("setDate",a.newDate(parseInt(e[1],10),parseInt(e[0],10),a.minDay)).calendarsPicker("hide")});t.find(".calendars-month-row table,.ui-datepicker-row-break table").remove()}})}(jQuery);