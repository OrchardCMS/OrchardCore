{"version":3,"sources":["<anon>"],"sourcesContent":["var contentTypePickerApp;\nvar contentTypePickerInitialized;\nvar sharedContentTypePickerModal;\n\nfunction initializeContentTypePickerApplication(pathBase) {\n    if (contentTypePickerInitialized) {\n        return;\n    }\n\n    contentTypePickerInitialized = true;\n\n    contentTypePickerApp = new Vue({\n        el: \"#contentTypePickerApp\",\n        data: {\n            contentTypes: [],\n            categories: [],\n            searchFilter: \"\",\n            selectedCategory: \"All\",\n            pathBase: pathBase || \"\",\n            currentConfig: null,\n        },\n        computed: {\n            filteredContentTypes: function () {\n                var self = this;\n                return this.contentTypes.filter(function (contentType) {\n                    // Filter by category\n                    // Items without a category are only shown when \"All\" is selected\n                    if (self.selectedCategory !== \"All\") {\n                        if (!contentType.category || contentType.category !== self.selectedCategory) {\n                            return false;\n                        }\n                    }\n                    // Filter by search term\n                    if (self.searchFilter) {\n                        var searchLower = self.searchFilter.toLowerCase();\n                        var nameMatch = contentType.displayName.toLowerCase().indexOf(searchLower) >= 0;\n                        var descMatch = contentType.description && contentType.description.toLowerCase().indexOf(searchLower) >= 0;\n                        return nameMatch || descMatch;\n                    }\n                    return true;\n                });\n            },\n        },\n        methods: {\n            configure: function (options) {\n                this.currentConfig = options;\n                this.contentTypes = options.contentTypes || [];\n\n                // Build unique categories list\n                var categorySet = {};\n                this.contentTypes.forEach(function (contentType) {\n                    if (contentType.category) {\n                        categorySet[contentType.category] = true;\n                    }\n                });\n                this.categories = [\"All\"].concat(Object.keys(categorySet).sort());\n\n                // Reset filters\n                this.searchFilter = \"\";\n                this.selectedCategory = \"All\";\n            },\n            selectCategory: function (category) {\n                this.selectedCategory = category;\n            },\n            selectContentType: function (contentType) {\n                if (this.currentConfig && this.currentConfig.onContentTypeSelected) {\n                    this.currentConfig.onContentTypeSelected(contentType, this.currentConfig);\n                }\n            },\n            getThumbnailUrl: function (contentType) {\n                if (contentType.thumbnail) {\n                    // Handle tilde paths\n                    if (contentType.thumbnail.startsWith(\"~/\")) {\n                        return this.pathBase + contentType.thumbnail.substring(1);\n                    }\n                    return contentType.thumbnail;\n                }\n                return null;\n            },\n        },\n    });\n\n    // Set up shared modal\n    var modalElement = document.getElementById(\"contentTypePickerModal\");\n    if (modalElement) {\n        sharedContentTypePickerModal = new bootstrap.Modal(modalElement);\n\n        // Reset state when modal is hidden\n        modalElement.addEventListener(\"hidden.bs.modal\", function () {\n            if (contentTypePickerApp) {\n                contentTypePickerApp.searchFilter = \"\";\n                contentTypePickerApp.selectedCategory = \"All\";\n                contentTypePickerApp.currentConfig = null;\n            }\n        });\n    }\n}\n\n// Show the shared modal with configuration\nfunction showContentTypePicker(config) {\n    if (contentTypePickerApp && sharedContentTypePickerModal) {\n        contentTypePickerApp.configure(config);\n\n        // Update modal title if provided\n        if (config.modalTitle) {\n            var titleElement = document.getElementById(\"contentTypePickerModalLabel\");\n\n            if (titleElement) {\n                titleElement.textContent = config.modalTitle;\n            }\n        }\n\n        sharedContentTypePickerModal.show();\n    }\n}\n\n// Hide the shared modal\nfunction hideContentTypePicker() {\n    if (sharedContentTypePickerModal) {\n        sharedContentTypePickerModal.hide();\n    }\n}\n\n// Integration function to trigger existing add-widget functionality\nfunction contentTypePickerSelectContentType(contentType, config) {\n    // Create a synthetic element with the required data attributes\n    var $trigger = $('<a class=\"add-widget\" style=\"display:none;\">')\n        .data(\"target-id\", config.targetId)\n        .data(\"html-field-prefix\", config.htmlFieldPrefix)\n        .data(\"prefixes-name\", config.prefixesName)\n        .data(\"contenttypes-name\", config.contentTypesName)\n        .data(\"contentitems-name\", config.contentItemsName)\n        .data(\"widget-type\", contentType.name)\n        .data(\"flowmetadata\", config.flowmetadata || false)\n        .data(\"parent-content-type\", config.parentContentType)\n        .data(\"part-name\", config.partName);\n\n    // Append to body so delegated event handler can find it, trigger click, then remove\n    $trigger.appendTo(\"body\").trigger(\"click\").remove();\n\n    // Close the shared modal\n    hideContentTypePicker();\n}\n"],"names":["contentTypePickerApp","contentTypePickerInitialized","sharedContentTypePickerModal","initializeContentTypePickerApplication","pathBase","Vue","el","data","contentTypes","categories","searchFilter","selectedCategory","currentConfig","computed","filteredContentTypes","self","filter","contentType","category","searchLower","toLowerCase","nameMatch","displayName","indexOf","descMatch","description","methods","configure","options","categorySet","forEach","concat","Object","keys","sort","selectCategory","selectContentType","onContentTypeSelected","getThumbnailUrl","thumbnail","startsWith","substring","modalElement","document","getElementById","bootstrap","Modal","addEventListener","showContentTypePicker","config","modalTitle","titleElement","textContent","show","hideContentTypePicker","hide","contentTypePickerSelectContentType","$trigger","$","targetId","htmlFieldPrefix","prefixesName","contentTypesName","contentItemsName","name","flowmetadata","parentContentType","partName","appendTo","trigger","remove"],"mappings":"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"}
