{"version":3,"sources":["<anon>"],"sourcesContent":["//variables used in FlowPart.Edit sortable\nvar widgetDragItem, lastContainer, widgetItemSourceId, widgetItemDestId;\ndocument.addEventListener('DOMContentLoaded', function () {\n    document.addEventListener('click', function (event) {\n        if (event.target.matches('.add-widget')) {\n            var type = event.target.dataset.widgetType;\n            var targetId = event.target.dataset.targetId;\n            var htmlFieldPrefix = event.target.dataset.htmlFieldPrefix;\n            var createEditorUrl = document.getElementById(targetId).dataset.buildeditorurl;\n            var prefixesName = event.target.dataset.prefixesName;\n            var flowmetadata = event.target.dataset.flowmetadata;\n            var parentContentType = event.target.dataset.parentContentType;\n            var partName = event.target.dataset.partName;\n            var indexes = Array.from(document.querySelectorAll(`#${targetId}`).closest(\"form\").querySelectorAll(\"input[name*='Prefixes']\"))\n                .filter(e => e.value.substring(0, e.value.lastIndexOf('-')) === htmlFieldPrefix)\n                .map(e => parseInt(e.value.substring(e.value.lastIndexOf('-') + 1)) || 0);\n            var index = indexes.length ? Math.max(...indexes) + 1 : 0;\n            var prefix = htmlFieldPrefix + '-' + index.toString();\n            var contentTypesName = event.target.dataset.contenttypesName;\n            var contentItemsName = event.target.dataset.contentitemsName;\n            fetch(`${createEditorUrl}?id=${type}&prefix=${prefix}&prefixesName=${prefixesName}&contentTypesName=${contentTypesName}&contentItemsName=${contentItemsName}&targetId=${targetId}&flowmetadata=${flowmetadata}&parentContentType=${parentContentType}&partName=${partName}`)\n                .then(response => response.json())\n                .then(data => {\n                    document.getElementById(targetId).insertAdjacentHTML('beforeend', data.Content);\n                    var dom = new DOMParser().parseFromString(data.Scripts, 'text/html');\n                    Array.from(dom.querySelectorAll('script')).forEach(script => {\n                        eval(script.textContent || script.innerHTML);\n                    });\n                });\n        }\n        if (event.target.matches('.insert-widget')) {\n            var type = event.target.dataset.widgetType;\n            var target = event.target.closest('.widget-template');\n            var targetId = event.target.dataset.targetId;\n            var htmlFieldPrefix = event.target.dataset.htmlFieldPrefix;\n            var createEditorUrl = document.getElementById(targetId).dataset.buildeditorurl;\n            var flowmetadata = event.target.dataset.flowmetadata;\n            var prefixesName = event.target.dataset.prefixesName;\n            var parentContentType = event.target.dataset.parentContentType;\n            var partName = event.target.dataset.partName;\n            var indexes = Array.from(document.querySelectorAll(`#${targetId}`).closest(\"form\").querySelectorAll(\"input[name*='Prefixes']\"))\n                .filter(e => e.value.substring(0, e.value.lastIndexOf('-')) === htmlFieldPrefix)\n                .map(e => parseInt(e.value.substring(e.value.lastIndexOf('-') + 1)) || 0);\n            var index = indexes.length ? Math.max(...indexes) + 1 : 0;\n            var prefix = htmlFieldPrefix + '-' + index.toString();\n            var contentTypesName = event.target.dataset.contenttypesName;\n            var contentItemsName = event.target.dataset.contentitemsName;\n            fetch(`${createEditorUrl}?id=${type}&prefix=${prefix}&prefixesName=${prefixesName}&contentTypesName=${contentTypesName}&contentItemsName=${contentItemsName}&targetId=${targetId}&flowmetadata=${flowmetadata}&parentContentType=${parentContentType}&partName=${partName}`)\n                .then(response => response.json())\n                .then(data => {\n                    target.insertAdjacentHTML('beforebegin', data.Content);\n                    var dom = new DOMParser().parseFromString(data.Scripts, 'text/html');\n                    Array.from(dom.querySelectorAll('script')).forEach(script => {\n                        eval(script.textContent || script.innerHTML);\n                    });\n                });\n        }\n        if (event.target.matches('.widget-delete')) {\n            var $this = event.target;\n            confirmDialog({\n                ...$this.dataset, callback: function (r) {\n                    if (r) {\n                        $this.closest('.widget-template').remove();\n                        document.dispatchEvent(new Event('contentpreview:render'));\n                    }\n                }\n            });\n        }\n        if (event.target.matches('.widget-editor-btn-toggle')) {\n            event.target.closest('.widget-editor').classList.toggle('collapsed');\n        }\n    });\n    document.addEventListener('change', function (event) {\n        if (event.target.matches('.widget-editor-footer label, .widget-editor-header label')) {\n            var $tmpl = event.target.closest('.widget-template');\n            var $radio = event.target.querySelector(\"input:first-child\");\n            if ($radio && $radio.id.includes('Size')) {\n                var $radioSize = $radio.value;\n                var classList = $tmpl.className.split(' ');\n                classList.forEach(item => {\n                    if (item.startsWith('col-md-')) $tmpl.classList.remove(item);\n                });\n                var colSize = Math.round($radioSize / 100 * 12);\n                $tmpl.classList.add('col-md-' + colSize);\n                var dropdown = event.target.closest('.dropdown-menu');\n                dropdown.previousElementSibling.textContent = $radioSize + '%';\n            } else if ($radio && $radio.id.includes('Alignment')) {\n                var svg = event.target.querySelector('svg').outerHTML;\n                var alignDropdown = event.target.closest('.dropdown-menu');\n                var $btn = alignDropdown.previousElementSibling;\n                $btn.innerHTML = svg;\n            }\n            Array.from(event.target.parentNode.querySelectorAll('.dropdown-item')).forEach(item => item.classList.remove('active'));\n            event.target.classList.toggle('active');\n            document.dispatchEvent(new Event('contentpreview:render'));\n        }\n    });\n    document.addEventListener('keyup', function (event) {\n        if (event.target.matches('.widget-editor-body .form-group input.content-caption-text')) {\n            var headerTextLabel = event.target.closest('.widget-editor').querySelector('.widget-editor-header:first-child .widget-editor-header-text');\n            var contentTypeDisplayText = headerTextLabel.dataset.contentTypeDisplayText;\n            var title = event.target.value;\n            var newDisplayText = title + ' ' + contentTypeDisplayText;\n            headerTextLabel.textContent = newDisplayText;\n        }\n    });\n});\n"],"names":["widgetDragItem","lastContainer","widgetItemSourceId","widgetItemDestId","document","addEventListener","event","target","matches","type","dataset","widgetType","targetId","htmlFieldPrefix","createEditorUrl","getElementById","buildeditorurl","prefixesName","flowmetadata","parentContentType","partName","indexes","Array","from","querySelectorAll","closest","filter","e","value","substring","lastIndexOf","map","parseInt","index","length","Math","max","prefix","toString","contentTypesName","contenttypesName","contentItemsName","contentitemsName","fetch","then","response","json","data","insertAdjacentHTML","Content","dom","DOMParser","parseFromString","Scripts","forEach","script","eval","textContent","innerHTML","$this","confirmDialog","callback","r","remove","dispatchEvent","Event","classList","toggle","$tmpl","$radio","querySelector","id","includes","$radioSize","className","split","item","startsWith","colSize","round","add","dropdown","previousElementSibling","svg","outerHTML","$btn","alignDropdown","parentNode","headerTextLabel","contentTypeDisplayText","title"],"mappings":"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"}
