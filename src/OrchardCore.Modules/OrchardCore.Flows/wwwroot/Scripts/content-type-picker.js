var contentTypePickerApp,contentTypePickerInitialized,sharedContentTypePickerModal;function initializeContentTypePickerApplication(e){if(!contentTypePickerInitialized&&document.getElementById("contentTypePickerApp")){contentTypePickerInitialized=!0,contentTypePickerApp=new Vue({el:"#contentTypePickerApp",data:{contentTypes:[],categories:[],searchFilter:"",selectedCategory:"All",pathBase:e||"",currentConfig:null,hasError:!1},computed:{filteredContentTypes:function(){var e=this;return this.contentTypes.filter(function(t){if("All"!==e.selectedCategory&&(!t.category||t.category!==e.selectedCategory))return!1;if(e.searchFilter){var n=e.searchFilter.toLowerCase(),i=t.displayName.toLowerCase().indexOf(n)>=0,r=t.description&&t.description.toLowerCase().indexOf(n)>=0;return i||r}return!0})}},methods:{configure:function(e){this.currentConfig=e,this.contentTypes=e.contentTypes||[];var t={};this.contentTypes.forEach(function(e){e.category&&(t[e.category]=!0)}),this.categories=["All"].concat(Object.keys(t).sort()),this.searchFilter="",this.selectedCategory="All",this.hasError=!1},selectCategory:function(e){this.selectedCategory=e},selectContentType:function(e){this.currentConfig&&this.currentConfig.onContentTypeSelected&&this.currentConfig.onContentTypeSelected(e,this.currentConfig)},getThumbnailUrl:function(e){return e.thumbnail?e.thumbnail.startsWith("~/")?this.pathBase+e.thumbnail.substring(1):e.thumbnail:null}}});var t=document.getElementById("contentTypePickerModal");t&&(sharedContentTypePickerModal=new bootstrap.Modal(t),t.addEventListener("hide.bs.modal",function(){document.activeElement&&t.contains(document.activeElement)&&document.activeElement.blur()}),t.addEventListener("hidden.bs.modal",function(){contentTypePickerApp&&(contentTypePickerApp.searchFilter="",contentTypePickerApp.selectedCategory="All",contentTypePickerApp.currentConfig=null,contentTypePickerApp.hasError=!1)}))}}function removeDuplicateModals(){for(var e=document.querySelectorAll("#contentTypePickerModal"),t=1;t<e.length;t++)e[t].remove()}function showContentTypePicker(e){if(removeDuplicateModals(),contentTypePickerInitialized||initializeContentTypePickerApplication(e.pathBase||""),contentTypePickerApp&&sharedContentTypePickerModal){if(contentTypePickerApp.configure(e),e.modalTitle){var t=document.getElementById("contentTypePickerModalLabel");t&&(t.textContent=e.modalTitle)}sharedContentTypePickerModal.show()}}function hideContentTypePicker(){sharedContentTypePickerModal&&(document.activeElement&&document.activeElement.blur(),sharedContentTypePickerModal.hide())}function contentTypePickerSelectContentType(e,t){var n=t.targetId,i=t.htmlFieldPrefix,r=$("#"+n),o=r.data("buildeditorurl"),c=r.closest("form").find("input[name*='Prefixes']").filter(function(e,t){return $(t).val().substring(0,$(t).val().lastIndexOf("-"))===i}).map(function(e,t){return parseInt($(t).val().substring($(t).val().lastIndexOf("-")+1))||0}),a=i+"-"+(c.length?Math.max(...c)+1:0).toString(),l=new URLSearchParams({id:e.name,prefix:a,prefixesName:t.prefixesName,contentTypesName:t.contentTypesName,contentItemsName:t.contentItemsName,targetId:n,flowmetadata:t.flowmetadata||!1,parentContentType:t.parentContentType,partName:t.partName});t.cardCollectionType&&l.append("cardCollectionType",t.cardCollectionType),$.ajax({url:o+"?"+l.toString()}).done(function(e){var n=JSON.parse(e);t.insertBefore?$(n.Content).insertBefore(t.insertBefore):r.append(n.Content),$(n.Scripts).filter("script").each(function(){$.globalEval(this.text||this.textContent||this.innerHTML||"")}),hideContentTypePicker()}).fail(function(){contentTypePickerApp&&(contentTypePickerApp.hasError=!0)})}
//# sourceMappingURL=content-type-picker.map