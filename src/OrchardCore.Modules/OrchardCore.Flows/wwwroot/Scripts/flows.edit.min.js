function ownKeys(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach((function(e){_defineProperty(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var widgetDragItem,lastContainer,widgetItemSourceId,widgetItemDestId;$((function(){function t(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+t()+t()+t()+t()+t()+t()}$(document).on("click",".add-widget",(function(e){var n=$(this).data("widget-type"),i=$(this).data("target-id"),r=$("#"+i).data("buildeditorurl"),a=$(this).data("prefixes-name"),o=$(this).data("flowmetadata"),d=$(this).data("parent-content-type"),c=$(this).data("part-name"),s=t(),l=$(this).data("contenttypes-name");$.ajax({url:r+"?id="+n+"&prefix="+s+"&prefixesName="+a+"&contentTypesName="+l+"&targetId="+i+"&flowmetadata="+o+"&parentContentType="+d+"&partName="+c}).done((function(t){var e=JSON.parse(t);$(document.getElementById(i)).append(e.Content),$(e.Scripts).filter("script").each((function(){$.globalEval(this.text||this.textContent||this.innerHTML||"")}))}))})),$(document).on("click",".insert-widget",(function(e){var n=$(this).data("widget-type"),i=$(this).closest(".widget-template"),r=$(this).data("target-id"),a=$("#"+r).data("buildeditorurl"),o=$(this).data("flowmetadata"),d=$(this).data("prefixes-name"),c=$(this).data("parent-content-type"),s=$(this).data("part-name"),l=t(),p=$(this).data("contenttypes-name");$.ajax({url:a+"?id="+n+"&prefix="+l+"&prefixesName="+d+"&contentTypesName="+p+"&targetId="+r+"&flowmetadata="+o+"&parentContentType="+c+"&partName="+s}).done((function(t){var e=JSON.parse(t);$(e.Content).insertBefore(i),$(e.Scripts).filter("script").each((function(){$.globalEval(this.text||this.textContent||this.innerHTML||"")}))}))})),$(document).on("click",".widget-delete",(function(){var t=$(this);confirmDialog(_objectSpread({},t.data(),{callback:function(e){e&&(t.closest(".widget-template").remove(),$(document).trigger("contentpreview:render"))}}))})),$(document).on("change",".widget-editor-footer label, .widget-editor-header label",(function(){var t=$(this).closest(".widget-template"),e=$(this).find("input:first-child");if("undefined"!==e[0].id&&e[0].id.indexOf("Size")>0){var n=$(this).find("input:first-child").val(),i=t.attr("class").split(" ");$.each(i,(function(e,n){0===n.indexOf("col-md-")&&t.removeClass(n)}));var r=Math.round(n/100*12);t.addClass("col-md-"+r),$(this).closest(".dropdown-menu").prev("button").text(n+"%")}else if("undefined"!==e[0].id&&e[0].id.indexOf("Alignment")>0){var a=$(this).find("svg")[0].outerHTML;$(this).closest(".dropdown-menu").prev("button").html(a)}$(document).trigger("contentpreview:render")})),$(document).on("click",".widget-editor-btn-toggle",(function(){$(this).closest(".widget-editor").toggleClass("collapsed")})),$(document).on("keyup",".widget-editor-body .form-group input.content-caption-text",(function(){var t=$(this).closest(".widget-editor").find(".widget-editor-header:first .widget-editor-header-text"),e=t.data("content-type-display-text"),n=$(this).val()+" "+e;t.text(n)}))}));
