function debounceUserPicker(e,t,n){var s;return function(){var r=this,a=arguments,o=n&&!s;clearTimeout(s),s=setTimeout(function(){s=null,n||e.apply(r,a)},t),o&&e.apply(r,a)}}function initVueMultiselectUserPicker(e){if(e){var t=e.id,n=JSON.parse(e.dataset.selectedUsers||"[]"),s=e.dataset.searchUrl,r=JSON.parse(e.dataset.multiple),a=debounceUserPicker(function(e,t){e.isLoading=!0;var n=s;t&&(n+="&query="+t),fetch(n).then(function(t){t.json().then(function(t){e.options=t,e.isLoading=!1})})},250),o=Vue.component("vue-multiselect",window.VueMultiselect.default),c=new CustomEvent("vue-multiselect-userpicker-created",{detail:{vm:new Vue({el:"#"+t,components:{"vue-multiselect":o},data:{value:null,arrayOfUsers:n,options:[]},computed:{selectedIds:function(){return this.arrayOfUsers.map(function(e){return e.id}).join(",")},isDisabled:function(){return this.arrayOfUsers.length>0&&!r}},watch:{selectedIds:function(){setTimeout(function(){document.dispatchEvent(new Event("contentpreview:render"))},100)}},created:function(){this.asyncFind()},mounted:function(){this.searchBoxContainer=this.$el.lastChild,this.searchBoxContainer.style.display=r||0===this.arrayOfUsers.length?"block":"none"},methods:{asyncFind:function(e){a(this,e)},onSelect:function(e,t){for(i=0;i<this.arrayOfUsers.length;i++)if(this.arrayOfUsers[i].id===e.id)return;this.arrayOfUsers.push(e),this.searchBoxContainer.style.display=r?"block":"none"},remove:function(e){this.arrayOfUsers.splice(this.arrayOfUsers.indexOf(e),1),this.searchBoxContainer.style.display="block"}}})}});document.querySelector("body").dispatchEvent(c)}}