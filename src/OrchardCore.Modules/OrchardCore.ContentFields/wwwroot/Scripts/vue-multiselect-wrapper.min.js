function debounce(e,t,n){var i;return function(){var s=this,a=arguments,r=n&&!i;clearTimeout(i),i=setTimeout((function(){i=null,n||e.apply(s,a)}),t),r&&e.apply(s,a)}}function initVueMultiselect(e){if(e){var t=e.id,n=JSON.parse(e.dataset.selectedItems||"[]"),s=e.dataset.editUrl,a=e.dataset.viewUrl,r=e.dataset.searchUrl,o=JSON.parse(e.dataset.multiple),c=debounce((function(e,t){e.isLoading=!0;var n=r;t&&(n+="&query="+t),fetch(n).then((function(t){t.json().then((function(t){e.options=t,e.isLoading=!1}))}))}),250),u=Vue.component("vue-multiselect",window.VueMultiselect.default),l=new Vue({el:"#"+t,components:{"vue-multiselect":u},data:{value:null,arrayOfItems:n,options:[]},computed:{selectedIds:function(){return this.arrayOfItems.map((function(e){return e.id})).join(",")},isDisabled:function(){return this.arrayOfItems.length>0&&!o}},watch:{selectedIds:function(){setTimeout((function(){$(document).trigger("contentpreview:render")}),100)}},created:function(){this.asyncFind()},mounted:function(){this.searchBoxContainer=$(this.$el).children().last(),this.searchBoxContainer.css("display",o||0===this.arrayOfItems.length?"block":"none")},methods:{asyncFind:function(e){c(this,e)},onSelect:function(e,t){var n=this;for(i=0;i<n.arrayOfItems.length;i++)if(n.arrayOfItems[i].id===e.id)return;n.arrayOfItems.push(e),this.searchBoxContainer.css("display",o?"block":"none")},url:function(e){var t=e.isEditable?s:a;return t.replace("contentItemId",e.id)},remove:function(e){this.arrayOfItems.splice(this.arrayOfItems.indexOf(e),1),this.searchBoxContainer.css("display","block")}}}),d=new CustomEvent("vue-multiselect-created",{detail:{vm:l}});document.querySelector("body").dispatchEvent(d)}}
