{"version":3,"sources":["<anon>"],"sourcesContent":["document.addEventListener('DOMContentLoaded', function () {\n    var previewButton, contentItemType, previewId, previewContentItemId, previewContentItemVersionId, form, formData;\n    previewButton = document.getElementById('previewButton');\n    contentItemType = document.getElementById('contentItemType').dataset.value;\n    previewId = document.getElementById('previewId').dataset.value;\n    previewContentItemId = document.getElementById('previewContentItemId').dataset.value;\n    previewContentItemVersionId = document.getElementById('previewContentItemVersionId').dataset.value;\n    form = previewButton.closest('form');\n    function sendFormData() {\n        formData = new FormData(form);\n        formData.append('ContentItemType', contentItemType);\n        formData.append('PreviewId', previewId);\n        formData.append('PreviewContentItemId', previewContentItemId);\n        formData.append('PreviewContentItemVersionId', previewContentItemVersionId);\n        // store the form data to pass it in the event handler\n        localStorage.setItem('contentpreview:' + previewId, new URLSearchParams(formData).toString());\n    }\n    document.addEventListener('contentpreview:render', function () {\n        sendFormData();\n    });\n    window.addEventListener('storage', function (ev) {\n        if (ev.key !== 'contentpreview:ready:' + previewId) return; // ignore other keys\n        // triggered by the preview window the first time it is loaded in order\n        // to pre-render the view even if no contentpreview:render is already sent\n        sendFormData();\n    });    \n    window.addEventListener('beforeunload', function () {\n        localStorage.removeItem('contentpreview:' + previewId);\n        // this will raise an event in the preview window to notify that the live preview is no longer active.\n        localStorage.setItem('contentpreview:not-connected:' + previewId, '');\n        localStorage.removeItem('contentpreview:not-connected:' + previewId);\n    });\n});\n"],"names":["document","addEventListener","previewButton","contentItemType","previewId","previewContentItemId","previewContentItemVersionId","form","formData","sendFormData","FormData","append","localStorage","setItem","URLSearchParams","toString","getElementById","dataset","value","closest","window","ev","key","removeItem"],"mappings":"AAAAA,SAASC,gBAAgB,CAAC,mBAAoB,WAE1C,IAAIC,EAAeC,EAAiBC,EAAWC,EAAsBC,EAA6BC,EAAMC,EASxG,SAASC,IAGLD,AADAA,CAAAA,EAAW,IAAIE,SAASH,EAAI,EACnBI,MAAM,CAAC,kBAAmBR,GACnCK,EAASG,MAAM,CAAC,YAAaP,GAC7BI,EAASG,MAAM,CAAC,uBAAwBN,GACxCG,EAASG,MAAM,CAAC,8BAA+BL,GAG/CM,aAAaC,OAAO,CAAC,kBAAoBT,EAAW,IAAIU,gBAAgBN,GAAUO,QAAQ,GAC9F,CAjBAb,EAAgBF,SAASgB,cAAc,CAAC,iBACxCb,EAAkBH,SAASgB,cAAc,CAAC,mBAAmBC,OAAO,CAACC,KAAK,CAC1Ed,EAAYJ,SAASgB,cAAc,CAAC,aAAaC,OAAO,CAACC,KAAK,CAC9Db,EAAuBL,SAASgB,cAAc,CAAC,wBAAwBC,OAAO,CAACC,KAAK,CACpFZ,EAA8BN,SAASgB,cAAc,CAAC,+BAA+BC,OAAO,CAACC,KAAK,CAClGX,EAAOL,EAAciB,OAAO,CAAC,QAc7BnB,SAASC,gBAAgB,CAAC,wBAAyB,WAC/CQ,GACJ,GAGAW,OAAOnB,gBAAgB,CAAC,UAAW,SAAUoB,CAAE,EACvCA,EAAGC,GAAG,GAAK,wBAA0BlB,GAIzCK,GACJ,GAEAW,OAAOnB,gBAAgB,CAAC,eAAgB,WACpCW,aAAaW,UAAU,CAAC,kBAAoBnB,GAE5CQ,aAAaC,OAAO,CAAC,gCAAkCT,EAAW,IAClEQ,aAAaW,UAAU,CAAC,gCAAkCnB,EAC9D,EACJ"}
