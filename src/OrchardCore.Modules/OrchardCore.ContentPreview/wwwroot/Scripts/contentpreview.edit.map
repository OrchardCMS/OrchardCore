{"version":3,"sources":["<anon>"],"sourcesContent":["$(function () {\n    $(document)\n        .on('input', '.content-preview-text', function () {\n            $(document).trigger('contentpreview:render');\n        })\n        .on('propertychange', '.content-preview-text', function () {\n            $(document).trigger('contentpreview:render');\n        })\n        .on('keyup', '.content-preview-text', function (event) {\n            // handle backspace\n            if (event.keyCode == 46 || event.ctrlKey) {\n                $(document).trigger('contentpreview:render');\n            }\n        })\n        .on('change', '.content-preview-select', function () {\n            $(document).trigger('contentpreview:render');\n        });\n});\n\n\n$(function () {\n    \n    var previewButton, contentItemType, previewId, previewContentItemId, previewContentItemVersionId, form, formData;\n\n    previewButton = document.getElementById('previewButton');\n    contentItemType = $(document.getElementById('contentItemType')).data('value');\n    previewId = $(document.getElementById('previewId')).data('value');\n    previewContentItemId = $(document.getElementById('previewContentItemId')).data('value');\n    previewContentItemVersionId = $(document.getElementById('previewContentItemVersionId')).data('value');\n    form = $(previewButton).closest('form');\n\n    sendFormData = function () {\n\n        formData = form.serializeArray(); // convert form to array\n        formData.push({ name: \"ContentItemType\", value: contentItemType });\n        formData.push({ name: \"PreviewId\", value: previewId });\n        formData.push({ name: \"PreviewContentItemId\", value: previewContentItemId });\n        formData.push({ name: \"PreviewContentItemVersionId\", value: previewContentItemVersionId });\n\n        // store the form data to pass it in the event handler\n        localStorage.setItem('contentpreview:' + previewId, JSON.stringify($.param(formData)));\n    }\n\n    $(document).on('contentpreview:render', function () {\n        sendFormData();\n    });\n\n\n    $(window).on('storage', function (ev) {\n        if (ev.originalEvent.key != 'contentpreview:ready:' + previewId) return; // ignore other keys\n\n        // triggered by the preview window the first time it is loaded in order\n        // to pre-render the view even if no contentpreview:render is already sent\n        sendFormData();\n    });    \n\n    $(window).on('unload', function () {\n        localStorage.removeItem('contentpreview:' + previewId);\n        // this will raise an event in the preview window to notify that the live preview is no longer active.\n        localStorage.setItem('contentpreview:not-connected:' + previewId, '');\n        localStorage.removeItem('contentpreview:not-connected:' + previewId);\n    });\n});\n"],"names":["$","document","on","trigger","event","keyCode","ctrlKey","previewButton","contentItemType","previewId","previewContentItemId","previewContentItemVersionId","form","formData","getElementById","data","closest","sendFormData","serializeArray","push","name","value","localStorage","setItem","JSON","stringify","param","window","ev","originalEvent","key","removeItem"],"mappings":"AAAAA,EAAE,WACEA,EAAEC,UACGC,EAAE,CAAC,QAAS,wBAAyB,WAClCF,EAAEC,UAAUE,OAAO,CAAC,wBACxB,GACCD,EAAE,CAAC,iBAAkB,wBAAyB,WAC3CF,EAAEC,UAAUE,OAAO,CAAC,wBACxB,GACCD,EAAE,CAAC,QAAS,wBAAyB,SAAUE,CAAK,EAE7CA,CAAAA,AAAiB,IAAjBA,EAAMC,OAAO,EAAUD,EAAME,OAAO,AAAD,GACnCN,EAAEC,UAAUE,OAAO,CAAC,wBAE5B,GACCD,EAAE,CAAC,SAAU,0BAA2B,WACrCF,EAAEC,UAAUE,OAAO,CAAC,wBACxB,EACR,GAGAH,EAAE,WAEE,IAAIO,EAAeC,EAAiBC,EAAWC,EAAsBC,EAA6BC,EAAMC,EAExGN,EAAgBN,SAASa,cAAc,CAAC,iBACxCN,EAAkBR,EAAEC,SAASa,cAAc,CAAC,oBAAoBC,IAAI,CAAC,SACrEN,EAAYT,EAAEC,SAASa,cAAc,CAAC,cAAcC,IAAI,CAAC,SACzDL,EAAuBV,EAAEC,SAASa,cAAc,CAAC,yBAAyBC,IAAI,CAAC,SAC/EJ,EAA8BX,EAAEC,SAASa,cAAc,CAAC,gCAAgCC,IAAI,CAAC,SAC7FH,EAAOZ,EAAEO,GAAeS,OAAO,CAAC,QAEhCC,aAAe,WAGXJ,AADAA,CAAAA,EAAWD,EAAKM,cAAc,EAAC,EACtBC,IAAI,CAAC,CAAEC,KAAM,kBAAmBC,MAAOb,CAAgB,GAChEK,EAASM,IAAI,CAAC,CAAEC,KAAM,YAAaC,MAAOZ,CAAU,GACpDI,EAASM,IAAI,CAAC,CAAEC,KAAM,uBAAwBC,MAAOX,CAAqB,GAC1EG,EAASM,IAAI,CAAC,CAAEC,KAAM,8BAA+BC,MAAOV,CAA4B,GAGxFW,aAAaC,OAAO,CAAC,kBAAoBd,EAAWe,KAAKC,SAAS,CAACzB,EAAE0B,KAAK,CAACb,IAC/E,EAEAb,EAAEC,UAAUC,EAAE,CAAC,wBAAyB,WACpCe,cACJ,GAGAjB,EAAE2B,QAAQzB,EAAE,CAAC,UAAW,SAAU0B,CAAE,EAC5BA,EAAGC,aAAa,CAACC,GAAG,EAAI,wBAA0BrB,GAItDQ,cACJ,GAEAjB,EAAE2B,QAAQzB,EAAE,CAAC,SAAU,WACnBoB,aAAaS,UAAU,CAAC,kBAAoBtB,GAE5Ca,aAAaC,OAAO,CAAC,gCAAkCd,EAAW,IAClEa,aAAaS,UAAU,CAAC,gCAAkCtB,EAC9D,EACJ"}
