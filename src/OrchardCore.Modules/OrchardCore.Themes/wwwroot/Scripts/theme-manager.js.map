{"mappings":"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","sources":["src/OrchardCore.Modules/OrchardCore.Themes/Assets/ts/theme-manager.ts","src/OrchardCore.Modules/OrchardCore.Themes/Assets/ts/constants.ts","src/Frontend/helpers/globals.ts","node_modules/@parcel/transformer-js/src/esmodule-helpers.js"],"sourcesContent":["import { darkThemeName, getPreferredTheme, getStoredTheme, lightThemeName, setStoredTheme, setTheme } from \"./constants\";\r\n\r\nconst showActiveTheme = (theme, focus = false) => {\r\n    const themeSwitcher = <HTMLButtonElement>document.querySelector(\"#bd-theme\");\r\n\r\n    if (!themeSwitcher) {\r\n        return;\r\n    }\r\n\r\n    const themeSwitcherText = document.querySelector(\"#bd-theme-text\");\r\n    const activeThemeIcon = document.querySelector(\".theme-icon-active\");\r\n    const btnToActive = <HTMLButtonElement>document.querySelector(\r\n        `[data-bs-theme-value=\"${theme}\"]`\r\n    );\r\n    const svgOfActiveBtn = btnToActive?.querySelector(\".theme-icon\");\r\n\r\n    if (btnToActive) {\r\n        btnToActive.classList.add(\"active\");\r\n        btnToActive.setAttribute(\"aria-pressed\", \"true\");\r\n    }\r\n\r\n    if (activeThemeIcon && svgOfActiveBtn) {\r\n        activeThemeIcon.innerHTML = svgOfActiveBtn.innerHTML;\r\n    }\r\n\r\n    if (btnToActive && themeSwitcherText) {\r\n        const themeSwitcherLabel = `${themeSwitcherText.textContent} (${btnToActive.dataset.bsThemeValue})`;\r\n        themeSwitcher.setAttribute(\"aria-label\", themeSwitcherLabel);\r\n    }\r\n\r\n    const btnsToInactive = document.querySelectorAll(\r\n        `[data-bs-theme-value]:not([data-bs-theme-value=\"${theme}\"])`\r\n    );\r\n\r\n    for (let i = 0; i < btnsToInactive.length; i++) {\r\n        btnsToInactive[i].classList.remove(\"active\");\r\n        btnsToInactive[i].setAttribute(\"aria-pressed\", \"false\");\r\n    }\r\n\r\n    if (focus) {\r\n        themeSwitcher.focus();\r\n    }\r\n};\r\n\r\nwindow\r\n    .matchMedia(\"(prefers-color-scheme: dark)\")\r\n    .addEventListener(\"change\", () => {\r\n        const storedTheme = getStoredTheme();\r\n        if (storedTheme !== lightThemeName && storedTheme !== darkThemeName) {\r\n            setTheme(getPreferredTheme());\r\n        }\r\n    });\r\n\r\nwindow.addEventListener(\"DOMContentLoaded\", () => {\r\n    showActiveTheme(getPreferredTheme());\r\n\r\n    document.querySelectorAll(\"[data-bs-theme-value]\").forEach((toggle) => {\r\n        toggle.addEventListener(\"click\", () => {\r\n            const theme = toggle.getAttribute(\"data-bs-theme-value\");\r\n            setStoredTheme(theme);\r\n            setTheme(theme);\r\n            showActiveTheme(theme, true);\r\n        });\r\n    });\r\n});\r\n","import { getTenantName } from \"@orchardcore/frontend/helpers/globals\";\r\n\r\nconst darkThemeName = \"dark\";\r\nconst lightThemeName = \"light\";\r\nconst themeStoreKeySuffix = \"theme\";\r\n\r\nconst getStoreKeySuffix = () => themeStoreKeySuffix || \"theme\";\r\n\r\nconst getStoreKey = () => `${getTenantName()}-${getStoreKeySuffix()}`;\r\n\r\nconst getStoredTheme = () => localStorage.getItem(getStoreKey());\r\n\r\nconst setStoredTheme = (theme: string | null) => {\r\n    if (theme) {\r\n        localStorage.setItem(getStoreKey(), theme);\r\n    }\r\n};\r\n\r\nconst isDarkMedia = () =>\r\n    window.matchMedia(\"(prefers-color-scheme: dark)\").matches;\r\n\r\nconst getPreferredTheme = () => {\r\n    const storedTheme = getStoredTheme();\r\n    if (storedTheme) {\r\n        return storedTheme;\r\n    }\r\n\r\n    return isDarkMedia() ? darkThemeName : lightThemeName;\r\n};\r\n\r\nconst setTheme = (theme: string | null) => {\r\n    if (!theme) {\r\n        return;\r\n    }\r\n\r\n    if (theme === \"auto\") {\r\n        document.documentElement.setAttribute(\r\n            \"data-bs-theme\",\r\n            isDarkMedia() ? darkThemeName : lightThemeName\r\n        );\r\n    } else {\r\n        document.documentElement.setAttribute(\"data-bs-theme\", theme ?? \"\");\r\n    }\r\n};\r\n\r\nexport {\r\n    darkThemeName,\r\n    lightThemeName,\r\n    themeStoreKeySuffix,\r\n    getStoreKeySuffix,\r\n    getStoreKey,\r\n    getStoredTheme,\r\n    setStoredTheme,\r\n    isDarkMedia,\r\n    getPreferredTheme,\r\n    setTheme,\r\n};\r\n","const getTenantName = () =>\r\n    document.documentElement.getAttribute(\"data-tenant\") || \"default\";\r\n\r\nexport { getTenantName };\r\n","exports.interopDefault = function (a) {\n  return a && a.__esModule ? a : {default: a};\n};\n\nexports.defineInteropFlag = function (a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n};\n\nexports.exportAll = function (source, dest) {\n  Object.keys(source).forEach(function (key) {\n    if (\n      key === 'default' ||\n      key === '__esModule' ||\n      Object.prototype.hasOwnProperty.call(dest, key)\n    ) {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function () {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n};\n\nexports.export = function (dest, destName, get) {\n  Object.defineProperty(dest, destName, {\n    enumerable: true,\n    get: get,\n  });\n};\n"],"names":[],"version":3,"file":"theme-manager.js.map","sourceRoot":"../../../../../"}