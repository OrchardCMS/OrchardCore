{"mappings":"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","sources":["src/OrchardCore.Modules/OrchardCore.Themes/Assets/ts/theme-manager.ts","src/OrchardCore.Modules/OrchardCore.Themes/Assets/ts/constants.ts",".scripts/bloom/helpers/globals.ts","node_modules/@parcel/transformer-js/src/esmodule-helpers.js"],"sourcesContent":["import { darkThemeName, getPreferredTheme, getStoredTheme, lightThemeName, setStoredTheme, setTheme } from \"./constants\";\r\n\r\nconst showActiveTheme = (theme, focus = false) => {\r\n    const themeSwitcher = <HTMLButtonElement>document.querySelector(\"#bd-theme\");\r\n\r\n    if (!themeSwitcher) {\r\n        return;\r\n    }\r\n\r\n    const themeSwitcherText = document.querySelector(\"#bd-theme-text\");\r\n    const activeThemeIcon = document.querySelector(\".theme-icon-active\");\r\n    const btnToActive = <HTMLButtonElement>document.querySelector(\r\n        `[data-bs-theme-value=\"${theme}\"]`\r\n    );\r\n    const svgOfActiveBtn = btnToActive?.querySelector(\".theme-icon\");\r\n\r\n    if (btnToActive) {\r\n        btnToActive.classList.add(\"active\");\r\n        btnToActive.setAttribute(\"aria-pressed\", \"true\");\r\n    }\r\n\r\n    if (activeThemeIcon && svgOfActiveBtn) {\r\n        activeThemeIcon.innerHTML = svgOfActiveBtn.innerHTML;\r\n    }\r\n\r\n    if (btnToActive && themeSwitcherText) {\r\n        const themeSwitcherLabel = `${themeSwitcherText.textContent} (${btnToActive.dataset.bsThemeValue})`;\r\n        themeSwitcher.setAttribute(\"aria-label\", themeSwitcherLabel);\r\n    }\r\n\r\n    const btnsToInactive = document.querySelectorAll(\r\n        `[data-bs-theme-value]:not([data-bs-theme-value=\"${theme}\"])`\r\n    );\r\n\r\n    for (let i = 0; i < btnsToInactive.length; i++) {\r\n        btnsToInactive[i].classList.remove(\"active\");\r\n        btnsToInactive[i].setAttribute(\"aria-pressed\", \"false\");\r\n    }\r\n\r\n    if (focus) {\r\n        themeSwitcher.focus();\r\n    }\r\n};\r\n\r\nwindow\r\n    .matchMedia(\"(prefers-color-scheme: dark)\")\r\n    .addEventListener(\"change\", () => {\r\n        const storedTheme = getStoredTheme();\r\n        if (storedTheme !== lightThemeName && storedTheme !== darkThemeName) {\r\n            setTheme(getPreferredTheme());\r\n        }\r\n    });\r\n\r\nwindow.addEventListener(\"DOMContentLoaded\", () => {\r\n    showActiveTheme(getPreferredTheme());\r\n\r\n    document.querySelectorAll(\"[data-bs-theme-value]\").forEach((toggle) => {\r\n        toggle.addEventListener(\"click\", () => {\r\n            const theme = toggle.getAttribute(\"data-bs-theme-value\");\r\n            setStoredTheme(theme);\r\n            setTheme(theme);\r\n            showActiveTheme(theme, true);\r\n        });\r\n    });\r\n});\r\n","import { getTenantName } from \"@orchardcore/bloom/helpers/globals\";\r\n\r\nconst darkThemeName = \"dark\";\r\nconst lightThemeName = \"light\";\r\nconst themeStoreKeySuffix = \"theme\";\r\n\r\nconst getStoreKeySuffix = () => themeStoreKeySuffix || \"theme\";\r\n\r\nconst getStoreKey = () => `${getTenantName()}-${getStoreKeySuffix()}`;\r\n\r\nconst getStoredTheme = () => localStorage.getItem(getStoreKey());\r\n\r\nconst setStoredTheme = (theme: string | null) => {\r\n    if (theme) {\r\n        localStorage.setItem(getStoreKey(), theme);\r\n    }\r\n};\r\n\r\nconst isDarkMedia = () =>\r\n    window.matchMedia(\"(prefers-color-scheme: dark)\").matches;\r\n\r\nconst getPreferredTheme = () => {\r\n    const storedTheme = getStoredTheme();\r\n    if (storedTheme) {\r\n        return storedTheme;\r\n    }\r\n\r\n    return isDarkMedia() ? darkThemeName : lightThemeName;\r\n};\r\n\r\nconst setTheme = (theme: string | null) => {\r\n    if (!theme) {\r\n        return;\r\n    }\r\n\r\n    if (theme === \"auto\") {\r\n        document.documentElement.setAttribute(\r\n            \"data-bs-theme\",\r\n            isDarkMedia() ? darkThemeName : lightThemeName\r\n        );\r\n    } else {\r\n        document.documentElement.setAttribute(\"data-bs-theme\", theme ?? \"\");\r\n    }\r\n};\r\n\r\nexport {\r\n    darkThemeName,\r\n    lightThemeName,\r\n    themeStoreKeySuffix,\r\n    getStoreKeySuffix,\r\n    getStoreKey,\r\n    getStoredTheme,\r\n    setStoredTheme,\r\n    isDarkMedia,\r\n    getPreferredTheme,\r\n    setTheme,\r\n};\r\n","const getTenantName = () => document.documentElement.getAttribute(\"data-tenant\") || \"default\";\r\n\r\nexport { getTenantName };\r\n","exports.interopDefault = function (a) {\n  return a && a.__esModule ? a : {default: a};\n};\n\nexports.defineInteropFlag = function (a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n};\n\nexports.exportAll = function (source, dest) {\n  Object.keys(source).forEach(function (key) {\n    if (\n      key === 'default' ||\n      key === '__esModule' ||\n      Object.prototype.hasOwnProperty.call(dest, key)\n    ) {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function () {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n};\n\nexports.export = function (dest, destName, get) {\n  Object.defineProperty(dest, destName, {\n    enumerable: true,\n    get: get,\n  });\n};\n"],"names":["_constants","require","showActiveTheme","theme","focus","themeSwitcher","document","querySelector","themeSwitcherText","activeThemeIcon","btnToActive","svgOfActiveBtn","classList","add","setAttribute","innerHTML","themeSwitcherLabel","textContent","dataset","bsThemeValue","btnsToInactive","querySelectorAll","i","length","remove","window","matchMedia","addEventListener","storedTheme","getStoredTheme","lightThemeName","darkThemeName","setTheme","getPreferredTheme","forEach","toggle","getAttribute","setStoredTheme","parcelHelpers","export","exports","themeStoreKeySuffix","getStoreKeySuffix","getStoreKey","isDarkMedia","_globals","getTenantName","localStorage","getItem","setItem","matches","documentElement","interopDefault","a","__esModule","default","defineInteropFlag","Object","defineProperty","value","exportAll","source","dest","keys","key","prototype","hasOwnProperty","call","enumerable","get","destName"],"version":3,"file":"theme-manager.js.map"}