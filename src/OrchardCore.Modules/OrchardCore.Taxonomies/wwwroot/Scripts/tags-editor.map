{"version":3,"sources":["<anon>"],"sourcesContent":["function initializeTagsEditor(element) {\n    if (element) {\n\n        var elementId = element.id;\n        var vueMultiselect = Vue.component('vue-multiselect', window.VueMultiselect.default);\n\n        var vm = new Vue({\n            el: '#' + elementId,\n            components: { 'vue-multiselect': vueMultiselect },\n            data: function () {\n                // All terms generate a model binding.\n                var allTagTerms = JSON.parse(element.dataset.allTagTerms || \"[]\");\n\n                // Selectable terms are shown in options list.\n                var selectableTagTerms = allTagTerms;\n\n                // Leaves only filters selectableTerms.\n                if (element.dataset.leavesOnly == 'true') {\n                    selectableTagTerms = selectableTagTerms.filter(function (tagTerm) { return tagTerm.isLeaf });\n                    // Self heal when leaves only value is updated.\n                    allTagTerms.forEach(function (tagTerm) {\n                        if (!selectableTagTerms.includes(tagTerm)) {\n                            tagTerm.selected = false;\n                        }\n                    });\n                }\n\n                // Selected terms are show in selected tags field.\n                selectedTagTerms = allTagTerms.filter(function (tagTerm) { return tagTerm.selected });\n\n                return {\n                    open: element.dataset.open,\n                    taxonomyContentItemId: element.dataset.taxonomyContentItemId,\n                    createTagUrl: element.dataset.createTagUrl,\n                    createTagErrorMessage: element.dataset.createTagErrorMessage,\n                    selectedTagTerms: selectedTagTerms,\n                    selectableTagTerms: selectableTagTerms,\n                    allTagTerms: allTagTerms\n                }\n            },\n            computed: {\n                isDisabled: function () {\n                    if (this.open == 'false' && this.selectableTagTerms.length === 0) {\n                        return true;\n                    }\n                    return false;\n                },\n                selectedTagTermsIds: function() {\n                    if (!this.selectedTagTerms) {\n                        return [];\n                    }\n                    if (Array.isArray(this.selectedTagTerms)) {\n                        return this.selectedTagTerms.map(function (tagTerm) { return tagTerm.contentItemId });\n                    } else {\n                        return this.selectedTagTerms.contentItemId;\n                    }\n                }\n            },\n            methods: {\n                createTagTerm(newTagTerm) {\n                    var self = this;\n                    $.ajax({\n                        url: self.createTagUrl,\n                        method: 'POST',\n                        data: {\n                            __RequestVerificationToken: $(\"input[name='__RequestVerificationToken']\").val(),\n                            taxonomyContentItemId: self.taxonomyContentItemId,\n                            displayText: newTagTerm\n                        },\n                        success: function (data) {\n                            var tagTerm = {\n                                contentItemId: data.contentItemId,\n                                displayText: data.displayText,\n                                selected: true\n                            }\n                            // Add to allTagTerms array so model binding will save tag as selected.\n                            self.allTagTerms.push(tagTerm);\n\n                            // Add to selectedTerms to display in vue-multi-select.\n                            self.selectedTagTerms.push(tagTerm);\n\n                        },\n                        error: function () {\n                            alert(self.createTagErrorMessage);\n                        }\n                    });\n                },\n                onSelect(selectedTagTerm) {\n                    var tagTerm = this.allTagTerms.find(function (tagTerm) { return tagTerm.contentItemId === selectedTagTerm.contentItemId });\n                    tagTerm.selected = true;\n                    $(document).trigger('contentpreview:render');\n                },\n                onRemove(removedTagTerm) {\n                    var tagTerm = this.allTagTerms.find(function (tagTerm) { return tagTerm.contentItemId === removedTagTerm.contentItemId });\n                    tagTerm.selected = false;\n                    $(document).trigger('contentpreview:render');\n                }\n            }\n        });\n\n        return vm;\n    }\n}\n"],"names":["initializeTagsEditor","element","elementId","id","vueMultiselect","Vue","component","window","VueMultiselect","default","el","components","data","allTagTerms","JSON","parse","dataset","selectableTagTerms","leavesOnly","filter","tagTerm","isLeaf","forEach","includes","selected","selectedTagTerms","open","taxonomyContentItemId","createTagUrl","createTagErrorMessage","computed","isDisabled","length","selectedTagTermsIds","Array","isArray","map","contentItemId","methods","createTagTerm","newTagTerm","self","$","ajax","url","method","__RequestVerificationToken","val","displayText","success","push","error","alert","onSelect","selectedTagTerm","find","document","trigger","onRemove","removedTagTerm"],"mappings":"AAAA,SAASA,qBAAqBC,CAAO,EACjC,GAAIA,EAAS,CAET,IAAIC,EAAYD,EAAQE,EAAE,CACtBC,EAAiBC,IAAIC,SAAS,CAAC,kBAAmBC,OAAOC,cAAc,CAACC,OAAO,EAgGnF,OA9FS,IAAIJ,IAAI,CACbK,GAAI,IAAMR,EACVS,WAAY,CAAE,kBAAmBP,CAAe,EAChDQ,KAAM,WAEF,IAAIC,EAAcC,KAAKC,KAAK,CAACd,EAAQe,OAAO,CAACH,WAAW,EAAI,MAGxDI,EAAqBJ,EAgBzB,MAbkC,QAA9BZ,EAAQe,OAAO,CAACE,UAAU,GAC1BD,EAAqBA,EAAmBE,MAAM,CAAC,SAAUC,CAAO,EAAI,OAAOA,EAAQC,MAAM,AAAC,GAE1FR,EAAYS,OAAO,CAAC,SAAUF,CAAO,EAC5BH,EAAmBM,QAAQ,CAACH,IAC7BA,CAAAA,EAAQI,QAAQ,CAAG,CAAA,CAAI,CAE/B,IAIJC,iBAAmBZ,EAAYM,MAAM,CAAC,SAAUC,CAAO,EAAI,OAAOA,EAAQI,QAAQ,AAAC,GAE5E,CACHE,KAAMzB,EAAQe,OAAO,CAACU,IAAI,CAC1BC,sBAAuB1B,EAAQe,OAAO,CAACW,qBAAqB,CAC5DC,aAAc3B,EAAQe,OAAO,CAACY,YAAY,CAC1CC,sBAAuB5B,EAAQe,OAAO,CAACa,qBAAqB,CAC5DJ,iBAAkBA,iBAClBR,mBAAoBA,EACpBJ,YAAaA,CACjB,CACJ,EACAiB,SAAU,CACNC,WAAY,iBACJ,AAAa,SAAb,IAAI,CAACL,IAAI,EAAe,AAAmC,IAAnC,IAAI,CAACT,kBAAkB,CAACe,MAAM,AAI9D,EACAC,oBAAqB,kBACjB,AAAK,IAAI,CAACR,gBAAgB,CAGtBS,MAAMC,OAAO,CAAC,IAAI,CAACV,gBAAgB,EAC5B,IAAI,CAACA,gBAAgB,CAACW,GAAG,CAAC,SAAUhB,CAAO,EAAI,OAAOA,EAAQiB,aAAa,AAAC,GAE5E,IAAI,CAACZ,gBAAgB,CAACY,aAAa,CALnC,EAAE,AAOjB,CACJ,EACAC,QAAS,CACLC,cAAcC,CAAU,EACpB,IAAIC,EAAO,IAAI,CACfC,EAAEC,IAAI,CAAC,CACHC,IAAKH,EAAKb,YAAY,CACtBiB,OAAQ,OACRjC,KAAM,CACFkC,2BAA4BJ,EAAE,4CAA4CK,GAAG,GAC7EpB,sBAAuBc,EAAKd,qBAAqB,CACjDqB,YAAaR,CACjB,EACAS,QAAS,SAAUrC,CAAI,EACnB,IAAIQ,EAAU,CACViB,cAAezB,EAAKyB,aAAa,CACjCW,YAAapC,EAAKoC,WAAW,CAC7BxB,SAAU,CAAA,CACd,EAEAiB,EAAK5B,WAAW,CAACqC,IAAI,CAAC9B,GAGtBqB,EAAKhB,gBAAgB,CAACyB,IAAI,CAAC9B,EAE/B,EACA+B,MAAO,WACHC,MAAMX,EAAKZ,qBAAqB,CACpC,CACJ,EACJ,EACAwB,SAASC,CAAe,EAEpBlC,AADc,IAAI,CAACP,WAAW,CAAC0C,IAAI,CAAC,SAAUnC,CAAO,EAAI,OAAOA,EAAQiB,aAAa,GAAKiB,EAAgBjB,aAAa,AAAC,GAChHb,QAAQ,CAAG,CAAA,EACnBkB,EAAEc,UAAUC,OAAO,CAAC,wBACxB,EACAC,SAASC,CAAc,EAEnBvC,AADc,IAAI,CAACP,WAAW,CAAC0C,IAAI,CAAC,SAAUnC,CAAO,EAAI,OAAOA,EAAQiB,aAAa,GAAKsB,EAAetB,aAAa,AAAC,GAC/Gb,QAAQ,CAAG,CAAA,EACnBkB,EAAEc,UAAUC,OAAO,CAAC,wBACxB,CACJ,CACJ,EAGJ,CACJ"}
