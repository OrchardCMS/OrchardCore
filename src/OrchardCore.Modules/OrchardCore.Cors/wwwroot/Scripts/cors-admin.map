{"version":3,"sources":["<anon>"],"sourcesContent":["var optionsList = Vue.component('options-list',\n    {\n        props: ['options', 'optionType', 'title', 'subTitle'],\n        template: '#options-list',\n        data: function () {\n            return {\n                'newOption': ''\n            };\n        },\n        methods: {\n            addOption: function (value) {\n                if (value !== null && value !== '') {\n                    var noDuplicates = (this.options.map(o => o.toLowerCase()).indexOf(value.toLowerCase()) < 0);\n                    if (noDuplicates) {\n                        this.options.push(value);\n                    }\n                }\n            },\n            deleteOption: function (value) {\n                this.options.splice(this.options.indexOf(value), 1);\n            }\n        }\n    });\nvar policyDetails = Vue.component('policy-details',\n    {\n        components: { optionsList: optionsList },\n        props: ['policy'],\n        template: '#policy-details'\n    });\nvar corsApp = new Vue({\n    el: '#corsAdmin',\n    components: { policyDetails: policyDetails, optionsList: optionsList },\n    data: {\n        selectedPolicy: null,\n        policies: null,\n        defaultPolicyName: null\n    },\n    updated: function () {\n        this.searchBox();\n    },\n    methods: {\n        newPolicy: function () {\n            this.selectedPolicy = {\n                name: 'New policy',\n                allowedOrigins: [],\n                allowAnyOrigin: true,\n                allowedMethods: [],\n                allowAnyMethod: true,\n                allowedHeaders: [],\n                allowAnyHeader: true,\n                allowCredentials: true,\n                isDefaultPolicy: false,\n                exposedHeaders: []\n            };\n        },\n        editPolicy: function (policy) {\n            this.selectedPolicy = Object.assign({}, policy);\n            this.selectedPolicy.originalName = this.selectedPolicy.name;\n        },\n        deletePolicy: function (policy, event) {\n            this.selectedPolicy = null;\n            const policyToRemove = this.policies.find(item => item.name === policy.name);\n            if (policyToRemove) {\n                this.policies.splice(this.policies.indexOf(policyToRemove), 1);\n            }\n            event.stopPropagation();\n            this.save();\n        },\n        updatePolicy: function (policy, event) {\n            if (policy.isDefaultPolicy) {\n                this.policies.forEach(p => p.isDefaultPolicy = false);\n            }\n            if (policy.originalName) {\n                const policyIndex = this.policies.findIndex((oldPolicy) => oldPolicy.name === policy.originalName);\n                this.policies[policyIndex] = policy;\n            }\n            else {\n                this.policies.push(policy);\n            }\n            this.save();\n            this.back();\n        },\n        save: function () {\n            document.getElementById('corsSettings').value = JSON.stringify(this.policies);\n            document.getElementById('corsForm').submit();\n        },\n        back: function () {\n            this.selectedPolicy = null;\n        },\n        searchBox: function () {\n            const searchBox = document.getElementById('search-box');\n            // On Enter, edit the item if there is a single one\n            searchBox.addEventListener('keydown', (e) => {\n                if (e.key == 'Enter') {\n                    // Edit the item if there is a single filtered element\n                    const visible = document.querySelectorAll('#corsAdmin > ul > li:visible');\n                    if (visible.length == 1) {\n                        window.location = visible[0].querySelector('.edit').href;\n                    }\n                    return false;\n                }\n            });\n            // On each keypress filter the list\n            searchBox.addEventListener('keyup', (e) => {\n                const search = searchBox.value.toLowerCase();\n                const elementsToFilter = document.querySelectorAll(\"[data-filter-value]\");\n                // On ESC, clear the search box and display all\n                if (e.keyCode == 27 || search == '') {\n                    searchBox.value = '';\n                    elementsToFilter.forEach(el => el.style.display = '');\n                    document.getElementById('list-alert').classList.add(\"d-none\");\n                }\n                else {\n                    let intVisible = 0;\n                    elementsToFilter.forEach(el => {\n                        const text = el.dataset.filterValue.toLowerCase();\n                        const found = text.indexOf(search) > -1;\n                        el.style.display = found ? '' : 'none';\n                        if (found) {\n                            intVisible++;\n                        }\n                    });\n                    // We display an alert if a search is not found\n                    if (intVisible == 0) {\n                        document.getElementById('list-alert').classList.remove(\"d-none\");\n                    }\n                    else {\n                        document.getElementById('list-alert').classList.add(\"d-none\");\n                    }\n                }\n            });\n        }\n    }\n});\n"],"names":["optionsList","Vue","component","props","template","data","methods","addOption","value","options","map","o","toLowerCase","indexOf","push","deleteOption","splice","policyDetails","components","corsApp","el","selectedPolicy","policies","defaultPolicyName","updated","searchBox","newPolicy","name","allowedOrigins","allowAnyOrigin","allowedMethods","allowAnyMethod","allowedHeaders","allowAnyHeader","allowCredentials","isDefaultPolicy","exposedHeaders","editPolicy","policy","Object","assign","originalName","deletePolicy","event","policyToRemove","find","item","stopPropagation","save","updatePolicy","forEach","p","policyIndex","findIndex","oldPolicy","back","document","getElementById","JSON","stringify","submit","addEventListener","e","key","visible","querySelectorAll","length","window","location","querySelector","href","search","elementsToFilter","keyCode","style","display","classList","add","intVisible","found","text","dataset","filterValue","remove"],"mappings":"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"}
