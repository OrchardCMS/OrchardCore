{"version":3,"sources":["<anon>"],"sourcesContent":["var optionsList = Vue.component('options-list',\n    {\n        props: ['options', 'optionType', 'title', 'subTitle'],\n        template: '#options-list',\n        data: function () {\n            return {\n                'newOption': ''\n            };\n        },\n        methods: {\n            addOption: function (value) {\n                if (value !== null && value !== '') {\n                    var noDuplicates = ($.inArray(value.toLowerCase(), this.options.map(o => o.toLowerCase())) < 0);\n                    if (noDuplicates) {\n                        this.options.push(value);\n                    }\n                }\n            },\n            deleteOption: function (value) {\n                this.options.splice($.inArray(value, this.options), 1);\n            }\n        }\n    });\nvar policyDetails = Vue.component('policy-details',\n    {\n        components: { optionsList: optionsList },\n        props: ['policy'],\n        template: '#policy-details'\n    });\nvar corsApp = new Vue({\n    el: '#corsAdmin',\n    components: { policyDetails: policyDetails, optionsList: optionsList },\n    data: {\n        selectedPolicy: null,\n        policies: null,\n        defaultPolicyName: null\n    },\n    updated: function () {\n        this.searchBox();\n    },\n    methods: {\n        newPolicy: function () {\n            this.selectedPolicy = {\n                name: 'New policy',\n                allowedOrigins: [],\n                allowAnyOrigin: true,\n                allowedMethods: [],\n                allowAnyMethod: true,\n                allowedHeaders: [],\n                allowAnyHeader: true,\n                allowCredentials: true,\n                isDefaultPolicy: false,\n                exposedHeaders: []\n            };\n        },\n        editPolicy: function (policy) {\n            this.selectedPolicy = Object.assign({}, policy);\n            this.selectedPolicy.originalName = this.selectedPolicy.name;\n        },\n        deletePolicy: function (policy, event) {\n            this.selectedPolicy = null;\n            var policyToRemove = this.policies.filter(function (item) { return item.name === policy.name; });\n            if (policyToRemove.length > 0)\n                this.policies.splice($.inArray(policyToRemove[0], this.policies), 1);\n            event.stopPropagation();\n            this.save();\n        },\n        updatePolicy: function (policy, event) {\n            if (policy.isDefaultPolicy) {\n                this.policies.forEach(p => p.isDefaultPolicy = false);\n            }\n            if (policy.originalName) {\n                var policyIndex = this.policies.findIndex((oldPolicy) => oldPolicy.name === policy.originalName);\n                this.policies[policyIndex] = policy;\n            }\n            else {\n                this.policies.push(policy);\n            }\n            this.save();\n            this.back();\n        },\n        save: function () {\n            document.getElementById('corsSettings').value = JSON.stringify(this.policies);\n            document.getElementById('corsForm').submit();\n        },\n        back: function () {\n            this.selectedPolicy = null;\n        },\n        searchBox: function () {\n            var searchBox = $('#search-box');\n            // On Enter, edit the item if there is a single one\n            searchBox.keydown(function (e) {\n                if (e.key == 'Enter') {\n                    // Edit the item if there is a single filtered element\n                    var visible = $('#corsAdmin > ul > li:visible');\n                    if (visible.length == 1) {\n                        window.location = visible.find('.edit').attr('href');\n                    }\n                    return false;\n                }\n            });\n            // On each keypress filter the list\n            searchBox.keyup(function (e) {\n                var search = $(this).val().toLowerCase();\n                var elementsToFilter = $(\"[data-filter-value]\");\n                // On ESC, clear the search box and display all\n                if (e.keyCode == 27 || search == '') {\n                    searchBox.val('');\n                    elementsToFilter.toggle(true);\n                    $('#list-alert').addClass(\"d-none\");\n                }\n                else {\n                    var intVisible = 0;\n                    elementsToFilter.each(function () {\n                        var text = $(this).data('filter-value').toLowerCase();\n                        var found = text.indexOf(search) > -1;\n                        $(this).toggle(found);\n                        if (found) {\n                            intVisible++;\n                        }\n                    });\n                    // We display an alert if a search is not found\n                    if (intVisible == 0) {\n                        $('#list-alert').removeClass(\"d-none\");\n                    }\n                    else {\n                        $('#list-alert').addClass(\"d-none\");\n                    }\n                }\n            });\n        }\n    }\n});\n"],"names":["optionsList","Vue","component","props","template","data","methods","addOption","value","$","inArray","toLowerCase","options","map","o","push","deleteOption","splice","policyDetails","components","corsApp","el","selectedPolicy","policies","defaultPolicyName","updated","searchBox","newPolicy","name","allowedOrigins","allowAnyOrigin","allowedMethods","allowAnyMethod","allowedHeaders","allowAnyHeader","allowCredentials","isDefaultPolicy","exposedHeaders","editPolicy","policy","Object","assign","originalName","deletePolicy","event","policyToRemove","filter","item","length","stopPropagation","save","updatePolicy","forEach","p","policyIndex","findIndex","oldPolicy","back","document","getElementById","JSON","stringify","submit","keydown","e","key","visible","window","location","find","attr","keyup","search","val","elementsToFilter","keyCode","toggle","addClass","intVisible","each","found","text","indexOf","removeClass"],"mappings":"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"}
