var optionsList=Vue.component("options-list",{props:["options","optionType","title","subTitle"],template:"#options-list",data:function(){return{newOption:""}},methods:{addOption:function(e){null!==e&&""!==e&&0>this.options.map(e=>e.toLowerCase()).indexOf(e.toLowerCase())&&this.options.push(e)},deleteOption:function(e){this.options.splice(this.options.indexOf(e),1)}}}),policyDetails=Vue.component("policy-details",{components:{optionsList:optionsList},props:["policy"],template:"#policy-details"}),corsApp=new Vue({el:"#corsAdmin",components:{policyDetails:policyDetails,optionsList:optionsList},data:{selectedPolicy:null,policies:null,defaultPolicyName:null},updated:function(){this.searchBox()},methods:{newPolicy:function(){this.selectedPolicy={name:"New policy",allowedOrigins:[],allowAnyOrigin:!0,allowedMethods:[],allowAnyMethod:!0,allowedHeaders:[],allowAnyHeader:!0,allowCredentials:!0,isDefaultPolicy:!1,exposedHeaders:[]}},editPolicy:function(e){this.selectedPolicy=Object.assign({},e),this.selectedPolicy.originalName=this.selectedPolicy.name},deletePolicy:function(e,t){this.selectedPolicy=null;let i=this.policies.find(t=>t.name===e.name);i&&this.policies.splice(this.policies.indexOf(i),1),t.stopPropagation(),this.save()},updatePolicy:function(e,t){if(e.isDefaultPolicy&&this.policies.forEach(e=>e.isDefaultPolicy=!1),e.originalName){let t=this.policies.findIndex(t=>t.name===e.originalName);this.policies[t]=e}else this.policies.push(e);this.save(),this.back()},save:function(){document.getElementById("corsSettings").value=JSON.stringify(this.policies),document.getElementById("corsForm").submit()},back:function(){this.selectedPolicy=null},searchBox:function(){let e=document.getElementById("search-box");e.addEventListener("keydown",e=>{if("Enter"==e.key){let e=document.querySelectorAll("#corsAdmin > ul > li:visible");return 1==e.length&&(window.location=e[0].querySelector(".edit").href),!1}}),e.addEventListener("keyup",t=>{let i=e.value.toLowerCase(),o=document.querySelectorAll("[data-filter-value]");if(27==t.keyCode||""==i)e.value="",o.forEach(e=>e.style.display=""),document.getElementById("list-alert").classList.add("d-none");else{let e=0;o.forEach(t=>{let o=t.dataset.filterValue.toLowerCase().indexOf(i)>-1;t.style.display=o?"":"none",o&&e++}),0==e?document.getElementById("list-alert").classList.remove("d-none"):document.getElementById("list-alert").classList.add("d-none")}})}}});