var optionsList=Vue.component("options-list",{props:["options","optionType","title","subTitle"],template:"#options-list",data:function(){return{newOption:""}},methods:{addOption:function(e){null!==e&&""!==e&&0>$.inArray(e.toLowerCase(),this.options.map(e=>e.toLowerCase()))&&this.options.push(e)},deleteOption:function(e){this.options.splice($.inArray(e,this.options),1)}}}),policyDetails=Vue.component("policy-details",{components:{optionsList:optionsList},props:["policy"],template:"#policy-details"}),corsApp=new Vue({el:"#corsAdmin",components:{policyDetails:policyDetails,optionsList:optionsList},data:{selectedPolicy:null,policies:null,defaultPolicyName:null},updated:function(){this.searchBox()},methods:{newPolicy:function(){this.selectedPolicy={name:"New policy",allowedOrigins:[],allowAnyOrigin:!0,allowedMethods:[],allowAnyMethod:!0,allowedHeaders:[],allowAnyHeader:!0,allowCredentials:!0,isDefaultPolicy:!1,exposedHeaders:[]}},editPolicy:function(e){this.selectedPolicy=Object.assign({},e),this.selectedPolicy.originalName=this.selectedPolicy.name},deletePolicy:function(e,i){this.selectedPolicy=null;var t=this.policies.filter(function(i){return i.name===e.name});t.length>0&&this.policies.splice($.inArray(t[0],this.policies),1),i.stopPropagation(),this.save()},updatePolicy:function(e,i){if(e.isDefaultPolicy&&this.policies.forEach(e=>e.isDefaultPolicy=!1),e.originalName){var t=this.policies.findIndex(i=>i.name===e.originalName);this.policies[t]=e}else this.policies.push(e);this.save(),this.back()},save:function(){document.getElementById("corsSettings").value=JSON.stringify(this.policies),document.getElementById("corsForm").submit()},back:function(){this.selectedPolicy=null},searchBox:function(){var e=$("#search-box");e.keydown(function(e){if("Enter"==e.key){var i=$("#corsAdmin > ul > li:visible");return 1==i.length&&(window.location=i.find(".edit").attr("href")),!1}}),e.keyup(function(i){var t=$(this).val().toLowerCase(),o=$("[data-filter-value]");if(27==i.keyCode||""==t)e.val(""),o.toggle(!0),$("#list-alert").addClass("d-none");else{var s=0;o.each(function(){var e=$(this).data("filter-value").toLowerCase().indexOf(t)>-1;$(this).toggle(e),e&&s++}),0==s?$("#list-alert").removeClass("d-none"):$("#list-alert").addClass("d-none")}})}}});