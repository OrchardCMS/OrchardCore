{"mappings":"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","sources":["src/OrchardCore.Modules/OrchardCore.Liquid/Assets/monaco/liquid-intellisense.ts","node_modules/@parcel/transformer-js/src/esmodule-helpers.js"],"sourcesContent":["/// <reference path=\"../../../../../node_modules/monaco-editor/monaco.d.ts\" />\n\nconst liquidTags = [\n    \"if\",\n    \"else\",\n    \"elseif\",\n    \"endif\",\n    \"render\",\n    \"assign\",\n    \"capture\",\n    \"endcapture\",\n    \"case\",\n    \"endcase\",\n    \"comment\",\n    \"endcomment\",\n    \"cycle\",\n    \"decrement\",\n    \"for\",\n    \"endfor\",\n    \"include\",\n    \"increment\",\n    \"layout\",\n    \"raw\",\n    \"endraw\",\n    \"render\",\n    \"tablerow\",\n    \"endtablerow\",\n    \"unless\",\n    \"endunless\",\n];\n\nconst liquidFilters = [\n    \"abs\",\n    \"append\",\n    \"at_least\",\n    \"at_most\",\n    \"capitalize\",\n    \"ceil\",\n    \"compact\",\n    \"date\",\n    \"default\",\n    \"divided_by\",\n    \"downcase\",\n    \"escape\",\n    \"escape_once\",\n    \"first\",\n    \"floor\",\n    \"join\",\n    \"json\",\n    \"last\",\n    \"lstrip\",\n    \"map\",\n    \"minus\",\n    \"modulo\",\n    \"newline_to_br\",\n    \"plus\",\n    \"prepend\",\n    \"remove\",\n    \"remove_first\",\n    \"replace\",\n    \"replace_first\",\n    \"reverse\",\n    \"round\",\n    \"rstrip\",\n    \"size\",\n    \"slice\",\n    \"sort\",\n    \"sort_natural\",\n    \"split\",\n    \"strip\",\n    \"strip_html\",\n    \"strip_newlines\",\n    \"times\",\n    \"truncate\",\n    \"truncatewords\",\n    \"uniq\",\n    \"upcase\",\n    \"url_decode\",\n    \"url_encode\",\n    \"where\",\n];\n\ninterface ILiquidContextInfo {\n    showFilters: boolean;\n    showTags: boolean;\n    includeEndTags: boolean;\n    inTag: boolean;\n    inObject: boolean;\n}\n\nfunction getLiquidContextInfo(model: monaco.editor.ITextModel, position: monaco.Position, triggerCharacter?: string|undefined): ILiquidContextInfo {\n    var inTag: boolean = false;\n    var inObject: boolean = false;\n    var showTags: boolean = false;\n    var showFilters: boolean = false;\n\n    var findStart = model.findPreviousMatch(\"\\\\{(%|\\\\{)\", position, true, false, null, true);\n    if (findStart && findStart.matches && !position.isBefore(findStart.range.getEndPosition())) {\n        if (findStart.matches[1] == \"%\") {\n            inTag = true;\n        } else if (findStart.matches[1] == \"{\") {\n            inObject = true;\n        }\n\n        var searchPattern = inTag ? \"%}\" : \"}}\";\n        var findEnd = model.findNextMatch(searchPattern, position, false, false, null, true);\n        var currentRange = findEnd ? findStart.range.plusRange(findEnd.range) : findStart.range.setEndPosition(position.lineNumber, position.column);\n        if (currentRange.containsPosition(position)) {\n            if (inTag) {\n                var findTagName = model.findNextMatch(\"\\\\{%\\\\s*([a-zA-Z-_]+)\", findStart.range.getStartPosition(), true, false, null, true);\n                if (findTagName && currentRange.containsRange(findTagName.range) && findTagName.matches && findTagName.matches.length > 1) {\n                    if (findTagName.matches[1] == \"assign\") {\n                        showFilters = true;\n                    } else {\n                        showTags = false;\n                    }\n                } else {\n                    showTags = true;\n                }\n            } else {\n                showFilters = true;\n            }\n        }\n    }\n\n    return {\n        showFilters,\n        showTags,\n        inTag,\n        inObject,\n    } as ILiquidContextInfo;\n}\n\nconst completionItemProvider: monaco.languages.CompletionItemProvider = {\n    triggerCharacters: [\" \"],\n    provideCompletionItems: (model: monaco.editor.ITextModel, position: monaco.Position, context: monaco.languages.CompletionContext, token: monaco.CancellationToken) => {\n        var items: string[] = [];\n\n        if (context.triggerCharacter == \" \") {\n            var startTrigger = model.getValueInRange(new monaco.Range(position.lineNumber, position.column - 3, position.lineNumber, position.column - 1));\n            if (startTrigger != \"{%\" && !startTrigger.endsWith(\"|\")) {\n                return null;\n            }\n        }\n\n        var liquidContext: ILiquidContextInfo = getLiquidContextInfo(model, position, context.triggerCharacter);\n        if (liquidContext.showFilters) {\n            items = liquidFilters;\n        } else if (liquidContext.showTags) {\n            items = liquidTags.filter((value: string) => {\n                return !value.startsWith(\"end\");\n            });\n        }\n\n        const suggestions = items.map((value: string) => {\n            return {\n                label: value,\n                kind: monaco.languages.CompletionItemKind.Keyword,\n                insertText: value,\n                insertTextRules: monaco.languages.CompletionItemInsertTextRule.KeepWhitespace,\n            } as monaco.languages.CompletionItem;\n        });\n\n        return { suggestions } as monaco.languages.ProviderResult<monaco.languages.CompletionList>;\n    },\n};\n\nfunction ConfigureLiquidIntellisense(monaco: any, suggestHtml: boolean = true) {\n    if (suggestHtml) {\n        var modeConfiguration: monaco.languages.html.ModeConfiguration = {\n            completionItems: true,\n            colors: true,\n            foldingRanges: true,\n            selectionRanges: true,\n            diagnostics: false,\n            documentFormattingEdits: true,\n            documentRangeFormattingEdits: true,\n        };\n        var options: monaco.languages.html.Options = {\n            format: monaco.languages.html.htmlDefaults.options.format,\n            suggest: { html5: true },\n        };\n        monaco.languages.html.registerHTMLLanguageService(\"liquid\", options, modeConfiguration);\n    }\n\n    monaco.languages.registerCompletionItemProvider(\"liquid\", completionItemProvider);\n}\n\ndeclare global {\n    interface Window {\n        ConfigureLiquidIntellisense: (monaco: any, suggestHtml?: boolean) => void;\n        liquidFilters: string[];\n        liquidTags: string[];\n    }\n}\n\nwindow.ConfigureLiquidIntellisense = ConfigureLiquidIntellisense;\nwindow.liquidFilters = liquidFilters;\nwindow.liquidTags = liquidTags;\n\nexport { ConfigureLiquidIntellisense, liquidFilters };\n","exports.interopDefault = function (a) {\n  return a && a.__esModule ? a : {default: a};\n};\n\nexports.defineInteropFlag = function (a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n};\n\nexports.exportAll = function (source, dest) {\n  Object.keys(source).forEach(function (key) {\n    if (\n      key === 'default' ||\n      key === '__esModule' ||\n      Object.prototype.hasOwnProperty.call(dest, key)\n    ) {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function () {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n};\n\nexports.export = function (dest, destName, get) {\n  Object.defineProperty(dest, destName, {\n    enumerable: true,\n    get: get,\n  });\n};\n"],"names":["parcelHelpers","export","exports","ConfigureLiquidIntellisense","liquidFilters","liquidTags","completionItemProvider","triggerCharacters","provideCompletionItems","model","position","context","token","items","triggerCharacter","startTrigger","getValueInRange","monaco","Range","lineNumber","column","endsWith","liquidContext","inTag","inObject","showTags","showFilters","findStart","findPreviousMatch","matches","isBefore","range","getEndPosition","searchPattern","findEnd","findNextMatch","currentRange","plusRange","setEndPosition","containsPosition","findTagName","getStartPosition","containsRange","length","getLiquidContextInfo","filter","value","startsWith","suggestions","map","label","kind","languages","CompletionItemKind","Keyword","insertText","insertTextRules","CompletionItemInsertTextRule","KeepWhitespace","monaco1","suggestHtml","options","format","html","htmlDefaults","suggest","html5","registerHTMLLanguageService","completionItems","colors","foldingRanges","selectionRanges","diagnostics","documentFormattingEdits","documentRangeFormattingEdits","registerCompletionItemProvider","window","interopDefault","a","__esModule","default","defineInteropFlag","Object","defineProperty","exportAll","source","dest","keys","forEach","key","prototype","hasOwnProperty","call","enumerable","get","destName"],"version":3,"file":"liquid-intellisense.js.map"}