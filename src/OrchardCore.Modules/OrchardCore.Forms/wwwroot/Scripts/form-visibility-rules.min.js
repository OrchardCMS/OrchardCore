window.formVisibilityGroupRules=function(){function e(e){let t=e.tagName,n=(e.type||"").toLowerCase();if("SELECT"===t||"file"===n){e.dispatchEvent(new Event("change"));return}if("checkbox"===n||"radio"===n){document.querySelectorAll(`input[name="${e.name}"]`).forEach(e=>{e.dispatchEvent(new Event("change"))});return}if("INPUT"===t||"TEXTAREA"===t){e.dispatchEvent(new Event("input")),e.dispatchEvent(new Event("keyup"));return}e.dispatchEvent(new Event("input"))}function t(t){var n=t.getAttribute("data-default-value")||"",a=t.type.toLowerCase();"checkbox"===a||"radio"===a?document.querySelectorAll(`input[name="${t.name}"]`).forEach(e=>{e.checked="on"===n}):t.value=n,e(t)}function n(e){e.dataset.originalDisplay||(e.dataset.originalDisplay=getComputedStyle(e).display),e.style.display="none"}function a(e){e.style.display=e.dataset.originalDisplay||"block"}function r(e){return document.querySelector(`input[name="${e}"],select[name="${e}"],textarea[name="${e}"]`)}function i(e){return parseFloat((e||"").trim().replace(/,/g,"."))}return{initialize:function(o){let u=r(o.elementName);if(!u||"None"===o.action)return;let l=u.type.toLowerCase();"checkbox"===l||"radio"===l?u.setAttribute("data-default-value",u.checked?"on":"off"):u.setAttribute("data-default-value",u.value);let s=u.closest(".widget");s&&!s.dataset.originalDisplay&&(s.dataset.originalDisplay=getComputedStyle(s).display),function e(o,u,l,s){let c=!1;o.groups.forEach(t=>{let n=!0;t.rules?.forEach(t=>{let a=r(t.field);if(!a){console.warn(`Field element not found: ${t.field}. Ignoring the bad field.`);return}let c=a.type.toLowerCase();if("radio"===c){var d=document.querySelector('input[name="'+t.field+'"]:checked');fieldValue=d?d.value:""}else if("checkbox"===c){let e=`input[name="${t.field}"]`;document.querySelectorAll(e).length>1?fieldValue=Array.from(document.querySelectorAll(`${e}:checked`)).map(e=>e.value).join(","):fieldValue=a.checked?"true":"false"}else fieldValue=a.value;var f=function(e,t,n){if(!t.operator)return console.warn("Rule operator is missing for rule",t),!1;var a=e?e.trim():"",r=t.value?t.value.trim():"";n||(a=a.toLowerCase(),r=r.toLowerCase());var o=i(a),u=i(r);switch(t.operator){case"Is":if(!isNaN(o)&&!isNaN(u))return o===u;return a===r;case"IsNot":if(!isNaN(o)&&!isNaN(u))return o!==u;return a!==r;case"Contains":return a.includes(r);case"DoesNotContain":return!a.includes(r);case"StartsWith":return a.startsWith(r);case"EndsWith":return a.endsWith(r);case"GreaterThan":if(!isNaN(o)&&!isNaN(u))return o>u;return!1;case"LessThan":if(!isNaN(o)&&!isNaN(u))return o<u;return!1;case"Empty":return""===a;case"NotEmpty":return""!==a;default:return console.warn(`validateRule: Unknown operator "${t.operator}" in rule`,t),!1}}(fieldValue,t,t.caseSensitive);n&&!f&&(n=!1),s&&function(e,t){let n=e.tagName,a=(e.type||"").toLowerCase();if("SELECT"===n){if("checkbox"===a){e.addEventListener("change",t);return}e.addEventListener("change",t);return}if("INPUT"===n){if("checkbox"===a){for(var r=document.querySelectorAll(`input[name="${e.name}"]`),i=0;i<r.length;i++)r[i].addEventListener("change",t);return}if("radio"===a){for(var o=document.querySelectorAll(`input[name="${e.name}"]`),i=0;i<o.length;i++)o[i].addEventListener("change",t);return}if("file"===a){e.addEventListener("change",t);return}e.addEventListener("input",t),e.addEventListener("keyup",t);return}if("TEXTAREA"===n){e.addEventListener("input",t),e.addEventListener("keyup",t);return}e.addEventListener("input",t)}(a,t=>{e(o,u,l,!1)})}),c=c||n}),l&&("Show"===o.action?c?a(l):(n(l),t(u)):"Hide"===o.action&&(c?(n(l),t(u)):a(l)))}(o,u,s,!0),e(u)}}}();
