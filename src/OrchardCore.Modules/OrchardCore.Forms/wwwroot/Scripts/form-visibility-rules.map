{"version":3,"sources":["<anon>"],"sourcesContent":["window.formVisibilityGroupRules = (function () {\n    function initialize(data) {\n\n        const inputElement = getInputByName(data.elementName);\n\n        if (!inputElement || data.action === 'None') {\n            return;\n        }\n\n        const inputType = inputElement.type.toLowerCase();\n\n        if (inputType === 'checkbox' || inputType === 'radio') {\n            inputElement.setAttribute('data-default-value', inputElement.checked ? 'on' : 'off');\n        } else {\n            inputElement.setAttribute('data-default-value', inputElement.value);\n        }\n\n        const widgetContainer = inputElement.closest('.widget');\n\n        if (widgetContainer && !widgetContainer.dataset.originalDisplay) {\n            widgetContainer.dataset.originalDisplay = getComputedStyle(widgetContainer).display;\n        }\n\n        processGroups(data, inputElement, widgetContainer, true);\n\n        triggerProperChangeEvent(inputElement);\n    }\n\n    function triggerProperChangeEvent(element) {\n\n        const tagName = element.tagName;\n\n        const type = (element.type || '').toLowerCase();\n\n        if (tagName === 'SELECT' || type === 'file') {\n\n            element.dispatchEvent(new Event('change'));\n\n            return;\n        }\n\n        if (type === 'checkbox' || type === 'radio') {\n            document.querySelectorAll(`input[name=\"${element.name}\"]`).forEach(element => {\n                element.dispatchEvent(new Event('change'));\n            });\n            return;\n        }\n\n        if (tagName === 'INPUT' || tagName === 'TEXTAREA') {\n\n            element.dispatchEvent(new Event('input'));\n\n            element.dispatchEvent(new Event('keyup'));\n\n            return;\n        }\n\n        element.dispatchEvent(new Event('input'));\n    }\n\n    function addProperListeners(element, callback) {\n\n        const tagName = element.tagName;\n\n        const type = (element.type || '').toLowerCase();\n\n        if (tagName === 'SELECT') {\n\n            if (type === 'checkbox') {\n\n                element.addEventListener('change', callback);\n\n                return;\n            }\n\n            element.addEventListener('change', callback);\n\n            return;\n        }\n\n        if (tagName === 'INPUT') {\n\n            if (type === 'checkbox') {\n\n                var checkboxes = document.querySelectorAll(`input[name=\"${element.name}\"]`);\n\n                for (var i = 0; i < checkboxes.length; i++) {\n\n                    var checkbox = checkboxes[i];\n\n                    checkbox.addEventListener('change', callback);\n                }\n                return;\n            }\n\n            if (type === 'radio') {\n\n                var radioButtons = document.querySelectorAll(`input[name=\"${element.name}\"]`);\n\n                for (var i = 0; i < radioButtons.length; i++) {\n\n                    var radio = radioButtons[i];\n\n                    radio.addEventListener('change', callback);\n                }\n                return;\n            }\n\n            if (type === 'file') {\n\n                element.addEventListener('change', callback);\n\n                return;\n            }\n\n            element.addEventListener('input', callback);\n\n            element.addEventListener('keyup', callback);\n\n            return;\n        }\n\n        if (tagName === 'TEXTAREA') {\n\n            element.addEventListener('input', callback);\n\n            element.addEventListener('keyup', callback);\n\n            return;\n        }\n\n        element.addEventListener('input', callback);\n    }\n\n    function processGroups(data, inputElement, widgetContainer, addHandlers) {\n\n        let anyGroupRuleMet = false;\n\n        data.groups.forEach(group => {\n\n            let groupPassed = true;\n\n            group.rules?.forEach(rule => {\n\n                const fieldElement = getInputByName(rule.field);\n\n                if (!fieldElement) {\n                    console.warn(`Field element not found: ${rule.field}. Ignoring the bad field.`);\n                    return;\n                }\n\n                const fieldType = fieldElement.type.toLowerCase();\n\n                if (fieldType === 'radio') {\n\n                    var selectedRadio = document.querySelector('input[name=\"' + rule.field + '\"]:checked');\n\n                    fieldValue = selectedRadio ? selectedRadio.value : '';\n\n                } else if (fieldType === 'checkbox') {\n\n                    const findCheckboxes = `input[name=\"${rule.field}\"]`;\n\n                    var checkboxWidget = document.querySelectorAll(findCheckboxes);\n\n                    if (checkboxWidget.length > 1) {\n\n                        var checkedBoxes = document.querySelectorAll(`${findCheckboxes}:checked`);\n\n                        fieldValue = Array.from(checkedBoxes).map(checkbox => checkbox.value).join(',');\n                    } else {\n                        fieldValue = fieldElement.checked ? \"true\" : \"false\";\n                    }\n                } else {\n                    fieldValue = fieldElement.value;\n                }\n\n                var validationResult = validateRule(fieldValue, rule, rule.caseSensitive);\n\n                if (groupPassed && !validationResult) {\n\n                    groupPassed = false;\n                }\n\n                if (addHandlers) {\n\n                    addProperListeners(fieldElement, (e) => {\n                        processGroups(data, inputElement, widgetContainer, false);\n                    });\n                }\n            });\n\n            anyGroupRuleMet = anyGroupRuleMet || groupPassed;\n        });\n\n        if (widgetContainer) {\n\n            if (data.action === 'Show') {\n\n                if (anyGroupRuleMet) {\n                    showElement(widgetContainer);\n                } else {\n                    hideElement(widgetContainer);\n                    restoreOriginalState(inputElement);\n                }\n            }\n            else if (data.action === 'Hide') {\n\n                if (anyGroupRuleMet) {\n                    hideElement(widgetContainer);\n                    restoreOriginalState(inputElement);\n                } else {\n                    showElement(widgetContainer);\n                }\n            }\n        }\n    }\n\n    function restoreOriginalState(inputElement) {\n\n        var originalValue = inputElement.getAttribute('data-default-value') || '';\n\n        var type = inputElement.type.toLowerCase();\n\n        if (type === 'checkbox' || type === 'radio') {\n            document.querySelectorAll(`input[name=\"${inputElement.name}\"]`)\n                .forEach(element => {\n                    element.checked = (originalValue === 'on');\n                });\n        } else {\n            inputElement.value = originalValue;\n        }\n\n        triggerProperChangeEvent(inputElement);\n    }\n\n    function hideElement(element) {\n\n        if (!element.dataset.originalDisplay) {\n\n            element.dataset.originalDisplay = getComputedStyle(element).display;\n        }\n\n        element.style.display = \"none\";\n    }\n\n    function showElement(element) {\n\n        element.style.display = element.dataset.originalDisplay || \"block\";\n    }\n\n    function getInputByName(name) {\n        return document.querySelector(`input[name=\"${name}\"],select[name=\"${name}\"],textarea[name=\"${name}\"]`);\n    }\n\n    function validateRule(inputValue, rule, caseSensitive) {\n\n        if (!rule.operator) {\n            console.warn(\"Rule operator is missing for rule\", rule);\n            return false;\n        }\n\n        var rawInputValue = inputValue ? inputValue.trim() : '';\n        var rawRuleValue = rule.value ? rule.value.trim() : '';\n\n        if (!caseSensitive) {\n            rawInputValue = rawInputValue.toLowerCase();\n            rawRuleValue = rawRuleValue.toLowerCase();\n        }\n\n        var inputNumber = getNumeric(rawInputValue);\n        var ruleNumber = getNumeric(rawRuleValue);\n\n        switch (rule.operator) {\n\n            case 'Is':\n                if (!isNaN(inputNumber) && !isNaN(ruleNumber)) {\n                    return inputNumber === ruleNumber;\n                }\n                return rawInputValue === rawRuleValue;\n\n            case 'IsNot':\n                if (!isNaN(inputNumber) && !isNaN(ruleNumber)) {\n                    return inputNumber !== ruleNumber;\n                }\n                return rawInputValue !== rawRuleValue;\n\n            case 'Contains':\n                return rawInputValue.includes(rawRuleValue);\n\n            case 'DoesNotContain':\n                return !rawInputValue.includes(rawRuleValue);\n\n            case 'StartsWith':\n                return rawInputValue.startsWith(rawRuleValue);\n\n            case 'EndsWith':\n                return rawInputValue.endsWith(rawRuleValue);\n\n            case 'GreaterThan':\n                if (!isNaN(inputNumber) && !isNaN(ruleNumber)) {\n                    return inputNumber > ruleNumber;\n                }\n                return false;\n\n            case 'LessThan':\n                if (!isNaN(inputNumber) && !isNaN(ruleNumber)) {\n                    return inputNumber < ruleNumber;\n                }\n                return false;\n\n            case 'Empty':\n                return rawInputValue === '';\n\n            case 'NotEmpty':\n                return rawInputValue !== '';\n\n            default:\n                console.warn(`validateRule: Unknown operator \"${rule.operator}\" in rule`, rule);\n                return false;\n        }\n    }\n\n    function getNumeric(value) {\n\n        var raw = (value || '').trim();\n\n        var lang = document.documentElement.lang || 'en-US';\n\n        var parts = new Intl.NumberFormat(lang, {\n            style: 'decimal',\n            minimumFractionDigits: 0,\n            maximumFractionDigits: 20\n        }).formatToParts(12345.6);\n\n        var groupingSeparator = parts.find(part => part.type === 'group')?.value || ',';\n\n        var decimalSeparator = parts.find(part => part.type === 'decimal')?.value || '.';\n\n        var cleanedValue = raw.split(groupingSeparator).join('');\n\n        var normalized = cleanedValue.split(decimalSeparator).join('.');\n\n        var result = parseFloat(normalized);\n\n        return result;\n    }\n\n    return {\n        initialize: initialize\n    };\n})();\n"],"names":["window","formVisibilityGroupRules","triggerProperChangeEvent","element","tagName","type","toLowerCase","dispatchEvent","Event","document","querySelectorAll","name","forEach","restoreOriginalState","inputElement","originalValue","getAttribute","checked","value","hideElement","dataset","originalDisplay","getComputedStyle","display","style","showElement","getInputByName","querySelector","getNumeric","raw","trim","lang","documentElement","parts","Intl","NumberFormat","minimumFractionDigits","maximumFractionDigits","formatToParts","groupingSeparator","find","part","decimalSeparator","parseFloat","cleanedValue","split","join","initialize","data","elementName","action","inputType","setAttribute","widgetContainer","closest","processGroups","addHandlers","anyGroupRuleMet","groups","group","groupPassed","rules","rule","fieldElement","field","console","warn","fieldType","selectedRadio","fieldValue","findCheckboxes","checkboxWidget","length","Array","from","map","checkbox","validationResult","validateRule","inputValue","caseSensitive","operator","rawInputValue","rawRuleValue","inputNumber","ruleNumber","isNaN","includes","startsWith","endsWith","addProperListeners","callback","addEventListener","checkboxes","i","radioButtons","radio","e"],"mappings":"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"}
