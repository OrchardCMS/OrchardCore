{"version":3,"sources":["<anon>"],"sourcesContent":["//TODO: refactor without jquery\nselectOptionsEditor = function () {\n    const initilize = (elemId, optionsData, defaultValue) => {\n        var keyId = 1;\n        //Add Key ID\n        optionsData = optionsData.map((x) => {\n            x.key = keyId;\n            keyId++;\n            return x;\n        });\n        var selectOptionsRow = {\n            name: \"select-options-row\",\n            template: \"#select-options-row\",\n            props: [\"option\", \"defaultValue\"],\n            data: function () {\n                return {\n                    partId: elemId,\n                };\n            },\n            methods: {\n                remove: function () {\n                    this.$emit(\"remove-option\", this.option);\n                },\n            },\n            computed: {\n                IsSelected: {\n                    get: function () {\n                        if (!IsNullOrWhiteSpace(this.option.value)) {\n                            return this.option.value == this.defaultValue;\n                        } else {\n                            return this.option.text == this.defaultValue;\n                        }\n                    },\n                    set: function (val) {\n                        if (val) {\n                            this.$emit(\"set-default\", this.option);\n                        } else {\n                            this.$emit(\"set-default\", null);\n                        }\n                    },\n                },\n                optionValue: {\n                    get: function () {\n                        return this.option.value;\n                    },\n                    set: function (val) {\n                        var isSelected = this.IsSelected;\n                        this.option.value = val;\n                        if (isSelected) {\n                            this.$emit(\"set-default\", this.option);\n                        } else {\n                            this.$emit(\"reorder-option\");\n                        }\n                    },\n                },\n                optionText: {\n                    get: function () {\n                        return this.option.text;\n                    },\n                    set: function (val) {\n                        var isSelected = this.IsSelected;\n                        this.option.text = val;\n                        if (isSelected) {\n                            this.$emit(\"set-default\", this.option);\n                        } else {\n                            this.$emit(\"reorder-option\");\n                        }\n                    },\n                },\n                optionCheck: {\n                    get: function () {\n                        if (IsNullOrWhiteSpace(this.option.value)) {\n                            return this.option.text;\n                        } else {\n                            return this.option.value;\n                        }\n                    },\n                },\n            },\n        };\n        var selectOptionsTable = {\n            name: \"select-options-table\",\n            components: {\n                selectOptionsRow: selectOptionsRow,\n            },\n            template: \"#select-options-table\",\n            props: [\"data\"],\n            data: function () {\n                return {\n                    partId: elemId,\n                };\n            },\n            methods: {\n                add: function () {\n                    this.$emit(\"add-option\");\n                },\n                onDragEnd: function () {\n                    this.$emit(\"reorder-option\");\n                },\n            },\n        };\n        var selectOptionsModal = {\n            name: \"select-options-modal\",\n            template: \"#select-options-modal\",\n            props: [\"data\", \"showModal\", \"validOptions\"],\n            data: function () {\n                return {\n                    optionsFormattedList: \"[]\",\n                    partId: elemId,\n                    defaultValue: \"\",\n                    isValid: false,\n                    jsonOptions: [],\n                };\n            },\n            methods: {\n                closeModal: function (save) {\n                    if (save) {\n                        this.$emit(\"modal-save\", {\n                            options: this.jsonOptions,\n                            defaultValue: this.defaultValue,\n                        });\n                    } else {\n                        this.$emit(\"modal-cancel\");\n                    }\n                },\n                showStart: function (params) {\n                    this.$refs.modal.classList.toggle('d-block');\n                    this.$refs.backdrop.classList.toggle('d-block');\n                },\n                showEnd: function (params) {\n                    this.$refs.modal.classList.toggle('show');\n                    this.$refs.backdrop.classList.toggle('show');\n                }\n            },\n            watch: {\n                showModal: function (newval) {\n                    if (newval) {\n                        this.optionsFormattedList = JSON.stringify(\n                            this.validOptions,\n                            null,\n                            2\n                        );\n                        this.defaultValue = this.data.defaultValue;\n                    } else {\n                        this.optionsFormattedList = \"[]\";\n                        this.defaultValue = \"\";\n                    }\n                },\n                optionsFormattedList: function (newval) {\n                    try {\n                        var parsed = JSON.parse(newval);\n                        if (!!newval && parsed instanceof Array) {\n                            this.jsonOptions = parsed;\n                            this.isValid = true;\n                        } else {\n                            this.isValid = false;\n                        }\n                    } catch (e) {\n                        this.isValid = false;\n                    }\n                },\n            },\n        };\n        new Vue({\n            components: {\n                selectOptionsTable: selectOptionsTable,\n                selectOptionsModal: selectOptionsModal,\n            },\n            data: function () {\n                return {\n                    state: {\n                        options: optionsData,\n                        defaultValue: defaultValue,\n                        partId: elemId,\n                    },\n                    debounceTimeout: null,\n                    showModal: false,\n                };\n            },\n            el: \"#\" + elemId,\n            methods: {\n                cancelChanges: function () {\n                    this.showModal = false;\n                },\n                updateChanges: function (changes) {\n                    this.state.options = changes.options\n                        .filter(function (y) {\n                            return !IsNullOrWhiteSpace(y.text);\n                        })\n                        .map(function (x) {\n                            x.key = keyId++;\n                            return x;\n                        });\n                    this.state.defaultValue = changes.defaultValue;\n                    this.showModal = false;\n                    this.debouncePreview();\n                },\n                setDefaultValue: function (opt) {\n                    if (opt == null) {\n                        this.state.defaultValue = \"\";\n                    } else {\n                        if (!IsNullOrWhiteSpace(opt.value)) {\n                            this.state.defaultValue = opt.value;\n                        } else {\n                            this.state.defaultValue = opt.text;\n                        }\n                    }\n                    this.debouncePreview();\n                },\n                addOption: function () {\n                    this.state.options.push({\n                        text: \"\",\n                        value: \"\",\n                        key: keyId++,\n                    });\n                    this.debouncePreview();\n                },\n                removeOption: function (opt) {\n                    var index = this.state.options.findIndex(function (c) {\n                        return c.key == opt.key;\n                    });\n                    if (index > -1) {\n                        this.state.options.splice(index, 1);\n                        this.debouncePreview();\n                    }\n                },\n                reorderOption: function (evt) {\n                    this.debouncePreview();\n                },\n                debouncePreview: function (params) {\n                    if (this.debounceTimeout) clearTimeout(this.debounceTimeout);\n                    this.debounceTimeout = setTimeout(() => {\n                        const previewEvent = new Event(\"contentpreview:render\");\n                        document.dispatchEvent(previewEvent);\n                    }, 500);\n                },\n            },\n            computed: {\n                stringify: function () {\n                    return JSON.stringify(this.validOptions);\n                },\n                validOptions: function () {\n                    return this.state.options\n                        .map(function (x) {\n                            return {\n                                text: x.text,\n                                value: x.value,\n                            };\n                        })\n                        .filter(function (x) {\n                            return !IsNullOrWhiteSpace(x.text);\n                        });\n                },\n            },\n        });\n        function IsNullOrWhiteSpace(str) {\n            return str == null || str.match(/^ *$/) !== null;\n        }\n    };\n    const initilizeElement = (id, options, value) => {\n        var wrapper = document.getElementById(id);\n        if (wrapper != null) {\n            initilize(id, options, value);\n        }\n    }\n    const initilizeFieldType = (wrapper) => {\n        var selectMenus = wrapper.getElementsByClassName('field-type-select-menu');\n        selectMenus.forEach(function (selectMenu) {\n            selectMenu.addEventListener('change', function (e) {\n                var widgetWrapper = e.target.closest('.widget-editor-body');\n                var visibleForInputContainers = widgetWrapper.getElementsByClassName('show-for-input');\t\n                visibleForInputContainers.forEach(function (container) {\n                    if (e.target.value == 'reset' || e.target.value == 'submit' || e.target.value == 'hidden') {\n                        container.classList.add('d-none');\n                    } else {\n                        container.classList.remove('d-none');\n                    }\n                });\n            });\n            selectMenu.dispatchEvent(new Event('change'));\n        });\n    };\n    return {\n        initilizeElement: initilizeElement,\n        initilizeFieldType: initilizeFieldType\n    };\n}();\ndocument.addEventListener('DOMContentLoaded', function () {\n    var wrappers = document.getElementsByName('select-part-properties-wrapper');\n    wrappers.forEach(function (wrapper) {\n        var fieldWrapper = wrapper.querySelector('.field-options-wrapper');\n        if (fieldWrapper != null) {\n            var initialDefaultValue = fieldWrapper.querySelector('.field-options-wrapper-initial-default-value');\n            var initialOptions = fieldWrapper.querySelector('.field-options-wrapper-initial-options');\n            selectOptionsEditor.initilizeElement(fieldWrapper.Id, initialOptions.innerHTML, initialDefaultValue.value)\n        }\n    });\n    selectOptionsEditor.initilizeFieldType(document);\n});\n"],"names":["selectOptionsEditor","initilize","elemId","optionsData","defaultValue","keyId","IsNullOrWhiteSpace","str","match","map","x","key","Vue","components","selectOptionsTable","name","selectOptionsRow","template","props","data","partId","methods","remove","$emit","option","computed","IsSelected","get","value","text","set","val","optionValue","isSelected","optionText","optionCheck","add","onDragEnd","selectOptionsModal","optionsFormattedList","isValid","jsonOptions","closeModal","save","options","showStart","params","$refs","modal","classList","toggle","backdrop","showEnd","watch","showModal","newval","JSON","stringify","validOptions","parsed","parse","Array","e","state","debounceTimeout","el","cancelChanges","updateChanges","changes","filter","y","debouncePreview","setDefaultValue","opt","addOption","push","removeOption","index","findIndex","c","splice","reorderOption","evt","clearTimeout","setTimeout","previewEvent","Event","document","dispatchEvent","initilizeElement","id","getElementById","initilizeFieldType","wrapper","selectMenus","getElementsByClassName","forEach","selectMenu","addEventListener","visibleForInputContainers","widgetWrapper","target","closest","container","wrappers","getElementsByName","fieldWrapper","querySelector","initialDefaultValue","initialOptions","Id","innerHTML"],"mappings":"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"}
