selectOptionsEditor=function(){let t=(t,e,i)=>{var o=1;function n(t){return null==t||null!==t.match(/^ *$/)}e=e.map(t=>(t.key=o,o++,t)),new Vue({components:{selectOptionsTable:{name:"select-options-table",components:{selectOptionsRow:{name:"select-options-row",template:"#select-options-row",props:["option","defaultValue"],data:function(){return{partId:t}},methods:{remove:function(){this.$emit("remove-option",this.option)}},computed:{IsSelected:{get:function(){return n(this.option.value)?this.option.text==this.defaultValue:this.option.value==this.defaultValue},set:function(t){t?this.$emit("set-default",this.option):this.$emit("set-default",null)}},optionValue:{get:function(){return this.option.value},set:function(t){var e=this.IsSelected;this.option.value=t,e?this.$emit("set-default",this.option):this.$emit("reorder-option")}},optionText:{get:function(){return this.option.text},set:function(t){var e=this.IsSelected;this.option.text=t,e?this.$emit("set-default",this.option):this.$emit("reorder-option")}},optionCheck:{get:function(){return n(this.option.value)?this.option.text:this.option.value}}}}},template:"#select-options-table",props:["data"],data:function(){return{partId:t}},methods:{add:function(){this.$emit("add-option")},onDragEnd:function(){this.$emit("reorder-option")}}},selectOptionsModal:{name:"select-options-modal",template:"#select-options-modal",props:["data","showModal","validOptions"],data:function(){return{optionsFormattedList:"[]",partId:t,defaultValue:"",isValid:!1,jsonOptions:[]}},methods:{closeModal:function(t){t?this.$emit("modal-save",{options:this.jsonOptions,defaultValue:this.defaultValue}):this.$emit("modal-cancel")},showStart:function(t){this.$refs.modal.classList.toggle("d-block"),this.$refs.backdrop.classList.toggle("d-block")},showEnd:function(t){this.$refs.modal.classList.toggle("show"),this.$refs.backdrop.classList.toggle("show")}},watch:{showModal:function(t){t?(this.optionsFormattedList=JSON.stringify(this.validOptions,null,2),this.defaultValue=this.data.defaultValue):(this.optionsFormattedList="[]",this.defaultValue="")},optionsFormattedList:function(t){try{var e=JSON.parse(t);t&&e instanceof Array?(this.jsonOptions=e,this.isValid=!0):this.isValid=!1}catch(t){this.isValid=!1}}}}},data:function(){return{state:{options:e,defaultValue:i,partId:t},debounceTimeout:null,showModal:!1}},el:"#"+t,methods:{cancelChanges:function(){this.showModal=!1},updateChanges:function(t){this.state.options=t.options.filter(function(t){return!n(t.text)}).map(function(t){return t.key=o++,t}),this.state.defaultValue=t.defaultValue,this.showModal=!1,this.debouncePreview()},setDefaultValue:function(t){null==t?this.state.defaultValue="":n(t.value)?this.state.defaultValue=t.text:this.state.defaultValue=t.value,this.debouncePreview()},addOption:function(){this.state.options.push({text:"",value:"",key:o++}),this.debouncePreview()},removeOption:function(t){var e=this.state.options.findIndex(function(e){return e.key==t.key});e>-1&&(this.state.options.splice(e,1),this.debouncePreview())},reorderOption:function(t){this.debouncePreview()},debouncePreview:function(t){this.debounceTimeout&&clearTimeout(this.debounceTimeout),this.debounceTimeout=setTimeout(()=>{let t=new Event("contentpreview:render");document.dispatchEvent(t)},500)}},computed:{stringify:function(){return JSON.stringify(this.validOptions)},validOptions:function(){return this.state.options.map(function(t){return{text:t.text,value:t.value}}).filter(function(t){return!n(t.text)})}}})};return{initilizeElement:(e,i,o)=>{null!=document.getElementById(e)&&t(e,i,o)},initilizeFieldType:t=>{var e=t.getElementsByClassName("field-type-select-menu");for(let t=0;t<e.length;t++){var i=e[t];i.addEventListener("change",function(t){var e=t.target.closest(".widget-editor-body").getElementsByClassName("show-for-input");for(let o=0;o<e.length;o++){var i=e[o];"reset"==t.target.value||"submit"==t.target.value||"hidden"==t.target.value?i.classList.add("d-none"):i.classList.remove("d-none")}}),i.dispatchEvent(new Event("change"))}}}}(),document.addEventListener("DOMContentLoaded",function(){var t=document.getElementsByName("select-part-properties-wrapper");for(let n=0;n<t.length;n++){var e=t[n].querySelector(".field-options-wrapper");if(null!=e){var i=e.querySelector(".field-options-wrapper-initial-default-value"),o=e.querySelector(".field-options-wrapper-initial-options");selectOptionsEditor.initilizeElement(e.Id,o.innerHTML,i.value)}}selectOptionsEditor.initilizeFieldType(document)});
