jQuery.fn.extend({insertAtCaret:function(t){return this.each((function(e){if(document.selection)this.focus(),sel=document.selection.createRange(),sel.text=t,this.focus();else if(this.selectionStart||"0"===this.selectionStart){var o=this.selectionStart,s=this.selectionEnd,i=this.scrollTop;this.value=this.value.substring(0,o)+t+this.value.substring(s,this.value.length),this.focus(),this.selectionStart=o+t.length,this.selectionEnd=o+t.length,this.scrollTop=i}else this.value+=t,this.focus()}))}});var shortcodesApp,shortcodeWrapperTemplate='\n<div class="shortcode-modal-wrapper"></div>\n',shortcodeBtnTemplate='\n<button type="button" class="shortcode-modal-btn btn btn-sm">\n<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">\n    <path d="M16 4.2v1.5h2.5v12.5H16v1.5h4V4.2h-4zM4.2 19.8h4v-1.5H5.8V5.8h2.5V4.2h-4l-.1 15.6zm5.1-3.1l1.4.6 4-10-1.4-.6-4 10z"></path>\n</svg>\n</button>\n';function initializeShortcodesApp(t){if(t){var e=t.id;return shortcodesApp=new Vue({el:"#"+e,data:function(){var e=JSON.parse(t.dataset.shortcodes||"[]");return{filter:"",allShortcodes:e,filteredShortcodes:e,categories:JSON.parse(t.dataset.categories||"[]"),returnShortcode:""}},watch:{filter:function(t){if(t){var e=t.toLowerCase();this.filteredShortcodes=this.allShortcodes.filter((function(t){return t.name.startsWith(e)}))}else this.filteredShortcodes=this.allShortcodes}},methods:{init:function(t){t&&(this.onClose=t),this.selectedValue="",$(this.$el).modal("show");var e=this;$(this.$el).on("shown.bs.modal",(function(t){e.$refs.filter.focus()}))},onClose:function(t){},setCategory:function(t){this.filteredShortcodes=t?this.allShortcodes.filter((function(e){return e.categories.some((function(e){return e.toLowerCase()===t.toLowerCase()}))})):this.allShortcodes,this.filter=""},isVisible:function(t){return this.filteredShortcodes.some((function(e){return e.name===t}))},insertShortcode:function(t){this.returnShortcode=t,$(this.$el).modal("hide"),this.onClose(this.returnShortcode)}}})}}function initializeCodeMirrorShortcodeWrapper(t){var e=t.display.wrapper;$(e).wrap(shortcodeWrapperTemplate),$(e).parent().append(shortcodeBtnTemplate),$(e).siblings(".shortcode-modal-btn").on("click",(function(){shortcodesApp.init((function(e){t.replaceSelection(e)}))}))}$((function(){$(".shortcode-modal-input").each((function(){$(this).wrap(shortcodeWrapperTemplate),$(this).parent().append(shortcodeBtnTemplate)})),$(".shortcode-modal-btn").on("click",(function(){var t=$(this).siblings(".shortcode-modal-input");shortcodesApp.init((function(e){t.insertAtCaret(e)}))}))}));
