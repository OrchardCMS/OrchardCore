{"version":3,"sources":["<anon>"],"sourcesContent":["/// jQuery helper to append text to a textarea or input.\njQuery.fn.extend({\n    insertAtCaret: function (myValue) {\n        return this.each(function (i) {\n            if (document.selection) {\n                //For browsers like Internet Explorer\n                this.focus();\n                sel = document.selection.createRange();\n                sel.text = myValue;\n                this.focus();\n            } else if (this.selectionStart || this.selectionStart === \"0\") {\n                //For browsers like Firefox and Webkit based\n                var startPos = this.selectionStart;\n                var endPos = this.selectionEnd;\n                var scrollTop = this.scrollTop;\n                this.value = this.value.substring(0, startPos) + myValue + this.value.substring(endPos, this.value.length);\n                this.focus();\n                this.selectionStart = startPos + myValue.length;\n                this.selectionEnd = startPos + myValue.length;\n                this.scrollTop = scrollTop;\n            } else {\n                this.value += myValue;\n                this.focus();\n            }\n        });\n    }\n});\nconst shortcodeWrapperTemplate = `\n<div class=\"shortcode-modal-wrapper\"></div>\n`;\nconst shortcodeBtnTemplate = `\n<button type=\"button\" class=\"shortcode-modal-btn btn btn-sm\">\n    <span class=\"icon-shortcode\"></span>\n</button>\n`;\n// Wraps each .shortcode-modal-input class with a wrapper, and attaches detaches the shortcode app as required.\n$(function () {\n    $('.shortcode-modal-input').each(function () {\n        $(this).wrap(shortcodeWrapperTemplate);\n        $(this).parent().append(shortcodeBtnTemplate);\n    });\n    $('.shortcode-modal-btn').on('click', function() {\n        var input = $(this).siblings('.shortcode-modal-input');\n        shortcodesApp.init(function (defaultValue) {\n            input.insertAtCaret(defaultValue);\n        });    \n    });\n})\nvar shortcodesApp;\nfunction initializeShortcodesApp(element) {\n    if (element && !shortcodesApp) {\n        var elementId = element.id;\n        shortcodesApp = new Vue({\n            el: '#' + elementId,\n            data : function () {\n                \n                var shortcodes = JSON.parse(element.dataset.shortcodes || \"[]\");\n                var categories = JSON.parse(element.dataset.categories || \"[]\");\n                return {\n                    filter: '',\n                    allShortcodes: shortcodes,\n                    filteredShortcodes: shortcodes,\n                    categories: categories,\n                    defaultValue: '',\n                    modal: null\n                }\n            },\n            watch:\n            {\n                filter(filter) {\n                    if (filter) {\n                        var lower = filter.toLowerCase();\n                        this.filteredShortcodes = this.allShortcodes\n                            .filter(s => s.name.startsWith(lower));\n                    } else {\n                        this.filteredShortcodes = this.allShortcodes;\n                    }\n                }\n            },            \n            methods: {\n                init(onClose)\n                {\n                    if (onClose) {\n                        this.onClose = onClose;\n                    }\n                    this.selectedValue = '';\n                    this.modal = new bootstrap.Modal(this.$el);\n                    this.modal.show();\n                    var self = this;\n                    $(this.$el).on('shown.bs.modal', function (e) {\n                        self.$refs.filter.focus();\n                    });\n                },\n                onClose(defaultValue)\n                {\n                    return;\n                },\n                setCategory(category)\n                {\n                    if (category) {\n                        this.filteredShortcodes = this.allShortcodes\n                            .filter(s => s.categories.some(c => c.toLowerCase() === category.toLowerCase()));\n                    } else {\n                        this.filteredShortcodes = this.allShortcodes;\n                    }\n                    this.filter = '';\n                },            \n                isVisible(name) {\n                    return this.filteredShortcodes.some(s => s.name === name);\n                },\n                insertShortcode(event) {\n                    this.defaultValue =  event.target.dataset.defaultValue;\n                    this.modal.hide();\n                    this.onClose(this.defaultValue);\n                }\n            }\n        });\n        return shortcodesApp;\n    }\n}\n// initializes a code mirror editor with a shortcode modal.\nfunction initializeCodeMirrorShortcodeWrapper(editor) {\n    const codemirrorWrapper = editor.display.wrapper;\n    $(codemirrorWrapper).wrap(shortcodeWrapperTemplate);\n    $(codemirrorWrapper).parent().append(shortcodeBtnTemplate);\n    $(codemirrorWrapper).siblings('.shortcode-modal-btn').on('click', function () {\n        shortcodesApp.init(function (defaultValue) {\n            editor.replaceSelection(defaultValue);   \n        });   \n    });  \n}\n"],"names":["shortcodesApp","jQuery","fn","extend","insertAtCaret","myValue","each","i","document","selection","focus","sel","createRange","text","selectionStart","startPos","endPos","selectionEnd","scrollTop","value","substring","length","shortcodeWrapperTemplate","shortcodeBtnTemplate","initializeShortcodesApp","element","Vue","el","id","data","shortcodes","JSON","parse","dataset","filter","allShortcodes","filteredShortcodes","categories","defaultValue","modal","watch","lower","toLowerCase","s","name","startsWith","methods","init","onClose","selectedValue","bootstrap","Modal","$el","show","self","$","on","e","$refs","setCategory","category","some","c","isVisible","insertShortcode","event","target","hide","initializeCodeMirrorShortcodeWrapper","editor","codemirrorWrapper","display","wrapper","wrap","parent","append","siblings","replaceSelection","input"],"mappings":"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"}
