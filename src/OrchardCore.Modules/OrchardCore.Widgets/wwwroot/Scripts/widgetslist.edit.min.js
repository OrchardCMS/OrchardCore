$(function(){$(document).on("click",".add-list-widget",function(t){var e=$(this).data("widget-type"),n=$(this).data("target-id"),a=$(this).data("html-field-prefix"),i=$("#"+n).data("buildeditorurl"),s=$(this).data("prefixes-name"),r=$(this).data("parent-content-type"),o=$(this).data("part-name"),d=$(this).data("zones-name"),l=$(this).data("zone"),c=$("#"+n).closest("form").find("input[name*='Prefixes']").filter(function(t,e){return $(e).val().substring(0,$(e).val().lastIndexOf("-"))===a}).map(function(t,e){return parseInt($(e).val().substring($(e).val().lastIndexOf("-")+1))||0}),m=a+"-"+(c.length?Math.max(...c)+1:0).toString(),p=$(this).data("contenttypes-name"),f=$(this).data("contentitems-name");$.ajax({url:i+"?id="+e+"&prefix="+m+"&prefixesName="+s+"&contentTypesName="+p+"&contentItemsName="+f+"&zonesName="+d+"&zone="+l+"&targetId="+n+"&parentContentType="+r+"&partName="+o}).done(function(t){var e=JSON.parse(t);$(document.getElementById(n)).append(e.Content),$(e.Scripts).filter("script").each(function(){$.globalEval(this.text||this.textContent||this.innerHTML||"")})})}),$(document).on("click",".insert-list-widget",function(t){var e=$(this).data("widget-type"),n=$(this).closest(".widget-template"),a=$(this).data("target-id"),i=$(this).data("html-field-prefix"),s=$("#"+a).data("buildeditorurl"),r=$(this).data("prefixes-name"),o=$(this).data("parent-content-type"),d=$(this).data("part-name"),l=$(this).data("zones-name"),c=$(this).data("zone"),m=$("#"+a).closest("form").find("input[name*='Prefixes']").filter(function(t,e){return $(e).val().substring(0,$(e).val().lastIndexOf("-"))===i}).map(function(t,e){return parseInt($(e).val().substring($(e).val().lastIndexOf("-")+1))||0}),p=i+"-"+(m.length?Math.max(...m)+1:0).toString(),f=$(this).data("contenttypes-name"),u=$(this).data("contentitems-name");$.ajax({url:s+"?id="+e+"&prefix="+p+"&prefixesName="+r+"&contentTypesName="+f+"&contentItemsName="+u+"&zonesName="+l+"&zone="+c+"&targetId="+a+"&parentContentType="+o+"&partName="+d}).done(function(t){var e=JSON.parse(t);$(e.Content).insertBefore(n),$(e.Scripts).filter("script").each(function(){$.globalEval(this.text||this.textContent||this.innerHTML||"")})})}),$(document).on("click",".widget-list-delete",function(){var t=$(this);confirmDialog(_objectSpread({},t.data(),{callback:function(e){e&&(t.closest(".widget-template").remove(),$(document).trigger("contentpreview:render"))}}))}),$(document).on("change",".widget-editor-footer label",function(){$(document).trigger("contentpreview:render")}),$(document).on("click",".widget-list-editor-btn-toggle",function(){$(this).closest(".widget-editor").toggleClass("collapsed")})});