{"version":3,"sources":["<anon>"],"sourcesContent":["$(function () {\n    $(document).on('click', '.add-list-widget', function (event) {\n        var type = $(this).data(\"widget-type\");\n        var targetId = $(this).data(\"target-id\");\n        var htmlFieldPrefix = $(this).data(\"html-field-prefix\");\n        var createEditorUrl = $('#' + targetId).data(\"buildeditorurl\");\n        var prefixesName = $(this).data(\"prefixes-name\");\n        var parentContentType = $(this).data(\"parent-content-type\");\n        var partName = $(this).data(\"part-name\");\n        var zonesName = $(this).data(\"zones-name\");\n        var zone = $(this).data(\"zone\");\n        // Retrieve all index values knowing that some elements may have been moved / removed.\n        var indexes = $('#' + targetId).closest(\"form\").find(\"input[name*='Prefixes']\")\n            .filter(function (i, e) {\n                return $(e).val().substring(0, $(e).val().lastIndexOf('-')) === htmlFieldPrefix;\n            })\n            .map(function (i, e) {\n                return parseInt($(e).val().substring($(e).val().lastIndexOf('-') + 1)) || 0;\n            });\n        // Use a prefix based on the items count (not a guid) so that the browser autofill still works.\n        var index = indexes.length ? Math.max(...indexes) + 1 : 0;\n        var prefix = htmlFieldPrefix + '-' + index.toString();\n        var contentTypesName = $(this).data(\"contenttypes-name\");\n        var contentItemsName = $(this).data(\"contentitems-name\");\n        $.ajax({\n            url: createEditorUrl + \"?id=\" + type + \"&prefix=\" + prefix + \"&prefixesName=\" + prefixesName + \"&contentTypesName=\" + contentTypesName + \"&contentItemsName=\" + contentItemsName + \"&zonesName=\" + zonesName + \"&zone=\" + zone + \"&targetId=\" + targetId + \"&parentContentType=\" + parentContentType + \"&partName=\" + partName\n        })\n        .done(function (data) {\n            var result = JSON.parse(data);\n            $(document.getElementById(targetId)).append(result.Content);\n            var dom = $(result.Scripts);\n            dom.filter('script').each(function () {\n                $.globalEval(this.text || this.textContent || this.innerHTML || '');\n            });\n        });\n    });\n    $(document).on('click', '.insert-list-widget', function (event) {\n        var type = $(this).data(\"widget-type\");\n        var target = $(this).closest('.widget-template');\n        var targetId = $(this).data(\"target-id\");\n        var htmlFieldPrefix = $(this).data(\"html-field-prefix\");\n        var createEditorUrl = $('#' + targetId).data(\"buildeditorurl\");\n        var prefixesName = $(this).data(\"prefixes-name\");\n        var parentContentType = $(this).data(\"parent-content-type\");\n        var partName = $(this).data(\"part-name\");\n        var zonesName = $(this).data(\"zones-name\");\n        var zone = $(this).data(\"zone\");\n        // Retrieve all index values knowing that some elements may have been moved / removed.\n        var indexes = $('#' + targetId).closest(\"form\").find(\"input[name*='Prefixes']\")\n            .filter(function (i, e) {\n                return $(e).val().substring(0, $(e).val().lastIndexOf('-')) === htmlFieldPrefix;\n            })\n            .map(function (i, e) {\n                return parseInt($(e).val().substring($(e).val().lastIndexOf('-') + 1)) || 0;\n            });\n        // Use a prefix based on the items count (not a guid) so that the browser autofill still works.\n        var index = indexes.length ? Math.max(...indexes) + 1 : 0;\n        var prefix = htmlFieldPrefix + '-' + index.toString();\n        var contentTypesName = $(this).data(\"contenttypes-name\");\n        var contentItemsName = $(this).data(\"contentitems-name\");\n        $.ajax({\n            url: createEditorUrl + \"?id=\" + type + \"&prefix=\" + prefix + \"&prefixesName=\" + prefixesName + \"&contentTypesName=\" + contentTypesName + \"&contentItemsName=\" + contentItemsName + \"&zonesName=\" + zonesName + \"&zone=\" + zone + \"&targetId=\" + targetId + \"&parentContentType=\" + parentContentType + \"&partName=\" + partName\n        })\n        .done(function (data) {\n            var result = JSON.parse(data);\n            $(result.Content).insertBefore(target);\n            var dom = $(result.Scripts);\n            dom.filter('script').each(function () {\n                $.globalEval(this.text || this.textContent || this.innerHTML || '');\n            });\n        });\n    });\n    $(document).on('click', '.widget-list-delete', function () {\n        var $this = $(this);\n        confirmDialog(_objectSpread({}, $this.data(), {\n            callback: function callback(r) {\n                if (r) {\n                    $this.closest('.widget-template').remove();\n                    $(document).trigger('contentpreview:render');\n                }\n            }\n        }));\n    });\n    $(document).on('change', '.widget-editor-footer label', function () {\n        $(document).trigger('contentpreview:render');\n    });\n    $(document).on('click', '.widget-list-editor-btn-toggle', function () {\n        $(this).closest('.widget-editor').toggleClass('collapsed');\n    });\n});\n"],"names":["$","document","on","event","type","data","targetId","htmlFieldPrefix","createEditorUrl","prefixesName","parentContentType","partName","zonesName","zone","indexes","closest","find","filter","i","e","val","substring","lastIndexOf","map","parseInt","prefix","index","length","Math","max","toString","contentTypesName","contentItemsName","ajax","url","done","result","JSON","parse","getElementById","append","Content","dom","Scripts","each","globalEval","text","textContent","innerHTML","target","insertBefore","$this","confirmDialog","_objectSpread","callback","r","remove","trigger","toggleClass"],"mappings":"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"}
