{"version":3,"sources":["<anon>"],"sourcesContent":["function getPrefixIndex(prefix, container) {\n    return Math.max(...container.querySelectorAll(`input[name*='${prefix}-']`).values().map(input => parseInt(input.value.substring(input.value.lastIndexOf('-') + 1)) || 0)) + 1;\n}\n(function () {\n    document.addEventListener('click', function (event) {\n        if (event.target.classList.contains('add-list-widget')) {\n            var type = event.target.dataset.widgetType;\n            var targetId = event.target.dataset.targetId;\n            var htmlFieldPrefix = event.target.dataset.htmlFieldPrefix;\n            var createEditorUrl = document.getElementById(targetId).dataset.buildeditorurl;\n            var prefixesName = event.target.dataset.prefixesName;\n            var parentContentType = event.target.dataset.parentContentType;\n            var partName = event.target.dataset.partName;\n            var zonesName = event.target.dataset.zonesName;\n            var zone = event.target.dataset.zone;\n            var index = getPrefixIndex(htmlFieldPrefix, document.getElementById(targetId).closest(\"form\"));\n            var prefix = htmlFieldPrefix + '-' + index.toString();\n            var contentTypesName = event.target.dataset.contenttypesName;\n            var contentItemsName = event.target.dataset.contentitemsName;\n            fetch(`${createEditorUrl}?id=${type}&prefix=${prefix}&prefixesName=${prefixesName}&contentTypesName=${contentTypesName}&contentItemsName=${contentItemsName}&zonesName=${zonesName}&zone=${zone}&targetId=${targetId}&parentContentType=${parentContentType}&partName=${partName}`)\n                .then(response => response.json())\n                .then(data => {\n                    document.getElementById(targetId).insertAdjacentHTML('beforeend', data.Content);\n                    var dom = new DOMParser().parseFromString(data.Scripts, 'text/html');\n                    Array.from(dom.querySelectorAll('script')).forEach(script => {\n                        eval(script.textContent || script.innerHTML);\n                    });\n                });\n        } else if (event.target.classList.contains('insert-list-widget')) {\n            var type = event.target.dataset.widgetType;\n            var target = event.target.closest('.widget-template');\n            var targetId = event.target.dataset.targetId;\n            var htmlFieldPrefix = event.target.dataset.htmlFieldPrefix;\n            var createEditorUrl = document.getElementById(targetId).dataset.buildeditorurl;\n            var prefixesName = event.target.dataset.prefixesName;\n            var parentContentType = event.target.dataset.parentContentType;\n            var partName = event.target.dataset.partName;\n            var zonesName = event.target.dataset.zonesName;\n            var zone = event.target.dataset.zone;\n            var index = getPrefixIndex(htmlFieldPrefix, document.getElementById(targetId).closest(\"form\"));\n            var prefix = htmlFieldPrefix + '-' + index.toString();\n            var contentTypesName = event.target.dataset.contenttypesName;\n            var contentItemsName = event.target.dataset.contentitemsName;\n            fetch(`${createEditorUrl}?id=${type}&prefix=${prefix}&prefixesName=${prefixesName}&contentTypesName=${contentTypesName}&contentItemsName=${contentItemsName}&zonesName=${zonesName}&zone=${zone}&targetId=${targetId}&parentContentType=${parentContentType}&partName=${partName}`)\n                .then(response => response.json())\n                .then(data => {\n                    target.insertAdjacentHTML('beforebegin', data.Content);\n                    var dom = new DOMParser().parseFromString(data.Scripts, 'text/html');\n                    Array.from(dom.querySelectorAll('script')).forEach(script => {\n                        eval(script.textContent || script.innerHTML);\n                    });\n                });\n        }\n    });\n    document.addEventListener('click', function (event) {\n        if (event.target.classList.contains('widget-list-delete')) {\n            var $this = event.target;\n            confirmDialog(_objectSpread({}, $this.dataset, {\n                callback: function callback(r) {\n                    if (r) {\n                        $this.closest('.widget-template').remove();\n                        document.dispatchEvent(new CustomEvent('contentpreview:render'));\n                    }\n                }\n            }));\n        }\n    });\n    document.addEventListener('change', function (event) {\n        if (event.target.closest('.widget-editor-footer')) {\n            document.dispatchEvent(new CustomEvent('contentpreview:render'));\n        }\n    });\n    document.addEventListener('click', function (event) {\n        if (event.target.classList.contains('widget-list-editor-btn-toggle')) {\n            event.target.closest('.widget-editor').classList.toggle('collapsed');\n        }\n    });\n})();\n"],"names":["getPrefixIndex","prefix","container","Math","max","querySelectorAll","values","map","input","parseInt","value","substring","lastIndexOf","document","addEventListener","event","target","classList","contains","type","dataset","widgetType","targetId","htmlFieldPrefix","createEditorUrl","getElementById","buildeditorurl","prefixesName","parentContentType","partName","zonesName","zone","index","closest","toString","contentTypesName","contenttypesName","contentItemsName","contentitemsName","fetch","then","response","json","data","insertAdjacentHTML","Content","dom","DOMParser","parseFromString","Scripts","Array","from","forEach","script","eval","textContent","innerHTML","$this","confirmDialog","_objectSpread","callback","r","remove","dispatchEvent","CustomEvent","toggle"],"mappings":"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"}
