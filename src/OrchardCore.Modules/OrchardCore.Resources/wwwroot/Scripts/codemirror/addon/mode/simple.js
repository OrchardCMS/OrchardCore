!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t){if(!e.hasOwnProperty(t))throw Error("Undefined state "+t+" in simple mode")}function n(e,t){if(!e)return/(?:)/;var n="";return e instanceof RegExp?(e.ignoreCase&&(n="i"),e.unicode&&(n+="u"),e=e.source):e=String(e),RegExp((!1===t?"":"^")+"(?:"+e+")",n)}function a(e,a){(e.next||e.push)&&t(a,e.next||e.push),this.regex=n(e.regex),this.token=function(e){if(!e)return null;if(e.apply)return e;if("string"==typeof e)return e.replace(/\./g," ");for(var t=[],n=0;n<e.length;n++)t.push(e[n]&&e[n].replace(/\./g," "));return t}(e.token),this.data=e}e.defineSimpleMode=function(t,n){e.defineMode(t,function(t){return e.simpleMode(t,n)})},e.simpleMode=function(r,o){t(o,"start");var i,l,s,d,c={},p=o.meta||{},u=!1;for(var f in o)if(f!=p&&o.hasOwnProperty(f))for(var h=c[f]=[],g=o[f],S=0;S<g.length;S++){var m=g[S];h.push(new a(m,o)),(m.indent||m.dedent)&&(u=!0)}var v={startState:function(){return{state:"start",pending:null,local:null,localState:null,indent:u?[]:null}},copyState:function(t){var n={state:t.state,pending:t.pending,local:t.local,localState:null,indent:t.indent&&t.indent.slice(0)};t.localState&&(n.localState=e.copyState(t.local.mode,t.localState)),t.stack&&(n.stack=t.stack.slice(0));for(var a=t.persistentStates;a;a=a.next)n.persistentStates={mode:a.mode,spec:a.spec,state:a.state==t.localState?n.localState:e.copyState(a.mode,a.state),next:n.persistentStates};return n},token:(i=c,l=r,function(t,a){if(a.pending){var r=a.pending.shift();return 0==a.pending.length&&(a.pending=null),t.pos+=r.text.length,r.token}if(a.local){if(a.local.end&&t.match(a.local.end)){var o=a.local.endToken||null;return a.local=a.localState=null,o}var s,o=a.local.mode.token(t,a.localState);return a.local.endScan&&(s=a.local.endScan.exec(t.current()))&&(t.pos=t.start+s.index),o}for(var d=i[a.state],c=0;c<d.length;c++){var p=d[c],u=(!p.data.sol||t.sol())&&t.match(p.regex);if(u){p.data.next?a.state=p.data.next:p.data.push?((a.stack||(a.stack=[])).push(a.state),a.state=p.data.push):p.data.pop&&a.stack&&a.stack.length&&(a.state=a.stack.pop()),p.data.mode&&function(t,a,r,o){if(r.persistent)for(var i,l=a.persistentStates;l&&!i;l=l.next)(r.spec?function e(t,n){if(t===n)return!0;if(!t||"object"!=typeof t||!n||"object"!=typeof n)return!1;var a=0;for(var r in t)if(t.hasOwnProperty(r)){if(!n.hasOwnProperty(r)||!e(t[r],n[r]))return!1;a++}for(var r in n)n.hasOwnProperty(r)&&a--;return 0==a}(r.spec,l.spec):r.mode==l.mode)&&(i=l);var s=i?i.mode:r.mode||e.getMode(t,r.spec),d=i?i.state:e.startState(s);r.persistent&&!i&&(a.persistentStates={mode:s,spec:r.spec,state:d,next:a.persistentStates}),a.localState=d,a.local={mode:s,end:r.end&&n(r.end),endScan:r.end&&!1!==r.forceEnd&&n(r.end,!1),endToken:o&&o.join?o[o.length-1]:o}}(l,a,p.data.mode,p.token),p.data.indent&&a.indent.push(t.indentation()+l.indentUnit),p.data.dedent&&a.indent.pop();var f=p.token;if(f&&f.apply&&(f=f(u)),u.length>2&&p.token&&"string"!=typeof p.token){for(var h=2;h<u.length;h++)u[h]&&(a.pending||(a.pending=[])).push({text:u[h],token:p.token[h-1]});return t.backUp(u[0].length-(u[1]?u[1].length:0)),f[0]}if(f&&f.join)return f[0];return f}}return t.next(),null}),innerMode:function(e){return e.local&&{mode:e.local.mode,state:e.localState}},indent:(s=c,d=p,function(t,n,a){if(t.local&&t.local.mode.indent)return t.local.mode.indent(t.localState,n,a);if(null==t.indent||t.local||d.dontIndentStates&&function(e,t){for(var n=0;n<t.length;n++)if(t[n]===e)return!0}(t.state,d.dontIndentStates)>-1)return e.Pass;var r=t.indent.length-1,o=s[t.state];e:for(;;){for(var i=0;i<o.length;i++){var l=o[i];if(l.data.dedent&&!1!==l.data.dedentIfLineStart){var c=l.regex.exec(n);if(c&&c[0]){r--,(l.next||l.push)&&(o=s[l.next||l.push]),n=n.slice(c[0].length);continue e}}}break}return r<0?0:t.indent[r]})};if(p)for(var k in p)p.hasOwnProperty(k)&&(v[k]=p[k]);return v}});
//# sourceMappingURL=simple.map