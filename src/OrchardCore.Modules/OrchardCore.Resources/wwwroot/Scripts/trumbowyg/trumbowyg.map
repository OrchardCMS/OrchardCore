{"version":3,"sources":["<anon>"],"sourcesContent":["/**\n * Trumbowyg v2.28.0 - A lightweight WYSIWYG editor\n * Trumbowyg core file\n * ------------------------\n * @link https://alex-d.github.io/Trumbowyg/\n * @license MIT\n * @author Alexandre Demode (Alex-D)\n *         Twitter : @AlexandreDemode\n *         Website : alex-d.fr\n */\njQuery.trumbowyg = {\n    langs: {\n        en: {\n            viewHTML: 'View HTML',\n            undo: 'Undo',\n            redo: 'Redo',\n            formatting: 'Formatting',\n            p: 'Paragraph',\n            blockquote: 'Quote',\n            code: 'Code',\n            header: 'Header',\n            bold: 'Bold',\n            italic: 'Italic',\n            strikethrough: 'Strikethrough',\n            underline: 'Underline',\n            strong: 'Strong',\n            em: 'Emphasis',\n            del: 'Deleted',\n            superscript: 'Superscript',\n            subscript: 'Subscript',\n            unorderedList: 'Unordered list',\n            orderedList: 'Ordered list',\n            insertImage: 'Insert Image',\n            link: 'Link',\n            createLink: 'Insert link',\n            unlink: 'Remove link',\n            _self: 'Same tab (default)',\n            _blank: 'New tab',\n            justifyLeft: 'Align Left',\n            justifyCenter: 'Align Center',\n            justifyRight: 'Align Right',\n            justifyFull: 'Align Justify',\n            horizontalRule: 'Insert horizontal rule',\n            removeformat: 'Remove format',\n            fullscreen: 'Fullscreen',\n            close: 'Close',\n            submit: 'Confirm',\n            reset: 'Cancel',\n            required: 'Required',\n            description: 'Description',\n            title: 'Title',\n            text: 'Text',\n            target: 'Target',\n            width: 'Width'\n        }\n    },\n    // Plugins\n    plugins: {},\n    // SVG Path globally\n    svgPath: null,\n    svgAbsoluteUseHref: false,\n    hideButtonTexts: null\n};\n// Makes default options read-only\nObject.defineProperty(jQuery.trumbowyg, 'defaultOptions', {\n    value: {\n        lang: 'en',\n        fixedBtnPane: false,\n        fixedFullWidth: false,\n        autogrow: false,\n        autogrowOnEnter: false,\n        imageWidthModalEdit: false,\n        hideButtonTexts: null,\n        prefix: 'trumbowyg-',\n        tagClasses: {},\n        semantic: true,\n        semanticKeepAttributes: false,\n        resetCss: false,\n        removeformatPasted: false,\n        tabToIndent: false,\n        tagsToRemove: [],\n        tagsToKeep: ['hr', 'img', 'embed', 'iframe', 'input'],\n        btns: [\n            ['viewHTML'],\n            ['undo', 'redo'], // Only supported in Blink browsers\n            ['formatting'],\n            ['strong', 'em', 'del'],\n            ['superscript', 'subscript'],\n            ['link'],\n            ['insertImage'],\n            ['justifyLeft', 'justifyCenter', 'justifyRight', 'justifyFull'],\n            ['unorderedList', 'orderedList'],\n            ['horizontalRule'],\n            ['removeformat'],\n            ['fullscreen']\n        ],\n        // For custom button definitions\n        btnsDef: {},\n        changeActiveDropdownIcon: false,\n        inlineElementsSelector: 'a,abbr,acronym,b,caption,cite,code,col,dfn,dir,dt,dd,em,font,hr,i,kbd,li,q,span,strikeout,strong,sub,sup,u',\n        pasteHandlers: [],\n        // imgDblClickHandler: default is defined in constructor\n        plugins: {},\n        urlProtocol: false,\n        minimalLinks: false,\n        linkTargets: ['_self', '_blank'],\n        svgPath: null\n    },\n    writable: false,\n    enumerable: true,\n    configurable: false\n});\n(function (navigator, window, document, $) {\n    'use strict';\n    var CONFIRM_EVENT = 'tbwconfirm',\n        CANCEL_EVENT = 'tbwcancel';\n    $.fn.trumbowyg = function (options, params) {\n        var trumbowygDataName = 'trumbowyg';\n        if (options === Object(options) || !options) {\n            return this.each(function () {\n                if (!$(this).data(trumbowygDataName)) {\n                    $(this).data(trumbowygDataName, new Trumbowyg(this, options));\n                }\n            });\n        }\n        if (this.length === 1) {\n            try {\n                var t = $(this).data(trumbowygDataName);\n                switch (options) {\n                    // Exec command\n                    case 'execCmd':\n                        return t.execCmd(params.cmd, params.param, params.forceCss, params.skipTrumbowyg);\n                    // Modal box\n                    case 'openModal':\n                        return t.openModal(params.title, params.content);\n                    case 'closeModal':\n                        return t.closeModal();\n                    case 'openModalInsert':\n                        return t.openModalInsert(params.title, params.fields, params.callback);\n                    // Range\n                    case 'saveRange':\n                        return t.saveRange();\n                    case 'getRange':\n                        return t.range;\n                    case 'getRangeText':\n                        return t.getRangeText();\n                    case 'restoreRange':\n                        return t.restoreRange();\n                    // Enable/disable\n                    case 'enable':\n                        return t.setDisabled(false);\n                    case 'disable':\n                        return t.setDisabled(true);\n                    // Toggle\n                    case 'toggle':\n                        return t.toggle();\n                    // Destroy\n                    case 'destroy':\n                        return t.destroy();\n                    // Empty\n                    case 'empty':\n                        return t.empty();\n                    // HTML\n                    case 'html':\n                        return t.html(params);\n                }\n            } catch (c) {\n            }\n        }\n        return false;\n    };\n    // @param: editorElem is the DOM element\n    var Trumbowyg = function (editorElem, options) {\n        var t = this,\n            trumbowygIconsId = 'trumbowyg-icons',\n            $trumbowyg = $.trumbowyg;\n        // Get the document of the element. It use to makes the plugin\n        // compatible on iframes.\n        t.doc = editorElem.ownerDocument || document;\n        // jQuery object of the editor\n        t.$ta = $(editorElem); // $ta : Textarea\n        t.$c = $(editorElem); // $c : creator\n        options = options || {};\n        // Localization management\n        if (options.lang != null || $trumbowyg.langs[options.lang] != null) {\n            t.lang = $.extend(true, {}, $trumbowyg.langs.en, $trumbowyg.langs[options.lang]);\n        } else {\n            t.lang = $trumbowyg.langs.en;\n        }\n        t.hideButtonTexts = $trumbowyg.hideButtonTexts != null ? $trumbowyg.hideButtonTexts : options.hideButtonTexts;\n        // SVG path\n        var svgPathOption = $trumbowyg.svgPath != null ? $trumbowyg.svgPath : options.svgPath;\n        t.hasSvg = svgPathOption !== false;\n        if (svgPathOption !== false && ($trumbowyg.svgAbsoluteUseHref || $('#' + trumbowygIconsId, t.doc).length === 0)) {\n            if (svgPathOption == null) {\n                // Hack to get svgPathOption based on trumbowyg.js path\n                var $scriptElements = $('script[src]');\n                $scriptElements.each(function (i, scriptElement) {\n                    var source = scriptElement.src;\n                    var matches = source.match('trumbowyg(\\.min)?\\.js');\n                    if (matches != null) {\n                        svgPathOption = source.substring(0, source.indexOf(matches[0])) + 'ui/icons.svg';\n                    }\n                });\n            }\n            // Do not merge with previous if block: svgPathOption can be redefined in it.\n            // Here we are checking that we find a match\n            if (svgPathOption == null) {\n                console.warn('You must define svgPath: https://goo.gl/CfTY9U'); // jshint ignore:line\n            } else if (!$trumbowyg.svgAbsoluteUseHref) {\n                var div = t.doc.createElement('div');\n                div.id = trumbowygIconsId;\n                t.doc.body.insertBefore(div, t.doc.body.childNodes[0]);\n                fetch(svgPathOption, {\n                    method: 'GET',\n                    headers: {\n                        'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8',\n                    }\n                }).then((response) => {\n                    response.text()\n                        .then((svg) => {\n                            div.innerHTML = svg;\n                        });\n                });\n            }\n        }\n        var baseHref = !!t.doc.querySelector('base') ? window.location.href.replace(window.location.hash, '') : '';\n        t.svgPath = $trumbowyg.svgAbsoluteUseHref ? svgPathOption : baseHref;\n        /**\n         * When the button is associated to a empty object\n         * fn and title attributes are defined from the button key value\n         *\n         * For example\n         *      foo: {}\n         * is equivalent to :\n         *      foo: {\n         *          fn: 'foo',\n         *          title: this.lang.foo\n         *      }\n         */\n        var h = t.lang.header, // Header translation\n            isBlinkFunction = function () {\n                return (window.chrome || (window.Intl && Intl.v8BreakIterator)) && 'CSS' in window;\n            };\n        t.btnsDef = {\n            viewHTML: {\n                fn: 'toggle',\n                class: 'trumbowyg-not-disable',\n            },\n            undo: {\n                isSupported: isBlinkFunction,\n                key: 'Z'\n            },\n            redo: {\n                isSupported: isBlinkFunction,\n                key: 'Y'\n            },\n            p: {\n                fn: 'formatBlock'\n            },\n            blockquote: {\n                fn: 'formatBlock'\n            },\n            h1: {\n                fn: 'formatBlock',\n                title: h + ' 1'\n            },\n            h2: {\n                fn: 'formatBlock',\n                title: h + ' 2'\n            },\n            h3: {\n                fn: 'formatBlock',\n                title: h + ' 3'\n            },\n            h4: {\n                fn: 'formatBlock',\n                title: h + ' 4'\n            },\n            h5: {\n                fn: 'formatBlock',\n                title: h + ' 5'\n            },\n            h6: {\n                fn: 'formatBlock',\n                title: h + ' 6'\n            },\n            subscript: {\n                tag: 'sub'\n            },\n            superscript: {\n                tag: 'sup'\n            },\n            bold: {\n                key: 'B',\n                tag: 'b'\n            },\n            italic: {\n                key: 'I',\n                tag: 'i'\n            },\n            underline: {\n                tag: 'u'\n            },\n            strikethrough: {\n                tag: 'strike'\n            },\n            strong: {\n                fn: 'bold',\n                key: 'B'\n            },\n            em: {\n                fn: 'italic',\n                key: 'I'\n            },\n            del: {\n                fn: 'strikethrough'\n            },\n            createLink: {\n                key: 'K',\n                tag: 'a'\n            },\n            unlink: {},\n            insertImage: {},\n            justifyLeft: {\n                tag: 'left',\n                forceCss: true\n            },\n            justifyCenter: {\n                tag: 'center',\n                forceCss: true\n            },\n            justifyRight: {\n                tag: 'right',\n                forceCss: true\n            },\n            justifyFull: {\n                tag: 'justify',\n                forceCss: true\n            },\n            unorderedList: {\n                fn: 'insertUnorderedList',\n                tag: 'ul'\n            },\n            orderedList: {\n                fn: 'insertOrderedList',\n                tag: 'ol'\n            },\n            horizontalRule: {\n                fn: 'insertHorizontalRule'\n            },\n            removeformat: {},\n            fullscreen: {\n                class: 'trumbowyg-not-disable'\n            },\n            close: {\n                fn: 'destroy',\n                class: 'trumbowyg-not-disable'\n            },\n            // Dropdowns\n            formatting: {\n                dropdown: ['p', 'blockquote', 'h1', 'h2', 'h3', 'h4'],\n                ico: 'p'\n            },\n            link: {\n                dropdown: ['createLink', 'unlink']\n            }\n        };\n        // Default Options\n        t.o = $.extend(true, {}, $trumbowyg.defaultOptions, options);\n        if (!t.o.hasOwnProperty('imgDblClickHandler')) {\n            t.o.imgDblClickHandler = t.getDefaultImgDblClickHandler();\n        }\n        t.urlPrefix = t.setupUrlPrefix();\n        t.disabled = t.o.disabled || (editorElem.nodeName === 'TEXTAREA' && editorElem.disabled);\n        if (options.btns) {\n            t.o.btns = options.btns;\n        } else if (!t.o.semantic) {\n            t.o.btns[3] = ['bold', 'italic', 'underline', 'strikethrough'];\n        }\n        $.each(t.o.btnsDef, function (btnName, btnDef) {\n            t.addBtnDef(btnName, btnDef);\n        });\n        // put this here in the event it would be merged in with options\n        t.eventNamespace = 'trumbowyg-event';\n        // Keyboard shortcuts are load in this array\n        t.keys = [];\n        // Tag to button dynamically hydrated\n        t.tagToButton = {};\n        t.tagHandlers = [];\n        // Admit multiple paste handlers\n        t.pasteHandlers = [].concat(t.o.pasteHandlers);\n        // Check if browser is IE\n        t.isIE = navigator.userAgent.indexOf('MSIE') !== -1 || navigator.appVersion.indexOf('Trident/') !== -1;\n        // Check if we are on macOs\n        t.isMac = navigator.platform.toUpperCase().indexOf('MAC') !== -1;\n        t.init();\n    };\n    Trumbowyg.prototype = {\n        DEFAULT_SEMANTIC_MAP: {\n            'b': 'strong',\n            'i': 'em',\n            's': 'del',\n            'strike': 'del',\n            'div': 'p'\n        },\n        init: function () {\n            var t = this;\n            t.height = t.$ta.outerHeight() - 39; // Remove button pane height\n            t.initPlugins();\n            try {\n                // Disable image resize, try-catch for old IE\n                t.doc.execCommand('enableObjectResizing', false, false);\n                t.doc.execCommand('defaultParagraphSeparator', false, 'p');\n            } catch (e) {\n            }\n            t.buildEditor();\n            t.buildBtnPane();\n            t.fixedBtnPaneEvents();\n            t.buildOverlay();\n            setTimeout(function () {\n                if (t.disabled) {\n                    t.setDisabled(true);\n                }\n                t.$c.trigger('tbwinit');\n            });\n        },\n        addBtnDef: function (btnName, btnDef) {\n            this.btnsDef[btnName] = $.extend(btnDef, this.btnsDef[btnName] || {});\n        },\n        setupUrlPrefix: function () {\n            var protocol = this.o.urlProtocol;\n            if (!protocol) {\n                return;\n            }\n            if (typeof (protocol) !== 'string') {\n                return 'https://';\n            }\n            return protocol.replace('://', '') + '://';\n        },\n        buildEditor: function () {\n            var t = this,\n                prefix = t.o.prefix,\n                html = '';\n            t.$box = $('<div/>', {\n                class: prefix + 'box ' + prefix + 'editor-visible ' + prefix + t.o.lang + ' trumbowyg'\n            });\n            t.$edBox = $('<div/>', {\n                class: prefix + 'editor-box',\n            });\n            // $ta = Textarea\n            // $ed = Editor\n            t.isTextarea = t.$ta.is('textarea');\n            if (t.isTextarea) {\n                html = t.$ta.val();\n                t.$ed = $('<div/>')\n                    .appendTo(t.$edBox);\n                t.$box\n                    .insertAfter(t.$ta)\n                    .append(t.$edBox, t.$ta);\n            } else {\n                t.$ed = t.$ta;\n                html = t.$ed.html();\n                t.$ta = $('<textarea/>', {\n                    name: t.$ta.attr('id'),\n                    height: t.height\n                }).val(html);\n                t.$box\n                    .insertAfter(t.$ed)\n                    .append(t.$ta, t.$edBox);\n                t.$edBox.append(t.$ed);\n                t.syncCode();\n            }\n            t.$ta\n                .addClass(prefix + 'textarea')\n                .attr('tabindex', -1)\n            ;\n            t.$ed\n                .addClass(prefix + 'editor')\n                .attr({\n                    contenteditable: true,\n                    dir: t.lang._dir || 'ltr'\n                })\n                .html(html)\n            ;\n            if (t.o.tabindex) {\n                t.$ed.attr('tabindex', t.o.tabindex);\n            }\n            if (t.$c.is('[placeholder]')) {\n                t.$ed.attr('placeholder', t.$c.attr('placeholder'));\n            }\n            if (t.$c.is('[spellcheck]')) {\n                t.$ed.attr('spellcheck', t.$c.attr('spellcheck'));\n            }\n            if (t.o.resetCss) {\n                t.$ed.addClass(prefix + 'reset-css');\n            }\n            t.semanticCode();\n            if (t.o.autogrowOnEnter) {\n                t.$ed.addClass(prefix + 'autogrow-on-enter');\n            }\n            var ctrl = false,\n                composition = false,\n                debounceButtonPaneStatus;\n            t.$ed\n                .on('dblclick', 'img', t.o.imgDblClickHandler)\n                .on('keydown', function (e) {\n                    // append flags to differentiate Chrome spans\n                    var keyCode = e.which;\n                    if (keyCode === 8 || keyCode === 13 || keyCode === 46) {\n                        t.toggleSpan(true);\n                    }\n                    if ((e.ctrlKey || e.metaKey) && !e.altKey) {\n                        ctrl = true;\n                        var key = t.keys[String.fromCharCode(e.which).toUpperCase()];\n                        try {\n                            t.execCmd(key.fn, key.param);\n                            return false;\n                        } catch (c) {\n                        }\n                    } else {\n                        if (t.o.tabToIndent && e.key === 'Tab') {\n                            try {\n                                if (e.shiftKey) {\n                                    t.execCmd('outdent', true, null);\n                                } else {\n                                    t.execCmd('indent', true, null);\n                                }\n                                return false;\n                            } catch (c) {\n                            }\n                        }\n                    }\n                })\n                .on('compositionstart compositionupdate', function () {\n                    composition = true;\n                })\n                .on('keyup compositionend', function (e) {\n                    if (e.type === 'compositionend') {\n                        composition = false;\n                    } else if (composition) {\n                        return;\n                    }\n                    var keyCode = e.which;\n                    if (keyCode >= 37 && keyCode <= 40) {\n                        return;\n                    }\n                    // remove Chrome generated span tags\n                    if (keyCode === 8 || keyCode === 13 || keyCode === 46) {\n                        t.toggleSpan();\n                    }\n                    if ((e.ctrlKey || e.metaKey) && (keyCode === 89 || keyCode === 90)) {\n                        t.semanticCode(false, true);\n                        t.$c.trigger('tbwchange');\n                    } else if (!ctrl && keyCode !== 16 && keyCode !== 17) {\n                        var compositionEndIE = t.isIE ? e.type === 'compositionend' : true;\n                        t.semanticCode(false, compositionEndIE && keyCode === 13);\n                        t.$c.trigger('tbwchange');\n                    } else if (typeof e.which === 'undefined') {\n                        t.semanticCode(false, false, true);\n                    }\n                    setTimeout(function () {\n                        ctrl = false;\n                    }, 50);\n                })\n                .on('input', function (e) {\n                    // Trigger change event when spelling fixes applied\n                    var event = e.originalEvent;\n                    if (typeof event === 'object' && (event.inputType === 'insertReplacementText' ||\n                        (event.inputType === 'insertText' && event.data === null))) {\n                        t.$c.trigger('tbwchange');\n                    }\n                })\n                .on('mouseup keydown keyup', function (e) {\n                    if ((!e.ctrlKey && !e.metaKey) || e.altKey) {\n                        setTimeout(function () { // \"hold on\" to the ctrl key for 50ms\n                            ctrl = false;\n                        }, 50);\n                    }\n                    clearTimeout(debounceButtonPaneStatus);\n                    debounceButtonPaneStatus = setTimeout(function () {\n                        t.updateButtonPaneStatus();\n                    }, 50);\n                })\n                .on('focus blur', function (e) {\n                    if (e.type === 'blur') {\n                        t.clearButtonPaneStatus();\n                    }\n                    t.$c.trigger('tbw' + e.type);\n                    if (t.o.autogrowOnEnter) {\n                        if (t.autogrowOnEnterDontClose) {\n                            return;\n                        }\n                        if (e.type === 'focus') {\n                            t.autogrowOnEnterWasFocused = true;\n                            t.autogrowEditorOnEnter();\n                        } else if (!t.o.autogrow) {\n                            t.$edBox.css({height: t.$edBox.css('min-height')});\n                            t.$c.trigger('tbwresize');\n                        }\n                    }\n                })\n                .on('keyup focus', function () {\n                  if (!t.$ta.val().match(/<.*>/) && !t.$ed.html().match(/<.*>/)) {\n                        setTimeout(function () {\n                            var block = t.isIE ? '<p>' : 'p';\n                            t.doc.execCommand('formatBlock', false, block);\n                            t.syncCode();\n                        }, 0);\n                    }\n                })\n                .on('cut drop', function () {\n                    setTimeout(function () {\n                        t.semanticCode(false, true);\n                        t.$c.trigger('tbwchange');\n                    }, 0);\n                })\n                .on('paste', function (e) {\n                    if (t.o.removeformatPasted) {\n                        e.preventDefault();\n                        if (window.getSelection && window.getSelection().deleteFromDocument) {\n                            window.getSelection().deleteFromDocument();\n                        }\n                        try {\n                            // IE\n                            var text = window.clipboardData.getData('Text');\n                            try {\n                                // <= IE10\n                                t.doc.selection.createRange().pasteHTML(text);\n                            } catch (c) {\n                                // IE 11\n                                t.doc.getSelection().getRangeAt(0).insertNode(t.doc.createTextNode(text));\n                            }\n                            t.$c.trigger('tbwchange', e);\n                        } catch (d) {\n                            // Not IE\n                            t.execCmd('insertText', (e.originalEvent || e).clipboardData.getData('text/plain'));\n                        }\n                    }\n                    // Call pasteHandlers\n                    $.each(t.pasteHandlers, function (i, pasteHandler) {\n                        pasteHandler(e);\n                    });\n                    setTimeout(function () {\n                        t.semanticCode(false, true);\n                        t.$c.trigger('tbwpaste', e);\n                        t.$c.trigger('tbwchange');\n                    }, 0);\n                });\n            t.$ta\n                .on('keyup', function () {\n                    t.$c.trigger('tbwchange');\n                })\n                .on('paste', function () {\n                    setTimeout(function () {\n                        t.$c.trigger('tbwchange');\n                    }, 0);\n                });\n            $(t.doc.body).on('keydown.' + t.eventNamespace, function (e) {\n                if (e.which === 27 && $('.' + prefix + 'modal-box').length >= 1) {\n                    t.closeModal();\n                    return false;\n                }\n            });\n        },\n        //autogrow when entering logic\n        autogrowEditorOnEnter: function () {\n            var t = this;\n            t.$ed.removeClass('autogrow-on-enter');\n            var oldHeight = t.$ed[0].clientHeight;\n            t.$edBox.height('auto');\n            var totalHeight = t.$ed[0].scrollHeight;\n            t.$ed.addClass('autogrow-on-enter');\n            if (oldHeight !== totalHeight) {\n                t.$edBox.height(oldHeight);\n                setTimeout(function () {\n                    t.$edBox.css({height: totalHeight});\n                    t.$c.trigger('tbwresize');\n                }, 0);\n            }\n        },\n        // Build button pane, use o.btns option\n        buildBtnPane: function () {\n            var t = this,\n                prefix = t.o.prefix;\n            var $btnPane = t.$btnPane = $('<div/>', {\n                class: prefix + 'button-pane'\n            });\n            $.each(t.o.btns, function (i, btnGrp) {\n                if (!Array.isArray(btnGrp)) {\n                    btnGrp = [btnGrp];\n                }\n                var $btnGroup = $('<div/>', {\n                    class: prefix + 'button-group ' + ((btnGrp.indexOf('fullscreen') >= 0) ? prefix + 'right' : '')\n                });\n                $.each(btnGrp, function (i, btn) {\n                    try { // Prevent buildBtn error\n                        if (t.isSupportedBtn(btn)) { // It's a supported button\n                            $btnGroup.append(t.buildBtn(btn));\n                        }\n                    } catch (c) {\n                    }\n                });\n                if ($btnGroup.html().trim().length > 0) {\n                    $btnPane.append($btnGroup);\n                }\n            });\n            t.$box.prepend($btnPane);\n        },\n        // Build a button and his action\n        buildBtn: function (btnName) { // btnName is name of the button\n            var t = this,\n                prefix = t.o.prefix,\n                btn = t.btnsDef[btnName],\n                isDropdown = btn.dropdown,\n                hasIcon = btn.hasIcon != null ? btn.hasIcon : true,\n                textDef = t.lang[btnName] || btnName,\n                $btn = $('<button/>', {\n                    type: 'button',\n                    class: prefix + btnName + '-button ' + (btn.class || '') + (!hasIcon ? ' ' + prefix + 'textual-button' : ''),\n                    html: t.hasSvg && hasIcon ?\n                        '<svg><use xlink:href=\"' + t.svgPath + '#' + prefix + (btn.ico || btnName).replace(/([A-Z]+)/g, '-$1').toLowerCase() + '\"/></svg>' :\n                        t.hideButtonTexts ? '' : (btn.text || btn.title || t.lang[btnName] || btnName),\n                    title: (btn.title || btn.text || textDef) + (btn.key ? ' (' + (t.isMac ? 'Cmd' : 'Ctrl') + ' + ' + btn.key + ')' : ''),\n                    tabindex: -1,\n                    mousedown: function () {\n                        if (!isDropdown || $('.' + btnName + '-' + prefix + 'dropdown', t.$box).is(':hidden')) {\n                            $('body', t.doc).trigger('mousedown');\n                        }\n                        if ((t.$btnPane.hasClass(prefix + 'disable') || t.$box.hasClass(prefix + 'disabled')) &&\n                            !$(this).hasClass(prefix + 'active') &&\n                            !$(this).hasClass(prefix + 'not-disable')) {\n                            return false;\n                        }\n                        t.execCmd((isDropdown ? 'dropdown' : false) || btn.fn || btnName, btn.param || btnName, btn.forceCss);\n                        return false;\n                    }\n                });\n            if (isDropdown) {\n                $btn.addClass(prefix + 'open-dropdown');\n                var dropdownPrefix = prefix + 'dropdown',\n                    dropdownOptions = { // the dropdown\n                        class: dropdownPrefix + '-' + btnName + ' ' + dropdownPrefix + ' ' + prefix + 'fixed-top ' + (btn.dropdownClass || '')\n                    };\n                dropdownOptions['data-' + dropdownPrefix] = btnName;\n                var $dropdown = $('<div/>', dropdownOptions);\n                $.each(isDropdown, function (i, def) {\n                    if (t.btnsDef[def] && t.isSupportedBtn(def)) {\n                        $dropdown.append(t.buildSubBtn(def));\n                    }\n                });\n                t.$box.append($dropdown.hide());\n            } else if (btn.key) {\n                t.keys[btn.key] = {\n                    fn: btn.fn || btnName,\n                    param: btn.param || btnName\n                };\n            }\n            if (!isDropdown) {\n                t.tagToButton[(btn.tag || btnName).toLowerCase()] = btnName;\n            }\n            return $btn;\n        },\n        // Build a button for dropdown menu\n        // @param n : name of the subbutton\n        buildSubBtn: function (btnName) {\n            var t = this,\n                prefix = t.o.prefix,\n                btn = t.btnsDef[btnName],\n                hasIcon = btn.hasIcon != null ? btn.hasIcon : true;\n            if (btn.key) {\n                t.keys[btn.key] = {\n                    fn: btn.fn || btnName,\n                    param: btn.param || btnName\n                };\n            }\n            t.tagToButton[(btn.tag || btnName).toLowerCase()] = btnName;\n            return $('<button/>', {\n                type: 'button',\n                class: prefix + btnName + '-dropdown-button ' + (btn.class || '') + (btn.ico ? ' ' + prefix + btn.ico + '-button' : ''),\n                html: t.hasSvg && hasIcon ?\n                    '<svg><use xlink:href=\"' + t.svgPath + '#' + prefix + (btn.ico || btnName).replace(/([A-Z]+)/g, '-$1').toLowerCase() + '\"/></svg>' + (btn.text || btn.title || t.lang[btnName] || btnName) :\n                    (btn.text || btn.title || t.lang[btnName] || btnName),\n                title: (btn.key ? '(' + (t.isMac ? 'Cmd' : 'Ctrl') + ' + ' + btn.key + ')' : null),\n                style: btn.style || null,\n                mousedown: function () {\n                    $('body', t.doc).trigger('mousedown');\n                    t.execCmd(btn.fn || btnName, btn.param || btnName, btn.forceCss);\n                    return false;\n                }\n            });\n        },\n        // Check if button is supported\n        isSupportedBtn: function (btnName) {\n            try {\n                return this.btnsDef[btnName].isSupported();\n            } catch (e) {\n            }\n            return true;\n        },\n        // Build overlay for modal box\n        buildOverlay: function () {\n            var t = this;\n            t.$overlay = $('<div/>', {\n                class: t.o.prefix + 'overlay'\n            }).appendTo(t.$box);\n            return t.$overlay;\n        },\n        showOverlay: function () {\n            var t = this;\n            $(window).trigger('scroll');\n            t.$overlay.fadeIn(200);\n            t.$box.addClass(t.o.prefix + 'box-blur');\n        },\n        hideOverlay: function () {\n            var t = this;\n            t.$overlay.fadeOut(50);\n            t.$box.removeClass(t.o.prefix + 'box-blur');\n        },\n        // Management of fixed button pane\n        fixedBtnPaneEvents: function () {\n            var t = this,\n                fixedFullWidth = t.o.fixedFullWidth,\n                $box = t.$box;\n            if (!t.o.fixedBtnPane) {\n                return;\n            }\n            t.isFixed = false;\n            $(window)\n                .on('scroll.' + t.eventNamespace + ' resize.' + t.eventNamespace, function () {\n                    if (!$box) {\n                        return;\n                    }\n                    t.syncCode();\n                    var scrollTop = $(window).scrollTop(),\n                        offset = $box.offset().top + 1,\n                        $buttonPane = t.$btnPane,\n                        buttonPaneOuterHeight = $buttonPane.outerHeight() - 2;\n                    if ((scrollTop - offset > 0) && ((scrollTop - offset - t.height) < 0)) {\n                        if (!t.isFixed) {\n                            t.isFixed = true;\n                            $buttonPane.css({\n                                position: 'fixed',\n                                top: 0,\n                                left: fixedFullWidth ? 0 : 'auto',\n                                zIndex: 7\n                            });\n                            t.$box.css({paddingTop: $buttonPane.height()});\n                        }\n                        $buttonPane.css({\n                            width: fixedFullWidth ? '100%' : (($box.width() - 1))\n                        });\n                        $('.' + t.o.prefix + 'fixed-top', $box).css({\n                            position: fixedFullWidth ? 'fixed' : 'absolute',\n                            top: fixedFullWidth ? buttonPaneOuterHeight : buttonPaneOuterHeight + (scrollTop - offset),\n                            zIndex: 15\n                        });\n                    } else if (t.isFixed) {\n                        t.isFixed = false;\n                        $buttonPane.removeAttr('style');\n                        t.$box.css({paddingTop: 0});\n                        $('.' + t.o.prefix + 'fixed-top', $box).css({\n                            position: 'absolute',\n                            top: buttonPaneOuterHeight\n                        });\n                    }\n                });\n        },\n        // Disable editor\n        setDisabled: function (disable) {\n            var t = this,\n                prefix = t.o.prefix;\n            t.disabled = disable;\n            if (disable) {\n                t.$ta.attr('disabled', true);\n            } else {\n                t.$ta.removeAttr('disabled');\n            }\n            t.$box.toggleClass(prefix + 'disabled', disable);\n            t.$ed.attr('contenteditable', !disable);\n        },\n        // Destroy the editor\n        destroy: function () {\n            var t = this,\n                prefix = t.o.prefix;\n            if (t.isTextarea) {\n                t.$box.after(\n                    t.$ta\n                        .css({height: ''})\n                        .val(t.html())\n                        .removeClass(prefix + 'textarea')\n                        .show()\n                );\n            } else {\n                t.$box.after(\n                    t.$edBox\n                        .css({height: ''})\n                        .removeClass(prefix + 'editor')\n                        .removeAttr('contenteditable')\n                        .removeAttr('dir')\n                        .html(t.html())\n                        .show()\n                );\n            }\n            t.$ed.off('dblclick', 'img');\n            t.destroyPlugins();\n            t.$box.remove();\n            t.$c.removeData('trumbowyg');\n            $('body').removeClass(prefix + 'body-fullscreen');\n            t.$c.trigger('tbwclose');\n            $(window).off('scroll.' + t.eventNamespace + ' resize.' + t.eventNamespace);\n            $(t.doc.body).off('keydown.' + t.eventNamespace);\n        },\n        // Empty the editor\n        empty: function () {\n            this.doc.execCommand('insertHTML', false, '');\n            this.$ta.val('');\n            this.syncCode(true);\n        },\n        // Function call when click on viewHTML button\n        toggle: function () {\n            var t = this,\n                prefix = t.o.prefix;\n            if (t.o.autogrowOnEnter) {\n                t.autogrowOnEnterDontClose = !t.$box.hasClass(prefix + 'editor-hidden');\n            }\n            t.semanticCode(false, true);\n            t.$c.trigger('tbwchange');\n            setTimeout(function () {\n                t.doc.activeElement.blur();\n                t.$box.toggleClass(prefix + 'editor-hidden ' + prefix + 'editor-visible');\n                t.$btnPane.toggleClass(prefix + 'disable');\n                $('.' + prefix + 'viewHTML-button', t.$btnPane).toggleClass(prefix + 'active');\n                if (t.$box.hasClass(prefix + 'editor-visible')) {\n                    t.$ta.attr('tabindex', -1);\n                } else {\n                    t.$ta.removeAttr('tabindex');\n                }\n                if (t.o.autogrowOnEnter && !t.autogrowOnEnterDontClose) {\n                    t.autogrowEditorOnEnter();\n                }\n            }, 0);\n        },\n        // Remove or add flags to span tags to remove Chrome generated spans\n        toggleSpan: function (addFlag) {\n            var t = this;\n            t.$ed.find('span').each(function () {\n                if (addFlag === true) {\n                    $(this).attr('data-tbw-flag', true);\n                } else {\n                    if ($(this).attr('data-tbw-flag')) {\n                        $(this).removeAttr('data-tbw-flag');\n                    } else {\n                        $(this).contents().unwrap();\n                    }\n                }\n            });\n        },\n        // Open dropdown when click on a button which open that\n        dropdown: function (name) {\n            var t = this,\n                $body = $('body', t.doc),\n                prefix = t.o.prefix,\n                $dropdown = $('[data-' + prefix + 'dropdown=' + name + ']', t.$box),\n                $btn = $('.' + prefix + name + '-button', t.$btnPane),\n                show = $dropdown.is(':hidden');\n            $body.trigger('mousedown');\n            if (show) {\n                var btnOffsetLeft = $btn.offset().left;\n                $btn.addClass(prefix + 'active');\n                $dropdown.css({\n                    position: 'absolute',\n                    top: $btn.offset().top - t.$btnPane.offset().top + $btn.outerHeight(),\n                    left: (t.o.fixedFullWidth && t.isFixed) ? btnOffsetLeft : (btnOffsetLeft - t.$btnPane.offset().left)\n                }).show();\n                $(window).trigger('scroll');\n                $body.on('mousedown.' + t.eventNamespace, function (e) {\n                    if (!$dropdown.is(e.target)) {\n                        $('.' + prefix + 'dropdown', t.$box).hide();\n                        $('.' + prefix + 'active', t.$btnPane).removeClass(prefix + 'active');\n                        $body.off('mousedown.' + t.eventNamespace);\n                    }\n                });\n            }\n        },\n        // HTML Code management\n        html: function (html) {\n            var t = this;\n            if (html != null) {\n                t.$ta.val(html);\n                t.syncCode(true);\n                t.$c.trigger('tbwchange');\n                return t;\n            }\n            return t.$ta.val();\n        },\n        syncTextarea: function () {\n            var t = this;\n            t.$ta.val(t.$ed.text().trim().length > 0 || t.$ed.find(t.o.tagsToKeep.join(',')).length > 0 ? t.$ed.html() : '');\n        },\n        syncCode: function (force) {\n            var t = this;\n            if (!force && t.$ed.is(':visible')) {\n                t.syncTextarea();\n            } else {\n                // wrap the content in a div it's easier to get the inner html\n                var html = $('<div>').html(t.$ta.val());\n                // scrub the html before loading into the doc\n                var safe = $('<div>').append(html);\n                $(t.o.tagsToRemove.join(','), safe).remove();\n                t.$ed.html(safe.contents().html());\n            }\n            if (t.o.autogrow) {\n                t.height = t.$edBox.height();\n                if (t.height !== t.$ta.css('height')) {\n                    t.$ta.css({height: t.height});\n                    t.$c.trigger('tbwresize');\n                }\n            }\n            if (t.o.autogrowOnEnter) {\n                t.$edBox.height('auto');\n                var totalHeight = t.autogrowOnEnterWasFocused ? t.$edBox[0].scrollHeight : t.$edBox.css('min-height');\n                if (totalHeight !== t.$ta.css('height')) {\n                    t.$edBox.css({height: totalHeight});\n                    t.$c.trigger('tbwresize');\n                }\n            }\n        },\n        // Analyse and update to semantic code\n        // @param force : force to sync code from textarea\n        // @param full  : wrap text nodes in <p>\n        // @param keepRange  : leave selection range as it is\n        semanticCode: function (force, full, keepRange) {\n            var t = this;\n            t.saveRange();\n            t.syncCode(force);\n            var restoreRange = true;\n            if (t.range && t.range.collapsed) {\n                restoreRange = false;\n            }\n            if (t.o.semantic) {\n                t.semanticTag('b', t.o.semanticKeepAttributes);\n                t.semanticTag('i', t.o.semanticKeepAttributes);\n                t.semanticTag('s', t.o.semanticKeepAttributes);\n                t.semanticTag('strike', t.o.semanticKeepAttributes);\n                if (full) {\n                    var inlineElementsSelector = t.o.inlineElementsSelector,\n                        blockElementsSelector = ':not(' + inlineElementsSelector + ')';\n                    // Wrap text nodes in span for easier processing\n                    t.$ed.contents().filter(function () {\n                        return this.nodeType === 3 && this.nodeValue.trim().length > 0;\n                    }).wrap('<span data-tbw/>');\n                    // Wrap groups of inline elements in paragraphs (recursive)\n                    var wrapInlinesInParagraphsFrom = function ($from) {\n                        if ($from.length !== 0) {\n                            var $finalParagraph = $from.nextUntil(blockElementsSelector).addBack().wrapAll('<p/>').parent(),\n                                $nextElement = $finalParagraph.nextAll(inlineElementsSelector).first();\n                            $finalParagraph.next('br').remove();\n                            wrapInlinesInParagraphsFrom($nextElement);\n                        }\n                    };\n                    wrapInlinesInParagraphsFrom(t.$ed.children(inlineElementsSelector).first());\n                    t.semanticTag('div', true);\n                    // Get rid of temporary span's\n                    $('[data-tbw]', t.$ed).contents().unwrap();\n                    // Remove empty <p>\n                    t.$ed.find('p:empty').remove();\n                }\n                if (!keepRange && restoreRange) {\n                    t.restoreRange();\n                }\n                t.syncTextarea();\n            }\n        },\n        semanticTag: function (oldTag, copyAttributes, revert) {\n            var newTag, t = this;\n            var tmpTag = oldTag;\n            if (this.o.semantic != null && typeof this.o.semantic === 'object' && this.o.semantic.hasOwnProperty(oldTag)) {\n                newTag = this.o.semantic[oldTag];\n            } else if (this.o.semantic === true && this.DEFAULT_SEMANTIC_MAP.hasOwnProperty(oldTag)) {\n                newTag = this.DEFAULT_SEMANTIC_MAP[oldTag];\n            } else {\n                return;\n            }\n            if(revert) {\n                oldTag = newTag;\n                newTag = tmpTag;\n            }\n            $(oldTag, this.$ed).each(function () {\n                var resetRange = false;\n                var $oldTag = $(this);\n                if ($oldTag.contents().length === 0) {\n                    return false;\n                }\n                if (t.range && t.range.startContainer.parentNode === this) {\n                    resetRange = true;\n                }\n                var $newTag = $('<' + newTag + '/>');\n                $newTag.insertBefore($oldTag);\n                if (copyAttributes) {\n                    $.each($oldTag.prop('attributes'), function () {\n                        $newTag.attr(this.name, this.value);\n                    });\n                }\n                $newTag.html($oldTag.html());\n                $oldTag.remove();\n                if(resetRange === true) {\n                    t.range.selectNodeContents($newTag.get(0));\n                    t.range.collapse(false);\n                }\n            });\n        },\n        // Function call when user click on \"Insert Link\"\n        createLink: function () {\n            var t = this,\n                documentSelection = t.doc.getSelection(),\n                selectedRange = documentSelection.getRangeAt(0),\n                node = documentSelection.focusNode,\n                text = new XMLSerializer().serializeToString(selectedRange.cloneContents()) || selectedRange + '',\n                url,\n                title,\n                target,\n                linkDefaultTarget = t.o.linkTargets[0];\n            while (['A', 'DIV'].indexOf(node.nodeName) < 0) {\n                node = node.parentNode;\n            }\n            if (node && node.nodeName === 'A') {\n                var $a = $(node);\n                text = $a.text();\n                url = $a.attr('href');\n                if (!t.o.minimalLinks) {\n                    title = $a.attr('title');\n                    target = $a.attr('target') || linkDefaultTarget;\n                }\n                var range = t.doc.createRange();\n                range.selectNode(node);\n                documentSelection.removeAllRanges();\n                documentSelection.addRange(range);\n            }\n            t.saveRange();\n            var options = {\n                url: {\n                    label: t.lang.linkUrl || 'URL',\n                    required: true,\n                    value: url\n                },\n                text: {\n                    label: t.lang.text,\n                    value: text\n                }\n            };\n            if (!t.o.minimalLinks) {\n                var targetOptions = t.o.linkTargets.reduce(function (options, optionValue) {\n                    options[optionValue] = t.lang[optionValue];\n                    return options;\n                }, {});\n                $.extend(options, {\n                    title: {\n                        label: t.lang.title,\n                        value: title\n                    },\n                    target: {\n                        label: t.lang.target,\n                        value: target,\n                        options: targetOptions\n                    }\n                });\n            }\n            t.openModalInsert(t.lang.createLink, options, function (v) { // v is value\n                var url = t.prependUrlPrefix(v.url);\n                if (!url.length) {\n                    return false;\n                }\n                var link = $(['<a href=\"', url, '\">', v.text || v.url, '</a>'].join(''));\n                if (v.title) {\n                    link.attr('title', v.title);\n                }\n                if (v.target || linkDefaultTarget) {\n                    link.attr('target', v.target || linkDefaultTarget);\n                }\n                t.range.deleteContents();\n                t.range.insertNode(link[0]);\n                t.syncCode();\n                t.$c.trigger('tbwchange');\n                return true;\n            });\n        },\n        prependUrlPrefix: function (url) {\n            var t = this;\n            if (!t.urlPrefix) {\n                return url;\n            }\n            var VALID_LINK_PREFIX = /^([a-z][-+.a-z0-9]*:|\\/|#)/i;\n            if (VALID_LINK_PREFIX.test(url)) {\n                return url;\n            }\n            var SIMPLE_EMAIL_REGEX = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n            if (SIMPLE_EMAIL_REGEX.test(url)) {\n                return 'mailto:' + url;\n            }\n            return t.urlPrefix + url;\n        },\n        unlink: function () {\n            var t = this,\n                documentSelection = t.doc.getSelection(),\n                node = documentSelection.focusNode;\n            if (documentSelection.isCollapsed) {\n                while (['A', 'DIV'].indexOf(node.nodeName) < 0) {\n                    node = node.parentNode;\n                }\n                if (node && node.nodeName === 'A') {\n                    var range = t.doc.createRange();\n                    range.selectNode(node);\n                    documentSelection.removeAllRanges();\n                    documentSelection.addRange(range);\n                }\n            }\n            t.execCmd('unlink', undefined, undefined, true);\n        },\n        insertImage: function () {\n            var t = this;\n            t.saveRange();\n            var options = {\n                url: {\n                    label: 'URL',\n                    required: true\n                },\n                alt: {\n                    label: t.lang.description,\n                    value: t.getRangeText()\n                }\n            };\n            if (t.o.imageWidthModalEdit) {\n                options.width = {};\n            }\n            t.openModalInsert(t.lang.insertImage, options, function (v) { // v are values\n                t.execCmd('insertImage', v.url, false, true);\n                var $img = $('img[src=\"' + v.url + '\"]:not([alt])', t.$box);\n                $img.attr('alt', v.alt);\n                if (t.o.imageWidthModalEdit) {\n                    $img.attr({\n                        width: v.width\n                    });\n                }\n                t.syncCode();\n                t.$c.trigger('tbwchange');\n                return true;\n            });\n        },\n        fullscreen: function () {\n            var t = this,\n                prefix = t.o.prefix,\n                fullscreenCssClass = prefix + 'fullscreen',\n                fullscreenPlaceholderClass = fullscreenCssClass + '-placeholder',\n                isFullscreen,\n                editorHeight = t.$box.outerHeight();\n            t.$box.toggleClass(fullscreenCssClass);\n            isFullscreen = t.$box.hasClass(fullscreenCssClass);\n            if (isFullscreen) {\n                t.$box.before(\n                    $('<div/>', {\n                        class: fullscreenPlaceholderClass\n                    }).css({\n                        height: editorHeight\n                    })\n                );\n            } else {\n                $('.' + fullscreenPlaceholderClass).remove();\n            }\n            $('body').toggleClass(prefix + 'body-fullscreen', isFullscreen);\n            $(window).trigger('scroll');\n            t.$c.trigger('tbw' + (isFullscreen ? 'open' : 'close') + 'fullscreen');\n        },\n        /*\n         * Call method of trumbowyg if exist\n         * else try to call anonymous function\n         * and finally native execCommand\n         */\n        execCmd: function (cmd, param, forceCss, skipTrumbowyg) {\n            var t = this;\n            skipTrumbowyg = !!skipTrumbowyg || '';\n            if (cmd !== 'dropdown') {\n                t.$ed.focus();\n            }\n            if(cmd === 'strikethrough' && t.o.semantic) {\n                t.semanticTag('strike', t.o.semanticKeepAttributes, true); // browsers cannot undo e.g. <del> as they expect <strike>\n            }\n            try {\n                t.doc.execCommand('styleWithCSS', false, forceCss || false);\n            } catch (c) {\n            }\n            try {\n                t[cmd + skipTrumbowyg](param);\n            } catch (c) {\n                try {\n                    cmd(param);\n                } catch (e2) {\n                    if (cmd === 'insertHorizontalRule') {\n                        param = undefined;\n                    } else if (cmd === 'formatBlock' && t.isIE) {\n                        param = '<' + param + '>';\n                    }\n                    t.doc.execCommand(cmd, false, param);\n                    t.syncCode();\n                    t.semanticCode(false, true);\n                    try {\n                        var listId = window.getSelection().focusNode;\n                        if(!$(window.getSelection().focusNode.parentNode).hasClass('trumbowyg-editor')){\n                            listId = window.getSelection().focusNode.parentNode;\n                        }\n                        var classes = t.o.tagClasses[param];\n                        if (classes) {\n                            $(listId).addClass(classes);\n                        }\n                    } catch (e) {\n                    }\n                }\n                if (cmd !== 'dropdown') {\n                    t.updateButtonPaneStatus();\n                    t.$c.trigger('tbwchange');\n                }\n            }\n        },\n        // Open a modal box\n        openModal: function (title, content, buildForm) {\n            var t = this,\n                prefix = t.o.prefix;\n            buildForm = buildForm !== false;\n            // No open a modal box when exist other modal box\n            if ($('.' + prefix + 'modal-box', t.$box).length > 0) {\n                return false;\n            }\n            if (t.o.autogrowOnEnter) {\n                t.autogrowOnEnterDontClose = true;\n            }\n            t.saveRange();\n            t.showOverlay();\n            // Disable all btnPane btns\n            t.$btnPane.addClass(prefix + 'disable');\n            // Build out of ModalBox, it's the mask for animations\n            var $modal = $('<div/>', {\n                class: prefix + 'modal ' + prefix + 'fixed-top'\n            }).css({\n                top: t.$box.offset().top + t.$btnPane.height(),\n                zIndex: 99999\n            }).appendTo($(t.doc.body));\n            var darkClass = prefix + 'dark';\n            if (t.$c.parents('.' + darkClass).length !== 0) {\n                $modal.addClass(darkClass);\n            }\n            // Click on overlay close modal by cancelling them\n            t.$overlay.one('click', function () {\n                $modal.trigger(CANCEL_EVENT);\n                return false;\n            });\n            // Build the form\n            var formOrContent;\n            if (buildForm) {\n                formOrContent = $('<form/>', {\n                    action: '',\n                    html: content\n                })\n                    .on('submit', function () {\n                        $modal.trigger(CONFIRM_EVENT);\n                        return false;\n                    })\n                    .on('reset', function () {\n                        $modal.trigger(CANCEL_EVENT);\n                        return false;\n                    })\n                    .on('submit reset', function () {\n                        if (t.o.autogrowOnEnter) {\n                            t.autogrowOnEnterDontClose = false;\n                        }\n                    });\n            } else {\n                formOrContent = content;\n            }\n            // Build ModalBox and animate to show them\n            var $box = $('<div/>', {\n                class: prefix + 'modal-box',\n                html: formOrContent\n            })\n                .css({\n                    top: '-' + t.$btnPane.outerHeight(),\n                    opacity: 0,\n                    paddingBottom: buildForm ? null : '5%',\n                })\n                .appendTo($modal)\n                .animate({\n                    top: 0,\n                    opacity: 1\n                }, 100);\n            // Append title\n            if (title) {\n                $('<span/>', {\n                    text: title,\n                    class: prefix + 'modal-title'\n                }).prependTo($box);\n            }\n            if (buildForm) {\n                // Focus in modal box\n                $(':input:first', $box).focus();\n                // Append Confirm and Cancel buttons\n                t.buildModalBtn('submit', $box);\n                t.buildModalBtn('reset', $box);\n                $modal.height($box.outerHeight() + 10);\n            }\n            $(window).trigger('scroll');\n            t.$c.trigger('tbwmodalopen');\n            return $modal;\n        },\n        // @param n is name of modal\n        buildModalBtn: function (n, $modal) {\n            var t = this,\n                prefix = t.o.prefix;\n            return $('<button/>', {\n                class: prefix + 'modal-button ' + prefix + 'modal-' + n,\n                type: n,\n                text: t.lang[n] || n\n            }).appendTo($('form', $modal));\n        },\n        // close current modal box\n        closeModal: function () {\n            var t = this,\n                prefix = t.o.prefix;\n            t.$btnPane.removeClass(prefix + 'disable');\n            t.$overlay.off();\n            // Find the modal box\n            var $modalBox = $('.' + prefix + 'modal-box', $(t.doc.body));\n            $modalBox.animate({\n                top: '-' + $modalBox.height()\n            }, 100, function () {\n                $modalBox.parent().remove();\n                t.hideOverlay();\n                t.$c.trigger('tbwmodalclose');\n            });\n            t.restoreRange();\n        },\n        // Pre-formatted build and management modal\n        openModalInsert: function (title, fields, cmd) {\n            var t = this,\n                prefix = t.o.prefix,\n                lg = t.lang,\n                html = '',\n                idPrefix = prefix + 'form-' + Date.now() + '-';\n            $.each(fields, function (fieldName, field) {\n                var l = field.label || fieldName,\n                    n = field.name || fieldName,\n                    a = field.attributes || {},\n                    fieldId = idPrefix + fieldName;\n                var attr = Object.keys(a).map(function (prop) {\n                    return prop + '=\"' + a[prop] + '\"';\n                }).join(' ');\n                if (typeof field.type === 'function') {\n                  if (!field.name) {\n                    field.name = n;\n                  }\n                  html += field.type(field, fieldId, prefix, lg);\n                  return;\n                }\n                html += '<div class=\"' + prefix + 'input-row\">';\n                html += '<div class=\"' + prefix + 'input-infos\"><label for=\"' + fieldId + '\"><span>' + (lg[l] ? lg[l] : l) + '</span></label></div>';\n                html += '<div class=\"' + prefix + 'input-html\">';\n                if ($.isPlainObject(field.options)) {\n                    html += '<select name=\"target\">';\n                    html += Object.keys(field.options).map((optionValue) => {\n                        return '<option value=\"' + optionValue + '\" ' + (optionValue === field.value ? 'selected' : '') + '>' + field.options[optionValue] + '</option>';\n                    }).join('');\n                    html += '</select>';\n                } else {\n                    html += '<input id=\"' + fieldId + '\" type=\"' + (field.type || 'text') + '\" name=\"' + n + '\" ' + attr;\n                    html += (field.type === 'checkbox' && field.value ? ' checked=\"checked\"' : '') + ' value=\"' + (field.value || '').replace(/\"/g, '&quot;') + '\">';\n                }\n                html += '</div></div>';\n            });\n            return t.openModal(title, html)\n                .on(CONFIRM_EVENT, function () {\n                    var $form = $('form', $(this)),\n                        valid = true,\n                        values = {};\n                    $.each(fields, function (fieldName, field) {\n                        var n = field.name || fieldName;\n                        var $field = $(':input[name=\"' + n + '\"]', $form),\n                            inputType = $field[0].type;\n                        switch (inputType.toLowerCase()) {\n                            case 'checkbox':\n                                values[n] = $field.is(':checked');\n                                break;\n                            case 'radio':\n                                values[n] = $field.filter(':checked').val();\n                                break;\n                            default:\n                                values[n] = $field.val().trim();\n                                break;\n                        }\n                        // Validate value\n                        if (field.required && values[n] === '') {\n                            valid = false;\n                            t.addErrorOnModalField($field, t.lang.required);\n                        } else if (field.pattern && !field.pattern.test(values[n])) {\n                            valid = false;\n                            t.addErrorOnModalField($field, field.patternError);\n                        }\n                    });\n                    if (valid) {\n                        t.restoreRange();\n                        if (cmd(values, fields)) {\n                            t.syncCode();\n                            t.$c.trigger('tbwchange');\n                            t.closeModal();\n                            $(this).off(CONFIRM_EVENT);\n                        }\n                    }\n                })\n                .one(CANCEL_EVENT, function () {\n                    $(this).off(CONFIRM_EVENT);\n                    t.closeModal();\n                });\n        },\n        addErrorOnModalField: function ($field, err) {\n            var prefix = this.o.prefix,\n                spanErrorClass = prefix + 'msg-error',\n                $row = $field.closest('.' + prefix + 'input-row');\n            $field\n                .one('change keyup', function () {\n                    $row.removeClass(prefix + 'input-error');\n                });\n            $row.find('.' + spanErrorClass).remove();\n            $row\n                .addClass(prefix + 'input-error')\n                .find('.' + prefix + 'input-infos label')\n                .append(\n                    $('<span/>', {\n                        class: spanErrorClass,\n                        text: err\n                    })\n                );\n        },\n        getDefaultImgDblClickHandler: function () {\n            var t = this;\n            return function () {\n                var $img = $(this),\n                    src = $img.attr('src'),\n                    base64 = '(Base64)';\n                if (src.indexOf('data:image') === 0) {\n                    src = base64;\n                }\n                var options = {\n                    url: {\n                        label: 'URL',\n                        value: src,\n                        required: true\n                    },\n                    alt: {\n                        label: t.lang.description,\n                        value: $img.attr('alt')\n                    }\n                };\n                if (t.o.imageWidthModalEdit) {\n                    options.width = {\n                        value: $img.attr('width') ? $img.attr('width') : ''\n                    };\n                }\n                t.openModalInsert(t.lang.insertImage, options, function (v) {\n                    if (v.url !== base64) {\n                        $img.attr({\n                            src: v.url\n                        });\n                    }\n                    $img.attr({\n                        alt: v.alt\n                    });\n                    if (t.o.imageWidthModalEdit) {\n                        if (parseInt(v.width) > 0) {\n                            $img.attr({\n                                width: v.width\n                            });\n                        } else {\n                            $img.removeAttr('width');\n                        }\n                    }\n                    return true;\n                });\n                return false;\n            };\n        },\n        // Range management\n        saveRange: function () {\n            var t = this,\n                documentSelection = t.doc.getSelection();\n            t.range = null;\n            if (!documentSelection || !documentSelection.rangeCount) {\n                return;\n            }\n            var savedRange = t.range = documentSelection.getRangeAt(0),\n                range = t.doc.createRange(),\n                rangeStart;\n            range.selectNodeContents(t.$ed[0]);\n            range.setEnd(savedRange.startContainer, savedRange.startOffset);\n            rangeStart = (range + '').length;\n            t.metaRange = {\n                start: rangeStart,\n                end: rangeStart + (savedRange + '').length\n            };\n        },\n        restoreRange: function () {\n            var t = this,\n                metaRange = t.metaRange,\n                savedRange = t.range,\n                documentSelection = t.doc.getSelection(),\n                range;\n            if (!savedRange) {\n                return;\n            }\n            if (metaRange && metaRange.start !== metaRange.end) { // Algorithm from http://jsfiddle.net/WeWy7/3/\n                var charIndex = 0,\n                    nodeStack = [t.$ed[0]],\n                    node,\n                    foundStart = false,\n                    stop = false;\n                range = t.doc.createRange();\n                while (!stop && (node = nodeStack.pop())) {\n                    if (node.nodeType === 3) {\n                        var nextCharIndex = charIndex + node.length;\n                        if (!foundStart && metaRange.start >= charIndex && metaRange.start <= nextCharIndex) {\n                            range.setStart(node, metaRange.start - charIndex);\n                            foundStart = true;\n                        }\n                        if (foundStart && metaRange.end >= charIndex && metaRange.end <= nextCharIndex) {\n                            range.setEnd(node, metaRange.end - charIndex);\n                            stop = true;\n                        }\n                        charIndex = nextCharIndex;\n                    } else {\n                        var cn = node.childNodes,\n                            i = cn.length;\n                        while (i > 0) {\n                            i -= 1;\n                            nodeStack.push(cn[i]);\n                        }\n                    }\n                }\n            }\n            // Fix IE11 Error 'Could not complete the operation due to error 800a025e'.\n            // https://stackoverflow.com/questions/16160996/could-not-complete-the-operation-due-to-error-800a025e\n            try {\n                documentSelection.removeAllRanges();\n            } catch (e) {\n            }\n            documentSelection.addRange(range || savedRange);\n        },\n        getRangeText: function () {\n            return this.range + '';\n        },\n        clearButtonPaneStatus: function () {\n            var t = this,\n                prefix = t.o.prefix,\n                activeClasses = prefix + 'active-button ' + prefix + 'active',\n                originalIconClass = prefix + 'original-icon';\n            // Reset all buttons and dropdown state\n            $('.' + prefix + 'active-button', t.$btnPane).removeClass(activeClasses);\n            $('.' + originalIconClass, t.$btnPane).each(function () {\n                $(this).find('svg use').attr('xlink:href', $(this).data(originalIconClass));\n            });\n        },\n        updateButtonPaneStatus: function () {\n            var t = this,\n                prefix = t.o.prefix,\n                activeClasses = prefix + 'active-button ' + prefix + 'active',\n                originalIconClass = prefix + 'original-icon',\n                tags = t.getTagsRecursive(t.doc.getSelection().anchorNode);\n            t.clearButtonPaneStatus();\n            $.each(tags, function (i, tag) {\n                var btnName = t.tagToButton[tag.toLowerCase()],\n                    $btn = $('.' + prefix + btnName + '-button', t.$btnPane);\n                if ($btn.length > 0) {\n                    $btn.addClass(activeClasses);\n                } else {\n                    try {\n                        $btn = $('.' + prefix + 'dropdown .' + prefix + btnName + '-dropdown-button', t.$box);\n                        var $btnSvgUse = $btn.find('svg use'),\n                            dropdownBtnName = $btn.parent().data(prefix + 'dropdown'),\n                            $dropdownBtn = $('.' + prefix + dropdownBtnName + '-button', t.$box),\n                            $dropdownBtnSvgUse = $dropdownBtn.find('svg use');\n                        // Highlight the dropdown button\n                        $dropdownBtn.addClass(activeClasses);\n                        // Switch dropdown icon to the active sub-icon one\n                        if (t.o.changeActiveDropdownIcon && $btnSvgUse.length > 0) {\n                            // Save original icon\n                            $dropdownBtn\n                                .addClass(originalIconClass)\n                                .data(originalIconClass, $dropdownBtnSvgUse.attr('xlink:href'));\n                            // Put the active sub-button's icon\n                            $dropdownBtnSvgUse\n                                .attr('xlink:href', $btnSvgUse.attr('xlink:href'));\n                        }\n                    } catch (e) {\n                    }\n                }\n            });\n        },\n        getTagsRecursive: function (element, tags) {\n            var t = this;\n            tags = tags || (element && element.tagName ? [element.tagName] : []);\n            if (element && element.parentNode) {\n                if (element.nodeType !== Node.ELEMENT_NODE) {\n                    element = element.parentNode;\n                }\n            } else {\n                return tags;\n            }\n            var tag = element.tagName;\n            if (tag === 'DIV') {\n                return tags;\n            }\n            if (tag === 'P' && element.style.textAlign !== '') {\n                tags.push(element.style.textAlign);\n            }\n            $.each(t.tagHandlers, function (i, tagHandler) {\n                tags = tags.concat(tagHandler(element, t));\n            });\n            tags.push(tag);\n            return t.getTagsRecursive(element.parentNode, tags).filter(function (tag) {\n                return tag != null;\n            });\n        },\n        // Plugins\n        initPlugins: function () {\n            var t = this;\n            t.loadedPlugins = [];\n            $.each($.trumbowyg.plugins, function (name, plugin) {\n                if (!plugin.shouldInit || plugin.shouldInit(t)) {\n                    plugin.init(t);\n                    if (plugin.tagHandler) {\n                        t.tagHandlers.push(plugin.tagHandler);\n                    }\n                    t.loadedPlugins.push(plugin);\n                }\n            });\n        },\n        destroyPlugins: function () {\n            var t = this;\n            $.each(this.loadedPlugins, function (i, plugin) {\n                if (plugin.destroy) {\n                    plugin.destroy(t);\n                }\n            });\n        }\n    };\n})(navigator, window, document, jQuery);\n"],"names":["jQuery","trumbowyg","langs","en","viewHTML","undo","redo","formatting","p","blockquote","code","header","bold","italic","strikethrough","underline","strong","em","del","superscript","subscript","unorderedList","orderedList","insertImage","link","createLink","unlink","_self","_blank","justifyLeft","justifyCenter","justifyRight","justifyFull","horizontalRule","removeformat","fullscreen","close","submit","reset","required","description","title","text","target","width","plugins","svgPath","svgAbsoluteUseHref","hideButtonTexts","Object","defineProperty","value","lang","fixedBtnPane","fixedFullWidth","autogrow","autogrowOnEnter","imageWidthModalEdit","prefix","tagClasses","semantic","semanticKeepAttributes","resetCss","removeformatPasted","tabToIndent","tagsToRemove","tagsToKeep","btns","btnsDef","changeActiveDropdownIcon","inlineElementsSelector","pasteHandlers","urlProtocol","minimalLinks","linkTargets","writable","enumerable","configurable","navigator","window","document","$","CONFIRM_EVENT","CANCEL_EVENT","fn","options","params","trumbowygDataName","each","data","Trumbowyg","length","t","execCmd","cmd","param","forceCss","skipTrumbowyg","openModal","content","closeModal","openModalInsert","fields","callback","saveRange","range","getRangeText","restoreRange","setDisabled","toggle","destroy","empty","html","c","editorElem","trumbowygIconsId","$trumbowyg","doc","ownerDocument","$ta","$c","extend","svgPathOption","hasSvg","$scriptElements","i","scriptElement","source","src","matches","match","substring","indexOf","console","warn","div","createElement","id","body","insertBefore","childNodes","fetch","method","headers","then","response","svg","innerHTML","baseHref","querySelector","location","href","replace","hash","h","isBlinkFunction","chrome","Intl","v8BreakIterator","class","isSupported","key","h1","h2","h3","h4","h5","h6","tag","dropdown","ico","o","defaultOptions","hasOwnProperty","imgDblClickHandler","getDefaultImgDblClickHandler","urlPrefix","setupUrlPrefix","disabled","nodeName","btnName","btnDef","addBtnDef","eventNamespace","keys","tagToButton","tagHandlers","concat","isIE","userAgent","appVersion","isMac","platform","toUpperCase","init","prototype","DEFAULT_SEMANTIC_MAP","height","outerHeight","initPlugins","execCommand","e","buildEditor","buildBtnPane","fixedBtnPaneEvents","buildOverlay","setTimeout","trigger","protocol","$box","$edBox","isTextarea","is","val","$ed","appendTo","insertAfter","append","name","attr","syncCode","addClass","contenteditable","dir","_dir","tabindex","semanticCode","debounceButtonPaneStatus","ctrl","composition","on","keyCode","which","toggleSpan","ctrlKey","metaKey","altKey","String","fromCharCode","shiftKey","type","compositionEndIE","event","originalEvent","inputType","clearTimeout","updateButtonPaneStatus","clearButtonPaneStatus","autogrowOnEnterDontClose","autogrowOnEnterWasFocused","autogrowEditorOnEnter","css","block","preventDefault","getSelection","deleteFromDocument","clipboardData","getData","selection","createRange","pasteHTML","getRangeAt","insertNode","createTextNode","d","pasteHandler","removeClass","oldHeight","clientHeight","totalHeight","scrollHeight","$btnPane","btnGrp","Array","isArray","$btnGroup","btn","isSupportedBtn","buildBtn","trim","prepend","isDropdown","hasIcon","textDef","$btn","toLowerCase","mousedown","hasClass","dropdownPrefix","dropdownOptions","dropdownClass","$dropdown","def","buildSubBtn","hide","style","$overlay","showOverlay","fadeIn","hideOverlay","fadeOut","isFixed","scrollTop","offset","top","$buttonPane","buttonPaneOuterHeight","position","left","zIndex","paddingTop","removeAttr","disable","toggleClass","after","show","off","destroyPlugins","remove","removeData","activeElement","blur","addFlag","find","contents","unwrap","$body","btnOffsetLeft","syncTextarea","join","force","safe","full","keepRange","collapsed","semanticTag","blockElementsSelector","filter","nodeType","nodeValue","wrap","wrapInlinesInParagraphsFrom","$from","$finalParagraph","nextUntil","addBack","wrapAll","parent","$nextElement","nextAll","first","next","children","oldTag","copyAttributes","revert","newTag","tmpTag","resetRange","$oldTag","startContainer","parentNode","$newTag","prop","selectNodeContents","get","collapse","url","documentSelection","selectedRange","node","focusNode","XMLSerializer","serializeToString","cloneContents","linkDefaultTarget","$a","selectNode","removeAllRanges","addRange","label","linkUrl","targetOptions","reduce","optionValue","v","prependUrlPrefix","deleteContents","VALID_LINK_PREFIX","test","SIMPLE_EMAIL_REGEX","isCollapsed","undefined","alt","$img","isFullscreen","fullscreenCssClass","fullscreenPlaceholderClass","editorHeight","before","focus","e2","listId","classes","buildForm","formOrContent","$modal","darkClass","parents","one","action","opacity","paddingBottom","animate","prependTo","buildModalBtn","n","$modalBox","lg","idPrefix","Date","now","fieldName","field","l","a","attributes","fieldId","map","isPlainObject","$form","valid","values","$field","addErrorOnModalField","pattern","patternError","err","spanErrorClass","$row","closest","base64","parseInt","rangeCount","rangeStart","savedRange","setEnd","startOffset","metaRange","start","end","charIndex","nodeStack","foundStart","stop","pop","nextCharIndex","setStart","cn","push","originalIconClass","activeClasses","tags","getTagsRecursive","anchorNode","$btnSvgUse","dropdownBtnName","$dropdownBtn","$dropdownBtnSvgUse","element","tagName","Node","ELEMENT_NODE","textAlign","tagHandler","loadedPlugins","plugin","shouldInit"],"mappings":"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"}
