{"version":3,"sources":["<anon>"],"sourcesContent":["/**\n * Trumbowyg v2.31.0 - A lightweight WYSIWYG editor\n * Trumbowyg core file\n * ------------------------\n * @link https://alex-d.github.io/Trumbowyg/\n * @license MIT\n * @author Alexandre Demode (Alex-D)\n *         Twitter : @AlexandreDemode\n *         Website : alex-d.fr\n */\n\njQuery.trumbowyg = {\n    langs: {\n        en: {\n            viewHTML: 'View HTML',\n\n            undo: 'Undo',\n            redo: 'Redo',\n\n            formatting: 'Formatting',\n            p: 'Paragraph',\n            blockquote: 'Quote',\n            code: 'Code',\n            header: 'Header',\n\n            bold: 'Bold',\n            italic: 'Italic',\n            strikethrough: 'Strikethrough',\n            underline: 'Underline',\n\n            strong: 'Strong',\n            em: 'Emphasis',\n            del: 'Deleted',\n\n            superscript: 'Superscript',\n            subscript: 'Subscript',\n\n            unorderedList: 'Unordered list',\n            orderedList: 'Ordered list',\n\n            insertImage: 'Insert Image',\n            link: 'Link',\n            createLink: 'Insert link',\n            unlink: 'Remove link',\n\n            _self: 'Same tab (default)',\n            _blank: 'New tab',\n\n            justifyLeft: 'Align Left',\n            justifyCenter: 'Align Center',\n            justifyRight: 'Align Right',\n            justifyFull: 'Align Justify',\n\n            horizontalRule: 'Insert horizontal rule',\n            removeformat: 'Remove format',\n\n            fullscreen: 'Fullscreen',\n\n            close: 'Close',\n\n            submit: 'Confirm',\n            reset: 'Cancel',\n\n            required: 'Required',\n            description: 'Description',\n            title: 'Title',\n            text: 'Text',\n            target: 'Target',\n            width: 'Width'\n        }\n    },\n\n    // Plugins\n    plugins: {},\n\n    // SVG Path globally\n    svgPath: null,\n    svgAbsoluteUseHref: false,\n\n    hideButtonTexts: null\n};\n\n// Makes default options read-only\nObject.defineProperty(jQuery.trumbowyg, 'defaultOptions', {\n    value: {\n        lang: 'en',\n\n        fixedBtnPane: false,\n        fixedFullWidth: false,\n        autogrow: false,\n        autogrowOnEnter: false,\n        imageWidthModalEdit: false,\n        hideButtonTexts: null,\n\n        prefix: 'trumbowyg-',\n        tagClasses: {},\n        semantic: true,\n        semanticKeepAttributes: false,\n        resetCss: false,\n        removeformatPasted: false,\n        tabToIndent: false,\n        tagsToRemove: [],\n        tagsToKeep: ['hr', 'img', 'embed', 'iframe', 'input'],\n        btns: [\n            ['viewHTML'],\n            ['undo', 'redo'], // Only supported in Blink browsers\n            ['formatting'],\n            ['strong', 'em', 'del'],\n            ['superscript', 'subscript'],\n            ['link'],\n            ['insertImage'],\n            ['justifyLeft', 'justifyCenter', 'justifyRight', 'justifyFull'],\n            ['unorderedList', 'orderedList'],\n            ['horizontalRule'],\n            ['removeformat'],\n            ['fullscreen']\n        ],\n        // For custom button definitions\n        btnsDef: {},\n        changeActiveDropdownIcon: false,\n\n        inlineElementsSelector: 'a,abbr,acronym,b,caption,cite,code,col,dfn,dir,dt,dd,em,font,hr,i,kbd,li,q,span,strikeout,strong,sub,sup,u',\n\n        pasteHandlers: [],\n\n        // imgDblClickHandler: default is defined in constructor\n\n        plugins: {},\n\n        urlProtocol: false,\n        minimalLinks: false,\n        linkTargets: ['_self', '_blank'],\n\n        svgPath: null\n    },\n    writable: false,\n    enumerable: true,\n    configurable: false\n});\n\n(function (navigator, window, document, $) {\n    'use strict';\n\n    var CONFIRM_EVENT = 'tbwconfirm',\n        CANCEL_EVENT = 'tbwcancel';\n\n    $.fn.trumbowyg = function (options, params) {\n        var trumbowygDataName = 'trumbowyg';\n        if (options === Object(options) || !options) {\n            return this.each(function () {\n                if (!$(this).data(trumbowygDataName)) {\n                    $(this).data(trumbowygDataName, new Trumbowyg(this, options));\n                }\n            });\n        }\n        if (this.length === 1) {\n            try {\n                var t = $(this).data(trumbowygDataName);\n                switch (options) {\n                    // Exec command\n                    case 'execCmd':\n                        return t.execCmd(params.cmd, params.param, params.forceCss, params.skipTrumbowyg);\n\n                    // Modal box\n                    case 'openModal':\n                        return t.openModal(params.title, params.content);\n                    case 'closeModal':\n                        return t.closeModal();\n                    case 'openModalInsert':\n                        return t.openModalInsert(params.title, params.fields, params.callback);\n\n                    // Range\n                    case 'saveRange':\n                        return t.saveRange();\n                    case 'getRange':\n                        return t.range;\n                    case 'getRangeText':\n                        return t.getRangeText();\n                    case 'restoreRange':\n                        return t.restoreRange();\n\n                    // Enable/disable\n                    case 'enable':\n                        return t.setDisabled(false);\n                    case 'disable':\n                        return t.setDisabled(true);\n\n                    // Toggle\n                    case 'toggle':\n                        return t.toggle();\n\n                    // Destroy\n                    case 'destroy':\n                        return t.destroy();\n\n                    // Empty\n                    case 'empty':\n                        return t.empty();\n\n                    // HTML\n                    case 'html':\n                        return t.html(params);\n                }\n            } catch (c) {\n            }\n        }\n\n        return false;\n    };\n\n    // @param: editorElem is the DOM element\n    var Trumbowyg = function (editorElem, options) { // jshint ignore:line\n        var t = this,\n            trumbowygIconsId = 'trumbowyg-icons',\n            $trumbowyg = $.trumbowyg;\n\n        // Get the document of the element. It use to makes the plugin\n        // compatible on iframes.\n        t.doc = editorElem.ownerDocument || document;\n\n        // jQuery object of the editor\n        t.$ta = $(editorElem); // $ta : Textarea\n        t.$c = $(editorElem); // $c : creator\n\n        options = options || {};\n\n        // Localization management\n        if (options.lang != null || $trumbowyg.langs[options.lang] != null) {\n            t.lang = $.extend(true, {}, $trumbowyg.langs.en, $trumbowyg.langs[options.lang]);\n        } else {\n            t.lang = $trumbowyg.langs.en;\n        }\n\n        t.hideButtonTexts = $trumbowyg.hideButtonTexts != null ? $trumbowyg.hideButtonTexts : options.hideButtonTexts;\n\n        // SVG path\n        var svgPathOption = $trumbowyg.svgPath != null ? $trumbowyg.svgPath : options.svgPath;\n        t.hasSvg = svgPathOption !== false;\n\n        if (svgPathOption !== false && ($trumbowyg.svgAbsoluteUseHref || $('#' + trumbowygIconsId, t.doc).length === 0)) {\n            if (svgPathOption == null) {\n                // Hack to get svgPathOption based on trumbowyg.js path\n                var $scriptElements = $('script[src]');\n                $scriptElements.each(function (i, scriptElement) {\n                    var source = scriptElement.src;\n                    var matches = source.match('trumbowyg(\\.min)?\\.js');\n                    if (matches != null) {\n                        svgPathOption = source.substring(0, source.indexOf(matches[0])) + 'ui/icons.svg';\n                    }\n                });\n            }\n\n            // Do not merge with previous if block: svgPathOption can be redefined in it.\n            // Here we are checking that we find a match\n            if (svgPathOption == null) {\n                console.warn('You must define svgPath: https://goo.gl/CfTY9U'); // jshint ignore:line\n            } else if (!$trumbowyg.svgAbsoluteUseHref) {\n                var div = t.doc.createElement('div');\n                div.style.width = '0';\n                div.style.height = '0';\n                div.style.overflow = 'hidden';\n                div.style.visibility = 'hidden';\n                div.id = trumbowygIconsId;\n                t.doc.body.insertBefore(div, t.doc.body.childNodes[0]);\n                fetch(svgPathOption, {\n                    method: 'GET',\n                    headers: {\n                        'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'\n                    }\n                }).then((response) => {\n                    response.text()\n                        .then((svg) => {\n                            div.innerHTML = svg;\n                        });\n                });\n            }\n        }\n\n        var baseHref = !!t.doc.querySelector('base') ? window.location.href.replace(window.location.hash, '') : '';\n        t.svgPath = $trumbowyg.svgAbsoluteUseHref ? svgPathOption : baseHref;\n\n\n        /**\n         * When the button is associated to a empty object\n         * fn and title attributes are defined from the button key value\n         *\n         * For example\n         *      foo: {}\n         * is equivalent to :\n         *      foo: {\n         *          fn: 'foo',\n         *          title: this.lang.foo\n         *      }\n         */\n        var h = t.lang.header, // Header translation\n            isBlinkFunction = function () {\n                return (window.chrome || (window.Intl && Intl.v8BreakIterator)) && 'CSS' in window;\n            };\n        t.btnsDef = {\n            viewHTML: {\n                fn: 'toggle',\n                class: 'trumbowyg-not-disable'\n            },\n\n            undo: {\n                isSupported: isBlinkFunction,\n                key: 'Z'\n            },\n            redo: {\n                isSupported: isBlinkFunction,\n                key: 'Y'\n            },\n\n            p: {\n                fn: 'formatBlock'\n            },\n            blockquote: {\n                fn: 'formatBlock'\n            },\n            h1: {\n                fn: 'formatBlock',\n                title: h + ' 1'\n            },\n            h2: {\n                fn: 'formatBlock',\n                title: h + ' 2'\n            },\n            h3: {\n                fn: 'formatBlock',\n                title: h + ' 3'\n            },\n            h4: {\n                fn: 'formatBlock',\n                title: h + ' 4'\n            },\n            h5: {\n                fn: 'formatBlock',\n                title: h + ' 5'\n            },\n            h6: {\n                fn: 'formatBlock',\n                title: h + ' 6'\n            },\n            subscript: {\n                tag: 'sub'\n            },\n            superscript: {\n                tag: 'sup'\n            },\n\n            bold: {\n                key: 'B',\n                tag: 'b'\n            },\n            italic: {\n                key: 'I',\n                tag: 'i'\n            },\n            underline: {\n                tag: 'u'\n            },\n            strikethrough: {\n                tag: 'strike'\n            },\n\n            strong: {\n                fn: 'bold',\n                key: 'B'\n            },\n            em: {\n                fn: 'italic',\n                key: 'I'\n            },\n            del: {\n                fn: 'strikethrough'\n            },\n\n            createLink: {\n                key: 'K',\n                tag: 'a'\n            },\n            unlink: {},\n\n            insertImage: {},\n\n            justifyLeft: {\n                tag: 'left',\n                forceCss: true\n            },\n            justifyCenter: {\n                tag: 'center',\n                forceCss: true\n            },\n            justifyRight: {\n                tag: 'right',\n                forceCss: true\n            },\n            justifyFull: {\n                tag: 'justify',\n                forceCss: true\n            },\n\n            unorderedList: {\n                fn: 'insertUnorderedList',\n                tag: 'ul'\n            },\n            orderedList: {\n                fn: 'insertOrderedList',\n                tag: 'ol'\n            },\n\n            horizontalRule: {\n                fn: 'insertHorizontalRule'\n            },\n\n            removeformat: {},\n\n            fullscreen: {\n                class: 'trumbowyg-not-disable'\n            },\n            close: {\n                fn: 'destroy',\n                class: 'trumbowyg-not-disable'\n            },\n\n            // Dropdowns\n            formatting: {\n                dropdown: ['p', 'blockquote', 'h1', 'h2', 'h3', 'h4'],\n                ico: 'p'\n            },\n            link: {\n                dropdown: ['createLink', 'unlink']\n            }\n        };\n\n        // Default Options\n        t.o = $.extend(true, {}, $trumbowyg.defaultOptions, options);\n        if (!t.o.hasOwnProperty('imgDblClickHandler')) {\n            t.o.imgDblClickHandler = t.getDefaultImgDblClickHandler();\n        }\n\n        t.urlPrefix = t.setupUrlPrefix();\n\n        t.disabled = t.o.disabled || (editorElem.nodeName === 'TEXTAREA' && editorElem.disabled);\n\n        if (options.btns) {\n            t.o.btns = options.btns;\n        } else if (!t.o.semantic) {\n            t.o.btns[3] = ['bold', 'italic', 'underline', 'strikethrough'];\n        }\n\n        $.each(t.o.btnsDef, function (btnName, btnDef) {\n            t.addBtnDef(btnName, btnDef);\n        });\n\n        // put this here in the event it would be merged in with options\n        t.eventNamespace = 'trumbowyg-event';\n\n        // Keyboard shortcuts are load in this array\n        t.keys = [];\n\n        // Tag to button dynamically hydrated\n        t.tagToButton = {};\n        t.tagHandlers = [];\n\n        // Admit multiple paste handlers\n        t.pasteHandlers = [].concat(t.o.pasteHandlers);\n\n        // Check if browser is IE\n        t.isIE = navigator.userAgent.indexOf('MSIE') !== -1 || navigator.appVersion.indexOf('Trident/') !== -1;\n\n        // Check if we are on macOs\n        t.isMac = navigator.platform.toUpperCase().indexOf('MAC') !== -1;\n\n        t.init();\n    };\n\n    Trumbowyg.prototype = {\n        DEFAULT_SEMANTIC_MAP: {\n            'b': 'strong',\n            'i': 'em',\n            's': 'del',\n            'strike': 'del',\n            'div': 'p'\n        },\n\n        init: function () {\n            var t = this;\n            t.height = t.$ta.outerHeight() - 39; // Remove button pane height\n\n            t.initPlugins();\n\n            try {\n                // Disable image resize, try-catch for old IE\n                t.doc.execCommand('enableObjectResizing', false, false);\n                t.doc.execCommand('defaultParagraphSeparator', false, 'p');\n            } catch (e) {\n            }\n\n            t.buildEditor();\n            t.buildBtnPane();\n\n            t.fixedBtnPaneEvents();\n\n            t.buildOverlay();\n\n            setTimeout(function () {\n                if (t.disabled) {\n                    t.setDisabled(true);\n                }\n                t.$c.trigger('tbwinit');\n            });\n        },\n\n        addBtnDef: function (btnName, btnDef) {\n            this.btnsDef[btnName] = $.extend(btnDef, this.btnsDef[btnName] || {});\n        },\n\n        setupUrlPrefix: function () {\n            var protocol = this.o.urlProtocol;\n            if (!protocol) {\n                return;\n            }\n\n            if (typeof (protocol) !== 'string') {\n                return 'https://';\n            }\n            return protocol.replace('://', '') + '://';\n        },\n\n        buildEditor: function () {\n            var t = this,\n                prefix = t.o.prefix,\n                html = '';\n\n            t.$box = $('<div/>', {\n                class: prefix + 'box ' + prefix + 'editor-visible ' + prefix + t.o.lang + ' trumbowyg'\n            });\n\n            t.$edBox = $('<div/>', {\n                class: prefix + 'editor-box'\n            });\n\n            // $ta = Textarea\n            // $ed = Editor\n            t.isTextarea = t.$ta.is('textarea');\n            if (t.isTextarea) {\n                html = t.$ta.val();\n                t.$ed = $('<div/>')\n                    .appendTo(t.$edBox);\n                t.$box\n                    .insertAfter(t.$ta)\n                    .append(t.$edBox, t.$ta);\n            } else {\n                t.$ed = t.$ta;\n                html = t.$ed.html();\n\n                t.$ta = $('<textarea/>', {\n                    name: t.$ta.attr('id'),\n                    height: t.height\n                }).val(html);\n\n                t.$box\n                    .insertAfter(t.$ed)\n                    .append(t.$ta, t.$edBox);\n                t.$edBox.append(t.$ed);\n                t.syncCode();\n            }\n\n            t.$ta\n                .addClass(prefix + 'textarea')\n                .attr('tabindex', -1)\n            ;\n\n            t.$ed\n                .addClass(prefix + 'editor')\n                .attr({\n                    contenteditable: true,\n                    dir: t.lang._dir || 'ltr'\n                })\n                .html(html)\n            ;\n\n            if (t.o.tabindex) {\n                t.$ed.attr('tabindex', t.o.tabindex);\n            }\n\n            if (t.$c.is('[placeholder]')) {\n                t.$ed.attr('placeholder', t.$c.attr('placeholder'));\n            }\n\n            if (t.$c.is('[spellcheck]')) {\n                t.$ed.attr('spellcheck', t.$c.attr('spellcheck'));\n            }\n\n            if (t.o.resetCss) {\n                t.$ed.addClass(prefix + 'reset-css');\n            }\n\n            t.semanticCode();\n            t.applyTagClasses();\n\n            if (t.o.autogrowOnEnter) {\n                t.$ed.addClass(prefix + 'autogrow-on-enter');\n            }\n\n            var ctrl = false,\n                composition = false,\n                debounceButtonPaneStatus;\n\n            t.$ed\n                .on('dblclick', 'img', t.o.imgDblClickHandler)\n                .on('keydown', function (e) {\n                    // append flags to differentiate Chrome spans\n                    var keyCode = e.which;\n                    if (keyCode === 8 || keyCode === 13 || keyCode === 46) {\n                        t.toggleSpan(true);\n                    }\n                    if ((e.ctrlKey || e.metaKey) && !e.altKey) {\n                        ctrl = true;\n                        var key = t.keys[String.fromCharCode(e.which).toUpperCase()];\n\n                        try {\n                            t.execCmd(key.fn, key.param);\n                            return false;\n                        } catch (c) {\n                        }\n                    } else {\n                        if (t.o.tabToIndent && e.key === 'Tab') {\n                            try {\n                                if (e.shiftKey) {\n                                    t.execCmd('outdent', true, null);\n                                } else {\n                                    t.execCmd('indent', true, null);\n                                }\n                                return false;\n                            } catch (c) {\n                            }\n                        }\n                    }\n                })\n                .on('compositionstart compositionupdate', function () {\n                    composition = true;\n                })\n                .on('keyup compositionend', function (e) {\n                    if (e.type === 'compositionend') {\n                        composition = false;\n                    } else if (composition) {\n                        return;\n                    }\n\n                    var keyCode = e.which;\n\n                    if (keyCode >= 37 && keyCode <= 40) {\n                        return;\n                    }\n\n                    // remove Chrome generated span tags\n                    if (keyCode === 8 || keyCode === 13 || keyCode === 46) {\n                        t.toggleSpan();\n                    }\n\n                    if ((e.ctrlKey || e.metaKey) && (keyCode === 89 || keyCode === 90)) {\n                        t.semanticCode(false, true);\n                        t.$c.trigger('tbwchange');\n                    } else if (!ctrl && keyCode !== 16 && keyCode !== 17) {\n                        var compositionEndIE = t.isIE ? e.type === 'compositionend' : true;\n                        t.semanticCode(false, compositionEndIE && keyCode === 13);\n                        t.$c.trigger('tbwchange');\n                    } else if (typeof e.which === 'undefined') {\n                        t.semanticCode(false, false, true);\n                    }\n\n                    setTimeout(function () {\n                        ctrl = false;\n                    }, 50);\n                })\n                .on('input', function (e) {\n                    // Trigger change event when spelling fixes applied\n                    var event = e.originalEvent;\n                    if (typeof event === 'object' && (event.inputType === 'insertReplacementText' ||\n                        (event.inputType === 'insertText' && event.data === null))) {\n                        t.$c.trigger('tbwchange');\n                    }\n                })\n                .on('mouseup keydown keyup', function (e) {\n                    if ((!e.ctrlKey && !e.metaKey) || e.altKey) {\n                        setTimeout(function () { // \"hold on\" to the ctrl key for 50ms\n                            ctrl = false;\n                        }, 50);\n                    }\n                    clearTimeout(debounceButtonPaneStatus);\n                    debounceButtonPaneStatus = setTimeout(function () {\n                        t.updateButtonPaneStatus();\n                    }, 50);\n                })\n                .on('focus blur', function (e) {\n                    if (e.type === 'blur') {\n                        t.clearButtonPaneStatus();\n                    }\n                    t.$c.trigger('tbw' + e.type);\n                    if (t.o.autogrowOnEnter) {\n                        if (t.autogrowOnEnterDontClose) {\n                            return;\n                        }\n                        if (e.type === 'focus') {\n                            t.autogrowOnEnterWasFocused = true;\n                            t.autogrowEditorOnEnter();\n                        } else if (!t.o.autogrow) {\n                            t.$edBox.css({height: t.$edBox.css('min-height')});\n                            t.$c.trigger('tbwresize');\n                        }\n                    }\n                })\n                .on('keyup focus', function () {\n                    if (!t.$ta.val().match(/<.*>/) && !t.$ed.html().match(/<.*>/)) {\n                        setTimeout(function () {\n                            var block = t.isIE ? '<p>' : 'p';\n                            t.doc.execCommand('formatBlock', false, block);\n                            t.syncCode();\n                        }, 0);\n                    }\n                })\n                .on('cut drop', function () {\n                    setTimeout(function () {\n                        t.semanticCode(false, true);\n                        t.$c.trigger('tbwchange');\n                    }, 0);\n                })\n                .on('paste', function (e) {\n                    if (t.o.removeformatPasted) {\n                        e.preventDefault();\n\n                        if (window.getSelection && window.getSelection().deleteFromDocument) {\n                            window.getSelection().deleteFromDocument();\n                        }\n\n                        try {\n                            // IE\n                            var text = window.clipboardData.getData('Text');\n\n                            try {\n                                // <= IE10\n                                t.doc.selection.createRange().pasteHTML(text);\n                            } catch (c) {\n                                // IE 11\n                                t.doc.getSelection().getRangeAt(0).insertNode(t.doc.createTextNode(text));\n                            }\n                            t.$c.trigger('tbwchange', e);\n                        } catch (d) {\n                            // Not IE\n                            t.execCmd('insertText', (e.originalEvent || e).clipboardData.getData('text/plain'));\n                        }\n                    }\n\n                    // Call pasteHandlers\n                    $.each(t.pasteHandlers, function (i, pasteHandler) {\n                        pasteHandler(e);\n                    });\n\n                    setTimeout(function () {\n                        t.semanticCode(false, true);\n                        t.$c.trigger('tbwpaste', e);\n                        t.$c.trigger('tbwchange');\n                    }, 0);\n                });\n\n            t.$ta\n                .on('keyup', function () {\n                    t.$c.trigger('tbwchange');\n                })\n                .on('paste', function () {\n                    setTimeout(function () {\n                        t.$c.trigger('tbwchange');\n                    }, 0);\n                });\n\n            $(t.doc.body).on('keydown.' + t.eventNamespace, function (e) {\n                if (e.which === 27 && $('.' + prefix + 'modal-box').length >= 1) {\n                    t.closeModal();\n                    return false;\n                }\n            });\n        },\n\n        //autogrow when entering logic\n        autogrowEditorOnEnter: function () {\n            var t = this;\n            t.$ed.removeClass('autogrow-on-enter');\n            var oldHeight = t.$ed[0].clientHeight;\n            t.$edBox.height('auto');\n            var totalHeight = t.$ed[0].scrollHeight;\n            t.$ed.addClass('autogrow-on-enter');\n            if (oldHeight !== totalHeight) {\n                t.$edBox.height(oldHeight);\n                setTimeout(function () {\n                    t.$edBox.css({height: totalHeight});\n                    t.$c.trigger('tbwresize');\n                }, 0);\n            }\n        },\n\n\n        // Build button pane, use o.btns option\n        buildBtnPane: function () {\n            var t = this,\n                prefix = t.o.prefix;\n\n            var $btnPane = t.$btnPane = $('<div/>', {\n                class: prefix + 'button-pane'\n            });\n\n            $.each(t.o.btns, function (i, btnGrp) {\n                if (!Array.isArray(btnGrp)) {\n                    btnGrp = [btnGrp];\n                }\n\n                var $btnGroup = $('<div/>', {\n                    class: prefix + 'button-group ' + ((btnGrp.indexOf('fullscreen') >= 0) ? prefix + 'right' : '')\n                });\n                $.each(btnGrp, function (i, btn) {\n                    try { // Prevent buildBtn error\n                        if (t.isSupportedBtn(btn)) { // It's a supported button\n                            $btnGroup.append(t.buildBtn(btn));\n                        }\n                    } catch (c) {\n                    }\n                });\n\n                if ($btnGroup.html().trim().length > 0) {\n                    $btnPane.append($btnGroup);\n                }\n            });\n\n            t.$box.prepend($btnPane);\n        },\n\n\n        // Build a button and his action\n        // @param btnName The name of the button\n        buildBtn: function (btnName) { // jshint ignore:line\n            var t = this,\n                prefix = t.o.prefix,\n                btn = t.btnsDef[btnName],\n                isDropdown = btn.dropdown,\n                hasIcon = btn.hasIcon != null ? btn.hasIcon : true,\n                textDef = t.lang[btnName] || btnName,\n\n                $btn = $('<button/>', {\n                    type: 'button',\n                    class: prefix + btnName + '-button ' + (btn.class || '') + (!hasIcon ? ' ' + prefix + 'textual-button' : ''),\n                    html: t.hasSvg && hasIcon ?\n                        '<svg><use xlink:href=\"' + t.svgPath + '#' + prefix + (btn.ico || btnName).replace(/([A-Z]+)/g, '-$1').toLowerCase() + '\"/></svg>' :\n                        t.hideButtonTexts ? '' : (btn.text || btn.title || t.lang[btnName] || btnName),\n                    title: (btn.title || btn.text || textDef) + (btn.key ? ' (' + (t.isMac ? 'Cmd' : 'Ctrl') + ' + ' + btn.key + ')' : ''),\n                    tabindex: -1,\n                    mousedown: function () {\n                        if (!isDropdown || $('.' + btnName + '-' + prefix + 'dropdown', t.$box).is(':hidden')) {\n                            $('body', t.doc).trigger('mousedown');\n                        }\n\n                        if ((t.$btnPane.hasClass(prefix + 'disable') || t.$box.hasClass(prefix + 'disabled')) &&\n                            !$(this).hasClass(prefix + 'active') &&\n                            !$(this).hasClass(prefix + 'not-disable')) {\n                            return false;\n                        }\n\n                        t.execCmd((isDropdown ? 'dropdown' : false) || btn.fn || btnName, btn.param || btnName, btn.forceCss);\n\n                        return false;\n                    }\n                });\n\n            if (isDropdown) {\n                $btn.addClass(prefix + 'open-dropdown');\n                var dropdownPrefix = prefix + 'dropdown',\n                    dropdownOptions = { // the dropdown\n                        class: dropdownPrefix + '-' + btnName + ' ' + dropdownPrefix + ' ' + prefix + 'fixed-top ' + (btn.dropdownClass || '')\n                    };\n                dropdownOptions['data-' + dropdownPrefix] = btnName;\n                var $dropdown = $('<div/>', dropdownOptions);\n                $.each(isDropdown, function (i, def) {\n                    if (t.btnsDef[def] && t.isSupportedBtn(def)) {\n                        $dropdown.append(t.buildSubBtn(def));\n                    }\n                });\n                t.$box.append($dropdown.hide());\n            } else if (btn.key) {\n                t.keys[btn.key] = {\n                    fn: btn.fn || btnName,\n                    param: btn.param || btnName\n                };\n            }\n\n            if (!isDropdown) {\n                t.tagToButton[(btn.tag || btnName).toLowerCase()] = btnName;\n            }\n\n            return $btn;\n        },\n        // Build a button for dropdown menu\n        // @param n : name of the subbutton\n        buildSubBtn: function (btnName) {\n            var t = this,\n                prefix = t.o.prefix,\n                btn = t.btnsDef[btnName],\n                hasIcon = btn.hasIcon != null ? btn.hasIcon : true;\n\n            if (btn.key) {\n                t.keys[btn.key] = {\n                    fn: btn.fn || btnName,\n                    param: btn.param || btnName\n                };\n            }\n\n            t.tagToButton[(btn.tag || btnName).toLowerCase()] = btnName;\n\n            return $('<button/>', {\n                type: 'button',\n                class: prefix + btnName + '-dropdown-button ' + (btn.class || '') + (btn.ico ? ' ' + prefix + btn.ico + '-button' : ''),\n                html: t.hasSvg && hasIcon ?\n                    '<svg><use xlink:href=\"' + t.svgPath + '#' + prefix + (btn.ico || btnName).replace(/([A-Z]+)/g, '-$1').toLowerCase() + '\"/></svg>' + (btn.text || btn.title || t.lang[btnName] || btnName) :\n                    (btn.text || btn.title || t.lang[btnName] || btnName),\n                title: (btn.key ? '(' + (t.isMac ? 'Cmd' : 'Ctrl') + ' + ' + btn.key + ')' : null),\n                style: btn.style || null,\n                mousedown: function () {\n                    $('body', t.doc).trigger('mousedown');\n\n                    t.execCmd(btn.fn || btnName, btn.param || btnName, btn.forceCss);\n\n                    return false;\n                }\n            });\n        },\n        // Check if button is supported\n        isSupportedBtn: function (btnName) {\n            try {\n                return this.btnsDef[btnName].isSupported();\n            } catch (e) {\n            }\n            return true;\n        },\n\n        // Build overlay for modal box\n        buildOverlay: function () {\n            var t = this;\n            t.$overlay = $('<div/>', {\n                class: t.o.prefix + 'overlay'\n            }).appendTo(t.$box);\n            return t.$overlay;\n        },\n        showOverlay: function () {\n            var t = this;\n            $(window).trigger('scroll');\n            t.$overlay.fadeIn(200);\n            t.$box.addClass(t.o.prefix + 'box-blur');\n        },\n        hideOverlay: function () {\n            var t = this;\n            t.$overlay.fadeOut(50);\n            t.$box.removeClass(t.o.prefix + 'box-blur');\n        },\n\n        // Management of fixed button pane\n        fixedBtnPaneEvents: function () {\n            var t = this,\n                fixedFullWidth = t.o.fixedFullWidth,\n                $box = t.$box;\n\n            if (!t.o.fixedBtnPane) {\n                return;\n            }\n\n            t.isFixed = false;\n\n            $(window)\n                .on('scroll.' + t.eventNamespace + ' resize.' + t.eventNamespace, function () {\n                    if (!$box) {\n                        return;\n                    }\n\n                    t.syncCode();\n\n                    var scrollTop = $(window).scrollTop(),\n                        offset = $box.offset().top + 1,\n                        $buttonPane = t.$btnPane,\n                        buttonPaneOuterHeight = $buttonPane.outerHeight() - 2;\n\n                    if ((scrollTop - offset > 0) && ((scrollTop - offset - t.height) < 0)) {\n                        if (!t.isFixed) {\n                            t.isFixed = true;\n                            $buttonPane.css({\n                                position: 'fixed',\n                                top: 0,\n                                left: fixedFullWidth ? 0 : 'auto',\n                                zIndex: 7\n                            });\n                            t.$box.css({paddingTop: $buttonPane.height()});\n                        }\n                        $buttonPane.css({\n                            width: fixedFullWidth ? '100%' : (($box.width() - 1))\n                        });\n\n                        $('.' + t.o.prefix + 'fixed-top', $box).css({\n                            position: fixedFullWidth ? 'fixed' : 'absolute',\n                            top: fixedFullWidth ? buttonPaneOuterHeight : buttonPaneOuterHeight + (scrollTop - offset),\n                            zIndex: 15\n                        });\n                    } else if (t.isFixed) {\n                        t.isFixed = false;\n                        $buttonPane.removeAttr('style');\n                        t.$box.css({paddingTop: 0});\n                        $('.' + t.o.prefix + 'fixed-top', $box).css({\n                            position: 'absolute',\n                            top: buttonPaneOuterHeight\n                        });\n                    }\n                });\n        },\n\n        // Disable editor\n        setDisabled: function (disable) {\n            var t = this,\n                prefix = t.o.prefix;\n\n            t.disabled = disable;\n\n            if (disable) {\n                t.$ta.attr('disabled', true);\n            } else {\n                t.$ta.removeAttr('disabled');\n            }\n            t.$box.toggleClass(prefix + 'disabled', disable);\n            t.$ed.attr('contenteditable', !disable);\n        },\n\n        // Destroy the editor\n        destroy: function () {\n            var t = this,\n                prefix = t.o.prefix;\n\n            if (t.isTextarea) {\n                t.$box.after(\n                    t.$ta\n                        .css({height: ''})\n                        .val(t.html())\n                        .removeClass(prefix + 'textarea')\n                        .show()\n                );\n            } else {\n                t.$box.after(\n                    t.$edBox\n                        .css({height: ''})\n                        .removeClass(prefix + 'editor')\n                        .removeAttr('contenteditable')\n                        .removeAttr('dir')\n                        .html(t.html())\n                        .show()\n                );\n            }\n\n            t.$ed.off('dblclick', 'img');\n\n            t.destroyPlugins();\n\n            t.$box.remove();\n            t.$c.removeData('trumbowyg');\n            $('body').removeClass(prefix + 'body-fullscreen');\n            t.$c.trigger('tbwclose');\n            $(window).off('scroll.' + t.eventNamespace + ' resize.' + t.eventNamespace);\n            $(t.doc.body).off('keydown.' + t.eventNamespace);\n        },\n\n\n        // Empty the editor\n        empty: function () {\n            this.doc.execCommand('insertHTML', false, '');\n            this.$ta.val('');\n            this.syncCode(true);\n        },\n\n\n        // Function call when click on viewHTML button\n        toggle: function () {\n            var t = this,\n                prefix = t.o.prefix;\n\n            if (t.o.autogrowOnEnter) {\n                t.autogrowOnEnterDontClose = !t.$box.hasClass(prefix + 'editor-hidden');\n            }\n\n            t.semanticCode(false, true);\n            t.$c.trigger('tbwchange');\n\n            setTimeout(function () {\n                t.doc.activeElement.blur();\n                t.$box.toggleClass(prefix + 'editor-hidden ' + prefix + 'editor-visible');\n                t.$btnPane.toggleClass(prefix + 'disable');\n                $('.' + prefix + 'viewHTML-button', t.$btnPane).toggleClass(prefix + 'active');\n                if (t.$box.hasClass(prefix + 'editor-visible')) {\n                    t.$ta.attr('tabindex', -1);\n                } else {\n                    t.$ta.removeAttr('tabindex');\n                }\n\n                if (t.o.autogrowOnEnter && !t.autogrowOnEnterDontClose) {\n                    t.autogrowEditorOnEnter();\n                }\n            }, 0);\n        },\n\n        // Remove or add flags to span tags to remove Chrome generated spans\n        toggleSpan: function (addFlag) {\n            var t = this;\n            t.$ed.find('span').each(function () {\n                if (addFlag === true) {\n                    $(this).attr('data-tbw-flag', true);\n                } else {\n                    if ($(this).attr('data-tbw-flag')) {\n                        $(this).removeAttr('data-tbw-flag');\n                    } else {\n                        $(this).contents().unwrap();\n                    }\n                }\n            });\n        },\n\n        // Open dropdown when click on a button which open that\n        dropdown: function (name) {\n            var t = this,\n                $body = $('body', t.doc),\n                prefix = t.o.prefix,\n                $dropdown = $('[data-' + prefix + 'dropdown=' + name + ']', t.$box),\n                $btn = $('.' + prefix + name + '-button', t.$btnPane),\n                show = $dropdown.is(':hidden');\n\n            $body.trigger('mousedown');\n\n            if (show) {\n                var btnOffsetLeft = $btn.offset().left;\n                $btn.addClass(prefix + 'active');\n\n                $dropdown.css({\n                    position: 'absolute',\n                    top: $btn.offset().top - t.$btnPane.offset().top + $btn.outerHeight(),\n                    left: (t.o.fixedFullWidth && t.isFixed) ? btnOffsetLeft : (btnOffsetLeft - t.$btnPane.offset().left)\n                }).show();\n\n                $(window).trigger('scroll');\n\n                $body.on('mousedown.' + t.eventNamespace, function (e) {\n                    if (!$dropdown.is(e.target)) {\n                        $('.' + prefix + 'dropdown', t.$box).hide();\n                        $('.' + prefix + 'active', t.$btnPane).removeClass(prefix + 'active');\n                        $body.off('mousedown.' + t.eventNamespace);\n                    }\n                });\n            }\n        },\n\n\n        // HTML Code management\n        html: function (html) {\n            var t = this;\n\n            if (html != null) {\n                t.$ta.val(html);\n                t.syncCode(true);\n                t.$c.trigger('tbwchange');\n                return t;\n            }\n\n            return t.$ta.val();\n        },\n        syncTextarea: function () {\n            var t = this;\n            t.$ta.val(t.$ed.text().trim().length > 0 || t.$ed.find(t.o.tagsToKeep.join(',')).length > 0 ? t.$ed.html() : '');\n        },\n        syncCode: function (force) {\n            var t = this;\n            if (!force && t.$ed.is(':visible')) {\n                t.syncTextarea();\n            } else {\n                // wrap the content in a div it's easier to get the inner html\n                var html = $('<div>').html(t.$ta.val());\n                // scrub the html before loading into the doc\n                var safe = $('<div>').append(html);\n                $(t.o.tagsToRemove.join(','), safe).remove();\n                t.$ed.html(safe.contents().html());\n            }\n\n            if (t.o.autogrow) {\n                t.height = t.$edBox.height();\n                if (t.height !== t.$ta.css('height')) {\n                    t.$ta.css({height: t.height});\n                    t.$c.trigger('tbwresize');\n                }\n            }\n            if (t.o.autogrowOnEnter) {\n                t.$edBox.height('auto');\n                var totalHeight = t.autogrowOnEnterWasFocused ? t.$edBox[0].scrollHeight : t.$edBox.css('min-height');\n                if (totalHeight !== t.$ta.css('height')) {\n                    t.$edBox.css({height: totalHeight});\n                    t.$c.trigger('tbwresize');\n                }\n            }\n        },\n\n        // Analyse and update to semantic code\n        // @param force : force to sync code from textarea\n        // @param full  : wrap text nodes in <p>\n        // @param keepRange  : leave selection range as it is\n        semanticCode: function (force, full, keepRange) {\n            var t = this;\n            t.saveRange();\n            t.syncCode(force);\n\n            var restoreRange = true;\n            if (t.range && t.range.collapsed) {\n                restoreRange = false;\n            }\n\n            if (t.o.semantic) {\n                t.semanticTag('b', t.o.semanticKeepAttributes);\n                t.semanticTag('i', t.o.semanticKeepAttributes);\n                t.semanticTag('s', t.o.semanticKeepAttributes);\n                t.semanticTag('strike', t.o.semanticKeepAttributes);\n\n                if (full) {\n                    var inlineElementsSelector = t.o.inlineElementsSelector,\n                        blockElementsSelector = ':not(' + inlineElementsSelector + ')';\n\n                    // Wrap text nodes in span for easier processing\n                    t.$ed.contents().filter(function () {\n                        return this.nodeType === 3 && this.nodeValue.trim().length > 0;\n                    }).wrap('<span data-tbw/>');\n\n                    // Wrap groups of inline elements in paragraphs (recursive)\n                    var wrapInlinesInParagraphsFrom = function ($from) {\n                        if ($from.length !== 0) {\n                            var $finalParagraph = $from.nextUntil(blockElementsSelector).addBack().wrapAll('<p/>').parent(),\n                                $nextElement = $finalParagraph.nextAll(inlineElementsSelector).first();\n                            $finalParagraph.next('br').remove();\n                            wrapInlinesInParagraphsFrom($nextElement);\n                        }\n                    };\n                    wrapInlinesInParagraphsFrom(t.$ed.children(inlineElementsSelector).first());\n\n                    t.semanticTag('div', true);\n\n                    // Get rid of temporary span's\n                    $('[data-tbw]', t.$ed).contents().unwrap();\n\n                    // Remove empty <p>\n                    t.$ed.find('p:empty').remove();\n                }\n\n                if (!keepRange && restoreRange) {\n                    t.restoreRange();\n                }\n\n                t.syncTextarea();\n            }\n        },\n\n        semanticTag: function (oldTag, copyAttributes, revert) {\n            var newTag, t = this;\n            var tmpTag = oldTag;\n\n            if (this.o.semantic != null && typeof this.o.semantic === 'object' && this.o.semantic.hasOwnProperty(oldTag)) {\n                newTag = this.o.semantic[oldTag];\n            } else if (this.o.semantic === true && this.DEFAULT_SEMANTIC_MAP.hasOwnProperty(oldTag)) {\n                newTag = this.DEFAULT_SEMANTIC_MAP[oldTag];\n            } else {\n                return;\n            }\n\n            if (revert) {\n                oldTag = newTag;\n                newTag = tmpTag;\n            }\n\n            $(oldTag, this.$ed).each(function () {\n                var resetRange = false;\n                var $oldTag = $(this);\n                if ($oldTag.contents().length === 0) {\n                    return false;\n                }\n\n                if (t.range && t.range.startContainer.parentNode === this) {\n                    resetRange = true;\n                }\n                var $newTag = $('<' + newTag + '/>');\n                $newTag.insertBefore($oldTag);\n                if (copyAttributes) {\n                    $.each($oldTag.prop('attributes'), function () {\n                        $newTag.attr(this.name, this.value);\n                    });\n                }\n                $newTag.html($oldTag.html());\n                $oldTag.remove();\n                if (resetRange === true) {\n                    t.range.selectNodeContents($newTag.get(0));\n                    t.range.collapse(false);\n                }\n            });\n        },\n\n        // Function call when user click on \"Insert Link\"\n        createLink: function () {\n            var t = this,\n                documentSelection = t.doc.getSelection(),\n                selectedRange = documentSelection.getRangeAt(0),\n                node = documentSelection.focusNode,\n                text = new XMLSerializer().serializeToString(selectedRange.cloneContents()) || selectedRange + '',\n                url,\n                title,\n                target,\n                linkDefaultTarget = t.o.linkTargets[0];\n\n            while (['A', 'DIV'].indexOf(node.nodeName) < 0) {\n                node = node.parentNode;\n            }\n\n            if (node && node.nodeName === 'A') {\n                var $a = $(node);\n                text = $a.text();\n                url = $a.attr('href');\n                if (!t.o.minimalLinks) {\n                    title = $a.attr('title');\n                    target = $a.attr('target') || linkDefaultTarget;\n                }\n                var range = t.doc.createRange();\n                range.selectNode(node);\n                documentSelection.removeAllRanges();\n                documentSelection.addRange(range);\n            }\n\n            t.saveRange();\n\n            var options = {\n                url: {\n                    label: t.lang.linkUrl || 'URL',\n                    required: true,\n                    value: url\n                },\n                text: {\n                    label: t.lang.text,\n                    value: text\n                }\n            };\n            if (!t.o.minimalLinks) {\n                var targetOptions = t.o.linkTargets.reduce(function (options, optionValue) {\n                    options[optionValue] = t.lang[optionValue];\n\n                    return options;\n                }, {});\n\n                $.extend(options, {\n                    title: {\n                        label: t.lang.title,\n                        value: title\n                    },\n                    target: {\n                        label: t.lang.target,\n                        value: target,\n                        options: targetOptions\n                    }\n                });\n            }\n\n            t.openModalInsert(t.lang.createLink, options, function (v) { // v is value\n                var url = t.prependUrlPrefix(v.url);\n                if (!url.length) {\n                    return false;\n                }\n\n                var link = $(['<a href=\"', url, '\">', v.text || v.url, '</a>'].join(''));\n\n                if (v.title) {\n                    link.attr('title', v.title);\n                }\n                if (v.target || linkDefaultTarget) {\n                    link.attr('target', v.target || linkDefaultTarget);\n                }\n                t.range.deleteContents();\n                t.range.insertNode(link[0]);\n                t.syncCode();\n                t.$c.trigger('tbwchange');\n                return true;\n            });\n        },\n        prependUrlPrefix: function (url) {\n            var t = this;\n            if (!t.urlPrefix) {\n                return url;\n            }\n\n            var VALID_LINK_PREFIX = /^([a-z][-+.a-z0-9]*:|\\/|#)/i;\n            if (VALID_LINK_PREFIX.test(url)) {\n                return url;\n            }\n\n            var SIMPLE_EMAIL_REGEX = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n            if (SIMPLE_EMAIL_REGEX.test(url)) {\n                return 'mailto:' + url;\n            }\n\n            return t.urlPrefix + url;\n        },\n        unlink: function () {\n            var t = this,\n                documentSelection = t.doc.getSelection(),\n                node = documentSelection.focusNode;\n\n            if (documentSelection.isCollapsed) {\n                while (['A', 'DIV'].indexOf(node.nodeName) < 0) {\n                    node = node.parentNode;\n                }\n\n                if (node && node.nodeName === 'A') {\n                    var range = t.doc.createRange();\n                    range.selectNode(node);\n                    documentSelection.removeAllRanges();\n                    documentSelection.addRange(range);\n                }\n            }\n            t.execCmd('unlink', undefined, undefined, true);\n        },\n        insertImage: function () {\n            var t = this;\n            t.saveRange();\n\n            var options = {\n                url: {\n                    label: 'URL',\n                    required: true\n                },\n                alt: {\n                    label: t.lang.description,\n                    value: t.getRangeText()\n                }\n            };\n\n            if (t.o.imageWidthModalEdit) {\n                options.width = {};\n            }\n\n            t.openModalInsert(t.lang.insertImage, options, function (v) { // v are values\n                t.execCmd('insertImage', v.url, false, true);\n                var $img = $('img[src=\"' + v.url + '\"]:not([alt])', t.$box);\n                $img.attr('alt', v.alt);\n\n                if (t.o.imageWidthModalEdit) {\n                    $img.attr({\n                        width: v.width\n                    });\n                }\n\n                t.syncCode();\n                t.$c.trigger('tbwchange');\n\n                return true;\n            });\n        },\n        fullscreen: function () {\n            var t = this,\n                prefix = t.o.prefix,\n                fullscreenCssClass = prefix + 'fullscreen',\n                fullscreenPlaceholderClass = fullscreenCssClass + '-placeholder',\n                isFullscreen,\n                editorHeight = t.$box.outerHeight();\n\n            t.$box.toggleClass(fullscreenCssClass);\n            isFullscreen = t.$box.hasClass(fullscreenCssClass);\n\n            if (isFullscreen) {\n                t.$box.before(\n                    $('<div/>', {\n                        class: fullscreenPlaceholderClass\n                    }).css({\n                        height: editorHeight\n                    })\n                );\n            } else {\n                $('.' + fullscreenPlaceholderClass).remove();\n            }\n\n            $('body').toggleClass(prefix + 'body-fullscreen', isFullscreen);\n            $(window).trigger('scroll');\n            t.$c.trigger('tbw' + (isFullscreen ? 'open' : 'close') + 'fullscreen');\n        },\n\n        applyTagClasses: function () {\n            var t = this;\n            for (const tag of Object.keys(t.o.tagClasses)) {\n                $(tag, t.$ed).addClass(t.o.tagClasses[tag]);\n            }\n            t.syncCode();\n        },\n\n        /*\n         * Call method of trumbowyg if exist\n         * else try to call anonymous function\n         * and finally native execCommand\n         */\n        execCmd: function (cmd, param, forceCss, skipTrumbowyg) {\n            var t = this;\n            skipTrumbowyg = !!skipTrumbowyg || '';\n\n            if (cmd !== 'dropdown') {\n                t.$ed.focus();\n            }\n\n            if (cmd === 'strikethrough' && t.o.semantic) {\n                t.semanticTag('strike', t.o.semanticKeepAttributes, true); // browsers cannot undo e.g. <del> as they expect <strike>\n            }\n\n            try {\n                t.doc.execCommand('styleWithCSS', false, forceCss || false);\n            } catch (c) {\n            }\n\n            try {\n                t[cmd + skipTrumbowyg](param);\n            } catch (c) {\n                try {\n                    cmd(param);\n                } catch (e2) {\n                    if (cmd === 'insertHorizontalRule') {\n                        param = undefined;\n                    } else if (cmd === 'formatBlock' && t.isIE) {\n                        param = '<' + param + '>';\n                    }\n\n                    t.doc.execCommand(cmd, false, param);\n\n                    t.syncCode();\n                    t.semanticCode(false, true);\n                }\n\n                if (cmd !== 'dropdown') {\n                    t.updateButtonPaneStatus();\n                    t.$c.trigger('tbwchange');\n                }\n            }\n\n            try {\n                t.applyTagClasses();\n            } catch (e) {\n            }\n        },\n\n\n        // Open a modal box\n        openModal: function (title, content, buildForm) {\n            var t = this,\n                prefix = t.o.prefix;\n\n            buildForm = buildForm !== false;\n\n            // No open a modal box when exist other modal box\n            if ($('.' + prefix + 'modal-box', t.$box).length > 0) {\n                return false;\n            }\n            if (t.o.autogrowOnEnter) {\n                t.autogrowOnEnterDontClose = true;\n            }\n\n            t.saveRange();\n            t.showOverlay();\n\n            // Disable all btnPane btns\n            t.$btnPane.addClass(prefix + 'disable');\n\n            // Build out of ModalBox, it's the mask for animations\n            var $modal = $('<div/>', {\n                class: prefix + 'modal ' + prefix + 'fixed-top'\n            }).css({\n                top: t.$box.offset().top + t.$btnPane.height(),\n                zIndex: 99999\n            }).appendTo($(t.doc.body));\n\n            var darkClass = prefix + 'dark';\n            if (t.$c.parents('.' + darkClass).length !== 0) {\n                $modal.addClass(darkClass);\n            }\n\n            // Click on overlay close modal by cancelling them\n            t.$overlay.one('click', function () {\n                $modal.trigger(CANCEL_EVENT);\n                return false;\n            });\n\n            // Build the form\n            var formOrContent;\n            if (buildForm) {\n                formOrContent = $('<form/>', {\n                    action: '',\n                    html: content\n                })\n                    .on('submit', function () {\n                        $modal.trigger(CONFIRM_EVENT);\n                        return false;\n                    })\n                    .on('reset', function () {\n                        $modal.trigger(CANCEL_EVENT);\n                        return false;\n                    })\n                    .on('submit reset', function () {\n                        if (t.o.autogrowOnEnter) {\n                            t.autogrowOnEnterDontClose = false;\n                        }\n                    });\n            } else {\n                formOrContent = content;\n            }\n\n\n            // Build ModalBox and animate to show them\n            var $box = $('<div/>', {\n                class: prefix + 'modal-box',\n                html: formOrContent\n            })\n                .css({\n                    top: '-' + t.$btnPane.outerHeight(),\n                    opacity: 0,\n                    paddingBottom: buildForm ? null : '5%'\n                })\n                .appendTo($modal)\n                .animate({\n                    top: 0,\n                    opacity: 1\n                }, 100);\n\n\n            // Append title\n            if (title) {\n                $('<span/>', {\n                    text: title,\n                    class: prefix + 'modal-title'\n                }).prependTo($box);\n            }\n\n            if (buildForm) {\n                // Focus in modal box\n                $(':input:first', $box).focus();\n\n                // Append Confirm and Cancel buttons\n                t.buildModalBtn('submit', $box);\n                t.buildModalBtn('reset', $box);\n\n                $modal.height($box.outerHeight() + 10);\n            }\n\n            $(window).trigger('scroll');\n            t.$c.trigger('tbwmodalopen');\n\n            return $modal;\n        },\n        // @param n is name of modal\n        buildModalBtn: function (n, $modal) {\n            var t = this,\n                prefix = t.o.prefix;\n\n            return $('<button/>', {\n                class: prefix + 'modal-button ' + prefix + 'modal-' + n,\n                type: n,\n                text: t.lang[n] || n\n            }).appendTo($('form', $modal));\n        },\n        // close current modal box\n        closeModal: function () {\n            var t = this,\n                prefix = t.o.prefix;\n\n            // Prevent multiple calls when having multiple editors in the same page\n            if (!t.$btnPane.hasClass(prefix + 'disable')) {\n                return;\n            }\n\n            t.$btnPane.removeClass(prefix + 'disable');\n            t.$overlay.off();\n\n            // Find the modal box\n            var $modalBox = $('.' + prefix + 'modal-box', $(t.doc.body));\n\n            $modalBox.animate({\n                top: '-' + $modalBox.height()\n            }, 100, function () {\n                $modalBox.parent().remove();\n                t.hideOverlay();\n                t.$c.trigger('tbwmodalclose');\n            });\n\n            t.restoreRange();\n        },\n        // Pre-formatted build and management modal\n        openModalInsert: function (title, fields, cmd) {\n            var t = this,\n                prefix = t.o.prefix,\n                lg = t.lang,\n                html = '',\n                idPrefix = prefix + 'form-' + Date.now() + '-';\n\n            $.each(fields, function (fieldName, field) {\n                var l = field.label || fieldName,\n                    n = field.name || fieldName,\n                    a = field.attributes || {},\n                    fieldId = idPrefix + fieldName;\n\n                var attr = Object.keys(a).map(function (prop) {\n                    return prop + '=\"' + a[prop] + '\"';\n                }).join(' ');\n\n                if (typeof field.type === 'function') {\n                    if (!field.name) {\n                        field.name = n;\n                    }\n\n                    html += field.type(field, fieldId, prefix, lg);\n\n                    return;\n                }\n\n                html += '<div class=\"' + prefix + 'input-row\">';\n                html += '<div class=\"' + prefix + 'input-infos\"><label for=\"' + fieldId + '\"><span>' + (lg[l] ? lg[l] : l) + '</span></label></div>';\n                html += '<div class=\"' + prefix + 'input-html\">';\n\n                if ($.isPlainObject(field.options)) {\n                    html += '<select id=\"' + fieldId + '\" name=\"' + n + '\">';\n                    html += Object.keys(field.options).map((optionValue) => {\n                        return '<option value=\"' + optionValue + '\" ' + (optionValue === field.value ? 'selected' : '') + '>' + field.options[optionValue] + '</option>';\n                    }).join('');\n                    html += '</select>';\n                } else {\n                    html += '<input id=\"' + fieldId + '\" type=\"' + (field.type || 'text') + '\" name=\"' + n + '\" ' + attr;\n                    html += (field.type === 'checkbox' && field.value ? ' checked=\"checked\"' : '') + ' value=\"' + (field.value || '').replace(/\"/g, '&quot;') + '\">';\n                }\n\n                html += '</div></div>';\n            });\n\n            return t.openModal(title, html)\n                .on(CONFIRM_EVENT, function () {\n                    var $form = $('form', $(this)),\n                        valid = true,\n                        values = {};\n\n                    $.each(fields, function (fieldName, field) {\n                        var n = field.name || fieldName;\n\n                        var $field = $(':input[name=\"' + n + '\"]', $form),\n                            inputType = $field[0].type;\n\n                        switch (inputType.toLowerCase()) {\n                            case 'checkbox':\n                                values[n] = $field.is(':checked');\n                                break;\n                            case 'radio':\n                                values[n] = $field.filter(':checked').val();\n                                break;\n                            default:\n                                values[n] = $field.val().trim();\n                                break;\n                        }\n                        // Validate value\n                        if (field.required && values[n] === '') {\n                            valid = false;\n                            t.addErrorOnModalField($field, t.lang.required);\n                        } else if (field.pattern && !field.pattern.test(values[n])) {\n                            valid = false;\n                            t.addErrorOnModalField($field, field.patternError);\n                        }\n                    });\n\n                    if (valid) {\n                        t.restoreRange();\n\n                        if (cmd(values, fields)) {\n                            t.syncCode();\n                            t.$c.trigger('tbwchange');\n                            t.closeModal();\n                            $(this).off(CONFIRM_EVENT);\n                        }\n                    }\n                })\n                .one(CANCEL_EVENT, function () {\n                    $(this).off(CONFIRM_EVENT);\n                    t.closeModal();\n                });\n        },\n        addErrorOnModalField: function ($field, err) {\n            var prefix = this.o.prefix,\n                spanErrorClass = prefix + 'msg-error',\n                $row = $field.closest('.' + prefix + 'input-row');\n\n            $field\n                .one('change keyup', function () {\n                    $row.removeClass(prefix + 'input-error');\n                });\n\n            $row.find('.' + spanErrorClass).remove();\n            $row\n                .addClass(prefix + 'input-error')\n                .find('.' + prefix + 'input-infos label')\n                .append(\n                    $('<span/>', {\n                        class: spanErrorClass,\n                        text: err\n                    })\n                );\n        },\n\n        getDefaultImgDblClickHandler: function () {\n            var t = this;\n\n            return function () {\n                var $img = $(this),\n                    src = $img.attr('src'),\n                    base64 = '(Base64)';\n\n                if (src.indexOf('data:image') === 0) {\n                    src = base64;\n                }\n\n                var options = {\n                    url: {\n                        label: 'URL',\n                        value: src,\n                        required: true\n                    },\n                    alt: {\n                        label: t.lang.description,\n                        value: $img.attr('alt')\n                    }\n                };\n\n                if (t.o.imageWidthModalEdit) {\n                    options.width = {\n                        value: $img.attr('width') ? $img.attr('width') : ''\n                    };\n                }\n\n                t.openModalInsert(t.lang.insertImage, options, function (v) {\n                    if (v.url !== base64) {\n                        $img.attr({\n                            src: v.url\n                        });\n                    }\n                    $img.attr({\n                        alt: v.alt\n                    });\n\n                    if (t.o.imageWidthModalEdit) {\n                        if (parseInt(v.width) > 0) {\n                            $img.attr({\n                                width: v.width\n                            });\n                        } else {\n                            $img.removeAttr('width');\n                        }\n                    }\n\n                    return true;\n                });\n                return false;\n            };\n        },\n\n        // Range management\n        saveRange: function () {\n            var t = this,\n                documentSelection = t.doc.getSelection();\n\n            t.range = null;\n\n            if (!documentSelection || !documentSelection.rangeCount) {\n                return;\n            }\n\n            var savedRange = t.range = documentSelection.getRangeAt(0),\n                range = t.doc.createRange(),\n                rangeStart;\n            range.selectNodeContents(t.$ed[0]);\n            range.setEnd(savedRange.startContainer, savedRange.startOffset);\n            rangeStart = (range + '').length;\n            t.metaRange = {\n                start: rangeStart,\n                end: rangeStart + (savedRange + '').length\n            };\n        },\n        restoreRange: function () {\n            var t = this,\n                metaRange = t.metaRange,\n                savedRange = t.range,\n                documentSelection = t.doc.getSelection(),\n                range;\n\n            if (!savedRange) {\n                return;\n            }\n\n            if (metaRange && metaRange.start !== metaRange.end) { // Algorithm from http://jsfiddle.net/WeWy7/3/\n                var charIndex = 0,\n                    nodeStack = [t.$ed[0]],\n                    node,\n                    foundStart = false,\n                    stop = false;\n\n                range = t.doc.createRange();\n\n                while (!stop && (node = nodeStack.pop())) {\n                    if (node.nodeType === 3) {\n                        var nextCharIndex = charIndex + node.length;\n                        if (!foundStart && metaRange.start >= charIndex && metaRange.start <= nextCharIndex) {\n                            range.setStart(node, metaRange.start - charIndex);\n                            foundStart = true;\n                        }\n                        if (foundStart && metaRange.end >= charIndex && metaRange.end <= nextCharIndex) {\n                            range.setEnd(node, metaRange.end - charIndex);\n                            stop = true;\n                        }\n                        charIndex = nextCharIndex;\n                    } else {\n                        var cn = node.childNodes,\n                            i = cn.length;\n\n                        while (i > 0) {\n                            i -= 1;\n                            nodeStack.push(cn[i]);\n                        }\n                    }\n                }\n            }\n\n            // Fix IE11 Error 'Could not complete the operation due to error 800a025e'.\n            // https://stackoverflow.com/questions/16160996/could-not-complete-the-operation-due-to-error-800a025e\n            try {\n                documentSelection.removeAllRanges();\n            } catch (e) {\n            }\n\n            documentSelection.addRange(range || savedRange);\n        },\n        getRangeText: function () {\n            return this.range + '';\n        },\n\n        clearButtonPaneStatus: function () {\n            var t = this,\n                prefix = t.o.prefix,\n                activeClasses = prefix + 'active-button ' + prefix + 'active',\n                originalIconClass = prefix + 'original-icon';\n\n            // Reset all buttons and dropdown state\n            $('.' + prefix + 'active-button', t.$btnPane).removeClass(activeClasses);\n            $('.' + originalIconClass, t.$btnPane).each(function () {\n                $(this).find('svg use').attr('xlink:href', $(this).data(originalIconClass));\n            });\n        },\n        updateButtonPaneStatus: function () {\n            var t = this,\n                prefix = t.o.prefix,\n                activeClasses = prefix + 'active-button ' + prefix + 'active',\n                originalIconClass = prefix + 'original-icon',\n                tags = t.getTagsRecursive(t.doc.getSelection().anchorNode);\n\n            t.clearButtonPaneStatus();\n\n            $.each(tags, function (i, tag) {\n                var btnName = t.tagToButton[tag.toLowerCase()],\n                    $btn = $('.' + prefix + btnName + '-button', t.$btnPane);\n\n                if ($btn.length > 0) {\n                    $btn.addClass(activeClasses);\n                } else {\n                    try {\n                        $btn = $('.' + prefix + 'dropdown .' + prefix + btnName + '-dropdown-button', t.$box);\n                        var $btnSvgUse = $btn.find('svg use'),\n                            dropdownBtnName = $btn.parent().data(prefix + 'dropdown'),\n                            $dropdownBtn = $('.' + prefix + dropdownBtnName + '-button', t.$box),\n                            $dropdownBtnSvgUse = $dropdownBtn.find('svg use');\n\n                        // Highlight the dropdown button\n                        $dropdownBtn.addClass(activeClasses);\n\n                        // Switch dropdown icon to the active sub-icon one\n                        if (t.o.changeActiveDropdownIcon && $btnSvgUse.length > 0) {\n                            // Save original icon\n                            $dropdownBtn\n                                .addClass(originalIconClass)\n                                .data(originalIconClass, $dropdownBtnSvgUse.attr('xlink:href'));\n\n                            // Put the active sub-button's icon\n                            $dropdownBtnSvgUse\n                                .attr('xlink:href', $btnSvgUse.attr('xlink:href'));\n                        }\n                    } catch (e) {\n                    }\n                }\n            });\n        },\n        getTagsRecursive: function (element, tags) {\n            var t = this;\n            tags = tags || (element && element.tagName ? [element.tagName] : []);\n\n            if (element && element.parentNode) {\n                if (element.nodeType !== Node.ELEMENT_NODE) {\n                    element = element.parentNode;\n                }\n            } else {\n                return tags;\n            }\n\n            var tag = element.tagName;\n            if (tag === 'DIV') {\n                return tags;\n            }\n            if (tag === 'P' && element.style.textAlign !== '') {\n                tags.push(element.style.textAlign);\n            }\n\n            $.each(t.tagHandlers, function (i, tagHandler) {\n                tags = tags.concat(tagHandler(element, t));\n            });\n\n            tags.push(tag);\n\n            return t.getTagsRecursive(element.parentNode, tags).filter(function (tag) {\n                return tag != null;\n            });\n        },\n\n        // Plugins\n        initPlugins: function () {\n            var t = this;\n            t.loadedPlugins = [];\n            $.each($.trumbowyg.plugins, function (name, plugin) {\n                if (!plugin.shouldInit || plugin.shouldInit(t)) {\n                    plugin.init(t);\n                    if (plugin.tagHandler) {\n                        t.tagHandlers.push(plugin.tagHandler);\n                    }\n                    t.loadedPlugins.push(plugin);\n                }\n            });\n        },\n        destroyPlugins: function () {\n            var t = this;\n            $.each(this.loadedPlugins, function (i, plugin) {\n                if (plugin.destroy) {\n                    plugin.destroy(t);\n                }\n            });\n        }\n    };\n})(navigator, window, document, jQuery);\n"],"names":["jQuery","trumbowyg","langs","en","viewHTML","undo","redo","formatting","p","blockquote","code","header","bold","italic","strikethrough","underline","strong","em","del","superscript","subscript","unorderedList","orderedList","insertImage","link","createLink","unlink","_self","_blank","justifyLeft","justifyCenter","justifyRight","justifyFull","horizontalRule","removeformat","fullscreen","close","submit","reset","required","description","title","text","target","width","plugins","svgPath","svgAbsoluteUseHref","hideButtonTexts","Object","defineProperty","value","lang","fixedBtnPane","fixedFullWidth","autogrow","autogrowOnEnter","imageWidthModalEdit","prefix","tagClasses","semantic","semanticKeepAttributes","resetCss","removeformatPasted","tabToIndent","tagsToRemove","tagsToKeep","btns","btnsDef","changeActiveDropdownIcon","inlineElementsSelector","pasteHandlers","urlProtocol","minimalLinks","linkTargets","writable","enumerable","configurable","navigator","window","document","$","CONFIRM_EVENT","CANCEL_EVENT","fn","options","params","trumbowygDataName","each","data","Trumbowyg","length","t","execCmd","cmd","param","forceCss","skipTrumbowyg","openModal","content","closeModal","openModalInsert","fields","callback","saveRange","range","getRangeText","restoreRange","setDisabled","toggle","destroy","empty","html","c","editorElem","trumbowygIconsId","$trumbowyg","doc","ownerDocument","$ta","$c","extend","svgPathOption","hasSvg","$scriptElements","i","scriptElement","source","src","matches","match","substring","indexOf","console","warn","div","createElement","style","height","overflow","visibility","id","body","insertBefore","childNodes","fetch","method","headers","then","response","svg","innerHTML","baseHref","querySelector","location","href","replace","hash","h","isBlinkFunction","chrome","Intl","v8BreakIterator","class","isSupported","key","h1","h2","h3","h4","h5","h6","tag","dropdown","ico","o","defaultOptions","hasOwnProperty","imgDblClickHandler","getDefaultImgDblClickHandler","urlPrefix","setupUrlPrefix","disabled","nodeName","btnName","btnDef","addBtnDef","eventNamespace","keys","tagToButton","tagHandlers","concat","isIE","userAgent","appVersion","isMac","platform","toUpperCase","init","prototype","DEFAULT_SEMANTIC_MAP","outerHeight","initPlugins","execCommand","e","buildEditor","buildBtnPane","fixedBtnPaneEvents","buildOverlay","setTimeout","trigger","protocol","$box","$edBox","isTextarea","is","val","$ed","appendTo","insertAfter","append","name","attr","syncCode","addClass","contenteditable","dir","_dir","tabindex","semanticCode","applyTagClasses","debounceButtonPaneStatus","ctrl","composition","on","keyCode","which","toggleSpan","ctrlKey","metaKey","altKey","String","fromCharCode","shiftKey","type","compositionEndIE","event","originalEvent","inputType","clearTimeout","updateButtonPaneStatus","clearButtonPaneStatus","autogrowOnEnterDontClose","autogrowOnEnterWasFocused","autogrowEditorOnEnter","css","block","preventDefault","getSelection","deleteFromDocument","clipboardData","getData","selection","createRange","pasteHTML","getRangeAt","insertNode","createTextNode","d","pasteHandler","removeClass","oldHeight","clientHeight","totalHeight","scrollHeight","$btnPane","btnGrp","Array","isArray","$btnGroup","btn","isSupportedBtn","buildBtn","trim","prepend","isDropdown","hasIcon","textDef","$btn","toLowerCase","mousedown","hasClass","dropdownPrefix","dropdownOptions","dropdownClass","$dropdown","def","buildSubBtn","hide","$overlay","showOverlay","fadeIn","hideOverlay","fadeOut","isFixed","scrollTop","offset","top","$buttonPane","buttonPaneOuterHeight","position","left","zIndex","paddingTop","removeAttr","disable","toggleClass","after","show","off","destroyPlugins","remove","removeData","activeElement","blur","addFlag","find","contents","unwrap","$body","btnOffsetLeft","syncTextarea","join","force","safe","full","keepRange","collapsed","semanticTag","blockElementsSelector","filter","nodeType","nodeValue","wrap","wrapInlinesInParagraphsFrom","$from","$finalParagraph","nextUntil","addBack","wrapAll","parent","$nextElement","nextAll","first","next","children","oldTag","copyAttributes","revert","newTag","tmpTag","resetRange","$oldTag","startContainer","parentNode","$newTag","prop","selectNodeContents","get","collapse","url","documentSelection","selectedRange","node","focusNode","XMLSerializer","serializeToString","cloneContents","linkDefaultTarget","$a","selectNode","removeAllRanges","addRange","label","linkUrl","targetOptions","reduce","optionValue","v","prependUrlPrefix","deleteContents","VALID_LINK_PREFIX","test","SIMPLE_EMAIL_REGEX","isCollapsed","undefined","alt","$img","isFullscreen","fullscreenCssClass","fullscreenPlaceholderClass","editorHeight","before","focus","e2","buildForm","formOrContent","$modal","darkClass","parents","one","action","opacity","paddingBottom","animate","prependTo","buildModalBtn","n","$modalBox","lg","idPrefix","Date","now","fieldName","field","l","a","attributes","fieldId","map","isPlainObject","$form","valid","values","$field","addErrorOnModalField","pattern","patternError","err","spanErrorClass","$row","closest","base64","parseInt","rangeCount","rangeStart","savedRange","setEnd","startOffset","metaRange","start","end","charIndex","nodeStack","foundStart","stop","pop","nextCharIndex","setStart","cn","push","originalIconClass","activeClasses","tags","getTagsRecursive","anchorNode","$btnSvgUse","dropdownBtnName","$dropdownBtn","$dropdownBtnSvgUse","element","tagName","Node","ELEMENT_NODE","textAlign","tagHandler","loadedPlugins","plugin","shouldInit"],"mappings":"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"}
