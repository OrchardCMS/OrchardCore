{"version":3,"sources":["<anon>"],"sourcesContent":["/*\n * jQuery Iframe Transport Plugin\n * https://github.com/blueimp/jQuery-File-Upload\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n */\n\n/* global define, require */\n\n(function (factory) {\n  'use strict';\n  if (typeof define === 'function' && define.amd) {\n    // Register as an anonymous AMD module:\n    define(['jquery'], factory);\n  } else if (typeof exports === 'object') {\n    // Node/CommonJS:\n    factory(require('jquery'));\n  } else {\n    // Browser globals:\n    factory(window.jQuery);\n  }\n})(function ($) {\n  'use strict';\n\n  // Helper variable to create unique names for the transport iframes:\n  var counter = 0,\n    jsonAPI = $,\n    jsonParse = 'parseJSON';\n\n  if ('JSON' in window && 'parse' in JSON) {\n    jsonAPI = JSON;\n    jsonParse = 'parse';\n  }\n\n  // The iframe transport accepts four additional options:\n  // options.fileInput: a jQuery collection of file input fields\n  // options.paramName: the parameter name for the file form data,\n  //  overrides the name property of the file input field(s),\n  //  can be a string or an array of strings.\n  // options.formData: an array of objects with name and value properties,\n  //  equivalent to the return data of .serializeArray(), e.g.:\n  //  [{name: 'a', value: 1}, {name: 'b', value: 2}]\n  // options.initialIframeSrc: the URL of the initial iframe src,\n  //  by default set to \"javascript:false;\"\n  $.ajaxTransport('iframe', function (options) {\n    if (options.async) {\n      // javascript:false as initial iframe src\n      // prevents warning popups on HTTPS in IE6:\n      // eslint-disable-next-line no-script-url\n      var initialIframeSrc = options.initialIframeSrc || 'javascript:false;',\n        form,\n        iframe,\n        addParamChar;\n      return {\n        send: function (_, completeCallback) {\n          form = $('<form style=\"display:none;\"></form>');\n          form.attr('accept-charset', options.formAcceptCharset);\n          addParamChar = /\\?/.test(options.url) ? '&' : '?';\n          // XDomainRequest only supports GET and POST:\n          if (options.type === 'DELETE') {\n            options.url = options.url + addParamChar + '_method=DELETE';\n            options.type = 'POST';\n          } else if (options.type === 'PUT') {\n            options.url = options.url + addParamChar + '_method=PUT';\n            options.type = 'POST';\n          } else if (options.type === 'PATCH') {\n            options.url = options.url + addParamChar + '_method=PATCH';\n            options.type = 'POST';\n          }\n          // IE versions below IE8 cannot set the name property of\n          // elements that have already been added to the DOM,\n          // so we set the name along with the iframe HTML markup:\n          counter += 1;\n          iframe = $(\n            '<iframe src=\"' +\n              initialIframeSrc +\n              '\" name=\"iframe-transport-' +\n              counter +\n              '\"></iframe>'\n          ).on('load', function () {\n            var fileInputClones,\n              paramNames = $.isArray(options.paramName)\n                ? options.paramName\n                : [options.paramName];\n            iframe.off('load').on('load', function () {\n              var response;\n              // Wrap in a try/catch block to catch exceptions thrown\n              // when trying to access cross-domain iframe contents:\n              try {\n                response = iframe.contents();\n                // Google Chrome and Firefox do not throw an\n                // exception when calling iframe.contents() on\n                // cross-domain requests, so we unify the response:\n                if (!response.length || !response[0].firstChild) {\n                  throw new Error();\n                }\n              } catch (e) {\n                response = undefined;\n              }\n              // The complete callback returns the\n              // iframe content document as response object:\n              completeCallback(200, 'success', { iframe: response });\n              // Fix for IE endless progress bar activity bug\n              // (happens on form submits to iframe targets):\n              $('<iframe src=\"' + initialIframeSrc + '\"></iframe>').appendTo(\n                form\n              );\n              window.setTimeout(function () {\n                // Removing the form in a setTimeout call\n                // allows Chrome's developer tools to display\n                // the response result\n                form.remove();\n              }, 0);\n            });\n            form\n              .prop('target', iframe.prop('name'))\n              .prop('action', options.url)\n              .prop('method', options.type);\n            if (options.formData) {\n              $.each(options.formData, function (index, field) {\n                $('<input type=\"hidden\"/>')\n                  .prop('name', field.name)\n                  .val(field.value)\n                  .appendTo(form);\n              });\n            }\n            if (\n              options.fileInput &&\n              options.fileInput.length &&\n              options.type === 'POST'\n            ) {\n              fileInputClones = options.fileInput.clone();\n              // Insert a clone for each file input field:\n              options.fileInput.after(function (index) {\n                return fileInputClones[index];\n              });\n              if (options.paramName) {\n                options.fileInput.each(function (index) {\n                  $(this).prop('name', paramNames[index] || options.paramName);\n                });\n              }\n              // Appending the file input fields to the hidden form\n              // removes them from their original location:\n              form\n                .append(options.fileInput)\n                .prop('enctype', 'multipart/form-data')\n                // enctype must be set as encoding for IE:\n                .prop('encoding', 'multipart/form-data');\n              // Remove the HTML5 form attribute from the input(s):\n              options.fileInput.removeAttr('form');\n            }\n            window.setTimeout(function () {\n              // Submitting the form in a setTimeout call fixes an issue with\n              // Safari 13 not triggering the iframe load event after resetting\n              // the load event handler, see also:\n              // https://github.com/blueimp/jQuery-File-Upload/issues/3633\n              form.submit();\n              // Insert the file input fields at their original location\n              // by replacing the clones with the originals:\n              if (fileInputClones && fileInputClones.length) {\n                options.fileInput.each(function (index, input) {\n                  var clone = $(fileInputClones[index]);\n                  // Restore the original name and form properties:\n                  $(input)\n                    .prop('name', clone.prop('name'))\n                    .attr('form', clone.attr('form'));\n                  clone.replaceWith(input);\n                });\n              }\n            }, 0);\n          });\n          form.append(iframe).appendTo(document.body);\n        },\n        abort: function () {\n          if (iframe) {\n            // javascript:false as iframe src aborts the request\n            // and prevents warning popups on HTTPS in IE6.\n            iframe.off('load').prop('src', initialIframeSrc);\n          }\n          if (form) {\n            form.remove();\n          }\n        }\n      };\n    }\n  });\n\n  // The iframe transport returns the iframe content document as response.\n  // The following adds converters from iframe to text, json, html, xml\n  // and script.\n  // Please note that the Content-Type for JSON responses has to be text/plain\n  // or text/html, if the browser doesn't include application/json in the\n  // Accept header, else IE will show a download dialog.\n  // The Content-Type for XML responses on the other hand has to be always\n  // application/xml or text/xml, so IE properly parses the XML response.\n  // See also\n  // https://github.com/blueimp/jQuery-File-Upload/wiki/Setup#content-type-negotiation\n  $.ajaxSetup({\n    converters: {\n      'iframe text': function (iframe) {\n        return iframe && $(iframe[0].body).text();\n      },\n      'iframe json': function (iframe) {\n        return iframe && jsonAPI[jsonParse]($(iframe[0].body).text());\n      },\n      'iframe html': function (iframe) {\n        return iframe && $(iframe[0].body).html();\n      },\n      'iframe xml': function (iframe) {\n        var xmlDoc = iframe && iframe[0];\n        return xmlDoc && $.isXMLDoc(xmlDoc)\n          ? xmlDoc\n          : $.parseXML(\n              (xmlDoc.XMLDocument && xmlDoc.XMLDocument.xml) ||\n                $(xmlDoc.body).html()\n            );\n      },\n      'iframe script': function (iframe) {\n        return iframe && $.globalEval($(iframe[0].body).text());\n      }\n    }\n  });\n});\n"],"names":["factory","define","amd","exports","require","window","jQuery","$","counter","jsonAPI","jsonParse","JSON","ajaxTransport","options","async","form","iframe","addParamChar","initialIframeSrc","send","_","completeCallback","attr","formAcceptCharset","test","url","type","on","fileInputClones","paramNames","isArray","paramName","off","response","contents","length","firstChild","Error","e","undefined","appendTo","setTimeout","remove","prop","formData","each","index","field","name","val","value","fileInput","clone","after","append","removeAttr","submit","input","replaceWith","document","body","abort","ajaxSetup","converters","text","html","xmlDoc","isXMLDoc","parseXML","XMLDocument","xml","globalEval"],"mappings":"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"}
