{"version":3,"sources":["<anon>"],"sourcesContent":["/**\n * jsBezier\n *\n * Copyright (c) 2010 - 2017 jsPlumb (hello@jsplumbtoolkit.com)\n *\n * licensed under the MIT license.\n *\n * a set of Bezier curve functions that deal with Beziers, used by jsPlumb, and perhaps useful for other people.  These functions work with Bezier\n * curves of arbitrary degree.\n *\n * - functions are all in the 'jsBezier' namespace.\n *\n * - all input points should be in the format {x:.., y:..}. all output points are in this format too.\n *\n * - all input curves should be in the format [ {x:.., y:..}, {x:.., y:..}, {x:.., y:..}, {x:.., y:..} ]\n *\n * - 'location' as used as an input here refers to a decimal in the range 0-1 inclusive, which indicates a point some proportion along the length\n * of the curve.  location as output has the same format and meaning.\n *\n *\n * Function List:\n * --------------\n *\n * distanceFromCurve(point, curve)\n *\n * \tCalculates the distance that the given point lies from the given Bezier.  Note that it is computed relative to the center of the Bezier,\n * so if you have stroked the curve with a wide pen you may wish to take that into account!  The distance returned is relative to the values\n * of the curve and the point - it will most likely be pixels.\n *\n * gradientAtPoint(curve, location)\n *\n * \tCalculates the gradient to the curve at the given location, as a decimal between 0 and 1 inclusive.\n *\n * gradientAtPointAlongCurveFrom (curve, location)\n *\n *\tCalculates the gradient at the point on the given curve that is 'distance' units from location.\n *\n * nearestPointOnCurve(point, curve)\n *\n *\tCalculates the nearest point to the given point on the given curve.  The return value of this is a JS object literal, containing both the\n *point's coordinates and also the 'location' of the point (see above), for example:  { point:{x:551,y:150}, location:0.263365 }.\n *\n * pointOnCurve(curve, location)\n *\n * \tCalculates the coordinates of the point on the given Bezier curve at the given location.\n *\n * pointAlongCurveFrom(curve, location, distance)\n *\n * \tCalculates the coordinates of the point on the given curve that is 'distance' units from location.  'distance' should be in the same coordinate\n * space as that used to construct the Bezier curve.  For an HTML Canvas usage, for example, distance would be a measure of pixels.\n *\n * locationAlongCurveFrom(curve, location, distance)\n *\n * \tCalculates the location on the given curve that is 'distance' units from location.  'distance' should be in the same coordinate\n * space as that used to construct the Bezier curve.  For an HTML Canvas usage, for example, distance would be a measure of pixels.\n *\n * perpendicularToCurveAt(curve, location, length, distance)\n *\n * \tCalculates the perpendicular to the given curve at the given location.  length is the length of the line you wish for (it will be centered\n * on the point at 'location'). distance is optional, and allows you to specify a point along the path from the given location as the center of\n * the perpendicular returned.  The return value of this is an array of two points: [ {x:...,y:...}, {x:...,y:...} ].\n *\n *\n */\n(function() {\n    var root = this;\n    if(typeof Math.sgn == \"undefined\") {\n        Math.sgn = function(x) { return x == 0 ? 0 : x > 0 ? 1 :-1; };\n    }\n    var Vectors = {\n            subtract \t: \tfunction(v1, v2) { return {x:v1.x - v2.x, y:v1.y - v2.y }; },\n            dotProduct\t: \tfunction(v1, v2) { return (v1.x * v2.x)  + (v1.y * v2.y); },\n            square\t\t:\tfunction(v) { return Math.sqrt((v.x * v.x) + (v.y * v.y)); },\n            scale\t\t:\tfunction(v, s) { return {x:v.x * s, y:v.y * s }; }\n        },\n        maxRecursion = 64,\n        flatnessTolerance = Math.pow(2.0,-maxRecursion-1);\n    /**\n     * Calculates the distance that the point lies from the curve.\n     *\n     * @param point a point in the form {x:567, y:3342}\n     * @param curve a Bezier curve in the form [{x:..., y:...}, {x:..., y:...}, {x:..., y:...}, {x:..., y:...}].  note that this is currently\n     * hardcoded to assume cubiz beziers, but would be better off supporting any degree.\n     * @return a JS object literal containing location and distance, for example: {location:0.35, distance:10}.  Location is analogous to the location\n     * argument you pass to the pointOnPath function: it is a ratio of distance travelled along the curve.  Distance is the distance in pixels from\n     * the point to the curve.\n     */\n    var _distanceFromCurve = function(point, curve) {\n        var candidates = [],\n            w = _convertToBezier(point, curve),\n            degree = curve.length - 1, higherDegree = (2 * degree) - 1,\n            numSolutions = _findRoots(w, higherDegree, candidates, 0),\n            v = Vectors.subtract(point, curve[0]), dist = Vectors.square(v), t = 0.0;\n        for (var i = 0; i < numSolutions; i++) {\n            v = Vectors.subtract(point, _bezier(curve, degree, candidates[i], null, null));\n            var newDist = Vectors.square(v);\n            if (newDist < dist) {\n                dist = newDist;\n                t = candidates[i];\n            }\n        }\n        v = Vectors.subtract(point, curve[degree]);\n        newDist = Vectors.square(v);\n        if (newDist < dist) {\n            dist = newDist;\n            t = 1.0;\n        }\n        return {location:t, distance:dist};\n    };\n    /**\n     * finds the nearest point on the curve to the given point.\n     */\n    var _nearestPointOnCurve = function(point, curve) {\n        var td = _distanceFromCurve(point, curve);\n        return {point:_bezier(curve, curve.length - 1, td.location, null, null), location:td.location};\n    };\n    var _convertToBezier = function(point, curve) {\n        var degree = curve.length - 1, higherDegree = (2 * degree) - 1,\n            c = [], d = [], cdTable = [], w = [],\n            z = [ [1.0, 0.6, 0.3, 0.1], [0.4, 0.6, 0.6, 0.4], [0.1, 0.3, 0.6, 1.0] ];\n        for (var i = 0; i <= degree; i++) c[i] = Vectors.subtract(curve[i], point);\n        for (var i = 0; i <= degree - 1; i++) {\n            d[i] = Vectors.subtract(curve[i+1], curve[i]);\n            d[i] = Vectors.scale(d[i], 3.0);\n        }\n        for (var row = 0; row <= degree - 1; row++) {\n            for (var column = 0; column <= degree; column++) {\n                if (!cdTable[row]) cdTable[row] = [];\n                cdTable[row][column] = Vectors.dotProduct(d[row], c[column]);\n            }\n        }\n        for (i = 0; i <= higherDegree; i++) {\n            if (!w[i]) w[i] = [];\n            w[i].y = 0.0;\n            w[i].x = parseFloat(i) / higherDegree;\n        }\n        var n = degree, m = degree-1;\n        for (var k = 0; k <= n + m; k++) {\n            var lb = Math.max(0, k - m),\n                ub = Math.min(k, n);\n            for (i = lb; i <= ub; i++) {\n                var j = k - i;\n                w[i+j].y += cdTable[j][i] * z[j][i];\n            }\n        }\n        return w;\n    };\n    /**\n     * counts how many roots there are.\n     */\n    var _findRoots = function(w, degree, t, depth) {\n        var left = [], right = [],\n            left_count, right_count,\n            left_t = [], right_t = [];\n        switch (_getCrossingCount(w, degree)) {\n            case 0 : {\n                return 0;\n            }\n            case 1 : {\n                if (depth >= maxRecursion) {\n                    t[0] = (w[0].x + w[degree].x) / 2.0;\n                    return 1;\n                }\n                if (_isFlatEnough(w, degree)) {\n                    t[0] = _computeXIntercept(w, degree);\n                    return 1;\n                }\n                break;\n            }\n        }\n        _bezier(w, degree, 0.5, left, right);\n        left_count  = _findRoots(left,  degree, left_t, depth+1);\n        right_count = _findRoots(right, degree, right_t, depth+1);\n        for (var i = 0; i < left_count; i++) t[i] = left_t[i];\n        for (var i = 0; i < right_count; i++) t[i+left_count] = right_t[i];\n        return (left_count+right_count);\n    };\n    var _getCrossingCount = function(curve, degree) {\n        var n_crossings = 0, sign, old_sign;\n        sign = old_sign = Math.sgn(curve[0].y);\n        for (var i = 1; i <= degree; i++) {\n            sign = Math.sgn(curve[i].y);\n            if (sign != old_sign) n_crossings++;\n            old_sign = sign;\n        }\n        return n_crossings;\n    };\n    var _isFlatEnough = function(curve, degree) {\n        var  error,\n            intercept_1, intercept_2, left_intercept, right_intercept,\n            a, b, c, det, dInv, a1, b1, c1, a2, b2, c2;\n        a = curve[0].y - curve[degree].y;\n        b = curve[degree].x - curve[0].x;\n        c = curve[0].x * curve[degree].y - curve[degree].x * curve[0].y;\n        var max_distance_above, max_distance_below;\n        max_distance_above = max_distance_below = 0.0;\n        for (var i = 1; i < degree; i++) {\n            var value = a * curve[i].x + b * curve[i].y + c;\n            if (value > max_distance_above)\n                max_distance_above = value;\n            else if (value < max_distance_below)\n                max_distance_below = value;\n        }\n        a1 = 0.0; b1 = 1.0; c1 = 0.0; a2 = a; b2 = b;\n        c2 = c - max_distance_above;\n        det = a1 * b2 - a2 * b1;\n        dInv = 1.0/det;\n        intercept_1 = (b1 * c2 - b2 * c1) * dInv;\n        a2 = a; b2 = b; c2 = c - max_distance_below;\n        det = a1 * b2 - a2 * b1;\n        dInv = 1.0/det;\n        intercept_2 = (b1 * c2 - b2 * c1) * dInv;\n        left_intercept = Math.min(intercept_1, intercept_2);\n        right_intercept = Math.max(intercept_1, intercept_2);\n        error = right_intercept - left_intercept;\n        return (error < flatnessTolerance)? 1 : 0;\n    };\n    var _computeXIntercept = function(curve, degree) {\n        var XLK = 1.0, YLK = 0.0,\n            XNM = curve[degree].x - curve[0].x, YNM = curve[degree].y - curve[0].y,\n            XMK = curve[0].x - 0.0, YMK = curve[0].y - 0.0,\n            det = XNM*YLK - YNM*XLK, detInv = 1.0/det,\n            S = (XNM*YMK - YNM*XMK) * detInv;\n        return 0.0 + XLK * S;\n    };\n    var _bezier = function(curve, degree, t, left, right) {\n        var temp = [[]];\n        for (var j =0; j <= degree; j++) temp[0][j] = curve[j];\n        for (var i = 1; i <= degree; i++) {\n            for (var j =0 ; j <= degree - i; j++) {\n                if (!temp[i]) temp[i] = [];\n                if (!temp[i][j]) temp[i][j] = {};\n                temp[i][j].x = (1.0 - t) * temp[i-1][j].x + t * temp[i-1][j+1].x;\n                temp[i][j].y = (1.0 - t) * temp[i-1][j].y + t * temp[i-1][j+1].y;\n            }\n        }\n        if (left != null)\n            for (j = 0; j <= degree; j++) left[j]  = temp[j][0];\n        if (right != null)\n            for (j = 0; j <= degree; j++) right[j] = temp[degree-j][j];\n        return (temp[degree][0]);\n    };\n    var _curveFunctionCache = {};\n    var _getCurveFunctions = function(order) {\n        var fns = _curveFunctionCache[order];\n        if (!fns) {\n            fns = [];\n            var f_term = function() { return function(t) { return Math.pow(t, order); }; },\n                l_term = function() { return function(t) { return Math.pow((1-t), order); }; },\n                c_term = function(c) { return function(t) { return c; }; },\n                t_term = function() { return function(t) { return t; }; },\n                one_minus_t_term = function() { return function(t) { return 1-t; }; },\n                _termFunc = function(terms) {\n                    return function(t) {\n                        var p = 1;\n                        for (var i = 0; i < terms.length; i++) p = p * terms[i](t);\n                        return p;\n                    };\n                };\n            fns.push(new f_term());  // first is t to the power of the curve order\n            for (var i = 1; i < order; i++) {\n                var terms = [new c_term(order)];\n                for (var j = 0 ; j < (order - i); j++) terms.push(new t_term());\n                for (var j = 0 ; j < i; j++) terms.push(new one_minus_t_term());\n                fns.push(new _termFunc(terms));\n            }\n            fns.push(new l_term());  // last is (1-t) to the power of the curve order\n            _curveFunctionCache[order] = fns;\n        }\n        return fns;\n    };\n    /**\n     * calculates a point on the curve, for a Bezier of arbitrary order.\n     * @param curve an array of control points, eg [{x:10,y:20}, {x:50,y:50}, {x:100,y:100}, {x:120,y:100}].  For a cubic bezier this should have four points.\n     * @param location a decimal indicating the distance along the curve the point should be located at.  this is the distance along the curve as it travels, taking the way it bends into account.  should be a number from 0 to 1, inclusive.\n     */\n    var _pointOnPath = function(curve, location) {\n        var cc = _getCurveFunctions(curve.length - 1),\n            _x = 0, _y = 0;\n        for (var i = 0; i < curve.length ; i++) {\n            _x = _x + (curve[i].x * cc[i](location));\n            _y = _y + (curve[i].y * cc[i](location));\n        }\n        return {x:_x, y:_y};\n    };\n    var _dist = function(p1,p2) {\n        return Math.sqrt(Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2));\n    };\n    var _isPoint = function(curve) {\n        return curve[0].x === curve[1].x && curve[0].y === curve[1].y;\n    };\n    /**\n     * finds the point that is 'distance' along the path from 'location'.  this method returns both the x,y location of the point and also\n     * its 'location' (proportion of travel along the path); the method below - _pointAlongPathFrom - calls this method and just returns the\n     * point.\n     */\n    var _pointAlongPath = function(curve, location, distance) {\n        \n        if (_isPoint(curve)) {\n            return {\n                point:curve[0],\n                location:location\n            };\n        }\n        var prev = _pointOnPath(curve, location),\n            tally = 0,\n            curLoc = location,\n            direction = distance > 0 ? 1 : -1,\n            cur = null;\n        while (tally < Math.abs(distance)) {\n            curLoc += (0.005 * direction);\n            cur = _pointOnPath(curve, curLoc);\n            tally += _dist(cur, prev);\n            prev = cur;\n        }\n        return {point:cur, location:curLoc};\n    };\n    var _length = function(curve) {\n        var d = new Date().getTime();\n        if (_isPoint(curve)) return 0;\n        var prev = _pointOnPath(curve, 0),\n            tally = 0,\n            curLoc = 0,\n            direction = 1,\n            cur = null;\n        while (curLoc < 1) {\n            curLoc += (0.005 * direction);\n            cur = _pointOnPath(curve, curLoc);\n            tally += _dist(cur, prev);\n            prev = cur;\n        }\n        console.log(\"length\", new Date().getTime() - d);\n        return tally;\n    };\n    /**\n     * finds the point that is 'distance' along the path from 'location'.\n     */\n    var _pointAlongPathFrom = function(curve, location, distance) {\n        return _pointAlongPath(curve, location, distance).point;\n    };\n    /**\n     * finds the location that is 'distance' along the path from 'location'.\n     */\n    var _locationAlongPathFrom = function(curve, location, distance) {\n        return _pointAlongPath(curve, location, distance).location;\n    };\n    /**\n     * returns the gradient of the curve at the given location, which is a decimal between 0 and 1 inclusive.\n     *\n     * thanks // http://bimixual.org/AnimationLibrary/beziertangents.html\n     */\n    var _gradientAtPoint = function(curve, location) {\n        var p1 = _pointOnPath(curve, location),\n            p2 = _pointOnPath(curve.slice(0, curve.length - 1), location),\n            dy = p2.y - p1.y, dx = p2.x - p1.x;\n        return dy === 0 ? Infinity : Math.atan(dy / dx);\n    };\n    /**\n     returns the gradient of the curve at the point which is 'distance' from the given location.\n     if this point is greater than location 1, the gradient at location 1 is returned.\n     if this point is less than location 0, the gradient at location 0 is returned.\n     */\n    var _gradientAtPointAlongPathFrom = function(curve, location, distance) {\n        var p = _pointAlongPath(curve, location, distance);\n        if (p.location > 1) p.location = 1;\n        if (p.location < 0) p.location = 0;\n        return _gradientAtPoint(curve, p.location);\n    };\n    /**\n     * calculates a line that is 'length' pixels long, perpendicular to, and centered on, the path at 'distance' pixels from the given location.\n     * if distance is not supplied, the perpendicular for the given location is computed (ie. we set distance to zero).\n     */\n    var _perpendicularToPathAt = function(curve, location, length, distance) {\n        distance = distance == null ? 0 : distance;\n        var p = _pointAlongPath(curve, location, distance),\n            m = _gradientAtPoint(curve, p.location),\n            _theta2 = Math.atan(-1 / m),\n            y =  length / 2 * Math.sin(_theta2),\n            x =  length / 2 * Math.cos(_theta2);\n        return [{x:p.point.x + x, y:p.point.y + y}, {x:p.point.x - x, y:p.point.y - y}];\n    };\n    /**\n     * Calculates all intersections of the given line with the given curve.\n     * @param x1\n     * @param y1\n     * @param x2\n     * @param y2\n     * @param curve\n     * @returns {Array}\n     */\n    var _lineIntersection = function(x1, y1, x2, y2, curve) {\n        var a = y2 - y1,\n            b = x1 - x2,\n            c = (x1 * (y1 - y2)) + (y1 * (x2-x1)),\n            coeffs = _computeCoefficients(curve),\n            p = [\n                (a*coeffs[0][0]) + (b * coeffs[1][0]),\n                (a*coeffs[0][1])+(b*coeffs[1][1]),\n                (a*coeffs[0][2])+(b*coeffs[1][2]),\n                (a*coeffs[0][3])+(b*coeffs[1][3]) + c\n            ],\n            r = _cubicRoots.apply(null, p),\n            intersections = [];\n        if (r != null) {\n            for (var i = 0; i < 3; i++) {\n                var t = r[i],\n                    t2 = Math.pow(t, 2),\n                    t3 = Math.pow(t, 3),\n                    x = [\n                        (coeffs[0][0] * t3) + (coeffs[0][1] * t2) + (coeffs[0][2] * t) + coeffs[0][3],\n                        (coeffs[1][0] * t3) + (coeffs[1][1] * t2) + (coeffs[1][2] * t) + coeffs[1][3]\n                    ];\n                // check bounds of the line\n                var s;\n                if ((x2 - x1) !== 0) {\n                    s = (x[0] - x1) / (x2 - x1);\n                }\n                else {\n                    s = (x[1] - y1) / (y2 - y1);\n                }\n                if (t >= 0 && t <= 1.0 && s >= 0 && s <= 1.0) {\n                    intersections.push(x);\n                }\n            }\n        }\n        return intersections;\n    };\n    /**\n     * Calculates all intersections of the given box with the given curve.\n     * @param x X position of top left corner of box\n     * @param y Y position of top left corner of box\n     * @param w width of box\n     * @param h height of box\n     * @param curve\n     * @returns {Array}\n     */\n    var _boxIntersection = function(x, y, w, h, curve) {\n        var i = [];\n        i.push.apply(i, _lineIntersection(x, y, x + w, y, curve));\n        i.push.apply(i, _lineIntersection(x + w, y, x + w, y + h, curve));\n        i.push.apply(i, _lineIntersection(x + w, y + h, x, y + h, curve));\n        i.push.apply(i, _lineIntersection(x, y + h, x, y, curve));\n        return i;\n    };\n    /**\n     * Calculates all intersections of the given bounding box with the given curve.\n     * @param boundingBox Bounding box, in { x:.., y:..., w:..., h:... } format.\n     * @param curve\n     * @returns {Array}\n     */\n    var _boundingBoxIntersection = function(boundingBox, curve) {\n        var i = [];\n        i.push.apply(i, _lineIntersection(boundingBox.x, boundingBox.y, boundingBox.x + boundingBox.w, boundingBox.y, curve));\n        i.push.apply(i, _lineIntersection(boundingBox.x + boundingBox.w, boundingBox.y, boundingBox.x + boundingBox.w, boundingBox.y + boundingBox.h, curve));\n        i.push.apply(i, _lineIntersection(boundingBox.x + boundingBox.w, boundingBox.y + boundingBox.h, boundingBox.x, boundingBox.y + boundingBox.h, curve));\n        i.push.apply(i, _lineIntersection(boundingBox.x, boundingBox.y + boundingBox.h, boundingBox.x, boundingBox.y, curve));\n        return i;\n    };\n    function _computeCoefficientsForAxis(curve, axis) {\n        return [\n            -(curve[0][axis]) + (3*curve[1][axis]) + (-3 * curve[2][axis]) + curve[3][axis],\n            (3*(curve[0][axis])) - (6*(curve[1][axis])) + (3*(curve[2][axis])),\n            -3*curve[0][axis] + 3*curve[1][axis],\n            curve[0][axis]\n        ];\n    }\n    function _computeCoefficients(curve)\n    {\n        return [\n            _computeCoefficientsForAxis(curve, \"x\"),\n            _computeCoefficientsForAxis(curve, \"y\")\n        ];\n    }\n    function sgn(x) {\n        return x < 0 ? -1 : x > 0 ? 1 : 0;\n    }\n    function _cubicRoots(a, b, c, d) {\n        var A = b / a,\n            B = c / a,\n            C = d / a,\n            Q = (3*B - Math.pow(A, 2))/9,\n            R = (9*A*B - 27*C - 2*Math.pow(A, 3))/54,\n            D = Math.pow(Q, 3) + Math.pow(R, 2),\n            S,\n            T,\n            t = [];\n        if (D >= 0)                                 // complex or duplicate roots\n        {\n            S = sgn(R + Math.sqrt(D))*Math.pow(Math.abs(R + Math.sqrt(D)),(1/3));\n            T = sgn(R - Math.sqrt(D))*Math.pow(Math.abs(R - Math.sqrt(D)),(1/3));\n            t[0] = -A/3 + (S + T);\n            t[1] = -A/3 - (S + T)/2;\n            t[2] = -A/3 - (S + T)/2;\n            /*discard complex roots*/\n            if (Math.abs(Math.sqrt(3)*(S - T)/2) !== 0) {\n                t[1] = -1;\n                t[2] = -1;\n            }\n        }\n        else                                          // distinct real roots\n        {\n            var th = Math.acos(R/Math.sqrt(-Math.pow(Q, 3)));\n            t[0] = 2*Math.sqrt(-Q)*Math.cos(th/3) - A/3;\n            t[1] = 2*Math.sqrt(-Q)*Math.cos((th + 2*Math.PI)/3) - A/3;\n            t[2] = 2*Math.sqrt(-Q)*Math.cos((th + 4*Math.PI)/3) - A/3;\n        }\n        // discard out of spec roots\n        for (var i = 0; i < 3; i++) {\n            if (t[i] < 0 || t[i] > 1.0) {\n                t[i] = -1;\n            }\n        }\n        return t;\n    }\n    var jsBezier = this.jsBezier = {\n        distanceFromCurve : _distanceFromCurve,\n        gradientAtPoint : _gradientAtPoint,\n        gradientAtPointAlongCurveFrom : _gradientAtPointAlongPathFrom,\n        nearestPointOnCurve : _nearestPointOnCurve,\n        pointOnCurve : _pointOnPath,\n        pointAlongCurveFrom : _pointAlongPathFrom,\n        perpendicularToCurveAt : _perpendicularToPathAt,\n        locationAlongCurveFrom:_locationAlongPathFrom,\n        getLength:_length,\n        lineIntersection:_lineIntersection,\n        boxIntersection:_boxIntersection,\n        boundingBoxIntersection:_boundingBoxIntersection,\n        version:\"0.9.0\"\n    };\n    if (typeof exports !== \"undefined\") {\n        exports.jsBezier = jsBezier;\n    }\n}).call(typeof window !== 'undefined' ? window : this);\n/**\n * Biltong v0.4.0\n *\n * Various geometry functions written as part of jsPlumb and perhaps useful for others.\n *\n * Copyright (c) 2017 jsPlumb\n * https://jsplumbtoolkit.com\n *\n * Permission is hereby granted, free of charge, to any person\n * obtaining a copy of this software and associated documentation\n * files (the \"Software\"), to deal in the Software without\n * restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following\n * conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n * OTHER DEALINGS IN THE SOFTWARE.\n */\n;(function() {\n    \"use strict\";\n    var root = this;\n    var Biltong = root.Biltong = {\n        version:\"0.4.0\"\n    };\n    if (typeof exports !== \"undefined\") {\n        exports.Biltong = Biltong;\n    }\n    var _isa = function(a) { return Object.prototype.toString.call(a) === \"[object Array]\"; },\n        _pointHelper = function(p1, p2, fn) {\n            p1 = _isa(p1) ? p1 : [p1.x, p1.y];\n            p2 = _isa(p2) ? p2 : [p2.x, p2.y];\n            return fn(p1, p2);\n        },\n        /**\n         * @name Biltong.gradient\n         * @function\n         * @desc Calculates the gradient of a line between the two points.\n         * @param {Point} p1 First point, either as a 2 entry array or object with `left` and `top` properties.\n         * @param {Point} p2 Second point, either as a 2 entry array or object with `left` and `top` properties.\n         * @return {Float} The gradient of a line between the two points.\n         */\n        _gradient = Biltong.gradient = function(p1, p2) {\n            return _pointHelper(p1, p2, function(_p1, _p2) {\n                if (_p2[0] == _p1[0])\n                    return _p2[1] > _p1[1] ? Infinity : -Infinity;\n                else if (_p2[1] == _p1[1])\n                    return _p2[0] > _p1[0] ? 0 : -0;\n                else\n                    return (_p2[1] - _p1[1]) / (_p2[0] - _p1[0]);\n            });\n        },\n        /**\n         * @name Biltong.normal\n         * @function\n         * @desc Calculates the gradient of a normal to a line between the two points.\n         * @param {Point} p1 First point, either as a 2 entry array or object with `left` and `top` properties.\n         * @param {Point} p2 Second point, either as a 2 entry array or object with `left` and `top` properties.\n         * @return {Float} The gradient of a normal to a line between the two points.\n         */\n        _normal = Biltong.normal = function(p1, p2) {\n            return -1 / _gradient(p1, p2);\n        },\n        /**\n         * @name Biltong.lineLength\n         * @function\n         * @desc Calculates the length of a line between the two points.\n         * @param {Point} p1 First point, either as a 2 entry array or object with `left` and `top` properties.\n         * @param {Point} p2 Second point, either as a 2 entry array or object with `left` and `top` properties.\n         * @return {Float} The length of a line between the two points.\n         */\n        _lineLength = Biltong.lineLength = function(p1, p2) {\n            return _pointHelper(p1, p2, function(_p1, _p2) {\n                return Math.sqrt(Math.pow(_p2[1] - _p1[1], 2) + Math.pow(_p2[0] - _p1[0], 2));\n            });\n        },\n        /**\n         * @name Biltong.quadrant\n         * @function\n         * @desc Calculates the quadrant in which the angle between the two points lies.\n         * @param {Point} p1 First point, either as a 2 entry array or object with `left` and `top` properties.\n         * @param {Point} p2 Second point, either as a 2 entry array or object with `left` and `top` properties.\n         * @return {Integer} The quadrant - 1 for upper right, 2 for lower right, 3 for lower left, 4 for upper left.\n         */\n        _quadrant = Biltong.quadrant = function(p1, p2) {\n            return _pointHelper(p1, p2, function(_p1, _p2) {\n                if (_p2[0] > _p1[0]) {\n                    return (_p2[1] > _p1[1]) ? 2 : 1;\n                }\n                else if (_p2[0] == _p1[0]) {\n                    return _p2[1] > _p1[1] ? 2 : 1;\n                }\n                else {\n                    return (_p2[1] > _p1[1]) ? 3 : 4;\n                }\n            });\n        },\n        /**\n         * @name Biltong.theta\n         * @function\n         * @desc Calculates the angle between the two points.\n         * @param {Point} p1 First point, either as a 2 entry array or object with `left` and `top` properties.\n         * @param {Point} p2 Second point, either as a 2 entry array or object with `left` and `top` properties.\n         * @return {Float} The angle between the two points.\n         */\n        _theta = Biltong.theta = function(p1, p2) {\n            return _pointHelper(p1, p2, function(_p1, _p2) {\n                var m = _gradient(_p1, _p2),\n                    t = Math.atan(m),\n                    s = _quadrant(_p1, _p2);\n                if ((s == 4 || s== 3)) t += Math.PI;\n                if (t < 0) t += (2 * Math.PI);\n                return t;\n            });\n        },\n        /**\n         * @name Biltong.intersects\n         * @function\n         * @desc Calculates whether or not the two rectangles intersect.\n         * @param {Rectangle} r1 First rectangle, as a js object in the form `{x:.., y:.., w:.., h:..}`\n         * @param {Rectangle} r2 Second rectangle, as a js object in the form `{x:.., y:.., w:.., h:..}`\n         * @return {Boolean} True if the rectangles intersect, false otherwise.\n         */\n        _intersects = Biltong.intersects = function(r1, r2) {\n            var x1 = r1.x, x2 = r1.x + r1.w, y1 = r1.y, y2 = r1.y + r1.h,\n                a1 = r2.x, a2 = r2.x + r2.w, b1 = r2.y, b2 = r2.y + r2.h;\n            return  ( (x1 <= a1 && a1 <= x2) && (y1 <= b1 && b1 <= y2) ) ||\n                ( (x1 <= a2 && a2 <= x2) && (y1 <= b1 && b1 <= y2) ) ||\n                ( (x1 <= a1 && a1 <= x2) && (y1 <= b2 && b2 <= y2) ) ||\n                ( (x1 <= a2 && a1 <= x2) && (y1 <= b2 && b2 <= y2) ) ||\n                ( (a1 <= x1 && x1 <= a2) && (b1 <= y1 && y1 <= b2) ) ||\n                ( (a1 <= x2 && x2 <= a2) && (b1 <= y1 && y1 <= b2) ) ||\n                ( (a1 <= x1 && x1 <= a2) && (b1 <= y2 && y2 <= b2) ) ||\n                ( (a1 <= x2 && x1 <= a2) && (b1 <= y2 && y2 <= b2) );\n        },\n        /**\n         * @name Biltong.encloses\n         * @function\n         * @desc Calculates whether or not r2 is completely enclosed by r1.\n         * @param {Rectangle} r1 First rectangle, as a js object in the form `{x:.., y:.., w:.., h:..}`\n         * @param {Rectangle} r2 Second rectangle, as a js object in the form `{x:.., y:.., w:.., h:..}`\n         * @param {Boolean} [allowSharedEdges=false] If true, the concept of enclosure allows for one or more edges to be shared by the two rectangles.\n         * @return {Boolean} True if r1 encloses r2, false otherwise.\n         */\n        _encloses = Biltong.encloses = function(r1, r2, allowSharedEdges) {\n            var x1 = r1.x, x2 = r1.x + r1.w, y1 = r1.y, y2 = r1.y + r1.h,\n                a1 = r2.x, a2 = r2.x + r2.w, b1 = r2.y, b2 = r2.y + r2.h,\n                c = function(v1, v2, v3, v4) { return allowSharedEdges ? v1 <= v2 && v3>= v4 : v1 < v2 && v3 > v4; };\n            return c(x1,a1,x2,a2) && c(y1,b1,y2,b2);\n        },\n        _segmentMultipliers = [null, [1, -1], [1, 1], [-1, 1], [-1, -1] ],\n        _inverseSegmentMultipliers = [null, [-1, -1], [-1, 1], [1, 1], [1, -1] ],\n        /**\n         * @name Biltong.pointOnLine\n         * @function\n         * @desc Calculates a point on the line from `fromPoint` to `toPoint` that is `distance` units along the length of the line.\n         * @param {Point} p1 First point, either as a 2 entry array or object with `left` and `top` properties.\n         * @param {Point} p2 Second point, either as a 2 entry array or object with `left` and `top` properties.\n         * @return {Point} Point on the line, in the form `{ x:..., y:... }`.\n         */\n        _pointOnLine = Biltong.pointOnLine = function(fromPoint, toPoint, distance) {\n            var m = _gradient(fromPoint, toPoint),\n                s = _quadrant(fromPoint, toPoint),\n                segmentMultiplier = distance > 0 ? _segmentMultipliers[s] : _inverseSegmentMultipliers[s],\n                theta = Math.atan(m),\n                y = Math.abs(distance * Math.sin(theta)) * segmentMultiplier[1],\n                x =  Math.abs(distance * Math.cos(theta)) * segmentMultiplier[0];\n            return { x:fromPoint.x + x, y:fromPoint.y + y };\n        },\n        /**\n         * @name Biltong.perpendicularLineTo\n         * @function\n         * @desc Calculates a line of length `length` that is perpendicular to the line from `fromPoint` to `toPoint` and passes through `toPoint`.\n         * @param {Point} p1 First point, either as a 2 entry array or object with `left` and `top` properties.\n         * @param {Point} p2 Second point, either as a 2 entry array or object with `left` and `top` properties.\n         * @return {Line} Perpendicular line, in the form `[ { x:..., y:... }, { x:..., y:... } ]`.\n         */\n        _perpendicularLineTo = Biltong.perpendicularLineTo = function(fromPoint, toPoint, length) {\n            var m = _gradient(fromPoint, toPoint),\n                theta2 = Math.atan(-1 / m),\n                y =  length / 2 * Math.sin(theta2),\n                x =  length / 2 * Math.cos(theta2);\n            return [{x:toPoint.x + x, y:toPoint.y + y}, {x:toPoint.x - x, y:toPoint.y - y}];\n        };\n}).call(typeof window !== 'undefined' ? window : this);\n;\n(function () {\n    \"use strict\";\n    /**\n     * Creates a Touch object.\n     * @param view\n     * @param target\n     * @param pageX\n     * @param pageY\n     * @param screenX\n     * @param screenY\n     * @param clientX\n     * @param clientY\n     * @returns {Touch}\n     * @private\n     */\n    function _touch(view, target, pageX, pageY, screenX, screenY, clientX, clientY) {\n            return new Touch({\n                target:target,\n                identifier:_uuid(),\n                pageX: pageX,\n                pageY: pageY,\n                screenX: screenX,\n                screenY: screenY,\n                clientX: clientX || screenX,\n                clientY: clientY || screenY\n            });\n    }\n    /**\n     * Create a synthetic touch list from the given list of Touch objects.\n     * @returns {Array}\n     * @private\n     */\n    function _touchList() {\n        var list = [];\n        Array.prototype.push.apply(list, arguments);\n        list.item =  function(index) { return this[index]; };\n        return list;\n    }\n    /**\n     * Create a Touch object and then insert it into a synthetic touch list, returning the list.s\n     * @param view\n     * @param target\n     * @param pageX\n     * @param pageY\n     * @param screenX\n     * @param screenY\n     * @param clientX\n     * @param clientY\n     * @returns {Array}\n     * @private\n     */\n    function _touchAndList(view, target, pageX, pageY, screenX, screenY, clientX, clientY) {\n        return _touchList(_touch.apply(null, arguments));\n    }\n    var root = this,\n        matchesSelector = function (el, selector, ctx) {\n            ctx = ctx || el.parentNode;\n            var possibles = ctx.querySelectorAll(selector);\n            for (var i = 0; i < possibles.length; i++) {\n                if (possibles[i] === el) {\n                    return true;\n                }\n            }\n            return false;\n        },\n        _gel = function (el) {\n            return (typeof el == \"string\" || el.constructor === String) ? document.getElementById(el) : el;\n        },\n        _t = function (e) {\n            return e.srcElement || e.target;\n        },\n    //\n    // gets path info for the given event - the path from target to obj, in the event's bubble chain. if doCompute\n    // is false we just return target for the path.\n    //\n        _pi = function(e, target, obj, doCompute) {\n            if (!doCompute) return { path:[target], end:1 };\n            else if (typeof e.path !== \"undefined\" && e.path.indexOf) {\n                return { path: e.path, end: e.path.indexOf(obj) };\n            } else {\n                var out = { path:[], end:-1 }, _one = function(el) {\n                    out.path.push(el);\n                    if (el === obj) {\n                        out.end = out.path.length - 1;\n                    }\n                    else if (el.parentNode != null) {\n                        _one(el.parentNode)\n                    }\n                };\n                _one(target);\n                return out;\n            }\n        },\n        _d = function (l, fn) {\n            for (var i = 0, j = l.length; i < j; i++) {\n                if (l[i] == fn) break;\n            }\n            if (i < l.length) l.splice(i, 1);\n        },\n        guid = 1,\n    //\n    // this function generates a guid for every handler, sets it on the handler, then adds\n    // it to the associated object's map of handlers for the given event. this is what enables us\n    // to unbind all events of some type, or all events (the second of which can be requested by the user,\n    // but it also used by Mottle when an element is removed.)\n        _store = function (obj, event, fn) {\n            var g = guid++;\n            obj.__ta = obj.__ta || {};\n            obj.__ta[event] = obj.__ta[event] || {};\n            // store each handler with a unique guid.\n            obj.__ta[event][g] = fn;\n            // set the guid on the handler.\n            fn.__tauid = g;\n            return g;\n        },\n        _unstore = function (obj, event, fn) {\n            obj.__ta && obj.__ta[event] && delete obj.__ta[event][fn.__tauid];\n            // a handler might have attached extra functions, so we unbind those too.\n            if (fn.__taExtra) {\n                for (var i = 0; i < fn.__taExtra.length; i++) {\n                    _unbind(obj, fn.__taExtra[i][0], fn.__taExtra[i][1]);\n                }\n                fn.__taExtra.length = 0;\n            }\n            // a handler might have attached an unstore callback\n            fn.__taUnstore && fn.__taUnstore();\n        },\n        _curryChildFilter = function (children, obj, fn, evt) {\n            if (children == null) return fn;\n            else {\n                var c = children.split(\",\"),\n                    _fn = function (e) {\n                        _fn.__tauid = fn.__tauid;\n                        var t = _t(e), target = t;  // t is the target element on which the event occurred. it is the\n                        // element we will wish to pass to any callbacks.\n                        var pathInfo = _pi(e, t, obj, children != null)\n                        if (pathInfo.end != -1) {\n                            for (var p = 0; p < pathInfo.end; p++) {\n                                target = pathInfo.path[p];\n                                for (var i = 0; i < c.length; i++) {\n                                    if (matchesSelector(target, c[i], obj)) {\n                                        fn.apply(target, arguments);\n                                    }\n                                }\n                            }\n                        }\n                    };\n                registerExtraFunction(fn, evt, _fn);\n                return _fn;\n            }\n        },\n    //\n    // registers an 'extra' function on some event listener function we were given - a function that we\n    // created and bound to the element as part of our housekeeping, and which we want to unbind and remove\n    // whenever the given function is unbound.\n        registerExtraFunction = function (fn, evt, newFn) {\n            fn.__taExtra = fn.__taExtra || [];\n            fn.__taExtra.push([evt, newFn]);\n        },\n        DefaultHandler = function (obj, evt, fn, children) {\n            if (isTouchDevice && touchMap[evt]) {\n                var tfn = _curryChildFilter(children, obj, fn, touchMap[evt]);\n                _bind(obj, touchMap[evt], tfn , fn);\n            }\n            if (evt === \"focus\" && obj.getAttribute(\"tabindex\") == null) {\n                obj.setAttribute(\"tabindex\", \"1\");\n            }\n            _bind(obj, evt, _curryChildFilter(children, obj, fn, evt), fn);\n        },\n        SmartClickHandler = function (obj, evt, fn, children) {\n            if (obj.__taSmartClicks == null) {\n                var down = function (e) {\n                        obj.__tad = _pageLocation(e);\n                    },\n                    up = function (e) {\n                        obj.__tau = _pageLocation(e);\n                    },\n                    click = function (e) {\n                        if (obj.__tad && obj.__tau && obj.__tad[0] === obj.__tau[0] && obj.__tad[1] === obj.__tau[1]) {\n                            for (var i = 0; i < obj.__taSmartClicks.length; i++)\n                                obj.__taSmartClicks[i].apply(_t(e), [ e ]);\n                        }\n                    };\n                DefaultHandler(obj, \"mousedown\", down, children);\n                DefaultHandler(obj, \"mouseup\", up, children);\n                DefaultHandler(obj, \"click\", click, children);\n                obj.__taSmartClicks = [];\n            }\n            // store in the list of callbacks\n            obj.__taSmartClicks.push(fn);\n            // the unstore function removes this function from the object's listener list for this type.\n            fn.__taUnstore = function () {\n                _d(obj.__taSmartClicks, fn);\n            };\n        },\n        _tapProfiles = {\n            \"tap\": {touches: 1, taps: 1},\n            \"dbltap\": {touches: 1, taps: 2},\n            \"contextmenu\": {touches: 2, taps: 1}\n        },\n        TapHandler = function (clickThreshold, dblClickThreshold) {\n            return function (obj, evt, fn, children) {\n                // if event is contextmenu, for devices which are mouse only, we want to\n                // use the default bind.\n                if (evt == \"contextmenu\" && isMouseDevice)\n                    DefaultHandler(obj, evt, fn, children);\n                else {\n                    // the issue here is that this down handler gets registered only for the\n                    // child nodes in the first registration. in fact it should be registered with\n                    // no child selector and then on down we should cycle through the registered\n                    // functions to see if one of them matches. on mouseup we should execute ALL of\n                    // the functions whose children are either null or match the element.\n                    if (obj.__taTapHandler == null) {\n                        var tt = obj.__taTapHandler = {\n                            tap: [],\n                            dbltap: [],\n                            contextmenu: [],\n                            down: false,\n                            taps: 0,\n                            downSelectors: []\n                        };\n                        var down = function (e) {\n                                var target = _t(e), pathInfo = _pi(e, target, obj, children != null), finished = false;\n                                for (var p = 0; p < pathInfo.end; p++) {\n                                    if (finished) return;\n                                    target = pathInfo.path[p];\n                                    for (var i = 0; i < tt.downSelectors.length; i++) {\n                                        if (tt.downSelectors[i] == null || matchesSelector(target, tt.downSelectors[i], obj)) {\n                                            tt.down = true;\n                                            setTimeout(clearSingle, clickThreshold);\n                                            setTimeout(clearDouble, dblClickThreshold);\n                                            finished = true;\n                                            break; // we only need one match on mousedown\n                                        }\n                                    }\n                                }\n                            },\n                            up = function (e) {\n                                if (tt.down) {\n                                    var target = _t(e), currentTarget, pathInfo;\n                                    tt.taps++;\n                                    var tc = _touchCount(e);\n                                    for (var eventId in _tapProfiles) {\n                                        if (_tapProfiles.hasOwnProperty(eventId)) {\n                                            var p = _tapProfiles[eventId];\n                                            if (p.touches === tc && (p.taps === 1 || p.taps === tt.taps)) {\n                                                for (var i = 0; i < tt[eventId].length; i++) {\n                                                    pathInfo = _pi(e, target, obj, tt[eventId][i][1] != null);\n                                                    for (var pLoop = 0; pLoop < pathInfo.end; pLoop++) {\n                                                        currentTarget = pathInfo.path[pLoop];\n                                                        // this is a single event registration handler.\n                                                        if (tt[eventId][i][1] == null || matchesSelector(currentTarget, tt[eventId][i][1], obj)) {\n                                                            tt[eventId][i][0].apply(currentTarget, [ e ]);\n                                                            break;\n                                                        }\n                                                    }\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                            },\n                            clearSingle = function () {\n                                tt.down = false;\n                            },\n                            clearDouble = function () {\n                                tt.taps = 0;\n                            };\n                        DefaultHandler(obj, \"mousedown\", down);\n                        DefaultHandler(obj, \"mouseup\", up);\n                    }\n                    // add this child selector (it can be null, that's fine).\n                    obj.__taTapHandler.downSelectors.push(children);\n                    obj.__taTapHandler[evt].push([fn, children]);\n                    // the unstore function removes this function from the object's listener list for this type.\n                    fn.__taUnstore = function () {\n                        _d(obj.__taTapHandler[evt], fn);\n                    };\n                }\n            };\n        },\n        meeHelper = function (type, evt, obj, target) {\n            for (var i in obj.__tamee[type]) {\n                if (obj.__tamee[type].hasOwnProperty(i)) {\n                    obj.__tamee[type][i].apply(target, [ evt ]);\n                }\n            }\n        },\n        MouseEnterExitHandler = function () {\n            var activeElements = [];\n            return function (obj, evt, fn, children) {\n                if (!obj.__tamee) {\n                    // __tamee holds a flag saying whether the mouse is currently \"in\" the element, and a list of\n                    // both mouseenter and mouseexit functions.\n                    obj.__tamee = { over: false, mouseenter: [], mouseexit: [] };\n                    // register over and out functions\n                    var over = function (e) {\n                            var t = _t(e);\n                            if ((children == null && (t == obj && !obj.__tamee.over)) || (matchesSelector(t, children, obj) && (t.__tamee == null || !t.__tamee.over))) {\n                                meeHelper(\"mouseenter\", e, obj, t);\n                                t.__tamee = t.__tamee || {};\n                                t.__tamee.over = true;\n                                activeElements.push(t);\n                            }\n                        },\n                        out = function (e) {\n                            var t = _t(e);\n                            // is the current target one of the activeElements? and is the\n                            // related target NOT a descendant of it?\n                            for (var i = 0; i < activeElements.length; i++) {\n                                if (t == activeElements[i] && !matchesSelector((e.relatedTarget || e.toElement), \"*\", t)) {\n                                    t.__tamee.over = false;\n                                    activeElements.splice(i, 1);\n                                    meeHelper(\"mouseexit\", e, obj, t);\n                                }\n                            }\n                        };\n                    _bind(obj, \"mouseover\", _curryChildFilter(children, obj, over, \"mouseover\"), over);\n                    _bind(obj, \"mouseout\", _curryChildFilter(children, obj, out, \"mouseout\"), out);\n                }\n                fn.__taUnstore = function () {\n                    delete obj.__tamee[evt][fn.__tauid];\n                };\n                _store(obj, evt, fn);\n                obj.__tamee[evt][fn.__tauid] = fn;\n            };\n        },\n        isTouchDevice = \"ontouchstart\" in document.documentElement || navigator.maxTouchPoints,\n        isMouseDevice = \"onmousedown\" in document.documentElement,\n        touchMap = { \"mousedown\": \"touchstart\", \"mouseup\": \"touchend\", \"mousemove\": \"touchmove\" },\n        touchstart = \"touchstart\", touchend = \"touchend\", touchmove = \"touchmove\",\n        iev = (function () {\n            var rv = -1;\n            if (navigator.appName == 'Microsoft Internet Explorer') {\n                var ua = navigator.userAgent,\n                    re = new RegExp(\"MSIE ([0-9]{1,}[\\.0-9]{0,})\");\n                if (re.exec(ua) != null)\n                    rv = parseFloat(RegExp.$1);\n            }\n            return rv;\n        })(),\n        isIELT9 = iev > -1 && iev < 9,\n        _genLoc = function (e, prefix) {\n            if (e == null) return [ 0, 0 ];\n            var ts = _touches(e), t = _getTouch(ts, 0);\n            return [t[prefix + \"X\"], t[prefix + \"Y\"]];\n        },\n        _pageLocation = function (e) {\n            if (e == null) return [ 0, 0 ];\n            if (isIELT9) {\n                return [ e.clientX + document.documentElement.scrollLeft, e.clientY + document.documentElement.scrollTop ];\n            }\n            else {\n                return _genLoc(e, \"page\");\n            }\n        },\n        _screenLocation = function (e) {\n            return _genLoc(e, \"screen\");\n        },\n        _clientLocation = function (e) {\n            return _genLoc(e, \"client\");\n        },\n        _getTouch = function (touches, idx) {\n            return touches.item ? touches.item(idx) : touches[idx];\n        },\n        _touches = function (e) {\n            return e.touches && e.touches.length > 0 ? e.touches :\n                    e.changedTouches && e.changedTouches.length > 0 ? e.changedTouches :\n                    e.targetTouches && e.targetTouches.length > 0 ? e.targetTouches :\n                [ e ];\n        },\n        _touchCount = function (e) {\n            return _touches(e).length;\n        },\n    //http://www.quirksmode.org/blog/archives/2005/10/_and_the_winner_1.html\n        _bind = function (obj, type, fn, originalFn) {\n            _store(obj, type, fn);\n            originalFn.__tauid = fn.__tauid;\n            if (obj.addEventListener)\n                obj.addEventListener(type, fn, false);\n            else if (obj.attachEvent) {\n                var key = type + fn.__tauid;\n                obj[\"e\" + key] = fn;\n                // TODO look at replacing with .call(..)\n                obj[key] = function () {\n                    obj[\"e\" + key] && obj[\"e\" + key](window.event);\n                };\n                obj.attachEvent(\"on\" + type, obj[key]);\n            }\n        },\n        _unbind = function (obj, type, fn) {\n            if (fn == null) return;\n            _each(obj, function () {\n                var _el = _gel(this);\n                _unstore(_el, type, fn);\n                // it has been bound if there is a tauid. otherwise it was not bound and we can ignore it.\n                if (fn.__tauid != null) {\n                    if (_el.removeEventListener) {\n                        _el.removeEventListener(type, fn, false);\n                        if (isTouchDevice && touchMap[type]) _el.removeEventListener(touchMap[type], fn, false);\n                    }\n                    else if (this.detachEvent) {\n                        var key = type + fn.__tauid;\n                        _el[key] && _el.detachEvent(\"on\" + type, _el[key]);\n                        _el[key] = null;\n                        _el[\"e\" + key] = null;\n                    }\n                }\n                // if a touch event was also registered, deregister now.\n                if (fn.__taTouchProxy) {\n                    _unbind(obj, fn.__taTouchProxy[1], fn.__taTouchProxy[0]);\n                }\n            });\n        },\n        _each = function (obj, fn) {\n            if (obj == null) return;\n            // if a list (or list-like), use it. if a string, get a list\n            // by running the string through querySelectorAll. else, assume\n            // it's an Element.\n            // obj.top is \"unknown\" in IE8.\n            obj = (typeof Window !== \"undefined\" && (typeof obj.top !== \"unknown\" && obj == obj.top)) ? [ obj ] :\n                    (typeof obj !== \"string\") && (obj.tagName == null && obj.length != null) ? obj :\n                    typeof obj === \"string\" ? document.querySelectorAll(obj)\n                : [ obj ];\n            for (var i = 0; i < obj.length; i++)\n                fn.apply(obj[i]);\n        },\n        _uuid = function () {\n            return ('xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n                var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n                return v.toString(16);\n            }));\n        };\n    /**\n     * Mottle offers support for abstracting out the differences\n     * between touch and mouse devices, plus \"smart click\" functionality\n     * (don't fire click if the mouse has moved between mousedown and mouseup),\n     * and synthesized click/tap events.\n     * @class Mottle\n     * @constructor\n     * @param {Object} params Constructor params\n     * @param {Number} [params.clickThreshold=250] Threshold, in milliseconds beyond which a touchstart followed by a touchend is not considered to be a click.\n     * @param {Number} [params.dblClickThreshold=450] Threshold, in milliseconds beyond which two successive tap events are not considered to be a click.\n     * @param {Boolean} [params.smartClicks=false] If true, won't fire click events if the mouse has moved between mousedown and mouseup. Note that this functionality\n     * requires that Mottle consume the mousedown event, and so may not be viable in all use cases.\n     */\n    root.Mottle = function (params) {\n        params = params || {};\n        var clickThreshold = params.clickThreshold || 250,\n            dblClickThreshold = params.dblClickThreshold || 450,\n            mouseEnterExitHandler = new MouseEnterExitHandler(),\n            tapHandler = new TapHandler(clickThreshold, dblClickThreshold),\n            _smartClicks = params.smartClicks,\n            _doBind = function (obj, evt, fn, children) {\n                if (fn == null) return;\n                _each(obj, function () {\n                    var _el = _gel(this);\n                    if (_smartClicks && evt === \"click\")\n                        SmartClickHandler(_el, evt, fn, children);\n                    else if (evt === \"tap\" || evt === \"dbltap\" || evt === \"contextmenu\") {\n                        tapHandler(_el, evt, fn, children);\n                    }\n                    else if (evt === \"mouseenter\" || evt == \"mouseexit\")\n                        mouseEnterExitHandler(_el, evt, fn, children);\n                    else\n                        DefaultHandler(_el, evt, fn, children);\n                });\n            };\n        /**\n         * Removes an element from the DOM, and deregisters all event handlers for it. You should use this\n         * to ensure you don't leak memory.\n         * @method remove\n         * @param {String|Element} el Element, or id of the element, to remove.\n         * @return {Mottle} The current Mottle instance; you can chain this method.\n         */\n        this.remove = function (el) {\n            _each(el, function () {\n                var _el = _gel(this);\n                if (_el.__ta) {\n                    for (var evt in _el.__ta) {\n                        if (_el.__ta.hasOwnProperty(evt)) {\n                            for (var h in _el.__ta[evt]) {\n                                if (_el.__ta[evt].hasOwnProperty(h))\n                                    _unbind(_el, evt, _el.__ta[evt][h]);\n                            }\n                        }\n                    }\n                }\n                _el.parentNode && _el.parentNode.removeChild(_el);\n            });\n            return this;\n        };\n        /**\n         * Register an event handler, optionally as a delegate for some set of descendant elements. Note\n         * that this method takes either 3 or 4 arguments - if you supply 3 arguments it is assumed you have\n         * omitted the `children` parameter, and that the event handler should be bound directly to the given element.\n         * @method on\n         * @param {Element[]|Element|String} el Either an Element, or a CSS spec for a list of elements, or an array of Elements.\n         * @param {String} [children] Comma-delimited list of selectors identifying allowed children.\n         * @param {String} event Event ID.\n         * @param {Function} fn Event handler function.\n         * @return {Mottle} The current Mottle instance; you can chain this method.\n         */\n        this.on = function (el, event, children, fn) {\n            var _el = arguments[0],\n                _c = arguments.length == 4 ? arguments[2] : null,\n                _e = arguments[1],\n                _f = arguments[arguments.length - 1];\n            _doBind(_el, _e, _f, _c);\n            return this;\n        };\n        /**\n         * Cancel delegate event handling for the given function. Note that unlike with 'on' you do not supply\n         * a list of child selectors here: it removes event delegation from all of the child selectors for which the\n         * given function was registered (if any).\n         * @method off\n         * @param {Element[]|Element|String} el Element - or ID of element - from which to remove event listener.\n         * @param {String} event Event ID.\n         * @param {Function} fn Event handler function.\n         * @return {Mottle} The current Mottle instance; you can chain this method.\n         */\n        this.off = function (el, event, fn) {\n            _unbind(el, event, fn);\n            return this;\n        };\n        /**\n         * Triggers some event for a given element.\n         * @method trigger\n         * @param {Element} el Element for which to trigger the event.\n         * @param {String} event Event ID.\n         * @param {Event} originalEvent The original event. Should be optional of course, but currently is not, due\n         * to the jsPlumb use case that caused this method to be added.\n         * @param {Object} [payload] Optional object to set as `payload` on the generated event; useful for message passing.\n         * @return {Mottle} The current Mottle instance; you can chain this method.\n         */\n        this.trigger = function (el, event, originalEvent, payload) {\n            // MouseEvent undefined in old IE; that's how we know it's a mouse event.  A fine Microsoft paradox.\n            var originalIsMouse = isMouseDevice && (typeof MouseEvent === \"undefined\" || originalEvent == null || originalEvent.constructor === MouseEvent);\n            var eventToBind = (isTouchDevice && !isMouseDevice && touchMap[event]) ? touchMap[event] : event,\n                bindingAMouseEvent = !(isTouchDevice && !isMouseDevice && touchMap[event]);\n            var pl = _pageLocation(originalEvent), sl = _screenLocation(originalEvent), cl = _clientLocation(originalEvent);\n            _each(el, function () {\n                var _el = _gel(this), evt;\n                originalEvent = originalEvent || {\n                    screenX: sl[0],\n                    screenY: sl[1],\n                    clientX: cl[0],\n                    clientY: cl[1]\n                };\n                var _decorate = function (_evt) {\n                    if (payload) _evt.payload = payload;\n                };\n                var eventGenerators = {\n                    \"TouchEvent\": function (evt) {\n                        var touchList = _touchAndList(window, _el, 0, pl[0], pl[1], sl[0], sl[1], cl[0], cl[1]),\n                            init = evt.initTouchEvent || evt.initEvent;\n                        init(eventToBind, true, true, window, null, sl[0], sl[1],\n                            cl[0], cl[1], false, false, false, false,\n                            touchList, touchList, touchList, 1, 0);\n                    },\n                    \"MouseEvents\": function (evt) {\n                        evt.initMouseEvent(eventToBind, true, true, window, 0,\n                            sl[0], sl[1],\n                            cl[0], cl[1],\n                            false, false, false, false, 1, _el);\n                    }\n                };\n                if (document.createEvent) {\n                    var ite = !bindingAMouseEvent && !originalIsMouse && (isTouchDevice && touchMap[event]),\n                        evtName = ite ? \"TouchEvent\" : \"MouseEvents\";\n                    evt = document.createEvent(evtName);\n                    eventGenerators[evtName](evt);\n                    _decorate(evt);\n                    _el.dispatchEvent(evt);\n                }\n                else if (document.createEventObject) {\n                    evt = document.createEventObject();\n                    evt.eventType = evt.eventName = eventToBind;\n                    evt.screenX = sl[0];\n                    evt.screenY = sl[1];\n                    evt.clientX = cl[0];\n                    evt.clientY = cl[1];\n                    _decorate(evt);\n                    _el.fireEvent('on' + eventToBind, evt);\n                }\n            });\n            return this;\n        }\n    };\n    /**\n     * Static method to assist in 'consuming' an element: uses `stopPropagation` where available, or sets\n     * `e.returnValue=false` where it is not.\n     * @method Mottle.consume\n     * @param {Event} e Event to consume\n     * @param {Boolean} [doNotPreventDefault=false] If true, does not call `preventDefault()` on the event.\n     */\n    root.Mottle.consume = function (e, doNotPreventDefault) {\n        if (e.stopPropagation)\n            e.stopPropagation();\n        else\n            e.returnValue = false;\n        if (!doNotPreventDefault && e.preventDefault)\n            e.preventDefault();\n    };\n    /**\n     * Gets the page location corresponding to the given event. For touch events this means get the page location of the first touch.\n     * @method Mottle.pageLocation\n     * @param {Event} e Event to get page location for.\n     * @return {Number[]} [left, top] for the given event.\n     */\n    root.Mottle.pageLocation = _pageLocation;\n    /**\n     * Forces touch events to be turned \"on\". Useful for testing: even if you don't have a touch device, you can still\n     * trigger a touch event when this is switched on and it will be captured and acted on.\n     * @method setForceTouchEvents\n     * @param {Boolean} value If true, force touch events to be on.\n     */\n    root.Mottle.setForceTouchEvents = function (value) {\n        isTouchDevice = value;\n    };\n    /**\n     * Forces mouse events to be turned \"on\". Useful for testing: even if you don't have a mouse, you can still\n     * trigger a mouse event when this is switched on and it will be captured and acted on.\n     * @method setForceMouseEvents\n     * @param {Boolean} value If true, force mouse events to be on.\n     */\n    root.Mottle.setForceMouseEvents = function (value) {\n        isMouseDevice = value;\n    };\n    root.Mottle.version = \"0.8.0\";\n    if (typeof exports !== \"undefined\") {\n        exports.Mottle = root.Mottle;\n    }\n}).call(typeof window === \"undefined\" ? this : window);\n/**\n drag/drop functionality for use with jsPlumb but with\n no knowledge of jsPlumb. supports multiple scopes (separated by whitespace), dragging\n multiple elements, constrain to parent, drop filters, drag start filters, custom\n css classes.\n a lot of the functionality of this script is expected to be plugged in:\n addClass\n removeClass\n addEvent\n removeEvent\n getPosition\n setPosition\n getSize\n indexOf\n intersects\n the name came from here:\n http://mrsharpoblunto.github.io/foswig.js/\n copyright 2016 jsPlumb\n */\n;(function() {\n    \"use strict\";\n    var root = this;\n    var _suggest = function(list, item, head) {\n        if (list.indexOf(item) === -1) {\n            head ? list.unshift(item) : list.push(item);\n            return true;\n        }\n        return false;\n    };\n    var _vanquish = function(list, item) {\n        var idx = list.indexOf(item);\n        if (idx !== -1) list.splice(idx, 1);\n    };\n    var _difference = function(l1, l2) {\n        var d = [];\n        for (var i = 0; i < l1.length; i++) {\n            if (l2.indexOf(l1[i]) === -1)\n                d.push(l1[i]);\n        }\n        return d;\n    };\n    var _isString = function(f) {\n        return f == null ? false : (typeof f === \"string\" || f.constructor === String);\n    };\n    var getOffsetRect = function (elem) {\n        // (1)\n        var box = elem.getBoundingClientRect(),\n            body = document.body,\n            docElem = document.documentElement,\n        // (2)\n            scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop,\n            scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft,\n        // (3)\n            clientTop = docElem.clientTop || body.clientTop || 0,\n            clientLeft = docElem.clientLeft || body.clientLeft || 0,\n        // (4)\n            top  = box.top +  scrollTop - clientTop,\n            left = box.left + scrollLeft - clientLeft;\n        return { top: Math.round(top), left: Math.round(left) };\n    };\n    var matchesSelector = function(el, selector, ctx) {\n        ctx = ctx || el.parentNode;\n        var possibles = ctx.querySelectorAll(selector);\n        for (var i = 0; i < possibles.length; i++) {\n            if (possibles[i] === el)\n                return true;\n        }\n        return false;\n    };\n    var findDelegateElement = function(parentElement, childElement, selector) {\n        if (matchesSelector(childElement, selector, parentElement)) {\n            return childElement;\n        } else {\n            var currentParent = childElement.parentNode;\n            while (currentParent != null && currentParent !== parentElement) {\n                if (matchesSelector(currentParent, selector, parentElement)) {\n                    return currentParent;\n                } else {\n                    currentParent = currentParent.parentNode;\n                }\n            }\n        }\n    };\n    /**\n     * Finds all elements matching the given selector, for the given parent. In order to support \"scoped root\" selectors,\n     * ie. things like \"> .someClass\", that is .someClass elements that are direct children of `parentElement`, we have to\n     * jump through a small hoop here: when a delegate draggable is registered, we write a `katavorio-draggable` attribute\n     * on the element on which the draggable is registered. Then when this method runs, we grab the value of that attribute and\n     * prepend it as part of the selector we're looking for.  So \"> .someClass\" ends up being written as\n     * \"[katavorio-draggable='...' > .someClass]\", which works with querySelectorAll.\n     *\n     * @param availableSelectors\n     * @param parentElement\n     * @param childElement\n     * @returns {*}\n     */\n    var findMatchingSelector = function(availableSelectors, parentElement, childElement) {\n        var el = null;\n        var draggableId = parentElement.getAttribute(\"katavorio-draggable\"),\n            prefix = draggableId != null ? \"[katavorio-draggable='\" + draggableId + \"'] \" : \"\";\n        for (var i = 0; i < availableSelectors.length; i++) {\n            el = findDelegateElement(parentElement, childElement, prefix + availableSelectors[i].selector);\n            if (el != null) {\n                if (availableSelectors[i].filter) {\n                    var matches = matchesSelector(childElement, availableSelectors[i].filter, el),\n                        exclude = availableSelectors[i].filterExclude === true;\n                    if ( (exclude && !matches) || matches) {\n                        return null;\n                    }\n                }\n                return [ availableSelectors[i], el ];\n            }\n        }\n        return null;\n    };\n    var iev = (function() {\n            var rv = -1;\n            if (navigator.appName === 'Microsoft Internet Explorer') {\n                var ua = navigator.userAgent,\n                    re = new RegExp(\"MSIE ([0-9]{1,}[\\.0-9]{0,})\");\n                if (re.exec(ua) != null)\n                    rv = parseFloat(RegExp.$1);\n            }\n            return rv;\n        })(),\n        DEFAULT_GRID_X = 10,\n        DEFAULT_GRID_Y = 10,\n        isIELT9 = iev > -1 && iev < 9,\n        isIE9 = iev === 9,\n        _pl = function(e) {\n            if (isIELT9) {\n                return [ e.clientX + document.documentElement.scrollLeft, e.clientY + document.documentElement.scrollTop ];\n            }\n            else {\n                var ts = _touches(e), t = _getTouch(ts, 0);\n                // for IE9 pageX might be null if the event was synthesized. We try for pageX/pageY first,\n                // falling back to clientX/clientY if necessary. In every other browser we want to use pageX/pageY.\n                return isIE9 ? [t.pageX || t.clientX, t.pageY || t.clientY] : [t.pageX, t.pageY];\n            }\n        },\n        _getTouch = function(touches, idx) { return touches.item ? touches.item(idx) : touches[idx]; },\n        _touches = function(e) {\n            return e.touches && e.touches.length > 0 ? e.touches :\n                    e.changedTouches && e.changedTouches.length > 0 ? e.changedTouches :\n                    e.targetTouches && e.targetTouches.length > 0 ? e.targetTouches :\n                [ e ];\n        },\n        _classes = {\n            delegatedDraggable:\"katavorio-delegated-draggable\",  // elements that are the delegated drag handler for a bunch of other elements\n            draggable:\"katavorio-draggable\",    // draggable elements\n            droppable:\"katavorio-droppable\",    // droppable elements\n            drag : \"katavorio-drag\",            // elements currently being dragged\n            selected:\"katavorio-drag-selected\", // elements in current drag selection\n            active : \"katavorio-drag-active\",   // droppables that are targets of a currently dragged element\n            hover : \"katavorio-drag-hover\",     // droppables over which a matching drag element is hovering\n            noSelect : \"katavorio-drag-no-select\", // added to the body to provide a hook to suppress text selection\n            ghostProxy:\"katavorio-ghost-proxy\",  // added to a ghost proxy element in use when a drag has exited the bounds of its parent.\n            clonedDrag:\"katavorio-clone-drag\"     // added to a node that is a clone of an element created at the start of a drag\n        },\n        _defaultScope = \"katavorio-drag-scope\",\n        _events = [ \"stop\", \"start\", \"drag\", \"drop\", \"over\", \"out\", \"beforeStart\" ],\n        _devNull = function() {},\n        _true = function() { return true; },\n        _foreach = function(l, fn, from) {\n            for (var i = 0; i < l.length; i++) {\n                if (l[i] != from)\n                    fn(l[i]);\n            }\n        },\n        _setDroppablesActive = function(dd, val, andHover, drag) {\n            _foreach(dd, function(e) {\n                e.setActive(val);\n                if (val) e.updatePosition();\n                if (andHover) e.setHover(drag, val);\n            });\n        },\n        _each = function(obj, fn) {\n            if (obj == null) return;\n            obj = !_isString(obj) && (obj.tagName == null && obj.length != null) ? obj : [ obj ];\n            for (var i = 0; i < obj.length; i++)\n                fn.apply(obj[i], [ obj[i] ]);\n        },\n        _consume = function(e) {\n            if (e.stopPropagation) {\n                e.stopPropagation();\n                e.preventDefault();\n            }\n            else {\n                e.returnValue = false;\n            }\n        },\n        _defaultInputFilterSelector = \"input,textarea,select,button,option\",\n    //\n    // filters out events on all input elements, like textarea, checkbox, input, select.\n        _inputFilter = function(e, el, _katavorio) {\n            var t = e.srcElement || e.target;\n            return !matchesSelector(t, _katavorio.getInputFilterSelector(), el);\n        };\n    var Super = function(el, params, css, scope) {\n        this.params = params || {};\n        this.el = el;\n        this.params.addClass(this.el, this._class);\n        this.uuid = _uuid();\n        var enabled = true;\n        this.setEnabled = function(e) { enabled = e; };\n        this.isEnabled = function() { return enabled; };\n        this.toggleEnabled = function() { enabled = !enabled; };\n        this.setScope = function(scopes) {\n            this.scopes = scopes ? scopes.split(/\\s+/) : [ scope ];\n        };\n        this.addScope = function(scopes) {\n            var m = {};\n            _each(this.scopes, function(s) { m[s] = true;});\n            _each(scopes ? scopes.split(/\\s+/) : [], function(s) { m[s] = true;});\n            this.scopes = [];\n            for (var i in m) this.scopes.push(i);\n        };\n        this.removeScope = function(scopes) {\n            var m = {};\n            _each(this.scopes, function(s) { m[s] = true;});\n            _each(scopes ? scopes.split(/\\s+/) : [], function(s) { delete m[s];});\n            this.scopes = [];\n            for (var i in m) this.scopes.push(i);\n        };\n        this.toggleScope = function(scopes) {\n            var m = {};\n            _each(this.scopes, function(s) { m[s] = true;});\n            _each(scopes ? scopes.split(/\\s+/) : [], function(s) {\n                if (m[s]) delete m[s];\n                else m[s] = true;\n            });\n            this.scopes = [];\n            for (var i in m) this.scopes.push(i);\n        };\n        this.setScope(params.scope);\n        this.k = params.katavorio;\n        return params.katavorio;\n    };\n    var TRUE = function() { return true; };\n    var FALSE = function() { return false; };\n    var Drag = function(el, params, css, scope) {\n        this._class = css.draggable;\n        var k = Super.apply(this, arguments);\n        this.rightButtonCanDrag = this.params.rightButtonCanDrag;\n        var downAt = [0,0], posAtDown = null, pagePosAtDown = null, pageDelta = [0,0], moving = false, initialScroll = [0,0],\n            consumeStartEvent = this.params.consumeStartEvent !== false,\n            dragEl = this.el,\n            clone = this.params.clone,\n            scroll = this.params.scroll,\n            _multipleDrop = params.multipleDrop !== false,\n            isConstrained = false,\n            //useGhostProxy = params.ghostProxy === true ? TRUE : params.ghostProxy && typeof params.ghostProxy === \"function\" ? params.ghostProxy : FALSE,\n            useGhostProxy,\n            ghostProxy,// = function(el) { return el.cloneNode(true); },\n            elementToDrag = null,\n            availableSelectors = [],\n            activeSelectorParams = null, // which, if any, selector config is currently active.\n            ghostProxyParent = params.ghostProxyParent,\n            currentParentPosition,\n            ghostParentPosition,\n            ghostDx,\n            ghostDy;\n        if (params.ghostProxy === true) {\n            useGhostProxy = TRUE;\n        } else {\n            if (params.ghostProxy && typeof params.ghostProxy === \"function\") {\n                useGhostProxy = params.ghostProxy;\n            } else {\n                useGhostProxy = function(container, dragEl) {\n                    if (activeSelectorParams && activeSelectorParams.useGhostProxy) {\n                        return activeSelectorParams.useGhostProxy(container, dragEl);\n                    } else {\n                        return false;\n                    }\n                }\n            }\n        }\n        if (params.makeGhostProxy) {\n            ghostProxy = params.makeGhostProxy;\n        } else {\n            ghostProxy = function(el) {\n                if (activeSelectorParams && activeSelectorParams.makeGhostProxy) {\n                    return activeSelectorParams.makeGhostProxy(el);\n                } else {\n                    return el.cloneNode(true);\n                }\n            };\n        }\n        // if an initial selector was provided, push the entire set of params as a selector config.\n        if (params.selector) {\n            var draggableId = el.getAttribute(\"katavorio-draggable\");\n            if (draggableId == null) {\n                draggableId = \"\" + new Date().getTime();\n                el.setAttribute(\"katavorio-draggable\", draggableId);\n            }\n            availableSelectors.push(params);\n        }\n        var snapThreshold = params.snapThreshold,\n            _snap = function(pos, gridX, gridY, thresholdX, thresholdY) {\n                var _dx = Math.floor(pos[0] / gridX),\n                    _dxl = gridX * _dx,\n                    _dxt = _dxl + gridX,\n                    _x = Math.abs(pos[0] - _dxl) <= thresholdX ? _dxl : Math.abs(_dxt - pos[0]) <= thresholdX ? _dxt : pos[0];\n                var _dy = Math.floor(pos[1] / gridY),\n                    _dyl = gridY * _dy,\n                    _dyt = _dyl + gridY,\n                    _y = Math.abs(pos[1] - _dyl) <= thresholdY ? _dyl : Math.abs(_dyt - pos[1]) <= thresholdY ? _dyt : pos[1];\n                return [ _x, _y];\n            };\n        this.posses = [];\n        this.posseRoles = {};\n        this.toGrid = function(pos) {\n            if (this.params.grid == null) {\n                return pos;\n            }\n            else {\n                var tx = this.params.grid ? this.params.grid[0] / 2 : snapThreshold ? snapThreshold : DEFAULT_GRID_X / 2,\n                    ty = this.params.grid ? this.params.grid[1] / 2 : snapThreshold ? snapThreshold : DEFAULT_GRID_Y / 2;\n                return _snap(pos, this.params.grid[0], this.params.grid[1], tx, ty);\n            }\n        };\n        this.snap = function(x, y) {\n            if (dragEl == null) return;\n            x = x || (this.params.grid ? this.params.grid[0] : DEFAULT_GRID_X);\n            y = y || (this.params.grid ? this.params.grid[1] : DEFAULT_GRID_Y);\n            var p = this.params.getPosition(dragEl),\n                tx = this.params.grid ? this.params.grid[0] / 2 : snapThreshold,\n                ty = this.params.grid ? this.params.grid[1] / 2 : snapThreshold,\n                snapped = _snap(p, x, y, tx, ty);\n            this.params.setPosition(dragEl, snapped);\n            return snapped;\n        };\n        this.setUseGhostProxy = function(val) {\n            useGhostProxy = val ? TRUE : FALSE;\n        };\n        var constrain;\n        var negativeFilter = function(pos) {\n            return (params.allowNegative === false) ? [ Math.max (0, pos[0]), Math.max(0, pos[1]) ] : pos;\n        };\n        var _setConstrain = function(value) {\n            constrain = typeof value === \"function\" ? value : value ? function(pos, dragEl, _constrainRect, _size) {\n                return negativeFilter([\n                    Math.max(0, Math.min(_constrainRect.w - _size[0], pos[0])),\n                    Math.max(0, Math.min(_constrainRect.h - _size[1], pos[1]))\n                ]);\n            }.bind(this) : function(pos) { return negativeFilter(pos); };\n        }.bind(this);\n        _setConstrain(typeof this.params.constrain === \"function\" ? this.params.constrain  : (this.params.constrain || this.params.containment));\n        /**\n         * Sets whether or not the Drag is constrained. A value of 'true' means constrain to parent bounds; a function\n         * will be executed and returns true if the position is allowed.\n         * @param value\n         */\n        this.setConstrain = function(value) {\n            _setConstrain(value);\n        };\n        /* private */ var _doConstrain = function(pos, dragEl, _constrainRect, _size) {\n            if (activeSelectorParams != null && activeSelectorParams.constrain && typeof activeSelectorParams.constrain === \"function\") {\n                return activeSelectorParams.constrain(pos, dragEl, _constrainRect, _size);\n            } else {\n                return constrain(pos, dragEl, _constrainRect, _size);\n            }\n        };\n        var revertFunction;\n        /**\n         * Sets a function to call on drag stop, which, if it returns true, indicates that the given element should\n         * revert to its position before the previous drag.\n         * @param fn\n         */\n        this.setRevert = function(fn) {\n            revertFunction = fn;\n        };\n        if (this.params.revert) {\n            revertFunction = this.params.revert;\n        }\n        var _assignId = function(obj) {\n                if (typeof obj === \"function\") {\n                    obj._katavorioId = _uuid();\n                    return obj._katavorioId;\n                } else {\n                    return obj;\n                }\n            },\n        // a map of { spec -> [ fn, exclusion ] } entries.\n            _filters = {},\n            _testFilter = function(e) {\n                for (var key in _filters) {\n                    var f = _filters[key];\n                    var rv = f[0](e);\n                    if (f[1]) rv = !rv;\n                    if (!rv) return false;\n                }\n                return true;\n            },\n            _setFilter = this.setFilter = function(f, _exclude) {\n                if (f) {\n                    var key = _assignId(f);\n                    _filters[key] = [\n                        function(e) {\n                            var t = e.srcElement || e.target, m;\n                            if (_isString(f)) {\n                                m = matchesSelector(t, f, el);\n                            }\n                            else if (typeof f === \"function\") {\n                                m = f(e, el);\n                            }\n                            return m;\n                        },\n                            _exclude !== false\n                    ];\n                }\n            },\n            _addFilter = this.addFilter = _setFilter,\n            _removeFilter = this.removeFilter = function(f) {\n                var key = typeof f === \"function\" ? f._katavorioId : f;\n                delete _filters[key];\n            };\n        this.clearAllFilters = function() {\n            _filters = {};\n        };\n        this.canDrag = this.params.canDrag || _true;\n        var constrainRect,\n            matchingDroppables = [],\n            intersectingDroppables = [];\n        this.addSelector = function(params) {\n            if (params.selector) {\n                availableSelectors.push(params);\n            }\n        };\n        this.downListener = function(e) {\n            if (e.defaultPrevented) { return; }\n            var isNotRightClick = this.rightButtonCanDrag || (e.which !== 3 && e.button !== 2);\n            if (isNotRightClick && this.isEnabled() && this.canDrag()) {\n                var _f =  _testFilter(e) && _inputFilter(e, this.el, this.k);\n                if (_f) {\n                    activeSelectorParams = null;\n                    elementToDrag = null;\n                    // if (selector) {\n                    //     elementToDrag = findDelegateElement(this.el, e.target || e.srcElement, selector);\n                    //     if(elementToDrag == null) {\n                    //         return;\n                    //     }\n                    // }\n                    if (availableSelectors.length > 0) {\n                        var match = findMatchingSelector(availableSelectors, this.el, e.target || e.srcElement);\n                        if (match != null) {\n                            activeSelectorParams = match[0];\n                            elementToDrag = match[1];\n                        }\n                        // elementToDrag = findDelegateElement(this.el, e.target || e.srcElement, selector);\n                        if(elementToDrag == null) {\n                            return;\n                        }\n                    }\n                    else {\n                        elementToDrag = this.el;\n                    }\n                    if (clone) {\n                        dragEl = elementToDrag.cloneNode(true);\n                        this.params.addClass(dragEl, _classes.clonedDrag);\n                        dragEl.setAttribute(\"id\", null);\n                        dragEl.style.position = \"absolute\";\n                        if (this.params.parent != null) {\n                            var p = this.params.getPosition(this.el);\n                            dragEl.style.left = p[0] + \"px\";\n                            dragEl.style.top = p[1] + \"px\";\n                            this.params.parent.appendChild(dragEl);\n                        } else {\n                            // the clone node is added to the body; getOffsetRect gives us a value\n                            // relative to the body.\n                            var b = getOffsetRect(elementToDrag);\n                            dragEl.style.left = b.left + \"px\";\n                            dragEl.style.top = b.top + \"px\";\n                            document.body.appendChild(dragEl);\n                        }\n                    } else {\n                        dragEl = elementToDrag;\n                    }\n                    consumeStartEvent && _consume(e);\n                    downAt = _pl(e);\n                    if (dragEl && dragEl.parentNode)\n                    {\n                        initialScroll = [dragEl.parentNode.scrollLeft, dragEl.parentNode.scrollTop];\n                    }\n                    //\n                    this.params.bind(document, \"mousemove\", this.moveListener);\n                    this.params.bind(document, \"mouseup\", this.upListener);\n                    k.markSelection(this);\n                    k.markPosses(this);\n                    this.params.addClass(document.body, css.noSelect);\n                    _dispatch(\"beforeStart\", {el:this.el, pos:posAtDown, e:e, drag:this});\n                }\n                else if (this.params.consumeFilteredEvents) {\n                    _consume(e);\n                }\n            }\n        }.bind(this);\n        this.moveListener = function(e) {\n            if (downAt) {\n                if (!moving) {\n                    var _continue = _dispatch(\"start\", {el:this.el, pos:posAtDown, e:e, drag:this});\n                    if (_continue !== false) {\n                        if (!downAt) {\n                            return;\n                        }\n                        this.mark(true);\n                        moving = true;\n                    } else {\n                        this.abort();\n                    }\n                }\n                // it is possible that the start event caused the drag to be aborted. So we check\n                // again that we are currently dragging.\n                if (downAt) {\n                    intersectingDroppables.length = 0;\n                    var pos = _pl(e), dx = pos[0] - downAt[0], dy = pos[1] - downAt[1],\n                        z = this.params.ignoreZoom ? 1 : k.getZoom();\n                    if (dragEl && dragEl.parentNode)\n                    {\n                        dx += dragEl.parentNode.scrollLeft - initialScroll[0];\n                        dy += dragEl.parentNode.scrollTop - initialScroll[1];\n                    }\n                    dx /= z;\n                    dy /= z;\n                    this.moveBy(dx, dy, e);\n                    k.updateSelection(dx, dy, this);\n                    k.updatePosses(dx, dy, this);\n                }\n            }\n        }.bind(this);\n        this.upListener = function(e) {\n            if (downAt) {\n                downAt = null;\n                this.params.unbind(document, \"mousemove\", this.moveListener);\n                this.params.unbind(document, \"mouseup\", this.upListener);\n                this.params.removeClass(document.body, css.noSelect);\n                this.unmark(e);\n                k.unmarkSelection(this, e);\n                k.unmarkPosses(this, e);\n                this.stop(e);\n                k.notifyPosseDragStop(this, e);\n                moving = false;\n                intersectingDroppables.length = 0;\n                if (clone) {\n                    dragEl && dragEl.parentNode && dragEl.parentNode.removeChild(dragEl);\n                    dragEl = null;\n                } else {\n                    if (revertFunction && revertFunction(dragEl, this.params.getPosition(dragEl)) === true) {\n                        this.params.setPosition(dragEl, posAtDown);\n                        _dispatch(\"revert\", dragEl);\n                    }\n                }\n            }\n        }.bind(this);\n        this.getFilters = function() { return _filters; };\n        this.abort = function() {\n            if (downAt != null) {\n                this.upListener();\n            }\n        };\n        /**\n         * Returns the element that was last dragged. This may be some original element from the DOM, or if `clone` is\n         * set, then its actually a copy of some original DOM element. In some client calls to this method, it is the\n         * actual element that was dragged that is desired. In others, it is the original DOM element that the user\n         * wishes to get - in which case, pass true for `retrieveOriginalElement`.\n         *\n         * @returns {*}\n         */\n        this.getDragElement = function(retrieveOriginalElement) {\n            return retrieveOriginalElement ? elementToDrag || this.el : dragEl || this.el;\n        };\n        var listeners = {\"start\":[], \"drag\":[], \"stop\":[], \"over\":[], \"out\":[], \"beforeStart\":[], \"revert\":[] };\n        if (params.events.start) listeners.start.push(params.events.start);\n        if (params.events.beforeStart) listeners.beforeStart.push(params.events.beforeStart);\n        if (params.events.stop) listeners.stop.push(params.events.stop);\n        if (params.events.drag) listeners.drag.push(params.events.drag);\n        if (params.events.revert) listeners.revert.push(params.events.revert);\n        this.on = function(evt, fn) {\n            if (listeners[evt]) listeners[evt].push(fn);\n        };\n        this.off = function(evt, fn) {\n            if (listeners[evt]) {\n                var l = [];\n                for (var i = 0; i < listeners[evt].length; i++) {\n                    if (listeners[evt][i] !== fn) l.push(listeners[evt][i]);\n                }\n                listeners[evt] = l;\n            }\n        };\n        var _dispatch = function(evt, value) {\n            var result = null;\n            if (activeSelectorParams && activeSelectorParams[evt]) {\n                result = activeSelectorParams[evt](value);\n            } else if (listeners[evt]) {\n                for (var i = 0; i < listeners[evt].length; i++) {\n                    try {\n                        var v = listeners[evt][i](value);\n                        if (v != null) {\n                            result = v;\n                        }\n                    }\n                    catch (e) { }\n                }\n            }\n            return result;\n        };\n        this.notifyStart = function(e) {\n            _dispatch(\"start\", {el:this.el, pos:this.params.getPosition(dragEl), e:e, drag:this});\n        };\n        this.stop = function(e, force) {\n            if (force || moving) {\n                var positions = [],\n                    sel = k.getSelection(),\n                    dPos = this.params.getPosition(dragEl);\n                if (sel.length > 0) {\n                    for (var i = 0; i < sel.length; i++) {\n                        var p = this.params.getPosition(sel[i].el);\n                        positions.push([ sel[i].el, { left: p[0], top: p[1] }, sel[i] ]);\n                    }\n                }\n                else {\n                    positions.push([ dragEl, {left:dPos[0], top:dPos[1]}, this ]);\n                }\n                _dispatch(\"stop\", {\n                    el: dragEl,\n                    pos: ghostProxyOffsets || dPos,\n                    finalPos:dPos,\n                    e: e,\n                    drag: this,\n                    selection:positions\n                });\n            }\n        };\n        this.mark = function(andNotify) {\n            posAtDown = this.params.getPosition(dragEl);\n            pagePosAtDown = this.params.getPosition(dragEl, true);\n            pageDelta = [pagePosAtDown[0] - posAtDown[0], pagePosAtDown[1] - posAtDown[1]];\n            this.size = this.params.getSize(dragEl);\n            matchingDroppables = k.getMatchingDroppables(this);\n            _setDroppablesActive(matchingDroppables, true, false, this);\n            this.params.addClass(dragEl, this.params.dragClass || css.drag);\n            var cs;\n            if (this.params.getConstrainingRectangle) {\n                cs = this.params.getConstrainingRectangle(dragEl)\n            } else {\n                cs = this.params.getSize(dragEl.parentNode);\n            }\n            constrainRect = {w: cs[0], h: cs[1]};\n            ghostDx = 0;\n            ghostDy = 0;\n            if (andNotify) {\n                k.notifySelectionDragStart(this);\n            }\n        };\n        var ghostProxyOffsets;\n        this.unmark = function(e, doNotCheckDroppables) {\n            _setDroppablesActive(matchingDroppables, false, true, this);\n            if (isConstrained && useGhostProxy(elementToDrag, dragEl)) {\n                ghostProxyOffsets = [dragEl.offsetLeft - ghostDx, dragEl.offsetTop - ghostDy];\n                dragEl.parentNode.removeChild(dragEl);\n                dragEl = elementToDrag;\n            }\n            else {\n                ghostProxyOffsets = null;\n            }\n            this.params.removeClass(dragEl, this.params.dragClass || css.drag);\n            matchingDroppables.length = 0;\n            isConstrained = false;\n            if (!doNotCheckDroppables) {\n                if (intersectingDroppables.length > 0 && ghostProxyOffsets) {\n                    params.setPosition(elementToDrag, ghostProxyOffsets);\n                }\n                intersectingDroppables.sort(_rankSort);\n                for (var i = 0; i < intersectingDroppables.length; i++) {\n                    var retVal = intersectingDroppables[i].drop(this, e);\n                    if (retVal === true) break;\n                }\n            }\n        };\n        this.moveBy = function(dx, dy, e) {\n            intersectingDroppables.length = 0;\n            var desiredLoc = this.toGrid([posAtDown[0] + dx, posAtDown[1] + dy]),\n                cPos = _doConstrain(desiredLoc, dragEl, constrainRect, this.size);\n            // if we should use a ghost proxy...\n            if (useGhostProxy(this.el, dragEl)) {\n                // and the element has been dragged outside of its parent bounds\n                if (desiredLoc[0] !== cPos[0] || desiredLoc[1] !== cPos[1]) {\n                    // ...if ghost proxy not yet created\n                    if (!isConstrained) {\n                        // create it\n                        var gp = ghostProxy(elementToDrag);\n                        params.addClass(gp, _classes.ghostProxy);\n                        if (ghostProxyParent) {\n                            ghostProxyParent.appendChild(gp);\n                            // find offset between drag el's parent the ghost parent\n                           currentParentPosition = params.getPosition(elementToDrag.parentNode, true);\n                           ghostParentPosition = params.getPosition(params.ghostProxyParent, true);\n                           ghostDx = currentParentPosition[0] - ghostParentPosition[0];\n                           ghostDy = currentParentPosition[1] - ghostParentPosition[1];\n                        } else {\n                            elementToDrag.parentNode.appendChild(gp);\n                        }\n                        // the ghost proxy is the drag element\n                        dragEl = gp;\n                        // set this flag so we dont recreate the ghost proxy\n                        isConstrained = true;\n                    }\n                    // now the drag position can be the desired position, as the ghost proxy can support it.\n                    cPos = desiredLoc;\n                }\n                else {\n                    // if the element is not outside of its parent bounds, and ghost proxy is in place,\n                    if (isConstrained) {\n                        // remove the ghost proxy from the dom\n                        dragEl.parentNode.removeChild(dragEl);\n                        // reset the drag element to the original element\n                        dragEl = elementToDrag;\n                        // clear this flag.\n                        isConstrained = false;\n                        currentParentPosition = null;\n                        ghostParentPosition = null;\n                        ghostDx = 0;\n                        ghostDy = 0;\n                    }\n                }\n            }\n            var rect = { x:cPos[0], y:cPos[1], w:this.size[0], h:this.size[1]},\n                pageRect = { x:rect.x + pageDelta[0], y:rect.y + pageDelta[1], w:rect.w, h:rect.h},\n                focusDropElement = null;\n            this.params.setPosition(dragEl, [cPos[0] + ghostDx, cPos[1] + ghostDy]);\n            for (var i = 0; i < matchingDroppables.length; i++) {\n                var r2 = { x:matchingDroppables[i].pagePosition[0], y:matchingDroppables[i].pagePosition[1], w:matchingDroppables[i].size[0], h:matchingDroppables[i].size[1]};\n                if (this.params.intersects(pageRect, r2) && (_multipleDrop || focusDropElement == null || focusDropElement === matchingDroppables[i].el) && matchingDroppables[i].canDrop(this)) {\n                    if (!focusDropElement) focusDropElement = matchingDroppables[i].el;\n                    intersectingDroppables.push(matchingDroppables[i]);\n                    matchingDroppables[i].setHover(this, true, e);\n                }\n                else if (matchingDroppables[i].isHover()) {\n                    matchingDroppables[i].setHover(this, false, e);\n                }\n            }\n            _dispatch(\"drag\", {el:this.el, pos:cPos, e:e, drag:this});\n            /* test to see if the parent needs to be scrolled (future)\n             if (scroll) {\n             var pnsl = dragEl.parentNode.scrollLeft, pnst = dragEl.parentNode.scrollTop;\n             console.log(\"scroll!\", pnsl, pnst);\n             }*/\n        };\n        this.destroy = function() {\n            this.params.unbind(this.el, \"mousedown\", this.downListener);\n            this.params.unbind(document, \"mousemove\", this.moveListener);\n            this.params.unbind(document, \"mouseup\", this.upListener);\n            this.downListener = null;\n            this.upListener = null;\n            this.moveListener = null;\n        };\n        // init:register mousedown, and perhaps set a filter\n        this.params.bind(this.el, \"mousedown\", this.downListener);\n        // if handle provided, use that.  otherwise, try to set a filter.\n        // note that a `handle` selector always results in filterExclude being set to false, ie.\n        // the selector defines the handle element(s).\n        if (this.params.handle)\n            _setFilter(this.params.handle, false);\n        else\n            _setFilter(this.params.filter, this.params.filterExclude);\n    };\n    var Drop = function(el, params, css, scope) {\n        this._class = css.droppable;\n        this.params = params || {};\n        this.rank = params.rank || 0;\n        this._activeClass = this.params.activeClass || css.active;\n        this._hoverClass = this.params.hoverClass || css.hover;\n        Super.apply(this, arguments);\n        var hover = false;\n        this.allowLoopback = this.params.allowLoopback !== false;\n        this.setActive = function(val) {\n            this.params[val ? \"addClass\" : \"removeClass\"](this.el, this._activeClass);\n        };\n        this.updatePosition = function() {\n            this.position = this.params.getPosition(this.el);\n            this.pagePosition = this.params.getPosition(this.el, true);\n            this.size = this.params.getSize(this.el);\n        };\n        this.canDrop = this.params.canDrop || function(drag) {\n            return true;\n        };\n        this.isHover = function() { return hover; };\n        this.setHover = function(drag, val, e) {\n            // if turning off hover but this was not the drag that caused the hover, ignore.\n            if (val || this.el._katavorioDragHover == null || this.el._katavorioDragHover === drag.el._katavorio) {\n                this.params[val ? \"addClass\" : \"removeClass\"](this.el, this._hoverClass);\n                this.el._katavorioDragHover = val ? drag.el._katavorio : null;\n                if (hover !== val) {\n                    this.params.events[val ? \"over\" : \"out\"]({el: this.el, e: e, drag: drag, drop: this});\n                }\n                hover = val;\n            }\n        };\n        /**\n         * A drop event. `drag` is the corresponding Drag object, which may be a Drag for some specific element, or it\n         * may be a Drag on some element acting as a delegate for elements contained within it.\n         * @param drag\n         * @param event\n         * @returns {*}\n         */\n        this.drop = function(drag, event) {\n            return this.params.events[\"drop\"]({ drag:drag, e:event, drop:this });\n        };\n        this.destroy = function() {\n            this._class = null;\n            this._activeClass = null;\n            this._hoverClass = null;\n            hover = null;\n        };\n    };\n    var _uuid = function() {\n        return ('xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n            var r = Math.random()*16|0, v = c === 'x' ? r : (r&0x3|0x8);\n            return v.toString(16);\n        }));\n    };\n    var _rankSort = function(a,b) {\n        return a.rank < b.rank ? 1 : a.rank > b.rank ? -1 : 0;\n    };\n    var _gel = function(el) {\n        if (el == null) return null;\n        el = (typeof el === \"string\" || el.constructor === String)  ? document.getElementById(el) : el;\n        if (el == null) return null;\n        el._katavorio = el._katavorio || _uuid();\n        return el;\n    };\n    root.Katavorio = function(katavorioParams) {\n        var _selection = [],\n            _selectionMap = {};\n        this._dragsByScope = {};\n        this._dropsByScope = {};\n        var _zoom = 1,\n            _reg = function(obj, map) {\n                _each(obj, function(_obj) {\n                    for(var i = 0; i < _obj.scopes.length; i++) {\n                        map[_obj.scopes[i]] = map[_obj.scopes[i]] || [];\n                        map[_obj.scopes[i]].push(_obj);\n                    }\n                });\n            },\n            _unreg = function(obj, map) {\n                var c = 0;\n                _each(obj, function(_obj) {\n                    for(var i = 0; i < _obj.scopes.length; i++) {\n                        if (map[_obj.scopes[i]]) {\n                            var idx = katavorioParams.indexOf(map[_obj.scopes[i]], _obj);\n                            if (idx !== -1) {\n                                map[_obj.scopes[i]].splice(idx, 1);\n                                c++;\n                            }\n                        }\n                    }\n                });\n                return c > 0 ;\n            },\n            _getMatchingDroppables = this.getMatchingDroppables = function(drag) {\n                var dd = [], _m = {};\n                for (var i = 0; i < drag.scopes.length; i++) {\n                    var _dd = this._dropsByScope[drag.scopes[i]];\n                    if (_dd) {\n                        for (var j = 0; j < _dd.length; j++) {\n                            if (_dd[j].canDrop(drag) &&  !_m[_dd[j].uuid] && (_dd[j].allowLoopback || _dd[j].el !== drag.el)) {\n                                _m[_dd[j].uuid] = true;\n                                dd.push(_dd[j]);\n                            }\n                        }\n                    }\n                }\n                dd.sort(_rankSort);\n                return dd;\n            },\n            _prepareParams = function(p) {\n                p = p || {};\n                var _p = {\n                    events:{}\n                }, i;\n                for (i in katavorioParams) _p[i] = katavorioParams[i];\n                for (i in p) _p[i] = p[i];\n                // events\n                for (i = 0; i < _events.length; i++) {\n                    _p.events[_events[i]] = p[_events[i]] || _devNull;\n                }\n                _p.katavorio = this;\n                return _p;\n            }.bind(this),\n            _mistletoe = function(existingDrag, params) {\n                for (var i = 0; i < _events.length; i++) {\n                    if (params[_events[i]]) {\n                        existingDrag.on(_events[i], params[_events[i]]);\n                    }\n                }\n            }.bind(this),\n            _css = {},\n            overrideCss = katavorioParams.css || {},\n            _scope = katavorioParams.scope || _defaultScope;\n        // prepare map of css classes based on defaults frst, then optional overrides\n        for (var i in _classes) _css[i] = _classes[i];\n        for (var i in overrideCss) _css[i] = overrideCss[i];\n        var inputFilterSelector = katavorioParams.inputFilterSelector || _defaultInputFilterSelector;\n        /**\n         * Gets the selector identifying which input elements to filter from drag events.\n         * @method getInputFilterSelector\n         * @return {String} Current input filter selector.\n         */\n        this.getInputFilterSelector = function() { return inputFilterSelector; };\n        /**\n         * Sets the selector identifying which input elements to filter from drag events.\n         * @method setInputFilterSelector\n         * @param {String} selector Input filter selector to set.\n         * @return {Katavorio} Current instance; method may be chained.\n         */\n        this.setInputFilterSelector = function(selector) {\n            inputFilterSelector = selector;\n            return this;\n        };\n        /**\n         * Either makes the given element draggable, or identifies it as an element inside which some identified list\n         * of elements may be draggable.\n         * @param el\n         * @param params\n         * @returns {Array}\n         */\n        this.draggable = function(el, params) {\n            var o = [];\n            _each(el, function (_el) {\n                _el = _gel(_el);\n                if (_el != null) {\n                    if (_el._katavorioDrag == null) {\n                        var p = _prepareParams(params);\n                        _el._katavorioDrag = new Drag(_el, p, _css, _scope);\n                        _reg(_el._katavorioDrag, this._dragsByScope);\n                        o.push(_el._katavorioDrag);\n                        katavorioParams.addClass(_el, p.selector ? _css.delegatedDraggable : _css.draggable);\n                    }\n                    else {\n                        _mistletoe(_el._katavorioDrag, params);\n                    }\n                }\n            }.bind(this));\n            return o;\n        };\n        this.droppable = function(el, params) {\n            var o = [];\n            _each(el, function(_el) {\n                _el = _gel(_el);\n                if (_el != null) {\n                    var drop = new Drop(_el, _prepareParams(params), _css, _scope);\n                    _el._katavorioDrop = _el._katavorioDrop || [];\n                    _el._katavorioDrop.push(drop);\n                    _reg(drop, this._dropsByScope);\n                    o.push(drop);\n                    katavorioParams.addClass(_el, _css.droppable);\n                }\n            }.bind(this));\n            return o;\n        };\n        /**\n         * @name Katavorio#select\n         * @function\n         * @desc Adds an element to the current selection (for multiple node drag)\n         * @param {Element|String} DOM element - or id of the element - to add.\n         */\n        this.select = function(el) {\n            _each(el, function() {\n                var _el = _gel(this);\n                if (_el && _el._katavorioDrag) {\n                    if (!_selectionMap[_el._katavorio]) {\n                        _selection.push(_el._katavorioDrag);\n                        _selectionMap[_el._katavorio] = [ _el, _selection.length - 1 ];\n                        katavorioParams.addClass(_el, _css.selected);\n                    }\n                }\n            });\n            return this;\n        };\n        /**\n         * @name Katavorio#deselect\n         * @function\n         * @desc Removes an element from the current selection (for multiple node drag)\n         * @param {Element|String} DOM element - or id of the element - to remove.\n         */\n        this.deselect = function(el) {\n            _each(el, function() {\n                var _el = _gel(this);\n                if (_el && _el._katavorio) {\n                    var e = _selectionMap[_el._katavorio];\n                    if (e) {\n                        var _s = [];\n                        for (var i = 0; i < _selection.length; i++)\n                            if (_selection[i].el !== _el) _s.push(_selection[i]);\n                        _selection = _s;\n                        delete _selectionMap[_el._katavorio];\n                        katavorioParams.removeClass(_el, _css.selected);\n                    }\n                }\n            });\n            return this;\n        };\n        this.deselectAll = function() {\n            for (var i in _selectionMap) {\n                var d = _selectionMap[i];\n                katavorioParams.removeClass(d[0], _css.selected);\n            }\n            _selection.length = 0;\n            _selectionMap = {};\n        };\n        this.markSelection = function(drag) {\n            _foreach(_selection, function(e) { e.mark(); }, drag);\n        };\n        this.markPosses = function(drag) {\n            if (drag.posses) {\n                _each(drag.posses, function(p) {\n                    if (drag.posseRoles[p] && _posses[p]) {\n                        _foreach(_posses[p].members, function (d) {\n                            d.mark();\n                        }, drag);\n                    }\n                })\n            }\n        };\n        this.unmarkSelection = function(drag, event) {\n            _foreach(_selection, function(e) { e.unmark(event); }, drag);\n        };\n        this.unmarkPosses = function(drag, event) {\n            if (drag.posses) {\n                _each(drag.posses, function(p) {\n                    if (drag.posseRoles[p] && _posses[p]) {\n                        _foreach(_posses[p].members, function (d) {\n                            d.unmark(event, true);\n                        }, drag);\n                    }\n                });\n            }\n        };\n        this.getSelection = function() { return _selection.slice(0); };\n        this.updateSelection = function(dx, dy, drag) {\n            _foreach(_selection, function(e) { e.moveBy(dx, dy); }, drag);\n        };\n        var _posseAction = function(fn, drag) {\n            if (drag.posses) {\n                _each(drag.posses, function(p) {\n                    if (drag.posseRoles[p] && _posses[p]) {\n                        _foreach(_posses[p].members, function (e) {\n                            fn(e);\n                        }, drag);\n                    }\n                });\n            }\n        };\n        this.updatePosses = function(dx, dy, drag) {\n            _posseAction(function(e) { e.moveBy(dx, dy); }, drag);\n        };\n        this.notifyPosseDragStop = function(drag, evt) {\n            _posseAction(function(e) { e.stop(evt, true); }, drag);\n        };\n        this.notifySelectionDragStop = function(drag, evt) {\n            _foreach(_selection, function(e) { e.stop(evt, true); }, drag);\n        };\n        this.notifySelectionDragStart = function(drag, evt) {\n            _foreach(_selection, function(e) { e.notifyStart(evt);}, drag);\n        };\n        this.setZoom = function(z) { _zoom = z; };\n        this.getZoom = function() { return _zoom; };\n        // does the work of changing scopes\n        var _scopeManip = function(kObj, scopes, map, fn) {\n            _each(kObj, function(_kObj) {\n                _unreg(_kObj, map);  // deregister existing scopes\n                _kObj[fn](scopes); // set scopes\n                _reg(_kObj, map); // register new ones\n            });\n        };\n        _each([ \"set\", \"add\", \"remove\", \"toggle\"], function(v) {\n            this[v + \"Scope\"] = function(el, scopes) {\n                _scopeManip(el._katavorioDrag, scopes, this._dragsByScope, v + \"Scope\");\n                _scopeManip(el._katavorioDrop, scopes, this._dropsByScope, v + \"Scope\");\n            }.bind(this);\n            this[v + \"DragScope\"] = function(el, scopes) {\n                _scopeManip(el.constructor === Drag ? el : el._katavorioDrag, scopes, this._dragsByScope, v + \"Scope\");\n            }.bind(this);\n            this[v + \"DropScope\"] = function(el, scopes) {\n                _scopeManip(el.constructor === Drop ? el : el._katavorioDrop, scopes, this._dropsByScope, v + \"Scope\");\n            }.bind(this);\n        }.bind(this));\n        this.snapToGrid = function(x, y) {\n            for (var s in this._dragsByScope) {\n                _foreach(this._dragsByScope[s], function(d) { d.snap(x, y); });\n            }\n        };\n        this.getDragsForScope = function(s) { return this._dragsByScope[s]; };\n        this.getDropsForScope = function(s) { return this._dropsByScope[s]; };\n        var _destroy = function(el, type, map) {\n            el = _gel(el);\n            if (el[type]) {\n                // remove from selection, if present.\n                var selIdx = _selection.indexOf(el[type]);\n                if (selIdx >= 0) {\n                    _selection.splice(selIdx, 1);\n                }\n                if (_unreg(el[type], map)) {\n                    _each(el[type], function(kObj) { kObj.destroy() });\n                }\n                delete el[type];\n            }\n        };\n        var _removeListener = function(el, type, evt, fn) {\n            el = _gel(el);\n            if (el[type]) {\n                el[type].off(evt, fn);\n            }\n        };\n        this.elementRemoved = function(el) {\n            if (el[\"_katavorioDrag\"]) {\n                this.destroyDraggable(el);\n            }\n            if (el[\"_katavorioDrop\"]) {\n                this.destroyDroppable(el);\n            }\n        };\n        /**\n         * Either completely remove drag functionality from the given element, or remove a specific event handler. If you\n         * call this method with a single argument - the element - all drag functionality is removed from it. Otherwise, if\n         * you provide an event name and listener function, this function is de-registered (if found).\n         * @param el Element to update\n         * @param {string} [evt] Optional event name to unsubscribe\n         * @param {Function} [fn] Optional function to unsubscribe\n         */\n        this.destroyDraggable = function(el, evt, fn) {\n            if (arguments.length === 1) {\n                _destroy(el, \"_katavorioDrag\", this._dragsByScope);\n            } else {\n                _removeListener(el, \"_katavorioDrag\", evt, fn);\n            }\n        };\n        /**\n         * Either completely remove drop functionality from the given element, or remove a specific event handler. If you\n         * call this method with a single argument - the element - all drop functionality is removed from it. Otherwise, if\n         * you provide an event name and listener function, this function is de-registered (if found).\n         * @param el Element to update\n         * @param {string} [evt] Optional event name to unsubscribe\n         * @param {Function} [fn] Optional function to unsubscribe\n         */\n        this.destroyDroppable = function(el, evt, fn) {\n            if (arguments.length === 1) {\n                _destroy(el, \"_katavorioDrop\", this._dropsByScope);\n            } else {\n                _removeListener(el, \"_katavorioDrop\", evt, fn);\n            }\n        };\n        this.reset = function() {\n            this._dragsByScope = {};\n            this._dropsByScope = {};\n            _selection = [];\n            _selectionMap = {};\n            _posses = {};\n        };\n        // ----- groups\n        var _posses = {};\n        var _processOneSpec = function(el, _spec, dontAddExisting) {\n            var posseId = _isString(_spec) ? _spec : _spec.id;\n            var active = _isString(_spec) ? true : _spec.active !== false;\n            var posse = _posses[posseId] || (function() {\n                var g = {name:posseId, members:[]};\n                _posses[posseId] = g;\n                return g;\n            })();\n            _each(el, function(_el) {\n                if (_el._katavorioDrag) {\n                    if (dontAddExisting && _el._katavorioDrag.posseRoles[posse.name] != null) return;\n                    _suggest(posse.members, _el._katavorioDrag);\n                    _suggest(_el._katavorioDrag.posses, posse.name);\n                    _el._katavorioDrag.posseRoles[posse.name] = active;\n                }\n            });\n            return posse;\n        };\n        /**\n         * Add the given element to the posse with the given id, creating the group if it at first does not exist.\n         * @method addToPosse\n         * @param {Element} el Element to add.\n         * @param {String...|Object...} spec Variable args parameters. Each argument can be a either a String, indicating\n         * the ID of a Posse to which the element should be added as an active participant, or an Object containing\n         * `{ id:\"posseId\", active:false/true}`. In the latter case, if `active` is not provided it is assumed to be\n         * true.\n         * @returns {Posse|Posse[]} The Posse(s) to which the element(s) was/were added.\n         */\n        this.addToPosse = function(el, spec) {\n            var posses = [];\n            for (var i = 1; i < arguments.length; i++) {\n                posses.push(_processOneSpec(el, arguments[i]));\n            }\n            return posses.length === 1 ? posses[0] : posses;\n        };\n        /**\n         * Sets the posse(s) for the element with the given id, creating those that do not yet exist, and removing from\n         * the element any current Posses that are not specified by this method call. This method will not change the\n         * active/passive state if it is given a posse in which the element is already a member.\n         * @method setPosse\n         * @param {Element} el Element to set posse(s) on.\n         * @param {String...|Object...} spec Variable args parameters. Each argument can be a either a String, indicating\n         * the ID of a Posse to which the element should be added as an active participant, or an Object containing\n         * `{ id:\"posseId\", active:false/true}`. In the latter case, if `active` is not provided it is assumed to be\n         * true.\n         * @returns {Posse|Posse[]} The Posse(s) to which the element(s) now belongs.\n         */\n        this.setPosse = function(el, spec) {\n            var posses = [];\n            for (var i = 1; i < arguments.length; i++) {\n                posses.push(_processOneSpec(el, arguments[i], true).name);\n            }\n            _each(el, function(_el) {\n                if (_el._katavorioDrag) {\n                    var diff = _difference(_el._katavorioDrag.posses, posses);\n                    var p = [];\n                    Array.prototype.push.apply(p, _el._katavorioDrag.posses);\n                    for (var i = 0; i < diff.length; i++) {\n                        this.removeFromPosse(_el, diff[i]);\n                    }\n                }\n            }.bind(this));\n            return posses.length === 1 ? posses[0] : posses;\n        };\n        /**\n         * Remove the given element from the given posse(s).\n         * @method removeFromPosse\n         * @param {Element} el Element to remove.\n         * @param {String...} posseId Varargs parameter: one value for each posse to remove the element from.\n         */\n        this.removeFromPosse = function(el, posseId) {\n            if (arguments.length < 2) throw new TypeError(\"No posse id provided for remove operation\");\n            for(var i = 1; i < arguments.length; i++) {\n                posseId = arguments[i];\n                _each(el, function (_el) {\n                    if (_el._katavorioDrag && _el._katavorioDrag.posses) {\n                        var d = _el._katavorioDrag;\n                        _each(posseId, function (p) {\n                            _vanquish(_posses[p].members, d);\n                            _vanquish(d.posses, p);\n                            delete d.posseRoles[p];\n                        });\n                    }\n                });\n            }\n        };\n        /**\n         * Remove the given element from all Posses to which it belongs.\n         * @method removeFromAllPosses\n         * @param {Element|Element[]} el Element to remove from Posses.\n         */\n        this.removeFromAllPosses = function(el) {\n            _each(el, function(_el) {\n                if (_el._katavorioDrag && _el._katavorioDrag.posses) {\n                    var d = _el._katavorioDrag;\n                    _each(d.posses, function(p) {\n                        _vanquish(_posses[p].members, d);\n                    });\n                    d.posses.length = 0;\n                    d.posseRoles = {};\n                }\n            });\n        };\n        /**\n         * Changes the participation state for the element in the Posse with the given ID.\n         * @param {Element|Element[]} el Element(s) to change state for.\n         * @param {String} posseId ID of the Posse to change element state for.\n         * @param {Boolean} state True to make active, false to make passive.\n         */\n        this.setPosseState = function(el, posseId, state) {\n            var posse = _posses[posseId];\n            if (posse) {\n                _each(el, function(_el) {\n                    if (_el._katavorioDrag && _el._katavorioDrag.posses) {\n                        _el._katavorioDrag.posseRoles[posse.name] = state;\n                    }\n                });\n            }\n        };\n    };\n    root.Katavorio.version = \"1.0.0\";\n    if (typeof exports !== \"undefined\") {\n        exports.Katavorio = root.Katavorio;\n    }\n}).call(typeof window !== 'undefined' ? window : this);\n(function() {\n    var root = this;\n    root.jsPlumbUtil = root.jsPlumbUtil || {};\n    var jsPlumbUtil = root.jsPlumbUtil;\n    if (typeof exports !=='undefined') { exports.jsPlumbUtil = jsPlumbUtil;}\n    /**\n     * Tests if the given object is an Array.\n     * @param a\n     */\n    function isArray(a) {\n        return Object.prototype.toString.call(a) === \"[object Array]\";\n    }\n    jsPlumbUtil.isArray = isArray;\n    /**\n     * Tests if the given object is a Number.\n     * @param n\n     */\n    function isNumber(n) {\n        return Object.prototype.toString.call(n) === \"[object Number]\";\n    }\n    jsPlumbUtil.isNumber = isNumber;\n    function isString(s) {\n        return typeof s === \"string\";\n    }\n    jsPlumbUtil.isString = isString;\n    function isBoolean(s) {\n        return typeof s === \"boolean\";\n    }\n    jsPlumbUtil.isBoolean = isBoolean;\n    function isNull(s) {\n        return s == null;\n    }\n    jsPlumbUtil.isNull = isNull;\n    function isObject(o) {\n        return o == null ? false : Object.prototype.toString.call(o) === \"[object Object]\";\n    }\n    jsPlumbUtil.isObject = isObject;\n    function isDate(o) {\n        return Object.prototype.toString.call(o) === \"[object Date]\";\n    }\n    jsPlumbUtil.isDate = isDate;\n    function isFunction(o) {\n        return Object.prototype.toString.call(o) === \"[object Function]\";\n    }\n    jsPlumbUtil.isFunction = isFunction;\n    function isNamedFunction(o) {\n        return isFunction(o) && o.name != null && o.name.length > 0;\n    }\n    jsPlumbUtil.isNamedFunction = isNamedFunction;\n    function isEmpty(o) {\n        for (var i in o) {\n            if (o.hasOwnProperty(i)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    jsPlumbUtil.isEmpty = isEmpty;\n    function clone(a) {\n        if (isString(a)) {\n            return \"\" + a;\n        }\n        else if (isBoolean(a)) {\n            return !!a;\n        }\n        else if (isDate(a)) {\n            return new Date(a.getTime());\n        }\n        else if (isFunction(a)) {\n            return a;\n        }\n        else if (isArray(a)) {\n            var b = [];\n            for (var i = 0; i < a.length; i++) {\n                b.push(clone(a[i]));\n            }\n            return b;\n        }\n        else if (isObject(a)) {\n            var c = {};\n            for (var j in a) {\n                c[j] = clone(a[j]);\n            }\n            return c;\n        }\n        else {\n            return a;\n        }\n    }\n    jsPlumbUtil.clone = clone;\n    function merge(a, b, collations, overwrites) {\n        // first change the collations array - if present - into a lookup table, because its faster.\n        var cMap = {}, ar, i, oMap = {};\n        collations = collations || [];\n        overwrites = overwrites || [];\n        for (i = 0; i < collations.length; i++) {\n            cMap[collations[i]] = true;\n        }\n        for (i = 0; i < overwrites.length; i++) {\n            oMap[overwrites[i]] = true;\n        }\n        var c = clone(a);\n        for (i in b) {\n            if (c[i] == null || oMap[i]) {\n                c[i] = b[i];\n            }\n            else if (isString(b[i]) || isBoolean(b[i])) {\n                if (!cMap[i]) {\n                    c[i] = b[i]; // if we dont want to collate, just copy it in.\n                }\n                else {\n                    ar = [];\n                    // if c's object is also an array we can keep its values.\n                    ar.push.apply(ar, isArray(c[i]) ? c[i] : [c[i]]);\n                    ar.push.apply(ar, isBoolean(b[i]) ? b[i] : [b[i]]);\n                    c[i] = ar;\n                }\n            }\n            else {\n                if (isArray(b[i])) {\n                    ar = [];\n                    // if c's object is also an array we can keep its values.\n                    if (isArray(c[i])) {\n                        ar.push.apply(ar, c[i]);\n                    }\n                    ar.push.apply(ar, b[i]);\n                    c[i] = ar;\n                }\n                else if (isObject(b[i])) {\n                    // overwrite c's value with an object if it is not already one.\n                    if (!isObject(c[i])) {\n                        c[i] = {};\n                    }\n                    for (var j in b[i]) {\n                        c[i][j] = b[i][j];\n                    }\n                }\n            }\n        }\n        return c;\n    }\n    jsPlumbUtil.merge = merge;\n    function replace(inObj, path, value) {\n        if (inObj == null) {\n            return;\n        }\n        var q = inObj, t = q;\n        path.replace(/([^\\.])+/g, function (term, lc, pos, str) {\n            var array = term.match(/([^\\[0-9]+){1}(\\[)([0-9+])/), last = pos + term.length >= str.length, _getArray = function () {\n                return t[array[1]] || (function () {\n                    t[array[1]] = [];\n                    return t[array[1]];\n                })();\n            };\n            if (last) {\n                // set term = value on current t, creating term as array if necessary.\n                if (array) {\n                    _getArray()[array[3]] = value;\n                }\n                else {\n                    t[term] = value;\n                }\n            }\n            else {\n                // set to current t[term], creating t[term] if necessary.\n                if (array) {\n                    var a_1 = _getArray();\n                    t = a_1[array[3]] || (function () {\n                        a_1[array[3]] = {};\n                        return a_1[array[3]];\n                    })();\n                }\n                else {\n                    t = t[term] || (function () {\n                        t[term] = {};\n                        return t[term];\n                    })();\n                }\n            }\n            return \"\";\n        });\n        return inObj;\n    }\n    jsPlumbUtil.replace = replace;\n    //\n    // chain a list of functions, supplied by [ object, method name, args ], and return on the first\n    // one that returns the failValue. if none return the failValue, return the successValue.\n    //\n    function functionChain(successValue, failValue, fns) {\n        for (var i = 0; i < fns.length; i++) {\n            var o = fns[i][0][fns[i][1]].apply(fns[i][0], fns[i][2]);\n            if (o === failValue) {\n                return o;\n            }\n        }\n        return successValue;\n    }\n    jsPlumbUtil.functionChain = functionChain;\n    /**\n     *\n     * Take the given model and expand out any parameters. 'functionPrefix' is optional, and if present, helps jsplumb figure out what to do if a value is a Function.\n     * if you do not provide it (and doNotExpandFunctions is null, or false), jsplumb will run the given values through any functions it finds, and use the function's\n     * output as the value in the result. if you do provide the prefix, only functions that are named and have this prefix\n     * will be executed; other functions will be passed as values to the output.\n     *\n     * @param model\n     * @param values\n     * @param functionPrefix\n     * @param doNotExpandFunctions\n     * @returns {any}\n     */\n    function populate(model, values, functionPrefix, doNotExpandFunctions) {\n        // for a string, see if it has parameter matches, and if so, try to make the substitutions.\n        var getValue = function (fromString) {\n            var matches = fromString.match(/(\\${.*?})/g);\n            if (matches != null) {\n                for (var i = 0; i < matches.length; i++) {\n                    var val = values[matches[i].substring(2, matches[i].length - 1)] || \"\";\n                    if (val != null) {\n                        fromString = fromString.replace(matches[i], val);\n                    }\n                }\n            }\n            return fromString;\n        };\n        // process one entry.\n        var _one = function (d) {\n            if (d != null) {\n                if (isString(d)) {\n                    return getValue(d);\n                }\n                else if (isFunction(d) && !doNotExpandFunctions && (functionPrefix == null || (d.name || \"\").indexOf(functionPrefix) === 0)) {\n                    return d(values);\n                }\n                else if (isArray(d)) {\n                    var r = [];\n                    for (var i = 0; i < d.length; i++) {\n                        r.push(_one(d[i]));\n                    }\n                    return r;\n                }\n                else if (isObject(d)) {\n                    var s = {};\n                    for (var j in d) {\n                        s[j] = _one(d[j]);\n                    }\n                    return s;\n                }\n                else {\n                    return d;\n                }\n            }\n        };\n        return _one(model);\n    }\n    jsPlumbUtil.populate = populate;\n    /**\n     * Find the index of a given object in an array.\n     * @param a The array to search\n     * @param f The function to run on each element. Return true if the element matches.\n     * @returns {number} -1 if not found, otherwise the index in the array.\n     */\n    function findWithFunction(a, f) {\n        if (a) {\n            for (var i = 0; i < a.length; i++) {\n                if (f(a[i])) {\n                    return i;\n                }\n            }\n        }\n        return -1;\n    }\n    jsPlumbUtil.findWithFunction = findWithFunction;\n    /**\n     * Remove some element from an array by matching each element in the array against some predicate function. Note that this\n     * is an in-place removal; the array is altered.\n     * @param a The array to search\n     * @param f The function to run on each element. Return true if the element matches.\n     * @returns {boolean} true if removed, false otherwise.\n     */\n    function removeWithFunction(a, f) {\n        var idx = findWithFunction(a, f);\n        if (idx > -1) {\n            a.splice(idx, 1);\n        }\n        return idx !== -1;\n    }\n    jsPlumbUtil.removeWithFunction = removeWithFunction;\n    /**\n     * Remove some element from an array by simple lookup in the array for the given element. Note that this\n     * is an in-place removal; the array is altered.\n     * @param l The array to search\n     * @param v The value to remove.\n     * @returns {boolean} true if removed, false otherwise.\n     */\n    function remove(l, v) {\n        var idx = l.indexOf(v);\n        if (idx > -1) {\n            l.splice(idx, 1);\n        }\n        return idx !== -1;\n    }\n    jsPlumbUtil.remove = remove;\n    /**\n     * Add some element to the given array, unless it is determined that it is already in the array.\n     * @param list The array to add the element to.\n     * @param item The item to add.\n     * @param hashFunction A function to use to determine if the given item already exists in the array.\n     */\n    function addWithFunction(list, item, hashFunction) {\n        if (findWithFunction(list, hashFunction) === -1) {\n            list.push(item);\n        }\n    }\n    jsPlumbUtil.addWithFunction = addWithFunction;\n    /**\n     * Add some element to a list that is contained in a map of lists.\n     * @param map The map of [ key -> list ] entries\n     * @param key The name of the list to insert into\n     * @param value The value to insert\n     * @param insertAtStart Whether or not to insert at the start; defaults to false.\n     */\n    function addToList(map, key, value, insertAtStart) {\n        var l = map[key];\n        if (l == null) {\n            l = [];\n            map[key] = l;\n        }\n        l[insertAtStart ? \"unshift\" : \"push\"](value);\n        return l;\n    }\n    jsPlumbUtil.addToList = addToList;\n    /**\n     * Add an item to a list, unless it is already in the list. The test for pre-existence is a simple list lookup.\n     * If you want to do something more complex, perhaps #addWithFunction might help.\n     * @param list List to add the item to\n     * @param item Item to add\n     * @param insertAtHead Whether or not to insert at the start; defaults to false.\n     */\n    function suggest(list, item, insertAtHead) {\n        if (list.indexOf(item) === -1) {\n            if (insertAtHead) {\n                list.unshift(item);\n            }\n            else {\n                list.push(item);\n            }\n            return true;\n        }\n        return false;\n    }\n    jsPlumbUtil.suggest = suggest;\n    /**\n     * Extends the given obj (which can be an array) with the given constructor function, prototype functions, and class members, any of which may be null.\n     * @param child\n     * @param parent\n     * @param _protoFn\n     */\n    function extend(child, parent, _protoFn) {\n        var i;\n        parent = isArray(parent) ? parent : [parent];\n        var _copyProtoChain = function (focus) {\n            var proto = focus.__proto__;\n            while (proto != null) {\n                if (proto.prototype != null) {\n                    for (var j in proto.prototype) {\n                        if (proto.prototype.hasOwnProperty(j) && !child.prototype.hasOwnProperty(j)) {\n                            child.prototype[j] = proto.prototype[j];\n                        }\n                    }\n                    proto = proto.prototype.__proto__;\n                }\n                else {\n                    proto = null;\n                }\n            }\n        };\n        for (i = 0; i < parent.length; i++) {\n            for (var j in parent[i].prototype) {\n                if (parent[i].prototype.hasOwnProperty(j) && !child.prototype.hasOwnProperty(j)) {\n                    child.prototype[j] = parent[i].prototype[j];\n                }\n            }\n            _copyProtoChain(parent[i]);\n        }\n        var _makeFn = function (name, protoFn) {\n            return function () {\n                for (i = 0; i < parent.length; i++) {\n                    if (parent[i].prototype[name]) {\n                        parent[i].prototype[name].apply(this, arguments);\n                    }\n                }\n                return protoFn.apply(this, arguments);\n            };\n        };\n        var _oneSet = function (fns) {\n            for (var k in fns) {\n                child.prototype[k] = _makeFn(k, fns[k]);\n            }\n        };\n        if (arguments.length > 2) {\n            for (i = 2; i < arguments.length; i++) {\n                _oneSet(arguments[i]);\n            }\n        }\n        return child;\n    }\n    jsPlumbUtil.extend = extend;\n    var lut = [];\n    for (var i = 0; i < 256; i++) {\n        lut[i] = (i < 16 ? '0' : '') + (i).toString(16);\n    }\n    function uuid() {\n        var d0 = Math.random() * 0xffffffff | 0;\n        var d1 = Math.random() * 0xffffffff | 0;\n        var d2 = Math.random() * 0xffffffff | 0;\n        var d3 = Math.random() * 0xffffffff | 0;\n        return lut[d0 & 0xff] + lut[d0 >> 8 & 0xff] + lut[d0 >> 16 & 0xff] + lut[d0 >> 24 & 0xff] + '-' +\n            lut[d1 & 0xff] + lut[d1 >> 8 & 0xff] + '-' + lut[d1 >> 16 & 0x0f | 0x40] + lut[d1 >> 24 & 0xff] + '-' +\n            lut[d2 & 0x3f | 0x80] + lut[d2 >> 8 & 0xff] + '-' + lut[d2 >> 16 & 0xff] + lut[d2 >> 24 & 0xff] +\n            lut[d3 & 0xff] + lut[d3 >> 8 & 0xff] + lut[d3 >> 16 & 0xff] + lut[d3 >> 24 & 0xff];\n    }\n    jsPlumbUtil.uuid = uuid;\n    /**\n     * Trim a string.\n     * @param s String to trim\n     * @returns the String with leading and trailing whitespace removed.\n     */\n    function fastTrim(s) {\n        if (s == null) {\n            return null;\n        }\n        var str = s.replace(/^\\s\\s*/, ''), ws = /\\s/, i = str.length;\n        while (ws.test(str.charAt(--i))) {\n        }\n        return str.slice(0, i + 1);\n    }\n    jsPlumbUtil.fastTrim = fastTrim;\n    function each(obj, fn) {\n        obj = obj.length == null || typeof obj === \"string\" ? [obj] : obj;\n        for (var i = 0; i < obj.length; i++) {\n            fn(obj[i]);\n        }\n    }\n    jsPlumbUtil.each = each;\n    function map(obj, fn) {\n        var o = [];\n        for (var i = 0; i < obj.length; i++) {\n            o.push(fn(obj[i]));\n        }\n        return o;\n    }\n    jsPlumbUtil.map = map;\n    function mergeWithParents(type, map, parentAttribute) {\n        parentAttribute = parentAttribute || \"parent\";\n        var _def = function (id) {\n            return id ? map[id] : null;\n        };\n        var _parent = function (def) {\n            return def ? _def(def[parentAttribute]) : null;\n        };\n        var _one = function (parent, def) {\n            if (parent == null) {\n                return def;\n            }\n            else {\n                var overrides = [\"anchor\", \"anchors\", \"cssClass\", \"connector\", \"paintStyle\", \"hoverPaintStyle\", \"endpoint\", \"endpoints\"];\n                if (def.mergeStrategy === \"override\") {\n                    Array.prototype.push.apply(overrides, [\"events\", \"overlays\"]);\n                }\n                var d_1 = merge(parent, def, [], overrides);\n                return _one(_parent(parent), d_1);\n            }\n        };\n        var _getDef = function (t) {\n            if (t == null) {\n                return {};\n            }\n            if (typeof t === \"string\") {\n                return _def(t);\n            }\n            else if (t.length) {\n                var done = false, i = 0, _dd = void 0;\n                while (!done && i < t.length) {\n                    _dd = _getDef(t[i]);\n                    if (_dd) {\n                        done = true;\n                    }\n                    else {\n                        i++;\n                    }\n                }\n                return _dd;\n            }\n        };\n        var d = _getDef(type);\n        if (d) {\n            return _one(_parent(d), d);\n        }\n        else {\n            return {};\n        }\n    }\n    jsPlumbUtil.mergeWithParents = mergeWithParents;\n    jsPlumbUtil.logEnabled = true;\n    function log() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (jsPlumbUtil.logEnabled && typeof console !== \"undefined\") {\n            try {\n                var msg = arguments[arguments.length - 1];\n                console.log(msg);\n            }\n            catch (e) {\n            }\n        }\n    }\n    jsPlumbUtil.log = log;\n    /**\n     * Wraps one function with another, creating a placeholder for the\n     * wrapped function if it was null. this is used to wrap the various\n     * drag/drop event functions - to allow jsPlumb to be notified of\n     * important lifecycle events without imposing itself on the user's\n     * drag/drop functionality.\n     * @method jsPlumbUtil.wrap\n     * @param {Function} wrappedFunction original function to wrap; may be null.\n     * @param {Function} newFunction function to wrap the original with.\n     * @param {Object} [returnOnThisValue] Optional. Indicates that the wrappedFunction should\n     * not be executed if the newFunction returns a value matching 'returnOnThisValue'.\n     * note that this is a simple comparison and only works for primitives right now.\n     */\n    function wrap(wrappedFunction, newFunction, returnOnThisValue) {\n        return function () {\n            var r = null;\n            try {\n                if (newFunction != null) {\n                    r = newFunction.apply(this, arguments);\n                }\n            }\n            catch (e) {\n                log(\"jsPlumb function failed : \" + e);\n            }\n            if ((wrappedFunction != null) && (returnOnThisValue == null || (r !== returnOnThisValue))) {\n                try {\n                    r = wrappedFunction.apply(this, arguments);\n                }\n                catch (e) {\n                    log(\"wrapped function failed : \" + e);\n                }\n            }\n            return r;\n        };\n    }\n    jsPlumbUtil.wrap = wrap;\n    var EventGenerator = /** @class */ (function () {\n        function EventGenerator() {\n            var _this = this;\n            this._listeners = {};\n            this.eventsSuspended = false;\n            this.tick = false;\n            // this is a list of events that should re-throw any errors that occur during their dispatch.\n            this.eventsToDieOn = { \"ready\": true };\n            this.queue = [];\n            this.bind = function (event, listener, insertAtStart) {\n                var _one = function (evt) {\n                    addToList(_this._listeners, evt, listener, insertAtStart);\n                    listener.__jsPlumb = listener.__jsPlumb || {};\n                    listener.__jsPlumb[uuid()] = evt;\n                };\n                if (typeof event === \"string\") {\n                    _one(event);\n                }\n                else if (event.length != null) {\n                    for (var i = 0; i < event.length; i++) {\n                        _one(event[i]);\n                    }\n                }\n                return _this;\n            };\n            this.fire = function (event, value, originalEvent) {\n                if (!this.tick) {\n                    this.tick = true;\n                    if (!this.eventsSuspended && this._listeners[event]) {\n                        var l = this._listeners[event].length, i = 0, _gone = false, ret = null;\n                        if (!this.shouldFireEvent || this.shouldFireEvent(event, value, originalEvent)) {\n                            while (!_gone && i < l && ret !== false) {\n                                // doing it this way rather than catching and then possibly re-throwing means that an error propagated by this\n                                // method will have the whole call stack available in the debugger.\n                                if (this.eventsToDieOn[event]) {\n                                    this._listeners[event][i].apply(this, [value, originalEvent]);\n                                }\n                                else {\n                                    try {\n                                        ret = this._listeners[event][i].apply(this, [value, originalEvent]);\n                                    }\n                                    catch (e) {\n                                        log(\"jsPlumb: fire failed for event \" + event + \" : \" + e);\n                                    }\n                                }\n                                i++;\n                                if (this._listeners == null || this._listeners[event] == null) {\n                                    _gone = true;\n                                }\n                            }\n                        }\n                    }\n                    this.tick = false;\n                    this._drain();\n                }\n                else {\n                    this.queue.unshift(arguments);\n                }\n                return this;\n            };\n            this._drain = function () {\n                var n = _this.queue.pop();\n                if (n) {\n                    _this.fire.apply(_this, n);\n                }\n            };\n            this.unbind = function (eventOrListener, listener) {\n                if (arguments.length === 0) {\n                    this._listeners = {};\n                }\n                else if (arguments.length === 1) {\n                    if (typeof eventOrListener === \"string\") {\n                        delete this._listeners[eventOrListener];\n                    }\n                    else if (eventOrListener.__jsPlumb) {\n                        var evt = void 0;\n                        for (var i in eventOrListener.__jsPlumb) {\n                            evt = eventOrListener.__jsPlumb[i];\n                            remove(this._listeners[evt] || [], eventOrListener);\n                        }\n                    }\n                }\n                else if (arguments.length === 2) {\n                    remove(this._listeners[eventOrListener] || [], listener);\n                }\n                return this;\n            };\n            this.getListener = function (forEvent) {\n                return _this._listeners[forEvent];\n            };\n            this.setSuspendEvents = function (val) {\n                _this.eventsSuspended = val;\n            };\n            this.isSuspendEvents = function () {\n                return _this.eventsSuspended;\n            };\n            this.silently = function (fn) {\n                _this.setSuspendEvents(true);\n                try {\n                    fn();\n                }\n                catch (e) {\n                    log(\"Cannot execute silent function \" + e);\n                }\n                _this.setSuspendEvents(false);\n            };\n            this.cleanupListeners = function () {\n                for (var i in _this._listeners) {\n                    _this._listeners[i] = null;\n                }\n            };\n        }\n        return EventGenerator;\n    }());\n    jsPlumbUtil.EventGenerator = EventGenerator;\n    function rotatePoint(point, center, rotation) {\n        var radial = [point[0] - center[0], point[1] - center[1]], cr = Math.cos(rotation / 360 * Math.PI * 2), sr = Math.sin(rotation / 360 * Math.PI * 2);\n        return [\n            (radial[0] * cr) - (radial[1] * sr) + center[0],\n            (radial[1] * cr) + (radial[0] * sr) + center[1],\n            cr,\n            sr\n        ];\n    }\n    jsPlumbUtil.rotatePoint = rotatePoint;\n    function rotateAnchorOrientation(orientation, rotation) {\n        var r = rotatePoint(orientation, [0, 0], rotation);\n        return [\n            Math.round(r[0]),\n            Math.round(r[1])\n        ];\n    }\n    jsPlumbUtil.rotateAnchorOrientation = rotateAnchorOrientation;\n}).call(typeof window !== 'undefined' ? window : this);\n/*\n * This file contains utility functions that run in browsers only.\n *\n * Copyright (c) 2010 - 2020 jsPlumb (hello@jsplumbtoolkit.com)\n *\n * https://jsplumbtoolkit.com\n * https://github.com/jsplumb/jsplumb\n *\n * Dual licensed under the MIT and GPL2 licenses.\n */\n ;(function() {\n  \"use strict\";\n   var root = this;\n    root.jsPlumbUtil.matchesSelector = function(el, selector, ctx) {\n       ctx = ctx || el.parentNode;\n       var possibles = ctx.querySelectorAll(selector);\n       for (var i = 0; i < possibles.length; i++) {\n           if (possibles[i] === el) {\n               return true;\n           }\n       }\n       return false;\n   };\n    root.jsPlumbUtil.consume = function(e, doNotPreventDefault) {\n       if (e.stopPropagation) {\n           e.stopPropagation();\n       }\n       else {\n           e.returnValue = false;\n       }\n       if (!doNotPreventDefault && e.preventDefault){\n           e.preventDefault();\n       }\n   };\n   /*\n    * Function: sizeElement\n    * Helper to size and position an element. You would typically use\n    * this when writing your own Connector or Endpoint implementation.\n    *\n    * Parameters:\n    *  x - [int] x position for the element origin\n    *  y - [int] y position for the element origin\n    *  w - [int] width of the element\n    *  h - [int] height of the element\n    *\n    */\n    root.jsPlumbUtil.sizeElement = function(el, x, y, w, h) {\n       if (el) {\n           el.style.height = h + \"px\";\n           el.height = h;\n           el.style.width = w + \"px\";\n           el.width = w;\n           el.style.left = x + \"px\";\n           el.style.top = y + \"px\";\n       }\n   };\n }).call(typeof window !== 'undefined' ? window : this);\n/*\n * This file contains the code for working with scrollable lists.\n *\n * Copyright (c) 2010 - 2020 jsPlumb (hello@jsplumbtoolkit.com)\n *\n * https://jsplumbtoolkit.com\n * https://github.com/jsplumb/jsplumb\n *\n * Dual licensed under the MIT and GPL2 licenses.\n */\n;(function() {\n    var DEFAULT_OPTIONS = {\n        deriveAnchor:function(edge, index, ep, conn) {\n            return {\n                top:[\"TopRight\", \"TopLeft\"],\n                bottom:[\"BottomRight\", \"BottomLeft\"]\n            }[edge][index];\n        }\n    };\n    var root = this;\n    var ListManager = function(jsPlumbInstance, params) {\n        this.count = 0;\n        this.instance = jsPlumbInstance;\n        this.lists = {};\n        this.options = params || {};\n        this.instance.addList = function(el, options) {\n            return this.listManager.addList(el, options);\n        };\n        this.instance.removeList = function(el) {\n            this.listManager.removeList(el);\n        };\n        this.instance.bind(\"manageElement\", function(p) {\n            //look for [jtk-scrollable-list] elements and attach scroll listeners if necessary\n            var scrollableLists = this.instance.getSelector(p.el, \"[jtk-scrollable-list]\");\n            for (var i = 0; i < scrollableLists.length; i++) {\n                this.addList(scrollableLists[i]);\n            }\n        }.bind(this));\n        this.instance.bind(\"unmanageElement\", function(p) {\n            this.removeList(p.el);\n        });\n        this.instance.bind(\"connection\", function(c, evt) {\n            if (evt == null) {\n                // not added by mouse. look for an ancestor of the source and/or target element that is a scrollable list, and run\n                // its scroll method.\n                this._maybeUpdateParentList(c.source);\n                this._maybeUpdateParentList(c.target);\n            }\n        }.bind(this));\n    };\n    root.jsPlumbListManager = ListManager;\n    ListManager.prototype = {\n        addList : function(el, options) {\n            var dp = this.instance.extend({}, DEFAULT_OPTIONS);\n            this.instance.extend(dp, this.options);\n            options = this.instance.extend(dp,  options || {});\n            var id = [this.instance.getInstanceIndex(), this.count++].join(\"_\");\n            this.lists[id] = new List(this.instance, el, options, id);\n        },\n        removeList:function(el) {\n            var list = this.lists[el._jsPlumbList];\n            if (list) {\n                list.destroy();\n                delete this.lists[el._jsPlumbList];\n            }\n        },\n        _maybeUpdateParentList:function (el) {\n            var parent = el.parentNode, container = this.instance.getContainer();\n            while(parent != null && parent !== container) {\n                if (parent._jsPlumbList != null && this.lists[parent._jsPlumbList] != null) {\n                    parent._jsPlumbScrollHandler();\n                    return\n                }\n                parent = parent.parentNode;\n            }\n        }\n    };\n    var List = function(instance, el, options, id) {\n        el[\"_jsPlumbList\"] = id;\n        //\n        // Derive an anchor to use for the current situation. In contrast to the way we derive an endpoint, here we use `anchor` from the options, if present, as\n        // our first choice, and then `deriveAnchor` as our next choice. There is a default `deriveAnchor` implementation that uses TopRight/TopLeft for top and\n        // BottomRight/BottomLeft for bottom.\n        //\n        // edge - \"top\" or \"bottom\"\n        // index - 0 when endpoint is connection source, 1 when endpoint is connection target\n        // ep - the endpoint that is being proxied\n        // conn - the connection that is being proxied\n        //\n        function deriveAnchor(edge, index, ep, conn) {\n            return options.anchor ? options.anchor : options.deriveAnchor(edge, index, ep, conn);\n        }\n        //\n        // Derive an endpoint to use for the current situation. We'll use a `deriveEndpoint` function passed in to the options as our first choice,\n        // followed by `endpoint` (an endpoint spec) from the options, and failing either of those we just use the `type` of the endpoint that is being proxied.\n        //\n        // edge - \"top\" or \"bottom\"\n        // index - 0 when endpoint is connection source, 1 when endpoint is connection target\n        // endpoint - the endpoint that is being proxied\n        // connection - the connection that is being proxied\n        //\n        function deriveEndpoint(edge, index, ep, conn) {\n            return options.deriveEndpoint ? options.deriveEndpoint(edge, index, ep, conn) : options.endpoint ? options.endpoint : ep.type;\n        }\n        //\n        // look for a parent of the given scrollable list that is draggable, and then update the child offsets for it. this should not\n        // be necessary in the delegated drag stuff from the upcoming 3.0.0 release.\n        //\n        function _maybeUpdateDraggable(el) {\n            var parent = el.parentNode, container = instance.getContainer();\n            while(parent != null && parent !== container) {\n                if (instance.hasClass(parent, \"jtk-managed\")) {\n                    instance.recalculateOffsets(parent);\n                    return\n                }\n                parent = parent.parentNode;\n            }\n        }\n        var scrollHandler = function(e) {\n            var children = instance.getSelector(el, \".jtk-managed\");\n            var elId = instance.getId(el);\n            for (var i = 0; i < children.length; i++) {\n                if (children[i].offsetTop < el.scrollTop) {\n                    if (!children[i]._jsPlumbProxies) {\n                        children[i]._jsPlumbProxies = children[i]._jsPlumbProxies || [];\n                        instance.select({source: children[i]}).each(function (c) {\n                            instance.proxyConnection(c, 0, el, elId, function () {\n                                return deriveEndpoint(\"top\", 0, c.endpoints[0], c);\n                            }, function () {\n                                return deriveAnchor(\"top\", 0, c.endpoints[0], c);\n                            });\n                            children[i]._jsPlumbProxies.push([c, 0]);\n                        });\n                        instance.select({target: children[i]}).each(function (c) {\n                            instance.proxyConnection(c, 1, el, elId, function () {\n                                return deriveEndpoint(\"top\", 1, c.endpoints[1], c);\n                            }, function () {\n                                return deriveAnchor(\"top\", 1, c.endpoints[1], c);\n                            });\n                            children[i]._jsPlumbProxies.push([c, 1]);\n                        });\n                    }\n                }\n                //\n                else if (children[i].offsetTop + children[i].offsetHeight > el.scrollTop + el.offsetHeight) {\n                    if (!children[i]._jsPlumbProxies) {\n                        children[i]._jsPlumbProxies = children[i]._jsPlumbProxies || [];\n                        instance.select({source: children[i]}).each(function (c) {\n                            instance.proxyConnection(c, 0, el, elId, function () {\n                                return deriveEndpoint(\"bottom\", 0, c.endpoints[0], c);\n                            }, function () {\n                                return deriveAnchor(\"bottom\", 0, c.endpoints[0], c);\n                            });\n                            children[i]._jsPlumbProxies.push([c, 0]);\n                        });\n                        instance.select({target: children[i]}).each(function (c) {\n                            instance.proxyConnection(c, 1, el, elId, function () {\n                                return deriveEndpoint(\"bottom\", 1, c.endpoints[1], c);\n                            }, function () {\n                                return deriveAnchor(\"bottom\", 1, c.endpoints[1], c);\n                            });\n                            children[i]._jsPlumbProxies.push([c, 1]);\n                        });\n                    }\n                } else if (children[i]._jsPlumbProxies) {\n                    for (var j = 0; j < children[i]._jsPlumbProxies.length; j++) {\n                        instance.unproxyConnection(children[i]._jsPlumbProxies[j][0], children[i]._jsPlumbProxies[j][1], elId);\n                    }\n                    delete children[i]._jsPlumbProxies;\n                }\n                instance.revalidate(children[i]);\n            }\n            _maybeUpdateDraggable(el);\n        };\n        instance.setAttribute(el, \"jtk-scrollable-list\", \"true\");\n        el._jsPlumbScrollHandler = scrollHandler;\n        instance.on(el, \"scroll\", scrollHandler);\n        scrollHandler(); // run it once; there may be connections already.\n        this.destroy = function() {\n            instance.off(el, \"scroll\", scrollHandler);\n            delete el._jsPlumbScrollHandler;\n            var children = instance.getSelector(el, \".jtk-managed\");\n            var elId = instance.getId(el);\n            for (var i = 0; i < children.length; i++) {\n                if (children[i]._jsPlumbProxies) {\n                    for (var j = 0; j < children[i]._jsPlumbProxies.length; j++) {\n                        instance.unproxyConnection(children[i]._jsPlumbProxies[j][0], children[i]._jsPlumbProxies[j][1], elId);\n                    }\n                    delete children[i]._jsPlumbProxies;\n                }\n            }\n        };\n    };\n}).call(typeof window !== 'undefined' ? window : this);\n/*\n * This file contains the core code.\n *\n * Copyright (c) 2010 - 2020 jsPlumb (hello@jsplumbtoolkit.com)\n *\n * https://jsplumbtoolkit.com\n * https://github.com/jsplumb/jsplumb\n *\n * Dual licensed under the MIT and GPL2 licenses.\n */\n;(function () {\n    \"use strict\";\n    var root = this;\n    var _ju = root.jsPlumbUtil,\n        // helper method to update the hover style whenever it, or paintStyle, changes.\n        // we use paintStyle as the foundation and merge hoverPaintStyle over the\n        // top.\n        _updateHoverStyle = function (component) {\n            if (component._jsPlumb.paintStyle && component._jsPlumb.hoverPaintStyle) {\n                var mergedHoverStyle = {};\n                jsPlumb.extend(mergedHoverStyle, component._jsPlumb.paintStyle);\n                jsPlumb.extend(mergedHoverStyle, component._jsPlumb.hoverPaintStyle);\n                delete component._jsPlumb.hoverPaintStyle;\n                // we want the fill of paintStyle to override a gradient, if possible.\n                if (mergedHoverStyle.gradient && component._jsPlumb.paintStyle.fill) {\n                    delete mergedHoverStyle.gradient;\n                }\n                component._jsPlumb.hoverPaintStyle = mergedHoverStyle;\n            }\n        },\n        events = [\"tap\", \"dbltap\", \"click\", \"dblclick\", \"mouseover\", \"mouseout\", \"mousemove\", \"mousedown\", \"mouseup\", \"contextmenu\" ],\n        eventFilters = { \"mouseout\": \"mouseleave\", \"mouseexit\": \"mouseleave\" },\n        _updateAttachedElements = function (component, state, timestamp, sourceElement) {\n            var affectedElements = component.getAttachedElements();\n            if (affectedElements) {\n                for (var i = 0, j = affectedElements.length; i < j; i++) {\n                    if (!sourceElement || sourceElement !== affectedElements[i]) {\n                        affectedElements[i].setHover(state, true, timestamp);\t\t\t// tell the attached elements not to inform their own attached elements.\n                    }\n                }\n            }\n        },\n        _splitType = function (t) {\n            return t == null ? null : t.split(\" \");\n        },\n        _mapType = function(map, obj, typeId) {\n            for (var i in obj) {\n                map[i] = typeId;\n            }\n        },\n        _each = function(fn, obj) {\n            obj = _ju.isArray(obj) || (obj.length != null && !_ju.isString(obj)) ? obj : [ obj ];\n            for (var i = 0; i < obj.length; i++) {\n                try {\n                    fn.apply(obj[i], [ obj[i] ]);\n                }\n                catch (e) {\n                    _ju.log(\".each iteration failed : \" + e);\n                }\n            }\n        },\n        _applyTypes = function (component, params, doNotRepaint) {\n            if (component.getDefaultType) {\n                var td = component.getTypeDescriptor(), map = {};\n                var defType = component.getDefaultType();\n                var o = _ju.merge({}, defType);\n                _mapType(map, defType, \"__default\");\n                for (var i = 0, j = component._jsPlumb.types.length; i < j; i++) {\n                    var tid = component._jsPlumb.types[i];\n                    if (tid !== \"__default\") {\n                        var _t = component._jsPlumb.instance.getType(tid, td);\n                        if (_t != null) {\n                            var overrides = [\"anchor\", \"anchors\", \"connector\", \"paintStyle\", \"hoverPaintStyle\", \"endpoint\", \"endpoints\", \"connectorOverlays\", \"connectorStyle\", \"connectorHoverStyle\", \"endpointStyle\", \"endpointHoverStyle\"];\n                            var collations = [ ];\n                            if (_t.mergeStrategy === \"override\") {\n                                Array.prototype.push.apply(overrides, [\"events\", \"overlays\", \"cssClass\"]);\n                            } else {\n                                collations.push(\"cssClass\");\n                            }\n                            o = _ju.merge(o, _t, collations, overrides);\n                            _mapType(map, _t, tid);\n                        }\n                    }\n                }\n                if (params) {\n                    o = _ju.populate(o, params, \"_\");\n                }\n                component.applyType(o, doNotRepaint, map);\n                if (!doNotRepaint) {\n                    component.repaint();\n                }\n            }\n        },\n// ------------------------------ BEGIN jsPlumbUIComponent --------------------------------------------\n        jsPlumbUIComponent = root.jsPlumbUIComponent = function (params) {\n            _ju.EventGenerator.apply(this, arguments);\n            var self = this,\n                a = arguments,\n                idPrefix = self.idPrefix,\n                id = idPrefix + (new Date()).getTime();\n            this._jsPlumb = {\n                instance: params._jsPlumb,\n                parameters: params.parameters || {},\n                paintStyle: null,\n                hoverPaintStyle: null,\n                paintStyleInUse: null,\n                hover: false,\n                beforeDetach: params.beforeDetach,\n                beforeDrop: params.beforeDrop,\n                overlayPlacements: [],\n                hoverClass: params.hoverClass || params._jsPlumb.Defaults.HoverClass,\n                types: [],\n                typeCache:{}\n            };\n            this.cacheTypeItem = function(key, item, typeId) {\n                this._jsPlumb.typeCache[typeId] = this._jsPlumb.typeCache[typeId] || {};\n                this._jsPlumb.typeCache[typeId][key] = item;\n            };\n            this.getCachedTypeItem = function(key, typeId) {\n                return this._jsPlumb.typeCache[typeId] ? this._jsPlumb.typeCache[typeId][key] : null;\n            };\n            this.getId = function () {\n                return id;\n            };\n// ----------------------------- default type --------------------------------------------\n            var o = params.overlays || [], oo = {};\n            if (this.defaultOverlayKeys) {\n                for (var i = 0; i < this.defaultOverlayKeys.length; i++) {\n                    Array.prototype.push.apply(o, this._jsPlumb.instance.Defaults[this.defaultOverlayKeys[i]] || []);\n                }\n                for (i = 0; i < o.length; i++) {\n                    // if a string, convert to object representation so that we can store the typeid on it.\n                    // also assign an id.\n                    var fo = jsPlumb.convertToFullOverlaySpec(o[i]);\n                    oo[fo[1].id] = fo;\n                }\n            }\n            var _defaultType = {\n                overlays:oo,\n                parameters: params.parameters || {},\n                scope: params.scope || this._jsPlumb.instance.getDefaultScope()\n            };\n            this.getDefaultType = function() {\n                return _defaultType;\n            };\n            this.appendToDefaultType = function(obj) {\n                for (var i in obj) {\n                    _defaultType[i] = obj[i];\n                }\n            };\n// ----------------------------- end default type --------------------------------------------\n            // all components can generate events\n            if (params.events) {\n                for (var evtName in params.events) {\n                    self.bind(evtName, params.events[evtName]);\n                }\n            }\n            // all components get this clone function.\n            // TODO issue 116 showed a problem with this - it seems 'a' that is in\n            // the clone function's scope is shared by all invocations of it, the classic\n            // JS closure problem.  for now, jsPlumb does a version of this inline where\n            // it used to call clone.  but it would be nice to find some time to look\n            // further at this.\n            this.clone = function () {\n                var o = Object.create(this.constructor.prototype);\n                this.constructor.apply(o, a);\n                return o;\n            }.bind(this);\n            // user can supply a beforeDetach callback, which will be executed before a detach\n            // is performed; returning false prevents the detach.\n            this.isDetachAllowed = function (connection) {\n                var r = true;\n                if (this._jsPlumb.beforeDetach) {\n                    try {\n                        r = this._jsPlumb.beforeDetach(connection);\n                    }\n                    catch (e) {\n                        _ju.log(\"jsPlumb: beforeDetach callback failed\", e);\n                    }\n                }\n                return r;\n            };\n            // user can supply a beforeDrop callback, which will be executed before a dropped\n            // connection is confirmed. user can return false to reject connection.\n            this.isDropAllowed = function (sourceId, targetId, scope, connection, dropEndpoint, source, target) {\n                var r = this._jsPlumb.instance.checkCondition(\"beforeDrop\", {\n                    sourceId: sourceId,\n                    targetId: targetId,\n                    scope: scope,\n                    connection: connection,\n                    dropEndpoint: dropEndpoint,\n                    source: source, target: target\n                });\n                if (this._jsPlumb.beforeDrop) {\n                    try {\n                        r = this._jsPlumb.beforeDrop({\n                            sourceId: sourceId,\n                            targetId: targetId,\n                            scope: scope,\n                            connection: connection,\n                            dropEndpoint: dropEndpoint,\n                            source: source, target: target\n                        });\n                    }\n                    catch (e) {\n                        _ju.log(\"jsPlumb: beforeDrop callback failed\", e);\n                    }\n                }\n                return r;\n            };\n            var domListeners = [];\n            // sets the component associated with listener events. for instance, an overlay delegates\n            // its events back to a connector. but if the connector is swapped on the underlying connection,\n            // then this component must be changed. This is called by setConnector in the Connection class.\n            this.setListenerComponent = function (c) {\n                for (var i = 0; i < domListeners.length; i++) {\n                    domListeners[i][3] = c;\n                }\n            };\n        };\n    var _removeTypeCssHelper = function (component, typeIndex) {\n        var typeId = component._jsPlumb.types[typeIndex],\n            type = component._jsPlumb.instance.getType(typeId, component.getTypeDescriptor());\n        if (type != null && type.cssClass && component.canvas) {\n            component._jsPlumb.instance.removeClass(component.canvas, type.cssClass);\n        }\n    };\n    _ju.extend(root.jsPlumbUIComponent, _ju.EventGenerator, {\n        getParameter: function (name) {\n            return this._jsPlumb.parameters[name];\n        },\n        setParameter: function (name, value) {\n            this._jsPlumb.parameters[name] = value;\n        },\n        getParameters: function () {\n            return this._jsPlumb.parameters;\n        },\n        setParameters: function (p) {\n            this._jsPlumb.parameters = p;\n        },\n        getClass:function() {\n            return jsPlumb.getClass(this.canvas);\n        },\n        hasClass:function(clazz) {\n            return jsPlumb.hasClass(this.canvas, clazz);\n        },\n        addClass: function (clazz) {\n            jsPlumb.addClass(this.canvas, clazz);\n        },\n        removeClass: function (clazz) {\n            jsPlumb.removeClass(this.canvas, clazz);\n        },\n        updateClasses: function (classesToAdd, classesToRemove) {\n            jsPlumb.updateClasses(this.canvas, classesToAdd, classesToRemove);\n        },\n        setType: function (typeId, params, doNotRepaint) {\n            this.clearTypes();\n            this._jsPlumb.types = _splitType(typeId) || [];\n            _applyTypes(this, params, doNotRepaint);\n        },\n        getType: function () {\n            return this._jsPlumb.types;\n        },\n        reapplyTypes: function (params, doNotRepaint) {\n            _applyTypes(this, params, doNotRepaint);\n        },\n        hasType: function (typeId) {\n            return this._jsPlumb.types.indexOf(typeId) !== -1;\n        },\n        addType: function (typeId, params, doNotRepaint) {\n            var t = _splitType(typeId), _cont = false;\n            if (t != null) {\n                for (var i = 0, j = t.length; i < j; i++) {\n                    if (!this.hasType(t[i])) {\n                        this._jsPlumb.types.push(t[i]);\n                        _cont = true;\n                    }\n                }\n                if (_cont) {\n                    _applyTypes(this, params, doNotRepaint);\n                }\n            }\n        },\n        removeType: function (typeId, params, doNotRepaint) {\n            var t = _splitType(typeId), _cont = false, _one = function (tt) {\n                var idx = this._jsPlumb.types.indexOf(tt);\n                if (idx !== -1) {\n                    // remove css class if necessary\n                    _removeTypeCssHelper(this, idx);\n                    this._jsPlumb.types.splice(idx, 1);\n                    return true;\n                }\n                return false;\n            }.bind(this);\n            if (t != null) {\n                for (var i = 0, j = t.length; i < j; i++) {\n                    _cont = _one(t[i]) || _cont;\n                }\n                if (_cont) {\n                    _applyTypes(this, params, doNotRepaint);\n                }\n            }\n        },\n        clearTypes: function (params, doNotRepaint) {\n            var i = this._jsPlumb.types.length;\n            for (var j = 0; j < i; j++) {\n                _removeTypeCssHelper(this, 0);\n                this._jsPlumb.types.splice(0, 1);\n            }\n            _applyTypes(this, params, doNotRepaint);\n        },\n        toggleType: function (typeId, params, doNotRepaint) {\n            var t = _splitType(typeId);\n            if (t != null) {\n                for (var i = 0, j = t.length; i < j; i++) {\n                    var idx = this._jsPlumb.types.indexOf(t[i]);\n                    if (idx !== -1) {\n                        _removeTypeCssHelper(this, idx);\n                        this._jsPlumb.types.splice(idx, 1);\n                    }\n                    else {\n                        this._jsPlumb.types.push(t[i]);\n                    }\n                }\n                _applyTypes(this, params, doNotRepaint);\n            }\n        },\n        applyType: function (t, doNotRepaint) {\n            this.setPaintStyle(t.paintStyle, doNotRepaint);\n            this.setHoverPaintStyle(t.hoverPaintStyle, doNotRepaint);\n            if (t.parameters) {\n                for (var i in t.parameters) {\n                    this.setParameter(i, t.parameters[i]);\n                }\n            }\n            this._jsPlumb.paintStyleInUse = this.getPaintStyle();\n        },\n        setPaintStyle: function (style, doNotRepaint) {\n            // this._jsPlumb.paintStyle = jsPlumb.extend({}, style);\n            // TODO figure out if we want components to clone paintStyle so as not to share it.\n            this._jsPlumb.paintStyle = style;\n            this._jsPlumb.paintStyleInUse = this._jsPlumb.paintStyle;\n            _updateHoverStyle(this);\n            if (!doNotRepaint) {\n                this.repaint();\n            }\n        },\n        getPaintStyle: function () {\n            return this._jsPlumb.paintStyle;\n        },\n        setHoverPaintStyle: function (style, doNotRepaint) {\n            //this._jsPlumb.hoverPaintStyle = jsPlumb.extend({}, style);\n            // TODO figure out if we want components to clone paintStyle so as not to share it.\n            this._jsPlumb.hoverPaintStyle = style;\n            _updateHoverStyle(this);\n            if (!doNotRepaint) {\n                this.repaint();\n            }\n        },\n        getHoverPaintStyle: function () {\n            return this._jsPlumb.hoverPaintStyle;\n        },\n        destroy: function (force) {\n            if (force || this.typeId == null) {\n                this.cleanupListeners(); // this is on EventGenerator\n                this.clone = null;\n                this._jsPlumb = null;\n            }\n        },\n        isHover: function () {\n            return this._jsPlumb.hover;\n        },\n        setHover: function (hover, ignoreAttachedElements, timestamp) {\n            // while dragging, we ignore these events.  this keeps the UI from flashing and\n            // swishing and whatevering.\n            if (this._jsPlumb && !this._jsPlumb.instance.currentlyDragging && !this._jsPlumb.instance.isHoverSuspended()) {\n                this._jsPlumb.hover = hover;\n                var method = hover ? \"addClass\" : \"removeClass\";\n                if (this.canvas != null) {\n                    if (this._jsPlumb.instance.hoverClass != null) {\n                        this._jsPlumb.instance[method](this.canvas, this._jsPlumb.instance.hoverClass);\n                    }\n                    if (this._jsPlumb.hoverClass != null) {\n                        this._jsPlumb.instance[method](this.canvas, this._jsPlumb.hoverClass);\n                    }\n                }\n                if (this._jsPlumb.hoverPaintStyle != null) {\n                    this._jsPlumb.paintStyleInUse = hover ? this._jsPlumb.hoverPaintStyle : this._jsPlumb.paintStyle;\n                    if (!this._jsPlumb.instance.isSuspendDrawing()) {\n                        timestamp = timestamp || jsPlumbUtil.uuid();\n                        this.repaint({timestamp: timestamp, recalc: false});\n                    }\n                }\n                // get the list of other affected elements, if supported by this component.\n                // for a connection, its the endpoints.  for an endpoint, its the connections! surprise.\n                if (this.getAttachedElements && !ignoreAttachedElements) {\n                    _updateAttachedElements(this, hover, jsPlumbUtil.uuid(), this);\n                }\n            }\n        }\n    });\n// ------------------------------ END jsPlumbUIComponent --------------------------------------------\n    var _jsPlumbInstanceIndex = 0,\n        getInstanceIndex = function () {\n            var i = _jsPlumbInstanceIndex + 1;\n            _jsPlumbInstanceIndex++;\n            return i;\n        };\n    var jsPlumbInstance = root.jsPlumbInstance = function (_defaults) {\n        this.version = \"2.15.6\";\n        this.Defaults = {\n            Anchor: \"Bottom\",\n            Anchors: [ null, null ],\n            ConnectionsDetachable: true,\n            ConnectionOverlays: [ ],\n            Connector: \"Bezier\",\n            Container: null,\n            DoNotThrowErrors: false,\n            DragOptions: { },\n            DropOptions: { },\n            Endpoint: \"Dot\",\n            EndpointOverlays: [ ],\n            Endpoints: [ null, null ],\n            EndpointStyle: { fill: \"#456\" },\n            EndpointStyles: [ null, null ],\n            EndpointHoverStyle: null,\n            EndpointHoverStyles: [ null, null ],\n            HoverPaintStyle: null,\n            LabelStyle: { color: \"black\" },\n            ListStyle: { },\n            LogEnabled: false,\n            Overlays: [ ],\n            MaxConnections: 1,\n            PaintStyle: { \"stroke-width\": 4, stroke: \"#456\" },\n            ReattachConnections: false,\n            RenderMode: \"svg\",\n            Scope: \"jsPlumb_DefaultScope\"\n        };\n        if (_defaults) {\n            jsPlumb.extend(this.Defaults, _defaults);\n        }\n        this.logEnabled = this.Defaults.LogEnabled;\n        this._connectionTypes = {};\n        this._endpointTypes = {};\n        _ju.EventGenerator.apply(this);\n        var _currentInstance = this,\n            _instanceIndex = getInstanceIndex(),\n            _bb = _currentInstance.bind,\n            _initialDefaults = {},\n            _zoom = 1,\n            _info = function (el) {\n                if (el == null) {\n                    return null;\n                }\n                else if (el.nodeType === 3 || el.nodeType === 8) {\n                    return { el:el, text:true };\n                }\n                else {\n                    var _el = _currentInstance.getElement(el);\n                    return { el: _el, id: (_ju.isString(el) && _el == null) ? el : _getId(_el) };\n                }\n            };\n        this.getInstanceIndex = function () {\n            return _instanceIndex;\n        };\n        // CONVERTED\n        this.setZoom = function (z, repaintEverything) {\n            _zoom = z;\n            _currentInstance.fire(\"zoom\", _zoom);\n            if (repaintEverything) {\n                _currentInstance.repaintEverything();\n            }\n            return true;\n        };\n        // CONVERTED\n        this.getZoom = function () {\n            return _zoom;\n        };\n        for (var i in this.Defaults) {\n            _initialDefaults[i] = this.Defaults[i];\n        }\n        var _container, _containerDelegations = [];\n        this.unbindContainer = function() {\n            if (_container != null && _containerDelegations.length > 0) {\n                for (var i = 0; i < _containerDelegations.length; i++) {\n                    _currentInstance.off(_container, _containerDelegations[i][0], _containerDelegations[i][1]);\n                }\n            }\n        };\n        this.setContainer = function (c) {\n            this.unbindContainer();\n            // get container as dom element.\n            c = this.getElement(c);\n            // move existing connections and endpoints, if any.\n            this.select().each(function (conn) {\n                conn.moveParent(c);\n            });\n            this.selectEndpoints().each(function (ep) {\n                ep.moveParent(c);\n            });\n            // set container.\n            var previousContainer = _container;\n            _container = c;\n            _containerDelegations.length = 0;\n            var eventAliases = {\n                \"endpointclick\":\"endpointClick\",\n                \"endpointdblclick\":\"endpointDblClick\"\n            };\n            var _oneDelegateHandler = function (id, e, componentType) {\n                var t = e.srcElement || e.target,\n                    jp = (t && t.parentNode ? t.parentNode._jsPlumb : null) || (t ? t._jsPlumb : null) || (t && t.parentNode && t.parentNode.parentNode ? t.parentNode.parentNode._jsPlumb : null);\n                if (jp) {\n                    jp.fire(id, jp, e);\n                    var alias = componentType ? eventAliases[componentType + id] || id : id;\n                    // jsplumb also fires every event coming from components/overlays. That's what the test for `jp.component` is for.\n                    _currentInstance.fire(alias, jp.component || jp, e);\n                }\n            };\n            var _addOneDelegate = function(eventId, selector, fn) {\n                _containerDelegations.push([eventId, fn]);\n                _currentInstance.on(_container, eventId, selector, fn);\n            };\n            // delegate one event on the container to jsplumb elements. it might be possible to\n            // abstract this out: each of endpoint, connection and overlay could register themselves with\n            // jsplumb as \"component types\" or whatever, and provide a suitable selector. this would be\n            // done by the renderer (although admittedly from 2.0 onwards we're not supporting vml anymore)\n            var _oneDelegate = function (id) {\n                // connections.\n                _addOneDelegate(id, \".jtk-connector\", function (e) {\n                    _oneDelegateHandler(id, e);\n                });\n                // endpoints. note they can have an enclosing div, or not.\n                _addOneDelegate(id, \".jtk-endpoint\", function (e) {\n                    _oneDelegateHandler(id, e, \"endpoint\");\n                });\n                // overlays\n                _addOneDelegate(id, \".jtk-overlay\", function (e) {\n                    _oneDelegateHandler(id, e);\n                });\n            };\n            for (var i = 0; i < events.length; i++) {\n                _oneDelegate(events[i]);\n            }\n            // managed elements\n            for (var elId in managedElements) {\n                var el = managedElements[elId].el;\n                if (el.parentNode === previousContainer) {\n                    previousContainer.removeChild(el);\n                    _container.appendChild(el);\n                }\n            }\n        };\n        this.getContainer = function () {\n            return _container;\n        };\n        this.bind = function (event, fn) {\n            if (\"ready\" === event && initialized) {\n                fn();\n            }\n            else {\n                _bb.apply(_currentInstance, [event, fn]);\n            }\n        };\n        _currentInstance.importDefaults = function (d) {\n            for (var i in d) {\n                _currentInstance.Defaults[i] = d[i];\n            }\n            if (d.Container) {\n                _currentInstance.setContainer(d.Container);\n            }\n            return _currentInstance;\n        };\n        _currentInstance.restoreDefaults = function () {\n            _currentInstance.Defaults = jsPlumb.extend({}, _initialDefaults);\n            return _currentInstance;\n        };\n        var log = null,\n            initialized = false,\n            // TODO remove from window scope\n            connections = [],\n            // map of element id -> endpoint lists. an element can have an arbitrary\n            // number of endpoints on it, and not all of them have to be connected\n            // to anything.\n            endpointsByElement = {},\n            endpointsByUUID = {},\n            managedElements = {},\n            offsets = {},\n            offsetTimestamps = {},\n            draggableStates = {},\n            connectionBeingDragged = false,\n            sizes = [],\n            _suspendDrawing = false,\n            _suspendedAt = null,\n            DEFAULT_SCOPE = this.Defaults.Scope,\n            _curIdStamp = 1,\n            _idstamp = function () {\n                return \"\" + _curIdStamp++;\n            },\n            //\n            // appends an element to some other element, which is calculated as follows:\n            //\n            // 1. if Container exists, use that element.\n            // 2. if the 'parent' parameter exists, use that.\n            // 3. otherwise just use the root element.\n            //\n            //\n            _appendElement = function (el, parent) {\n                if (_container) {\n                    _container.appendChild(el);\n                }\n                else if (!parent) {\n                    this.appendToRoot(el);\n                }\n                else {\n                    this.getElement(parent).appendChild(el);\n                }\n            }.bind(this),\n            //\n            // Draws an endpoint and its connections. this is the main entry point into drawing connections as well\n            // as endpoints, since jsPlumb is endpoint-centric under the hood.\n            //\n            // @param element element to draw (of type library specific element object)\n            // @param ui UI object from current library's event system. optional.\n            // @param timestamp timestamp for this paint cycle. used to speed things up a little by cutting down the amount of offset calculations we do.\n            // @param clearEdits defaults to false; indicates that mouse edits for connectors should be cleared\n            ///\n            _draw = function (element, ui, timestamp, clearEdits) {\n                var drawResult = { c:[], e:[] };\n                if (!_suspendDrawing) {\n                    element = _currentInstance.getElement(element);\n                    if (element != null) {\n                        var id = _getId(element),\n                            repaintEls = element.querySelectorAll(\".jtk-managed\");\n                        if (timestamp == null) {\n                            timestamp = jsPlumbUtil.uuid();\n                        }\n                        // update the offset of everything _before_ we try to draw anything.\n                        var o = _updateOffset({elId: id, offset: ui, recalc: false, timestamp: timestamp});\n                        for (var i = 0; i < repaintEls.length; i++) {\n                            _updateOffset({\n                                elId: repaintEls[i].getAttribute(\"id\"),\n                                // offset: {\n                                //     left: o.o.left + repaintEls[i].offset.left,\n                                //     top: o.o.top + repaintEls[i].offset.top\n                                // },\n                                recalc: true,\n                                timestamp: timestamp\n                            });\n                        }\n                        var d2 = _currentInstance.router.redraw(id, ui, timestamp, null, clearEdits);\n                        Array.prototype.push.apply(drawResult.c, d2.c);\n                        Array.prototype.push.apply(drawResult.e, d2.e);\n                        if (repaintEls) {\n                            for (var j = 0; j < repaintEls.length; j++) {\n                                d2 = _currentInstance.router.redraw(repaintEls[j].getAttribute(\"id\"), null, timestamp, null, clearEdits, true);\n                                Array.prototype.push.apply(drawResult.c, d2.c);\n                                Array.prototype.push.apply(drawResult.e, d2.e);\n                            }\n                        }\n                    }\n                }\n                return drawResult;\n            },\n            //\n            // gets an Endpoint by uuid.\n            //\n            _getEndpoint = function (uuid) {\n                return endpointsByUUID[uuid];\n            },\n            /**\n             * inits a draggable if it's not already initialised.\n             * TODO: somehow abstract this to the adapter, because the concept of \"draggable\" has no\n             * place on the server.\n             */\n            _scopeMatch = function (e1, e2) {\n                var s1 = e1.scope.split(/\\s/), s2 = e2.scope.split(/\\s/);\n                for (var i = 0; i < s1.length; i++) {\n                    for (var j = 0; j < s2.length; j++) {\n                        if (s2[j] === s1[i]) {\n                            return true;\n                        }\n                    }\n                }\n                return false;\n            },\n            _mergeOverrides = function (def, values) {\n                var m = jsPlumb.extend({}, def);\n                for (var i in values) {\n                    if (values[i]) {\n                        m[i] = values[i];\n                    }\n                }\n                return m;\n            },\n            /*\n             * prepares a final params object that can be passed to _newConnection, taking into account defaults, events, etc.\n             */\n            _prepareConnectionParams = function (params, referenceParams) {\n                var _p = jsPlumb.extend({ }, params);\n                if (referenceParams) {\n                    jsPlumb.extend(_p, referenceParams);\n                }\n                // hotwire endpoints passed as source or target to sourceEndpoint/targetEndpoint, respectively.\n                if (_p.source) {\n                    if (_p.source.endpoint) {\n                        _p.sourceEndpoint = _p.source;\n                    }\n                    else {\n                        _p.source = _currentInstance.getElement(_p.source);\n                    }\n                }\n                if (_p.target) {\n                    if (_p.target.endpoint) {\n                        _p.targetEndpoint = _p.target;\n                    }\n                    else {\n                        _p.target = _currentInstance.getElement(_p.target);\n                    }\n                }\n                // test for endpoint uuids to connect\n                if (params.uuids) {\n                    _p.sourceEndpoint = _getEndpoint(params.uuids[0]);\n                    _p.targetEndpoint = _getEndpoint(params.uuids[1]);\n                }\n                // now ensure that if we do have Endpoints already, they're not full.\n                // source:\n                if (_p.sourceEndpoint && _p.sourceEndpoint.isFull()) {\n                    _ju.log(_currentInstance, \"could not add connection; source endpoint is full\");\n                    return;\n                }\n                // target:\n                if (_p.targetEndpoint && _p.targetEndpoint.isFull()) {\n                    _ju.log(_currentInstance, \"could not add connection; target endpoint is full\");\n                    return;\n                }\n                // if source endpoint mandates connection type and nothing specified in our params, use it.\n                if (!_p.type && _p.sourceEndpoint) {\n                    _p.type = _p.sourceEndpoint.connectionType;\n                }\n                // copy in any connectorOverlays that were specified on the source endpoint.\n                // it doesnt copy target endpoint overlays.  i'm not sure if we want it to or not.\n                if (_p.sourceEndpoint && _p.sourceEndpoint.connectorOverlays) {\n                    _p.overlays = _p.overlays || [];\n                    for (var i = 0, j = _p.sourceEndpoint.connectorOverlays.length; i < j; i++) {\n                        _p.overlays.push(_p.sourceEndpoint.connectorOverlays[i]);\n                    }\n                }\n                // scope\n                if (_p.sourceEndpoint && _p.sourceEndpoint.scope) {\n                    _p.scope = _p.sourceEndpoint.scope;\n                }\n                // pointer events\n                if (!_p[\"pointer-events\"] && _p.sourceEndpoint && _p.sourceEndpoint.connectorPointerEvents) {\n                    _p[\"pointer-events\"] = _p.sourceEndpoint.connectorPointerEvents;\n                }\n                var _addEndpoint = function (el, def, idx) {\n                    var params = _mergeOverrides(def, {\n                        anchor: _p.anchors ? _p.anchors[idx] : _p.anchor,\n                        endpoint: _p.endpoints ? _p.endpoints[idx] : _p.endpoint,\n                        paintStyle: _p.endpointStyles ? _p.endpointStyles[idx] : _p.endpointStyle,\n                        hoverPaintStyle: _p.endpointHoverStyles ? _p.endpointHoverStyles[idx] : _p.endpointHoverStyle\n                    });\n                    return _currentInstance.addEndpoint(el, params);\n                };\n                // check for makeSource/makeTarget specs.\n                var _oneElementDef = function (type, idx, defs, matchType) {\n                    if (_p[type] && !_p[type].endpoint && !_p[type + \"Endpoint\"] && !_p.newConnection) {\n                        var tid = _getId(_p[type]), tep = defs[tid];\n                        tep = tep ? tep[matchType] : null;\n                        if (tep) {\n                            // if not enabled, return.\n                            if (!tep.enabled) {\n                                return false;\n                            }\n                            var epDef = jsPlumb.extend({}, tep.def);\n                            delete epDef.label;\n                            var newEndpoint = tep.endpoint != null && tep.endpoint._jsPlumb ? tep.endpoint : _addEndpoint(_p[type], epDef, idx);\n                            if (newEndpoint.isFull()) {\n                                return false;\n                            }\n                            _p[type + \"Endpoint\"] = newEndpoint;\n                            if (!_p.scope && epDef.scope) {\n                                _p.scope = epDef.scope;\n                            } // provide scope if not already provided and endpoint def has one.\n                            if (tep.uniqueEndpoint) {\n                                if (!tep.endpoint) {\n                                    tep.endpoint = newEndpoint;\n                                    newEndpoint.setDeleteOnEmpty(false);\n                                }\n                                else {\n                                    newEndpoint.finalEndpoint = tep.endpoint;\n                                }\n                            } else {\n                                newEndpoint.setDeleteOnEmpty(true);\n                            }\n                            //\n                            // copy in connector overlays if present on the source definition.\n                            //\n                            if (idx === 0 && tep.def.connectorOverlays) {\n                                _p.overlays = _p.overlays || [];\n                                Array.prototype.push.apply(_p.overlays, tep.def.connectorOverlays);\n                            }\n                        }\n                    }\n                };\n                if (_oneElementDef(\"source\", 0, this.sourceEndpointDefinitions, _p.type || \"default\") === false) {\n                    return;\n                }\n                if (_oneElementDef(\"target\", 1, this.targetEndpointDefinitions, _p.type || \"default\") === false) {\n                    return;\n                }\n                // last, ensure scopes match\n                if (_p.sourceEndpoint && _p.targetEndpoint) {\n                    if (!_scopeMatch(_p.sourceEndpoint, _p.targetEndpoint)) {\n                        _p = null;\n                    }\n                }\n                return _p;\n            }.bind(_currentInstance),\n            _newConnection = function (params) {\n                var connectionFunc = _currentInstance.Defaults.ConnectionType || _currentInstance.getDefaultConnectionType();\n                params._jsPlumb = _currentInstance;\n                params.newConnection = _newConnection;\n                params.newEndpoint = _newEndpoint;\n                params.endpointsByUUID = endpointsByUUID;\n                params.endpointsByElement = endpointsByElement;\n                params.finaliseConnection = _finaliseConnection;\n                params.id = \"con_\" + _idstamp();\n                var con = new connectionFunc(params);\n                // if the connection is draggable, then maybe we need to tell the target endpoint to init the\n                // dragging code. it won't run again if it already configured to be draggable.\n                if (con.isDetachable()) {\n                    con.endpoints[0].initDraggable(\"_jsPlumbSource\");\n                    con.endpoints[1].initDraggable(\"_jsPlumbTarget\");\n                }\n                return con;\n            },\n            //\n            // adds the connection to the backing model, fires an event if necessary and then redraws\n            //\n            _finaliseConnection = _currentInstance.finaliseConnection = function (jpc, params, originalEvent, doInformAnchorManager) {\n                params = params || {};\n                // add to list of connections (by scope).\n                if (!jpc.suspendedEndpoint) {\n                    connections.push(jpc);\n                }\n                jpc.pending = null;\n                // turn off isTemporarySource on the source endpoint (only viable on first draw)\n                jpc.endpoints[0].isTemporarySource = false;\n                // always inform the anchor manager\n                // except that if jpc has a suspended endpoint it's not true to say the\n                // connection is new; it has just (possibly) moved. the question is whether\n                // to make that call here or in the anchor manager.  i think perhaps here.\n                if (doInformAnchorManager !== false) {\n                    _currentInstance.router.newConnection(jpc);\n                }\n                // force a paint\n                _draw(jpc.source);\n                // fire an event\n                if (!params.doNotFireConnectionEvent && params.fireEvent !== false) {\n                    var eventArgs = {\n                        connection: jpc,\n                        source: jpc.source, target: jpc.target,\n                        sourceId: jpc.sourceId, targetId: jpc.targetId,\n                        sourceEndpoint: jpc.endpoints[0], targetEndpoint: jpc.endpoints[1]\n                    };\n                    _currentInstance.fire(\"connection\", eventArgs, originalEvent);\n                }\n            },\n            /*\n             factory method to prepare a new endpoint.  this should always be used instead of creating Endpoints\n             manually, since this method attaches event listeners and an id.\n             */\n            _newEndpoint = function (params, id) {\n                var endpointFunc = _currentInstance.Defaults.EndpointType || jsPlumb.Endpoint;\n                var _p = jsPlumb.extend({}, params);\n                //delete _p.label; // not supported by endpoint.\n                _p._jsPlumb = _currentInstance;\n                _p.newConnection = _newConnection;\n                _p.newEndpoint = _newEndpoint;\n                _p.endpointsByUUID = endpointsByUUID;\n                _p.endpointsByElement = endpointsByElement;\n                _p.fireDetachEvent = fireDetachEvent;\n                _p.elementId = id || _getId(_p.source);\n                var ep = new endpointFunc(_p);\n                ep.id = \"ep_\" + _idstamp();\n                _manage(_p.elementId, _p.source);\n                if (!jsPlumb.headless) {\n                    _currentInstance.getDragManager().endpointAdded(_p.source, id);\n                }\n                return ep;\n            },\n            /*\n             * performs the given function operation on all the connections found\n             * for the given element id; this means we find all the endpoints for\n             * the given element, and then for each endpoint find the connectors\n             * connected to it. then we pass each connection in to the given\n             * function.\n             */\n            _operation = function (elId, func, endpointFunc) {\n                var endpoints = endpointsByElement[elId];\n                if (endpoints && endpoints.length) {\n                    for (var i = 0, ii = endpoints.length; i < ii; i++) {\n                        for (var j = 0, jj = endpoints[i].connections.length; j < jj; j++) {\n                            var retVal = func(endpoints[i].connections[j]);\n                            // if the function passed in returns true, we exit.\n                            // most functions return false.\n                            if (retVal) {\n                                return;\n                            }\n                        }\n                        if (endpointFunc) {\n                            endpointFunc(endpoints[i]);\n                        }\n                    }\n                }\n            },\n            _setDraggable = function (element, draggable) {\n                return jsPlumb.each(element, function (el) {\n                    if (_currentInstance.isDragSupported(el)) {\n                        draggableStates[_currentInstance.getAttribute(el, \"id\")] = draggable;\n                        _currentInstance.setElementDraggable(el, draggable);\n                    }\n                });\n            },\n            /*\n             * private method to do the business of hiding/showing.\n             *\n             * @param el\n             *            either Id of the element in question or a library specific\n             *            object for the element.\n             * @param state\n             *            String specifying a value for the css 'display' property\n             *            ('block' or 'none').\n             */\n            _setVisible = function (el, state, alsoChangeEndpoints) {\n                state = state === \"block\";\n                var endpointFunc = null;\n                if (alsoChangeEndpoints) {\n                    endpointFunc = function (ep) {\n                        ep.setVisible(state, true, true);\n                    };\n                }\n                var info = _info(el);\n                _operation(info.id, function (jpc) {\n                    if (state && alsoChangeEndpoints) {\n                        // this test is necessary because this functionality is new, and i wanted to maintain backwards compatibility.\n                        // this block will only set a connection to be visible if the other endpoint in the connection is also visible.\n                        var oidx = jpc.sourceId === info.id ? 1 : 0;\n                        if (jpc.endpoints[oidx].isVisible()) {\n                            jpc.setVisible(true);\n                        }\n                    }\n                    else { // the default behaviour for show, and what always happens for hide, is to just set the visibility without getting clever.\n                        jpc.setVisible(state);\n                    }\n                }, endpointFunc);\n            },\n            /**\n             * private method to do the business of toggling hiding/showing.\n             */\n            _toggleVisible = function (elId, changeEndpoints) {\n                var endpointFunc = null;\n                if (changeEndpoints) {\n                    endpointFunc = function (ep) {\n                        var state = ep.isVisible();\n                        ep.setVisible(!state);\n                    };\n                }\n                _operation(elId, function (jpc) {\n                    var state = jpc.isVisible();\n                    jpc.setVisible(!state);\n                }, endpointFunc);\n            },\n            // TODO comparison performance\n            _getCachedData = function (elId) {\n                var o = offsets[elId];\n                if (!o) {\n                    return _updateOffset({elId: elId});\n                }\n                else {\n                    return {o: o, s: sizes[elId]};\n                }\n            },\n            /**\n             * gets an id for the given element, creating and setting one if\n             * necessary.  the id is of the form\n             *\n             *    jsPlumb_<instance index>_<index in instance>\n             *\n             * where \"index in instance\" is a monotonically increasing integer that starts at 0,\n             * for each instance.  this method is used not only to assign ids to elements that do not\n             * have them but also to connections and endpoints.\n             */\n            _getId = function (element, uuid, doNotCreateIfNotFound) {\n                if (_ju.isString(element)) {\n                    return element;\n                }\n                if (element == null) {\n                    return null;\n                }\n                var id = _currentInstance.getAttribute(element, \"id\");\n                if (!id || id === \"undefined\") {\n                    // check if fixed uuid parameter is given\n                    if (arguments.length === 2 && arguments[1] !== undefined) {\n                        id = uuid;\n                    }\n                    else if (arguments.length === 1 || (arguments.length === 3 && !arguments[2])) {\n                        id = \"jsPlumb_\" + _instanceIndex + \"_\" + _idstamp();\n                    }\n                    if (!doNotCreateIfNotFound) {\n                        _currentInstance.setAttribute(element, \"id\", id);\n                    }\n                }\n                return id;\n            };\n        this.setConnectionBeingDragged = function (v) {\n            connectionBeingDragged = v;\n        };\n        this.isConnectionBeingDragged = function () {\n            return connectionBeingDragged;\n        };\n        /**\n         * Returns a map of all the elements this jsPlumbInstance is currently managing.\n         * @returns {Object} Map of [id-> {el, endpoint[], connection, position}] information.\n         */\n        this.getManagedElements = function() {\n            return managedElements;\n        };\n        this.connectorClass = \"jtk-connector\";\n        this.connectorOutlineClass = \"jtk-connector-outline\";\n        this.connectedClass = \"jtk-connected\";\n        this.hoverClass = \"jtk-hover\";\n        this.endpointClass = \"jtk-endpoint\";\n        this.endpointConnectedClass = \"jtk-endpoint-connected\";\n        this.endpointFullClass = \"jtk-endpoint-full\";\n        this.endpointDropAllowedClass = \"jtk-endpoint-drop-allowed\";\n        this.endpointDropForbiddenClass = \"jtk-endpoint-drop-forbidden\";\n        this.overlayClass = \"jtk-overlay\";\n        this.draggingClass = \"jtk-dragging\";// CONVERTED\n        this.elementDraggingClass = \"jtk-element-dragging\";// CONVERTED\n        this.sourceElementDraggingClass = \"jtk-source-element-dragging\"; // CONVERTED\n        this.targetElementDraggingClass = \"jtk-target-element-dragging\";// CONVERTED\n        this.endpointAnchorClassPrefix = \"jtk-endpoint-anchor\";\n        this.hoverSourceClass = \"jtk-source-hover\";\n        this.hoverTargetClass = \"jtk-target-hover\";\n        this.dragSelectClass = \"jtk-drag-select\";\n        this.Anchors = {};\n        this.Connectors = {  \"svg\": {} };\n        this.Endpoints = { \"svg\": {} };\n        this.Overlays = { \"svg\": {} } ;\n        this.ConnectorRenderers = {};\n        this.SVG = \"svg\";\n// --------------------------- jsPlumbInstance public API ---------------------------------------------------------\n        this.addEndpoint = function (el, params, referenceParams) {\n            referenceParams = referenceParams || {};\n            var p = jsPlumb.extend({}, referenceParams);\n            jsPlumb.extend(p, params);\n            p.endpoint = p.endpoint || _currentInstance.Defaults.Endpoint;\n            p.paintStyle = p.paintStyle || _currentInstance.Defaults.EndpointStyle;\n            var results = [],\n                inputs = (_ju.isArray(el) || (el.length != null && !_ju.isString(el))) ? el : [ el ];\n            for (var i = 0, j = inputs.length; i < j; i++) {\n                p.source = _currentInstance.getElement(inputs[i]);\n                _ensureContainer(p.source);\n                var id = _getId(p.source), e = _newEndpoint(p, id);\n                // ensure element is managed. force a recalc if drawing not suspended, to ensure the cached value is fresh\n                var myOffset = _manage(id, p.source, null, !_suspendDrawing).info.o;\n                _ju.addToList(endpointsByElement, id, e);\n                if (!_suspendDrawing) {\n                    e.paint({\n                        anchorLoc: e.anchor.compute(\n                            { xy: [ myOffset.left, myOffset.top ],\n                                wh: sizes[id],\n                                element: e,\n                                timestamp: _suspendedAt,\n                                rotation:this.getRotation(id)\n                            }),\n                        timestamp: _suspendedAt\n                    });\n                }\n                results.push(e);\n            }\n            return results.length === 1 ? results[0] : results;\n        };\n        this.addEndpoints = function (el, endpoints, referenceParams) {\n            var results = [];\n            for (var i = 0, j = endpoints.length; i < j; i++) {\n                var e = _currentInstance.addEndpoint(el, endpoints[i], referenceParams);\n                if (_ju.isArray(e)) {\n                    Array.prototype.push.apply(results, e);\n                }\n                else {\n                    results.push(e);\n                }\n            }\n            return results;\n        };\n        this.animate = function (el, properties, options) {\n            if (!this.animationSupported) {\n                return false;\n            }\n            options = options || {};\n            var del = _currentInstance.getElement(el),\n                id = _getId(del),\n                stepFunction = jsPlumb.animEvents.step,\n                completeFunction = jsPlumb.animEvents.complete;\n            options[stepFunction] = _ju.wrap(options[stepFunction], function () {\n                _currentInstance.revalidate(id);\n            });\n            // onComplete repaints, just to make sure everything looks good at the end of the animation.\n            options[completeFunction] = _ju.wrap(options[completeFunction], function () {\n                _currentInstance.revalidate(id);\n            });\n            _currentInstance.doAnimate(del, properties, options);\n        };\n        /**\n         * checks for a listener for the given condition, executing it if found, passing in the given value.\n         * condition listeners would have been attached using \"bind\" (which is, you could argue, now overloaded, since\n         * firing click events etc is a bit different to what this does).  i thought about adding a \"bindCondition\"\n         * or something, but decided against it, for the sake of simplicity. jsPlumb will never fire one of these\n         * condition events anyway.\n         */\n        this.checkCondition = function (conditionName, args) {\n            var l = _currentInstance.getListener(conditionName),\n                r = true;\n            if (l && l.length > 0) {\n                var values = Array.prototype.slice.call(arguments, 1);\n                try {\n                    for (var i = 0, j = l.length; i < j; i++) {\n                        r = r && l[i].apply(l[i], values);\n                    }\n                }\n                catch (e) {\n                    _ju.log(_currentInstance, \"cannot check condition [\" + conditionName + \"]\" + e);\n                }\n            }\n            return r;\n        };\n        this.connect = function (params, referenceParams) {\n            // prepare a final set of parameters to create connection with\n            var _p = _prepareConnectionParams(params, referenceParams), jpc;\n            // TODO probably a nicer return value if the connection was not made.  _prepareConnectionParams\n            // will return null (and log something) if either endpoint was full.  what would be nicer is to\n            // create a dedicated 'error' object.\n            if (_p) {\n                if (_p.source == null && _p.sourceEndpoint == null) {\n                    _ju.log(\"Cannot establish connection - source does not exist\");\n                    return;\n                }\n                if (_p.target == null && _p.targetEndpoint == null) {\n                    _ju.log(\"Cannot establish connection - target does not exist\");\n                    return;\n                }\n                _ensureContainer(_p.source);\n                // create the connection.  it is not yet registered\n                jpc = _newConnection(_p);\n                // now add it the model, fire an event, and redraw\n                _finaliseConnection(jpc, _p);\n            }\n            return jpc;\n        };\n        var stTypes = [\n            { el: \"source\", elId: \"sourceId\", epDefs: \"sourceEndpointDefinitions\" },\n            { el: \"target\", elId: \"targetId\", epDefs: \"targetEndpointDefinitions\" }\n        ];\n        var _set = function (c, el, idx, doNotRepaint) {\n            var ep, _st = stTypes[idx], cId = c[_st.elId], cEl = c[_st.el], sid, sep,\n                oldEndpoint = c.endpoints[idx];\n            var evtParams = {\n                index: idx,\n                originalSourceId: idx === 0 ? cId : c.sourceId,\n                newSourceId: c.sourceId,\n                originalTargetId: idx === 1 ? cId : c.targetId,\n                newTargetId: c.targetId,\n                connection: c\n            };\n            if (el.constructor === jsPlumb.Endpoint) {\n                ep = el;\n                ep.addConnection(c);\n                el = ep.element;\n            }\n            else {\n                sid = _getId(el);\n                sep = this[_st.epDefs][sid];\n                if (sid === c[_st.elId]) {\n                    ep = null; // dont change source/target if the element is already the one given.\n                }\n                else if (sep) {\n                    for (var t in sep) {\n                        if (!sep[t].enabled) {\n                            return;\n                        }\n                        ep = sep[t].endpoint != null && sep[t].endpoint._jsPlumb ? sep[t].endpoint : this.addEndpoint(el, sep[t].def);\n                        if (sep[t].uniqueEndpoint) {\n                            sep[t].endpoint = ep;\n                        }\n                        ep.addConnection(c);\n                    }\n                }\n                else {\n                    ep = c.makeEndpoint(idx === 0, el, sid);\n                }\n            }\n            if (ep != null) {\n                oldEndpoint.detachFromConnection(c);\n                c.endpoints[idx] = ep;\n                c[_st.el] = ep.element;\n                c[_st.elId] = ep.elementId;\n                evtParams[idx === 0 ? \"newSourceId\" : \"newTargetId\"] = ep.elementId;\n                fireMoveEvent(evtParams);\n                if (!doNotRepaint) {\n                    c.repaint();\n                }\n            }\n            evtParams.element = el;\n            return evtParams;\n        }.bind(this);\n        this.setSource = function (connection, el, doNotRepaint) {\n            var p = _set(connection, el, 0, doNotRepaint);\n            this.router.sourceOrTargetChanged(p.originalSourceId, p.newSourceId, connection, p.el, 0);\n        };\n        this.setTarget = function (connection, el, doNotRepaint) {\n            var p = _set(connection, el, 1, doNotRepaint);\n            this.router.sourceOrTargetChanged(p.originalTargetId, p.newTargetId, connection, p.el, 1);\n        };\n        this.deleteEndpoint = function (object, dontUpdateHover, deleteAttachedObjects) {\n            var endpoint = (typeof object === \"string\") ? endpointsByUUID[object] : object;\n            if (endpoint) {\n                _currentInstance.deleteObject({ endpoint: endpoint, dontUpdateHover: dontUpdateHover, deleteAttachedObjects:deleteAttachedObjects });\n            }\n            return _currentInstance;\n        };\n        this.deleteEveryEndpoint = function () {\n            var _is = _currentInstance.setSuspendDrawing(true);\n            for (var id in endpointsByElement) {\n                var endpoints = endpointsByElement[id];\n                if (endpoints && endpoints.length) {\n                    for (var i = 0, j = endpoints.length; i < j; i++) {\n                        _currentInstance.deleteEndpoint(endpoints[i], true);\n                    }\n                }\n            }\n            endpointsByElement = {};\n            managedElements = {};\n            endpointsByUUID = {};\n            offsets = {};\n            offsetTimestamps = {};\n            _currentInstance.router.reset();\n            var dm = _currentInstance.getDragManager();\n            if (dm) {\n                dm.reset();\n            }\n            if (!_is) {\n                _currentInstance.setSuspendDrawing(false);\n            }\n            return _currentInstance;\n        };\n        var fireDetachEvent = function (jpc, doFireEvent, originalEvent) {\n            // may have been given a connection, or in special cases, an object\n            var connType = _currentInstance.Defaults.ConnectionType || _currentInstance.getDefaultConnectionType(),\n                argIsConnection = jpc.constructor === connType,\n                params = argIsConnection ? {\n                    connection: jpc,\n                    source: jpc.source, target: jpc.target,\n                    sourceId: jpc.sourceId, targetId: jpc.targetId,\n                    sourceEndpoint: jpc.endpoints[0], targetEndpoint: jpc.endpoints[1]\n                } : jpc;\n            if (doFireEvent) {\n                _currentInstance.fire(\"connectionDetached\", params, originalEvent);\n            }\n            // always fire this. used by internal jsplumb stuff.\n            _currentInstance.fire(\"internal.connectionDetached\", params, originalEvent);\n            _currentInstance.router.connectionDetached(params);\n        };\n        var fireMoveEvent = _currentInstance.fireMoveEvent = function (params, evt) {\n            _currentInstance.fire(\"connectionMoved\", params, evt);\n        };\n        this.unregisterEndpoint = function (endpoint) {\n            if (endpoint._jsPlumb.uuid) {\n                endpointsByUUID[endpoint._jsPlumb.uuid] = null;\n            }\n            _currentInstance.router.deleteEndpoint(endpoint);\n            // TODO at least replace this with a removeWithFunction call.\n            for (var e in endpointsByElement) {\n                var endpoints = endpointsByElement[e];\n                if (endpoints) {\n                    var newEndpoints = [];\n                    for (var i = 0, j = endpoints.length; i < j; i++) {\n                        if (endpoints[i] !== endpoint) {\n                            newEndpoints.push(endpoints[i]);\n                        }\n                    }\n                    endpointsByElement[e] = newEndpoints;\n                }\n                if (endpointsByElement[e].length < 1) {\n                    delete endpointsByElement[e];\n                }\n            }\n        };\n        var IS_DETACH_ALLOWED = \"isDetachAllowed\";\n        var BEFORE_DETACH = \"beforeDetach\";\n        var CHECK_CONDITION = \"checkCondition\";\n        /**\n         * Deletes a Connection.\n         * @method deleteConnection\n         * @param connection Connection to delete\n         * @param {Object} [params] Optional delete parameters\n         * @param {Boolean} [params.fireEvent=true] If false, a connection detached event will not be fired. Otherwise one will.\n         * @param {Boolean} [params.force=false] If true, the connection will be deleted even if a beforeDetach interceptor tries to stop the deletion.\n         * @returns {Boolean} True if the connection was deleted, false otherwise.\n         */\n        this.deleteConnection = function(connection, params) {\n            if (connection != null) {\n                params = params || {};\n                if (params.force || _ju.functionChain(true, false, [\n                        [ connection.endpoints[0], IS_DETACH_ALLOWED, [ connection ] ],\n                        [ connection.endpoints[1], IS_DETACH_ALLOWED, [ connection ] ],\n                        [ connection, IS_DETACH_ALLOWED, [ connection ] ],\n                        [ _currentInstance, CHECK_CONDITION, [ BEFORE_DETACH, connection ] ]\n                    ])) {\n                    connection.setHover(false);\n                    fireDetachEvent(connection, !connection.pending && params.fireEvent !== false, params.originalEvent);\n                    connection.endpoints[0].detachFromConnection(connection);\n                    connection.endpoints[1].detachFromConnection(connection);\n                    _ju.removeWithFunction(connections, function (_c) {\n                        return connection.id === _c.id;\n                    });\n                    connection.cleanup();\n                    connection.destroy();\n                    return true;\n                }\n            }\n            return false;\n        };\n        /**\n         * Remove all Connections from all elements, but leaves Endpoints in place ((unless a connection is set to auto delete its Endpoints).\n         * @method deleteEveryConnection\n         * @param {Object} [params] optional params object for the call\n         * @param {Boolean} [params.fireEvent=true] Whether or not to fire detach events\n         * @param {Boolean} [params.forceDetach=false] If true, this call will ignore any `beforeDetach` interceptors.\n         * @returns {Number} The number of connections that were deleted.\n         */\n        this.deleteEveryConnection = function (params) {\n            params = params || {};\n            var count = connections.length, deletedCount = 0;\n            _currentInstance.batch(function () {\n                for (var i = 0; i < count; i++) {\n                    deletedCount += _currentInstance.deleteConnection(connections[0], params) ? 1 : 0;\n                }\n            });\n            return deletedCount;\n        };\n        /**\n         * Removes all an element's Connections.\n         * @method deleteConnectionsForElement\n         * @param {Object} el Either the id of the element, or a selector for the element.\n         * @param {Object} [params] Optional parameters.\n         * @param {Boolean} [params.fireEvent=true] Whether or not to fire the detach event.\n         * @param {Boolean} [params.forceDetach=false] If true, this call will ignore any `beforeDetach` interceptors.\n         * @return {jsPlumbInstance} The current jsPlumb instance.\n         */\n        this.deleteConnectionsForElement = function (el, params) {\n            params = params || {};\n            el = _currentInstance.getElement(el);\n            var id = _getId(el), endpoints = endpointsByElement[id];\n            if (endpoints && endpoints.length) {\n                for (var i = 0, j = endpoints.length; i < j; i++) {\n                    endpoints[i].deleteEveryConnection(params);\n                }\n            }\n            return _currentInstance;\n        };\n        /// not public.  but of course its exposed. how to change this.\n        this.deleteObject = function (params) {\n            var result = {\n                    endpoints: {},\n                    connections: {},\n                    endpointCount: 0,\n                    connectionCount: 0\n                },\n                deleteAttachedObjects = params.deleteAttachedObjects !== false;\n            var unravelConnection = function (connection) {\n                if (connection != null && result.connections[connection.id] == null) {\n                    if (!params.dontUpdateHover && connection._jsPlumb != null) {\n                        connection.setHover(false);\n                    }\n                    result.connections[connection.id] = connection;\n                    result.connectionCount++;\n                }\n            };\n            var unravelEndpoint = function (endpoint) {\n                if (endpoint != null && result.endpoints[endpoint.id] == null) {\n                    if (!params.dontUpdateHover && endpoint._jsPlumb != null) {\n                        endpoint.setHover(false);\n                    }\n                    result.endpoints[endpoint.id] = endpoint;\n                    result.endpointCount++;\n                    if (deleteAttachedObjects) {\n                        for (var i = 0; i < endpoint.connections.length; i++) {\n                            var c = endpoint.connections[i];\n                            unravelConnection(c);\n                        }\n                    }\n                }\n            };\n            if (params.connection) {\n                unravelConnection(params.connection);\n            }\n            else {\n                unravelEndpoint(params.endpoint);\n            }\n            // loop through connections\n            for (var i in result.connections) {\n                var c = result.connections[i];\n                if (c._jsPlumb) {\n                    _ju.removeWithFunction(connections, function (_c) {\n                        return c.id === _c.id;\n                    });\n                    fireDetachEvent(c, params.fireEvent === false ? false : !c.pending, params.originalEvent);\n                    var doNotCleanup = params.deleteAttachedObjects == null ? null : !params.deleteAttachedObjects;\n                    c.endpoints[0].detachFromConnection(c, null, doNotCleanup);\n                    c.endpoints[1].detachFromConnection(c, null, doNotCleanup);\n                    c.cleanup(true);\n                    c.destroy(true);\n                }\n            }\n            // loop through endpoints\n            for (var j in result.endpoints) {\n                var e = result.endpoints[j];\n                if (e._jsPlumb) {\n                    _currentInstance.unregisterEndpoint(e);\n                    // FIRE some endpoint deleted event?\n                    e.cleanup(true);\n                    e.destroy(true);\n                }\n            }\n            return result;\n        };\n        // helpers for select/selectEndpoints\n        var _setOperation = function (list, func, args, selector) {\n                for (var i = 0, j = list.length; i < j; i++) {\n                    list[i][func].apply(list[i], args);\n                }\n                return selector(list);\n            },\n            _getOperation = function (list, func, args) {\n                var out = [];\n                for (var i = 0, j = list.length; i < j; i++) {\n                    out.push([ list[i][func].apply(list[i], args), list[i] ]);\n                }\n                return out;\n            },\n            setter = function (list, func, selector) {\n                return function () {\n                    return _setOperation(list, func, arguments, selector);\n                };\n            },\n            getter = function (list, func) {\n                return function () {\n                    return _getOperation(list, func, arguments);\n                };\n            },\n            prepareList = function (input, doNotGetIds) {\n                var r = [];\n                if (input) {\n                    if (typeof input === 'string') {\n                        if (input === \"*\") {\n                            return input;\n                        }\n                        r.push(input);\n                    }\n                    else {\n                        if (doNotGetIds) {\n                            r = input;\n                        }\n                        else {\n                            if (input.length) {\n                                for (var i = 0, j = input.length; i < j; i++) {\n                                    r.push(_info(input[i]).id);\n                                }\n                            }\n                            else {\n                                r.push(_info(input).id);\n                            }\n                        }\n                    }\n                }\n                return r;\n            },\n            filterList = function (list, value, missingIsFalse) {\n                if (list === \"*\") {\n                    return true;\n                }\n                return list.length > 0 ? list.indexOf(value) !== -1 : !missingIsFalse;\n            };\n        // get some connections, specifying source/target/scope\n        this.getConnections = function (options, flat) {\n            if (!options) {\n                options = {};\n            } else if (options.constructor === String) {\n                options = { \"scope\": options };\n            }\n            var scope = options.scope || _currentInstance.getDefaultScope(),\n                scopes = prepareList(scope, true),\n                sources = prepareList(options.source),\n                targets = prepareList(options.target),\n                results = (!flat && scopes.length > 1) ? {} : [],\n                _addOne = function (scope, obj) {\n                    if (!flat && scopes.length > 1) {\n                        var ss = results[scope];\n                        if (ss == null) {\n                            ss = results[scope] = [];\n                        }\n                        ss.push(obj);\n                    } else {\n                        results.push(obj);\n                    }\n                };\n            for (var j = 0, jj = connections.length; j < jj; j++) {\n                var c = connections[j],\n                    sourceId = c.proxies && c.proxies[0] ? c.proxies[0].originalEp.elementId : c.sourceId,\n                    targetId = c.proxies && c.proxies[1] ? c.proxies[1].originalEp.elementId : c.targetId;\n                if (filterList(scopes, c.scope) && filterList(sources, sourceId) && filterList(targets, targetId)) {\n                    _addOne(c.scope, c);\n                }\n            }\n            return results;\n        };\n        var _curryEach = function (list, executor) {\n                return function (f) {\n                    for (var i = 0, ii = list.length; i < ii; i++) {\n                        f(list[i]);\n                    }\n                    return executor(list);\n                };\n            },\n            _curryGet = function (list) {\n                return function (idx) {\n                    return list[idx];\n                };\n            };\n        var _makeCommonSelectHandler = function (list, executor) {\n            var out = {\n                    length: list.length,\n                    each: _curryEach(list, executor),\n                    get: _curryGet(list)\n                },\n                setters = [\"setHover\", \"removeAllOverlays\", \"setLabel\", \"addClass\", \"addOverlay\", \"removeOverlay\",\n                    \"removeOverlays\", \"showOverlay\", \"hideOverlay\", \"showOverlays\", \"hideOverlays\", \"setPaintStyle\",\n                    \"setHoverPaintStyle\", \"setSuspendEvents\", \"setParameter\", \"setParameters\", \"setVisible\",\n                    \"repaint\", \"addType\", \"toggleType\", \"removeType\", \"removeClass\", \"setType\", \"bind\", \"unbind\" ],\n                getters = [\"getLabel\", \"getOverlay\", \"isHover\", \"getParameter\", \"getParameters\", \"getPaintStyle\",\n                    \"getHoverPaintStyle\", \"isVisible\", \"hasType\", \"getType\", \"isSuspendEvents\" ],\n                i, ii;\n            for (i = 0, ii = setters.length; i < ii; i++) {\n                out[setters[i]] = setter(list, setters[i], executor);\n            }\n            for (i = 0, ii = getters.length; i < ii; i++) {\n                out[getters[i]] = getter(list, getters[i]);\n            }\n            return out;\n        };\n        var _makeConnectionSelectHandler = function (list) {\n            var common = _makeCommonSelectHandler(list, _makeConnectionSelectHandler);\n            return jsPlumb.extend(common, {\n                // setters\n                setDetachable: setter(list, \"setDetachable\", _makeConnectionSelectHandler),\n                setReattach: setter(list, \"setReattach\", _makeConnectionSelectHandler),\n                setConnector: setter(list, \"setConnector\", _makeConnectionSelectHandler),\n                delete: function () {\n                    for (var i = 0, ii = list.length; i < ii; i++) {\n                        _currentInstance.deleteConnection(list[i]);\n                    }\n                },\n                // getters\n                isDetachable: getter(list, \"isDetachable\"),\n                isReattach: getter(list, \"isReattach\")\n            });\n        };\n        var _makeEndpointSelectHandler = function (list) {\n            var common = _makeCommonSelectHandler(list, _makeEndpointSelectHandler);\n            return jsPlumb.extend(common, {\n                setEnabled: setter(list, \"setEnabled\", _makeEndpointSelectHandler),\n                setAnchor: setter(list, \"setAnchor\", _makeEndpointSelectHandler),\n                isEnabled: getter(list, \"isEnabled\"),\n                deleteEveryConnection: function () {\n                    for (var i = 0, ii = list.length; i < ii; i++) {\n                        list[i].deleteEveryConnection();\n                    }\n                },\n                \"delete\": function () {\n                    for (var i = 0, ii = list.length; i < ii; i++) {\n                        _currentInstance.deleteEndpoint(list[i]);\n                    }\n                }\n            });\n        };\n        this.select = function (params) {\n            params = params || {};\n            params.scope = params.scope || \"*\";\n            return _makeConnectionSelectHandler(params.connections || _currentInstance.getConnections(params, true));\n        };\n        this.selectEndpoints = function (params) {\n            params = params || {};\n            params.scope = params.scope || \"*\";\n            var noElementFilters = !params.element && !params.source && !params.target,\n                elements = noElementFilters ? \"*\" : prepareList(params.element),\n                sources = noElementFilters ? \"*\" : prepareList(params.source),\n                targets = noElementFilters ? \"*\" : prepareList(params.target),\n                scopes = prepareList(params.scope, true);\n            var ep = [];\n            for (var el in endpointsByElement) {\n                var either = filterList(elements, el, true),\n                    source = filterList(sources, el, true),\n                    sourceMatchExact = sources !== \"*\",\n                    target = filterList(targets, el, true),\n                    targetMatchExact = targets !== \"*\";\n                // if they requested 'either' then just match scope. otherwise if they requested 'source' (not as a wildcard) then we have to match only endpoints that have isSource set to to true, and the same thing with isTarget.\n                if (either || source || target) {\n                    inner:\n                        for (var i = 0, ii = endpointsByElement[el].length; i < ii; i++) {\n                            var _ep = endpointsByElement[el][i];\n                            if (filterList(scopes, _ep.scope, true)) {\n                                var noMatchSource = (sourceMatchExact && sources.length > 0 && !_ep.isSource),\n                                    noMatchTarget = (targetMatchExact && targets.length > 0 && !_ep.isTarget);\n                                if (noMatchSource || noMatchTarget) {\n                                    continue inner;\n                                }\n                                ep.push(_ep);\n                            }\n                        }\n                }\n            }\n            return _makeEndpointSelectHandler(ep);\n        };\n        // get all connections managed by the instance of jsplumb.\n        this.getAllConnections = function () {\n            return connections;\n        };\n        this.getDefaultScope = function () {\n            return DEFAULT_SCOPE;\n        };\n        // get an endpoint by uuid.\n        this.getEndpoint = _getEndpoint;\n        /**\n         * Gets the list of Endpoints for a given element.\n         * @method getEndpoints\n         * @param {String|Element|Selector} el The element to get endpoints for.\n         * @return {Endpoint[]} An array of Endpoints for the specified element.\n         */\n        this.getEndpoints = function (el) {\n            return endpointsByElement[_info(el).id] || [];\n        };\n        // gets the default endpoint type. used when subclassing. see wiki.\n        this.getDefaultEndpointType = function () {\n            return jsPlumb.Endpoint;\n        };\n        // gets the default connection type. used when subclassing.  see wiki.\n        this.getDefaultConnectionType = function () {\n            return jsPlumb.Connection;\n        };\n        /*\n         * Gets an element's id, creating one if necessary. really only exposed\n         * for the lib-specific functionality to access; would be better to pass\n         * the current instance into the lib-specific code (even though this is\n         * a static call. i just don't want to expose it to the public API).\n         */\n        this.getId = _getId;\n        this.draw = _draw;\n        this.info = _info;\n        this.appendElement = _appendElement;\n        var _hoverSuspended = false;\n        this.isHoverSuspended = function () {\n            return _hoverSuspended;\n        };\n        this.setHoverSuspended = function (s) {\n            _hoverSuspended = s;\n        };\n        // set an element's connections to be hidden\n        this.hide = function (el, changeEndpoints) {\n            _setVisible(el, \"none\", changeEndpoints);\n            return _currentInstance;\n        };\n        // exposed for other objects to use to get a unique id.\n        this.idstamp = _idstamp;\n        // ensure that, if the current container exists, it is a DOM element and not a selector.\n        // if it does not exist and `candidate` is supplied, the offset parent of that element will be set as the Container.\n        // this is used to do a better default behaviour for the case that the user has not set a container:\n        // addEndpoint, makeSource, makeTarget and connect all call this method with the offsetParent of the\n        // element in question (for connect it is the source element). So if no container is set, it is inferred\n        // to be the offsetParent of the first element the user tries to connect.\n        var _ensureContainer = function (candidate) {\n            if (!_container && candidate) {\n                var can = _currentInstance.getElement(candidate);\n                if (can.offsetParent) {\n                    _currentInstance.setContainer(can.offsetParent);\n                }\n            }\n        };\n        var _getContainerFromDefaults = function () {\n            if (_currentInstance.Defaults.Container) {\n                _currentInstance.setContainer(_currentInstance.Defaults.Container);\n            }\n        };\n        // check if a given element is managed or not. if not, add to our map. if drawing is not suspended then\n        // we'll also stash its dimensions; otherwise we'll do this in a lazy way through updateOffset.\n        var _manage = _currentInstance.manage = function (id, element, _transient, _recalc) {\n            if (!managedElements[id]) {\n                managedElements[id] = {\n                    el: element,\n                    endpoints: [],\n                    connections: [],\n                    rotation: 0\n                };\n                managedElements[id].info = _updateOffset({ elId: id, timestamp: _suspendedAt });\n                _currentInstance.addClass(element, \"jtk-managed\");\n                if (!_transient) {\n                    _currentInstance.fire(\"manageElement\", { id:id, info:managedElements[id].info, el:element });\n                }\n            } else {\n                if (_recalc) {\n                    managedElements[id].info = _updateOffset({ elId: id, timestamp: _suspendedAt, recalc:true });\n                }\n            }\n            return managedElements[id];\n        };\n        this.unmanage = function(id) {\n            if (managedElements[id]) {\n                var el = managedElements[id].el;\n               _currentInstance.removeClass(el, \"jtk-managed\");\n                delete managedElements[id];\n                _currentInstance.fire(\"unmanageElement\", {id:id, el:el});\n            }\n        };\n        this.rotate = function(elId, amountInDegrees, doNotRedraw) {\n            if (managedElements[elId]) {\n                managedElements[elId].rotation = amountInDegrees;\n                managedElements[elId].el.style.transform=\"rotate(\" + amountInDegrees + \"deg)\";\n                managedElements[elId].el.style.transformOrigin=\"center center\";\n                if (doNotRedraw !== true) {\n                    return this.revalidate(elId);\n                }\n            }\n            return {\n                c:[], e:[]\n            };\n        };\n        this.getRotation = function(elementId) {\n            return managedElements[elementId] ? managedElements[elementId].rotation || 0 : 0;\n        };\n        /**\n         * updates the offset and size for a given element, and stores the\n         * values. if 'offset' is not null we use that (it would have been\n         * passed in from a drag call) because it's faster; but if it is null,\n         * or if 'recalc' is true in order to force a recalculation, we get the current values.\n         * @method updateOffset\n         */\n        var _updateOffset = function (params) {\n            var timestamp = params.timestamp, recalc = params.recalc, offset = params.offset, elId = params.elId, s;\n            if (_suspendDrawing && !timestamp) {\n                timestamp = _suspendedAt;\n            }\n            if (!recalc) {\n                if (timestamp && timestamp === offsetTimestamps[elId]) {\n                    return {o: params.offset || offsets[elId], s: sizes[elId]};\n                }\n            }\n            if (recalc || (!offset && offsets[elId] == null)) { // if forced repaint or no offset available, we recalculate.\n                // get the current size and offset, and store them\n                s = managedElements[elId] ? managedElements[elId].el : null;\n                if (s != null) {\n                    sizes[elId] = _currentInstance.getSize(s);\n                    offsets[elId] = _currentInstance.getOffset(s);\n                    offsetTimestamps[elId] = timestamp;\n                }\n            } else {\n                offsets[elId] = offset || offsets[elId];\n                if (sizes[elId] == null) {\n                    s = managedElements[elId].el;\n                    if (s != null) {\n                        sizes[elId] = _currentInstance.getSize(s);\n                    }\n                }\n                offsetTimestamps[elId] = timestamp;\n            }\n            if (offsets[elId] && !offsets[elId].right) {\n                offsets[elId].right = offsets[elId].left + sizes[elId][0];\n                offsets[elId].bottom = offsets[elId].top + sizes[elId][1];\n                offsets[elId].width = sizes[elId][0];\n                offsets[elId].height = sizes[elId][1];\n                offsets[elId].centerx = offsets[elId].left + (offsets[elId].width / 2);\n                offsets[elId].centery = offsets[elId].top + (offsets[elId].height / 2);\n            }\n            return {o: offsets[elId], s: sizes[elId]};\n        };\n        this.updateOffset = _updateOffset;\n        /**\n         * callback from the current library to tell us to prepare ourselves (attach\n         * mouse listeners etc; can't do that until the library has provided a bind method)\n         */\n        this.init = function () {\n            if (!initialized) {\n                _getContainerFromDefaults();\n                _currentInstance.router = new root.jsPlumb.DefaultRouter(_currentInstance);\n                _currentInstance.anchorManager = _currentInstance.router.anchorManager;\n                initialized = true;\n                _currentInstance.fire(\"ready\", _currentInstance);\n            }\n        }.bind(this);\n        this.log = log;\n        this.jsPlumbUIComponent = jsPlumbUIComponent;\n        /*\n         * Creates an anchor with the given params.\n         *\n         *\n         * Returns: The newly created Anchor.\n         * Throws: an error if a named anchor was not found.\n         */\n        this.makeAnchor = function () {\n            var pp, _a = function (t, p) {\n                if (root.jsPlumb.Anchors[t]) {\n                    return new root.jsPlumb.Anchors[t](p);\n                }\n                if (!_currentInstance.Defaults.DoNotThrowErrors) {\n                    throw { msg: \"jsPlumb: unknown anchor type '\" + t + \"'\" };\n                }\n            };\n            if (arguments.length === 0) {\n                return null;\n            }\n            var specimen = arguments[0], elementId = arguments[1], jsPlumbInstance = arguments[2], newAnchor = null;\n            // if it appears to be an anchor already...\n            if (specimen.compute && specimen.getOrientation) {\n                return specimen;\n            }  //TODO hazy here about whether it should be added or is already added somehow.\n            // is it the name of an anchor type?\n            else if (typeof specimen === \"string\") {\n                newAnchor = _a(arguments[0], {elementId: elementId, jsPlumbInstance: _currentInstance});\n            }\n            // is it an array? it will be one of:\n            // an array of [spec, params] - this defines a single anchor, which may be dynamic, but has parameters.\n            // an array of arrays - this defines some dynamic anchors\n            // an array of numbers - this defines a single anchor.\n            else if (_ju.isArray(specimen)) {\n                if (_ju.isArray(specimen[0]) || _ju.isString(specimen[0])) {\n                    // if [spec, params] format\n                    if (specimen.length === 2 && _ju.isObject(specimen[1])) {\n                        // if first arg is a string, its a named anchor with params\n                        if (_ju.isString(specimen[0])) {\n                            pp = root.jsPlumb.extend({elementId: elementId, jsPlumbInstance: _currentInstance}, specimen[1]);\n                            newAnchor = _a(specimen[0], pp);\n                        }\n                        // otherwise first arg is array, second is params. we treat as a dynamic anchor, which is fine\n                        // even if the first arg has only one entry. you could argue all anchors should be implicitly dynamic in fact.\n                        else {\n                            pp = root.jsPlumb.extend({elementId: elementId, jsPlumbInstance: _currentInstance, anchors: specimen[0]}, specimen[1]);\n                            newAnchor = new root.jsPlumb.DynamicAnchor(pp);\n                        }\n                    }\n                    else {\n                        newAnchor = new jsPlumb.DynamicAnchor({anchors: specimen, selector: null, elementId: elementId, jsPlumbInstance: _currentInstance});\n                    }\n                }\n                else {\n                    var anchorParams = {\n                        x: specimen[0], y: specimen[1],\n                        orientation: (specimen.length >= 4) ? [ specimen[2], specimen[3] ] : [0, 0],\n                        offsets: (specimen.length >= 6) ? [ specimen[4], specimen[5] ] : [ 0, 0 ],\n                        elementId: elementId,\n                        jsPlumbInstance: _currentInstance,\n                        cssClass: specimen.length === 7 ? specimen[6] : null\n                    };\n                    newAnchor = new root.jsPlumb.Anchor(anchorParams);\n                    newAnchor.clone = function () {\n                        return new root.jsPlumb.Anchor(anchorParams);\n                    };\n                }\n            }\n            if (!newAnchor.id) {\n                newAnchor.id = \"anchor_\" + _idstamp();\n            }\n            return newAnchor;\n        };\n        /**\n         * makes a list of anchors from the given list of types or coords, eg\n         * [\"TopCenter\", \"RightMiddle\", \"BottomCenter\", [0, 1, -1, -1] ]\n         */\n        this.makeAnchors = function (types, elementId, jsPlumbInstance) {\n            var r = [];\n            for (var i = 0, ii = types.length; i < ii; i++) {\n                if (typeof types[i] === \"string\") {\n                    r.push(root.jsPlumb.Anchors[types[i]]({elementId: elementId, jsPlumbInstance: jsPlumbInstance}));\n                }\n                else if (_ju.isArray(types[i])) {\n                    r.push(_currentInstance.makeAnchor(types[i], elementId, jsPlumbInstance));\n                }\n            }\n            return r;\n        };\n        /**\n         * Makes a dynamic anchor from the given list of anchors (which may be in shorthand notation as strings or dimension arrays, or Anchor\n         * objects themselves) and the given, optional, anchorSelector function (jsPlumb uses a default if this is not provided; most people will\n         * not need to provide this - i think).\n         */\n        this.makeDynamicAnchor = function (anchors, anchorSelector) {\n            return new root.jsPlumb.DynamicAnchor({anchors: anchors, selector: anchorSelector, elementId: null, jsPlumbInstance: _currentInstance});\n        };\n// --------------------- makeSource/makeTarget ----------------------------------------------\n        this.targetEndpointDefinitions = {};\n        this.sourceEndpointDefinitions = {};\n        var selectorFilter = function (evt, _el, selector, _instance, negate) {\n            var t = evt.target || evt.srcElement, ok = false,\n                sel = _instance.getSelector(_el, selector);\n            for (var j = 0; j < sel.length; j++) {\n                if (sel[j] === t) {\n                    ok = true;\n                    break;\n                }\n            }\n            return negate ? !ok : ok;\n        };\n        var _makeElementDropHandler = function (elInfo, p, dropOptions, isSource, isTarget) {\n            var proxyComponent = new jsPlumbUIComponent(p);\n            var _drop = p._jsPlumb.EndpointDropHandler({\n                jsPlumb: _currentInstance,\n                enabled: function () {\n                    return elInfo.def.enabled;\n                },\n                isFull: function () {\n                    var targetCount = _currentInstance.select({target: elInfo.id}).length;\n                    return elInfo.def.maxConnections > 0 && targetCount >= elInfo.def.maxConnections;\n                },\n                element: elInfo.el,\n                elementId: elInfo.id,\n                isSource: isSource,\n                isTarget: isTarget,\n                addClass: function (clazz) {\n                    _currentInstance.addClass(elInfo.el, clazz);\n                },\n                removeClass: function (clazz) {\n                    _currentInstance.removeClass(elInfo.el, clazz);\n                },\n                onDrop: function (jpc) {\n                    var source = jpc.endpoints[0];\n                    source.anchor.locked = false;\n                },\n                isDropAllowed: function () {\n                    return proxyComponent.isDropAllowed.apply(proxyComponent, arguments);\n                },\n                isRedrop:function(jpc) {\n                    return (jpc.suspendedElement != null && jpc.suspendedEndpoint != null && jpc.suspendedEndpoint.element === elInfo.el);\n                },\n                getEndpoint: function (jpc) {\n                    // make a new Endpoint for the target, or get it from the cache if uniqueEndpoint\n                    // is set. if its a redrop the new endpoint will be immediately cleaned up.\n                    var newEndpoint = elInfo.def.endpoint;\n                    // if no cached endpoint, or there was one but it has been cleaned up\n                    // (ie. detached), create a new one\n                    if (newEndpoint == null || newEndpoint._jsPlumb == null) {\n                        var eps = _currentInstance.deriveEndpointAndAnchorSpec(jpc.getType().join(\" \"), true);\n                        var pp = eps.endpoints ? root.jsPlumb.extend(p, {\n                            endpoint:elInfo.def.def.endpoint || eps.endpoints[1]\n                        }) :p;\n                        if (eps.anchors) {\n                            pp = root.jsPlumb.extend(pp, {\n                                anchor:elInfo.def.def.anchor || eps.anchors[1]\n                            });\n                        }\n                        newEndpoint = _currentInstance.addEndpoint(elInfo.el, pp);\n                        newEndpoint._mtNew = true;\n                    }\n                    if (p.uniqueEndpoint) {\n                        elInfo.def.endpoint = newEndpoint;\n                    }\n                    newEndpoint.setDeleteOnEmpty(true);\n                    // if connection is detachable, init the new endpoint to be draggable, to support that happening.\n                    if (jpc.isDetachable()) {\n                        newEndpoint.initDraggable();\n                    }\n                    // if the anchor has a 'positionFinder' set, then delegate to that function to find\n                    // out where to locate the anchor.\n                    if (newEndpoint.anchor.positionFinder != null) {\n                        var dropPosition = _currentInstance.getUIPosition(arguments, _currentInstance.getZoom()),\n                            elPosition = _currentInstance.getOffset(elInfo.el),\n                            elSize = _currentInstance.getSize(elInfo.el),\n                            ap = dropPosition == null ? [0,0] : newEndpoint.anchor.positionFinder(dropPosition, elPosition, elSize, newEndpoint.anchor.constructorParams);\n                        newEndpoint.anchor.x = ap[0];\n                        newEndpoint.anchor.y = ap[1];\n                        // now figure an orientation for it..kind of hard to know what to do actually. probably the best thing i can do is to\n                        // support specifying an orientation in the anchor's spec. if one is not supplied then i will make the orientation\n                        // be what will cause the most natural link to the source: it will be pointing at the source, but it needs to be\n                        // specified in one axis only, and so how to make that choice? i think i will use whichever axis is the one in which\n                        // the target is furthest away from the source.\n                    }\n                    return newEndpoint;\n                },\n                maybeCleanup: function (ep) {\n                    if (ep._mtNew && ep.connections.length === 0) {\n                        _currentInstance.deleteObject({endpoint: ep});\n                    }\n                    else {\n                        delete ep._mtNew;\n                    }\n                }\n            });\n            // wrap drop events as needed and initialise droppable\n            var dropEvent = root.jsPlumb.dragEvents.drop;\n            dropOptions.scope = dropOptions.scope || (p.scope || _currentInstance.Defaults.Scope);\n            dropOptions[dropEvent] = _ju.wrap(dropOptions[dropEvent], _drop, true);\n            dropOptions.rank = p.rank || 0;\n            // if target, return true from the over event. this will cause katavorio to stop setting drops to hover\n            // if multipleDrop is set to false.\n            if (isTarget) {\n                dropOptions[root.jsPlumb.dragEvents.over] = function () { return true; };\n            }\n            // vanilla jsplumb only\n            if (p.allowLoopback === false) {\n                dropOptions.canDrop = function (_drag) {\n                    var de = _drag.getDragElement()._jsPlumbRelatedElement;\n                    return de !== elInfo.el;\n                };\n            }\n            _currentInstance.initDroppable(elInfo.el, dropOptions, \"internal\");\n            return _drop;\n        };\n        // see API docs\n        this.makeTarget = function (el, params, referenceParams) {\n            // put jsplumb ref into params without altering the params passed in\n            var p = root.jsPlumb.extend({_jsPlumb: this}, referenceParams);\n            root.jsPlumb.extend(p, params);\n            var maxConnections = p.maxConnections || -1,\n                _doOne = function (el) {\n                    // get the element's id and store the endpoint definition for it.  jsPlumb.connect calls will look for one of these,\n                    // and use the endpoint definition if found.\n                    // decode the info for this element (id and element)\n                    var elInfo = _info(el),\n                        elid = elInfo.id,\n                        dropOptions = root.jsPlumb.extend({}, p.dropOptions || {}),\n                        type = p.connectionType || \"default\";\n                    this.targetEndpointDefinitions[elid] = this.targetEndpointDefinitions[elid] || {};\n                    _ensureContainer(elid);\n                    // if this is a group and the user has not mandated a rank, set to -1 so that Nodes takes\n                    // precedence.\n                    if (elInfo.el._isJsPlumbGroup && dropOptions.rank == null) {\n                        dropOptions.rank = -1;\n                    }\n                    // store the definition\n                    var _def = {\n                        def: root.jsPlumb.extend({}, p),\n                        uniqueEndpoint: p.uniqueEndpoint,\n                        maxConnections: maxConnections,\n                        enabled: true\n                    };\n                    if (p.createEndpoint) {\n                        _def.uniqueEndpoint = true;\n                        _def.endpoint = _currentInstance.addEndpoint(el, _def.def);\n                        _def.endpoint.setDeleteOnEmpty(false);\n                    }\n                    elInfo.def = _def;\n                    this.targetEndpointDefinitions[elid][type] = _def;\n                    _makeElementDropHandler(elInfo, p, dropOptions, p.isSource === true, true);\n                    // stash the definition on the drop\n                    elInfo.el._katavorioDrop[elInfo.el._katavorioDrop.length - 1].targetDef = _def;\n                }.bind(this);\n            // make an array if only given one element\n            var inputs = el.length && el.constructor !== String ? el : [ el ];\n            // register each one in the list.\n            for (var i = 0, ii = inputs.length; i < ii; i++) {\n                _doOne(inputs[i]);\n            }\n            return this;\n        };\n        // see api docs\n        this.unmakeTarget = function (el, doNotClearArrays) {\n            var info = _info(el);\n            _currentInstance.destroyDroppable(info.el, \"internal\");\n            if (!doNotClearArrays) {\n                delete this.targetEndpointDefinitions[info.id];\n            }\n            return this;\n        };\n        // see api docs\n        this.makeSource = function (el, params, referenceParams) {\n            var p = root.jsPlumb.extend({_jsPlumb: this}, referenceParams);\n            root.jsPlumb.extend(p, params);\n            var type = p.connectionType || \"default\";\n            var aae = _currentInstance.deriveEndpointAndAnchorSpec(type);\n            p.endpoint = p.endpoint || aae.endpoints[0];\n            p.anchor = p.anchor || aae.anchors[0];\n            var maxConnections = p.maxConnections || -1,\n                onMaxConnections = p.onMaxConnections,\n                _doOne = function (elInfo) {\n                    // get the element's id and store the endpoint definition for it.  jsPlumb.connect calls will look for one of these,\n                    // and use the endpoint definition if found.\n                    var elid = elInfo.id,\n                        _del = this.getElement(elInfo.el);\n                    this.sourceEndpointDefinitions[elid] = this.sourceEndpointDefinitions[elid] || {};\n                    _ensureContainer(elid);\n                    var _def = {\n                        def:root.jsPlumb.extend({}, p),\n                        uniqueEndpoint: p.uniqueEndpoint,\n                        maxConnections: maxConnections,\n                        enabled: true\n                    };\n                    if (p.createEndpoint) {\n                        _def.uniqueEndpoint = true;\n                        _def.endpoint = _currentInstance.addEndpoint(el, _def.def);\n                        _def.endpoint.setDeleteOnEmpty(false);\n                    }\n                    this.sourceEndpointDefinitions[elid][type] = _def;\n                    elInfo.def = _def;\n                    var stopEvent = root.jsPlumb.dragEvents.stop,\n                        dragEvent = root.jsPlumb.dragEvents.drag,\n                        dragOptions = root.jsPlumb.extend({ }, p.dragOptions || {}),\n                        existingDrag = dragOptions.drag,\n                        existingStop = dragOptions.stop,\n                        ep = null,\n                        endpointAddedButNoDragYet = false;\n                    // set scope if its not set in dragOptions but was passed in in params\n                    dragOptions.scope = dragOptions.scope || p.scope;\n                    dragOptions[dragEvent] = _ju.wrap(dragOptions[dragEvent], function () {\n                        if (existingDrag) {\n                            existingDrag.apply(this, arguments);\n                        }\n                        endpointAddedButNoDragYet = false;\n                    });\n                    dragOptions[stopEvent] = _ju.wrap(dragOptions[stopEvent], function () {\n                        if (existingStop) {\n                            existingStop.apply(this, arguments);\n                        }\n                        this.currentlyDragging = false;\n                        if (ep._jsPlumb != null) { // if not cleaned up...\n                            // reset the anchor to the anchor that was initially provided. the one we were using to drag\n                            // the connection was just a placeholder that was located at the place the user pressed the\n                            // mouse button to initiate the drag.\n                            var anchorDef = p.anchor || this.Defaults.Anchor,\n                                oldAnchor = ep.anchor,\n                                oldConnection = ep.connections[0];\n                            var    newAnchor = this.makeAnchor(anchorDef, elid, this),\n                                _el = ep.element;\n                            // if the anchor has a 'positionFinder' set, then delegate to that function to find\n                            // out where to locate the anchor. issue 117.\n                            if (newAnchor.positionFinder != null) {\n                                var elPosition = _currentInstance.getOffset(_el),\n                                    elSize = this.getSize(_el),\n                                    dropPosition = { left: elPosition.left + (oldAnchor.x * elSize[0]), top: elPosition.top + (oldAnchor.y * elSize[1]) },\n                                    ap = newAnchor.positionFinder(dropPosition, elPosition, elSize, newAnchor.constructorParams);\n                                newAnchor.x = ap[0];\n                                newAnchor.y = ap[1];\n                            }\n                            ep.setAnchor(newAnchor, true);\n                            ep.repaint();\n                            this.repaint(ep.elementId);\n                            if (oldConnection != null) {\n                                this.repaint(oldConnection.targetId);\n                            }\n                        }\n                    }.bind(this));\n                    // when the user presses the mouse, add an Endpoint, if we are enabled.\n                    var mouseDownListener = function (e) {\n                        // on right mouse button, abort.\n                        if (e.which === 3 || e.button === 2) {\n                            return;\n                        }\n                        elid = this.getId(this.getElement(elInfo.el)); // elid might have changed since this method was called to configure the element.\n                        // TODO store def on element.\n                        var def = this.sourceEndpointDefinitions[elid][type];\n                        // if disabled, return.\n                        if (!def.enabled) {\n                            return;\n                        }\n                        // if a filter was given, run it, and return if it says no.\n                        if (p.filter) {\n                            var r = _ju.isString(p.filter) ? selectorFilter(e, elInfo.el, p.filter, this, p.filterExclude) : p.filter(e, elInfo.el);\n                            if (r === false) {\n                                return;\n                            }\n                        }\n                        // if maxConnections reached\n                        var sourceCount = this.select({source: elid}).length;\n                        if (def.maxConnections >= 0 && (sourceCount >= def.maxConnections)) {\n                            if (onMaxConnections) {\n                                onMaxConnections({\n                                    element: elInfo.el,\n                                    maxConnections: maxConnections\n                                }, e);\n                            }\n                            return false;\n                        }\n                        // find the position on the element at which the mouse was pressed; this is where the endpoint\n                        // will be located.\n                        var elxy = root.jsPlumb.getPositionOnElement(e, _del, _zoom);\n                        // we need to override the anchor in here, and force 'isSource', but we don't want to mess with\n                        // the params passed in, because after a connection is established we're going to reset the endpoint\n                        // to have the anchor we were given.\n                        var tempEndpointParams = {};\n                        root.jsPlumb.extend(tempEndpointParams, def.def);\n                        tempEndpointParams.isTemporarySource = true;\n                        tempEndpointParams.anchor = [ elxy[0], elxy[1] , 0, 0];\n                        tempEndpointParams.dragOptions = dragOptions;\n                        if (def.def.scope) {\n                            tempEndpointParams.scope = def.def.scope;\n                        }\n                        ep = this.addEndpoint(elid, tempEndpointParams);\n                        endpointAddedButNoDragYet = true;\n                        ep.setDeleteOnEmpty(true);\n                        // if unique endpoint and it's already been created, push it onto the endpoint we create. at the end\n                        // of a successful connection we'll switch to that endpoint.\n                        // TODO this is the same code as the programmatic endpoints create on line 1050 ish\n                        if (def.uniqueEndpoint) {\n                            if (!def.endpoint) {\n                                def.endpoint = ep;\n                                ep.setDeleteOnEmpty(false);\n                            }\n                            else {\n                                ep.finalEndpoint = def.endpoint;\n                            }\n                        }\n                        var _delTempEndpoint = function () {\n                            // this mouseup event is fired only if no dragging occurred, by jquery and yui, but for mootools\n                            // it is fired even if dragging has occurred, in which case we would blow away a perfectly\n                            // legitimate endpoint, were it not for this check.  the flag is set after adding an\n                            // endpoint and cleared in a drag listener we set in the dragOptions above.\n                            _currentInstance.off(ep.canvas, \"mouseup\", _delTempEndpoint);\n                            _currentInstance.off(elInfo.el, \"mouseup\", _delTempEndpoint);\n                            if (endpointAddedButNoDragYet) {\n                                endpointAddedButNoDragYet = false;\n                                _currentInstance.deleteEndpoint(ep);\n                            }\n                        };\n                        _currentInstance.on(ep.canvas, \"mouseup\", _delTempEndpoint);\n                        _currentInstance.on(elInfo.el, \"mouseup\", _delTempEndpoint);\n                        // optionally check for attributes to extract from the source element\n                        var payload = {};\n                        if (def.def.extract) {\n                            for (var att in def.def.extract) {\n                                var v = (e.srcElement || e.target).getAttribute(att);\n                                if (v) {\n                                    payload[def.def.extract[att]] = v;\n                                }\n                            }\n                        }\n                        // and then trigger its mousedown event, which will kick off a drag, which will start dragging\n                        // a new connection from this endpoint.\n                        _currentInstance.trigger(ep.canvas, \"mousedown\", e, payload);\n                        _ju.consume(e);\n                    }.bind(this);\n                    this.on(elInfo.el, \"mousedown\", mouseDownListener);\n                    _def.trigger = mouseDownListener;\n                    // if a filter was provided, set it as a dragFilter on the element,\n                    // to prevent the element drag function from kicking in when we want to\n                    // drag a new connection\n                    if (p.filter && (_ju.isString(p.filter) || _ju.isFunction(p.filter))) {\n                        _currentInstance.setDragFilter(elInfo.el, p.filter);\n                    }\n                    var dropOptions = root.jsPlumb.extend({}, p.dropOptions || {});\n                    _makeElementDropHandler(elInfo, p, dropOptions, true, p.isTarget === true);\n                }.bind(this);\n            var inputs = el.length && el.constructor !== String ? el : [ el ];\n            for (var i = 0, ii = inputs.length; i < ii; i++) {\n                _doOne(_info(inputs[i]));\n            }\n            return this;\n        };\n        // see api docs\n        this.unmakeSource = function (el, connectionType, doNotClearArrays) {\n            var info = _info(el);\n            _currentInstance.destroyDroppable(info.el, \"internal\");\n            var eldefs = this.sourceEndpointDefinitions[info.id];\n            if (eldefs) {\n                for (var def in eldefs) {\n                    if (connectionType == null || connectionType === def) {\n                        var mouseDownListener = eldefs[def].trigger;\n                        if (mouseDownListener) {\n                            _currentInstance.off(info.el, \"mousedown\", mouseDownListener);\n                        }\n                        if (!doNotClearArrays) {\n                            delete this.sourceEndpointDefinitions[info.id][def];\n                        }\n                    }\n                }\n            }\n            return this;\n        };\n        // see api docs\n        this.unmakeEverySource = function () {\n            for (var i in this.sourceEndpointDefinitions) {\n                _currentInstance.unmakeSource(i, null, true);\n            }\n            this.sourceEndpointDefinitions = {};\n            return this;\n        };\n        var _getScope = function (el, types, connectionType) {\n            types = _ju.isArray(types) ? types : [ types ];\n            var id = _getId(el);\n            connectionType = connectionType || \"default\";\n            for (var i = 0; i < types.length; i++) {\n                var eldefs = this[types[i]][id];\n                if (eldefs && eldefs[connectionType]) {\n                    return eldefs[connectionType].def.scope || this.Defaults.Scope;\n                }\n            }\n        }.bind(this);\n        var _setScope = function (el, scope, types, connectionType) {\n            types = _ju.isArray(types) ? types : [ types ];\n            var id = _getId(el);\n            connectionType = connectionType || \"default\";\n            for (var i = 0; i < types.length; i++) {\n                var eldefs = this[types[i]][id];\n                if (eldefs && eldefs[connectionType]) {\n                    eldefs[connectionType].def.scope = scope;\n                }\n            }\n        }.bind(this);\n        this.getScope = function (el, scope) {\n            return _getScope(el, [ \"sourceEndpointDefinitions\", \"targetEndpointDefinitions\" ]);\n        };\n        this.getSourceScope = function (el) {\n            return _getScope(el, \"sourceEndpointDefinitions\");\n        };\n        this.getTargetScope = function (el) {\n            return _getScope(el, \"targetEndpointDefinitions\");\n        };\n        this.setScope = function (el, scope, connectionType) {\n            this.setSourceScope(el, scope, connectionType);\n            this.setTargetScope(el, scope, connectionType);\n        };\n        this.setSourceScope = function (el, scope, connectionType) {\n            _setScope(el, scope, \"sourceEndpointDefinitions\", connectionType);\n            // we get the source scope during the mousedown event, but we also want to set this.\n            this.setDragScope(el, scope);\n        };\n        this.setTargetScope = function (el, scope, connectionType) {\n            _setScope(el, scope, \"targetEndpointDefinitions\", connectionType);\n            this.setDropScope(el, scope);\n        };\n        // see api docs\n        this.unmakeEveryTarget = function () {\n            for (var i in this.targetEndpointDefinitions) {\n                _currentInstance.unmakeTarget(i, true);\n            }\n            this.targetEndpointDefinitions = {};\n            return this;\n        };\n        // does the work of setting a source enabled or disabled.\n        var _setEnabled = function (type, el, state, toggle, connectionType) {\n            var a = type === \"source\" ? this.sourceEndpointDefinitions : this.targetEndpointDefinitions,\n                originalState, info, newState;\n            connectionType = connectionType || \"default\";\n            // a selector or an array\n            if (el.length && !_ju.isString(el)) {\n                originalState = [];\n                for (var i = 0, ii = el.length; i < ii; i++) {\n                    info = _info(el[i]);\n                    if (a[info.id] && a[info.id][connectionType]) {\n                        originalState[i] = a[info.id][connectionType].enabled;\n                        newState = toggle ? !originalState[i] : state;\n                        a[info.id][connectionType].enabled = newState;\n                        _currentInstance[newState ? \"removeClass\" : \"addClass\"](info.el, \"jtk-\" + type + \"-disabled\");\n                    }\n                }\n            }\n            // otherwise a DOM element or a String ID.\n            else {\n                info = _info(el);\n                var id = info.id;\n                if (a[id] && a[id][connectionType]) {\n                    originalState = a[id][connectionType].enabled;\n                    newState = toggle ? !originalState : state;\n                    a[id][connectionType].enabled = newState;\n                    _currentInstance[newState ? \"removeClass\" : \"addClass\"](info.el, \"jtk-\" + type + \"-disabled\");\n                }\n            }\n            return originalState;\n        }.bind(this);\n        var _first = function (el, fn) {\n            if (el != null) {\n                if (_ju.isString(el) || !el.length) {\n                    return fn.apply(this, [el]);\n                } else if (el.length) {\n                    return fn.apply(this, [el[0]]);\n                }\n            }\n        }.bind(this);\n        this.toggleSourceEnabled = function (el, connectionType) {\n            _setEnabled(\"source\", el, null, true, connectionType);\n            return this.isSourceEnabled(el, connectionType);\n        };\n        this.setSourceEnabled = function (el, state, connectionType) {\n            return _setEnabled(\"source\", el, state, null, connectionType);\n        };\n        this.isSource = function (el, connectionType) {\n            connectionType = connectionType || \"default\";\n            return _first(el, function (_el) {\n                var eldefs = this.sourceEndpointDefinitions[_info(_el).id];\n                return eldefs != null && eldefs[connectionType] != null;\n            }.bind(this));\n        };\n        this.isSourceEnabled = function (el, connectionType) {\n            connectionType = connectionType || \"default\";\n            return _first(el, function (_el) {\n                var sep = this.sourceEndpointDefinitions[_info(_el).id];\n                return sep && sep[connectionType] && sep[connectionType].enabled === true;\n            }.bind(this));\n        };\n        this.toggleTargetEnabled = function (el, connectionType) {\n            _setEnabled(\"target\", el, null, true, connectionType);\n            return this.isTargetEnabled(el, connectionType);\n        };\n        this.isTarget = function (el, connectionType) {\n            connectionType = connectionType || \"default\";\n            return _first(el, function (_el) {\n                var eldefs = this.targetEndpointDefinitions[_info(_el).id];\n                return eldefs != null && eldefs[connectionType] != null;\n            }.bind(this));\n        };\n        this.isTargetEnabled = function (el, connectionType) {\n            connectionType = connectionType || \"default\";\n            return _first(el, function (_el) {\n                var tep = this.targetEndpointDefinitions[_info(_el).id];\n                return tep && tep[connectionType] && tep[connectionType].enabled === true;\n            }.bind(this));\n        };\n        this.setTargetEnabled = function (el, state, connectionType) {\n            return _setEnabled(\"target\", el, state, null, connectionType);\n        };\n// --------------------- end makeSource/makeTarget ----------------------------------------------\n        this.ready = function (fn) {\n            _currentInstance.bind(\"ready\", fn);\n        };\n        var _elEach = function(el, fn) {\n            // support both lists...\n            if (typeof el === 'object' && el.length) {\n                for (var i = 0, ii = el.length; i < ii; i++) {\n                    fn(el[i]);\n                }\n            }\n            else {// ...and single strings or elements.\n                fn(el);\n            }\n            return _currentInstance;\n        };\n        // repaint some element's endpoints and connections\n        this.repaint = function (el, ui, timestamp) {\n            return _elEach(el, function(_el) {\n                _draw(_el, ui, timestamp);\n            });\n        };\n        this.revalidate = function (el, timestamp, isIdAlready) {\n            var elId = isIdAlready ? el : _currentInstance.getId(el);\n            _currentInstance.updateOffset({ elId: elId, recalc: true, timestamp:timestamp });\n            var dm = _currentInstance.getDragManager();\n            if (dm) {\n                dm.updateOffsets(elId);\n            }\n            return _draw(el, null, timestamp);\n        };\n        // repaint every endpoint and connection.\n        this.repaintEverything = function () {\n            // TODO this timestamp causes continuous anchors to not repaint properly.\n            // fix this. do not just take out the timestamp. it runs a lot faster with\n            // the timestamp included.\n            var timestamp = jsPlumbUtil.uuid(), elId;\n            for (elId in endpointsByElement) {\n                _currentInstance.updateOffset({ elId: elId, recalc: true, timestamp: timestamp });\n            }\n            for (elId in endpointsByElement) {\n                _draw(elId, null, timestamp);\n            }\n            return this;\n        };\n        this.removeAllEndpoints = function (el, recurse, affectedElements) {\n            affectedElements = affectedElements || [];\n            var _one = function (_el) {\n                var info = _info(_el),\n                    ebe = endpointsByElement[info.id],\n                    i, ii;\n                if (ebe) {\n                    affectedElements.push(info);\n                    for (i = 0, ii = ebe.length; i < ii; i++) {\n                        _currentInstance.deleteEndpoint(ebe[i], false);\n                    }\n                }\n                delete endpointsByElement[info.id];\n                if (recurse) {\n                    if (info.el && info.el.nodeType !== 3 && info.el.nodeType !== 8) {\n                        for (i = 0, ii = info.el.childNodes.length; i < ii; i++) {\n                            _one(info.el.childNodes[i]);\n                        }\n                    }\n                }\n            };\n            _one(el);\n            return this;\n        };\n        var _doRemove = function(info, affectedElements) {\n            _currentInstance.removeAllEndpoints(info.id, true, affectedElements);\n            var dm = _currentInstance.getDragManager();\n            var _one = function(_info) {\n                if (dm) {\n                    dm.elementRemoved(_info.id);\n                }\n                _currentInstance.router.elementRemoved(_info.id);\n                if (_currentInstance.isSource(_info.el)) {\n                    _currentInstance.unmakeSource(_info.el);\n                }\n                if (_currentInstance.isTarget(_info.el)) {\n                    _currentInstance.unmakeTarget(_info.el);\n                }\n                _currentInstance.destroyDraggable(_info.el);\n                _currentInstance.destroyDroppable(_info.el);\n                delete _currentInstance.floatingConnections[_info.id];\n                delete managedElements[_info.id];\n                delete offsets[_info.id];\n                if (_info.el) {\n                    _currentInstance.removeElement(_info.el);\n                    _info.el._jsPlumb = null;\n                }\n            };\n            // remove all affected child elements\n            for (var ae = 1; ae < affectedElements.length; ae++) {\n                _one(affectedElements[ae]);\n            }\n            // and always remove the requested one from the dom.\n            _one(info);\n        };\n        /**\n         * Remove the given element, including cleaning up all endpoints registered for it.\n         * This is exposed in the public API but also used internally by jsPlumb when removing the\n         * element associated with a connection drag.\n         */\n        this.remove = function (el, doNotRepaint) {\n            var info = _info(el), affectedElements = [];\n            if (info.text && info.el.parentNode) {\n                info.el.parentNode.removeChild(info.el);\n            }\n            else if (info.id) {\n                _currentInstance.batch(function () {\n                    _doRemove(info, affectedElements);\n                }, doNotRepaint === true);\n            }\n            return _currentInstance;\n        };\n        this.empty = function (el, doNotRepaint) {\n            var affectedElements = [];\n            var _one = function(el, dontRemoveFocus) {\n                var info = _info(el);\n                if (info.text) {\n                    info.el.parentNode.removeChild(info.el);\n                }\n                else if (info.el) {\n                    while(info.el.childNodes.length > 0) {\n                        _one(info.el.childNodes[0]);\n                    }\n                    if (!dontRemoveFocus) {\n                        _doRemove(info, affectedElements);\n                    }\n                }\n            };\n            _currentInstance.batch(function() {\n                _one(el, true);\n            }, doNotRepaint === false);\n            return _currentInstance;\n        };\n        this.reset = function (doNotUnbindInstanceEventListeners) {\n            _currentInstance.silently(function() {\n                _hoverSuspended = false;\n                _currentInstance.removeAllGroups();\n                _currentInstance.removeGroupManager();\n                _currentInstance.deleteEveryEndpoint();\n                if (!doNotUnbindInstanceEventListeners) {\n                    _currentInstance.unbind();\n                }\n                this.targetEndpointDefinitions = {};\n                this.sourceEndpointDefinitions = {};\n                connections.length = 0;\n                if (this.doReset) {\n                    this.doReset();\n                }\n            }.bind(this));\n        };\n        this.destroy = function() {\n            this.reset();\n            _container = null;\n            _containerDelegations = null;\n        };\n        var _clearObject = function (obj) {\n            if (obj.canvas && obj.canvas.parentNode) {\n                obj.canvas.parentNode.removeChild(obj.canvas);\n            }\n            obj.cleanup();\n            obj.destroy();\n        };\n        this.clear = function () {\n            _currentInstance.select().each(_clearObject);\n            _currentInstance.selectEndpoints().each(_clearObject);\n            endpointsByElement = {};\n            endpointsByUUID = {};\n        };\n        this.setDefaultScope = function (scope) {\n            DEFAULT_SCOPE = scope;\n            return _currentInstance;\n        };\n        this.deriveEndpointAndAnchorSpec = function(type, dontPrependDefault) {\n            var bits = ((dontPrependDefault ? \"\" : \"default \") + type).split(/[\\s]/), eps = null, ep = null, a = null, as = null;\n            for (var i = 0; i < bits.length; i++) {\n                var _t = _currentInstance.getType(bits[i], \"connection\");\n                if (_t) {\n                    if (_t.endpoints) {\n                        eps = _t.endpoints;\n                    }\n                    if (_t.endpoint) {\n                        ep = _t.endpoint;\n                    }\n                    if (_t.anchors) {\n                        as = _t.anchors;\n                    }\n                    if (_t.anchor) {\n                        a = _t.anchor;\n                    }\n                }\n            }\n            return { endpoints: eps ? eps : [ ep, ep ], anchors: as ? as : [a, a ]};\n        };\n        // sets the id of some element, changing whatever we need to to keep track.\n        this.setId = function (el, newId, doNotSetAttribute) {\n            //\n            var id;\n            if (_ju.isString(el)) {\n                id = el;\n            }\n            else {\n                el = this.getElement(el);\n                id = this.getId(el);\n            }\n            var sConns = this.getConnections({source: id, scope: '*'}, true),\n                tConns = this.getConnections({target: id, scope: '*'}, true);\n            newId = \"\" + newId;\n            if (!doNotSetAttribute) {\n                el = this.getElement(id);\n                this.setAttribute(el, \"id\", newId);\n            }\n            else {\n                el = this.getElement(newId);\n            }\n            endpointsByElement[newId] = endpointsByElement[id] || [];\n            for (var i = 0, ii = endpointsByElement[newId].length; i < ii; i++) {\n                endpointsByElement[newId][i].setElementId(newId);\n                endpointsByElement[newId][i].setReferenceElement(el);\n            }\n            delete endpointsByElement[id];\n            this.sourceEndpointDefinitions[newId] = this.sourceEndpointDefinitions[id];\n            delete this.sourceEndpointDefinitions[id];\n            this.targetEndpointDefinitions[newId] = this.targetEndpointDefinitions[id];\n            delete this.targetEndpointDefinitions[id];\n            this.router.changeId(id, newId);\n            var dm = this.getDragManager();\n            if (dm) {\n                dm.changeId(id, newId);\n            }\n            managedElements[newId] = managedElements[id];\n            delete managedElements[id];\n            var _conns = function (list, epIdx, type) {\n                for (var i = 0, ii = list.length; i < ii; i++) {\n                    list[i].endpoints[epIdx].setElementId(newId);\n                    list[i].endpoints[epIdx].setReferenceElement(el);\n                    list[i][type + \"Id\"] = newId;\n                    list[i][type] = el;\n                }\n            };\n            _conns(sConns, 0, \"source\");\n            _conns(tConns, 1, \"target\");\n            this.repaint(newId);\n        };\n        this.setDebugLog = function (debugLog) {\n            log = debugLog;\n        };\n        this.setSuspendDrawing = function (val, repaintAfterwards) {\n            var curVal = _suspendDrawing;\n            _suspendDrawing = val;\n            if (val) {\n                _suspendedAt = new Date().getTime();\n            } else {\n                _suspendedAt = null;\n            }\n            if (repaintAfterwards) {\n                this.repaintEverything();\n            }\n            return curVal;\n        };\n        // returns whether or not drawing is currently suspended.\n        this.isSuspendDrawing = function () {\n            return _suspendDrawing;\n        };\n        // return timestamp for when drawing was suspended.\n        this.getSuspendedAt = function () {\n            return _suspendedAt;\n        };\n        this.batch = function (fn, doNotRepaintAfterwards) {\n            var _wasSuspended = this.isSuspendDrawing();\n            if (!_wasSuspended) {\n                this.setSuspendDrawing(true);\n            }\n            try {\n                fn();\n            }\n            catch (e) {\n                _ju.log(\"Function run while suspended failed\", e);\n            }\n            if (!_wasSuspended) {\n                this.setSuspendDrawing(false, !doNotRepaintAfterwards);\n            }\n        };\n        this.doWhileSuspended = this.batch;\n        this.getCachedData = _getCachedData;\n        this.show = function (el, changeEndpoints) {\n            _setVisible(el, \"block\", changeEndpoints);\n            return _currentInstance;\n        };\n        // TODO: update this method to return the current state.\n        this.toggleVisible = _toggleVisible;\n        this.addListener = this.bind;\n        var floatingConnections = [];\n        this.registerFloatingConnection = function(info, conn, ep) {\n            floatingConnections[info.id] = conn;\n            // only register for the target endpoint; we will not be dragging the source at any time\n            // before this connection is either discarded or made into a permanent connection.\n            _ju.addToList(endpointsByElement, info.id, ep);\n        };\n        this.getFloatingConnectionFor = function(id) {\n            return floatingConnections[id];\n        };\n        this.listManager = new root.jsPlumbListManager(this, this.Defaults.ListStyle);\n    };\n    _ju.extend(root.jsPlumbInstance, _ju.EventGenerator, {\n        setAttribute: function (el, a, v) {\n            this.setAttribute(el, a, v);\n        },\n        getAttribute: function (el, a) {\n            return this.getAttribute(root.jsPlumb.getElement(el), a);\n        },\n        convertToFullOverlaySpec: function(spec) {\n            if (_ju.isString(spec)) {\n                spec = [ spec, { } ];\n            }\n            spec[1].id = spec[1].id || _ju.uuid();\n            return spec;\n        },\n        registerConnectionType: function (id, type) {\n            this._connectionTypes[id] = root.jsPlumb.extend({}, type);\n            if (type.overlays) {\n                var to = {};\n                for (var i = 0; i < type.overlays.length; i++) {\n                    // if a string, convert to object representation so that we can store the typeid on it.\n                    // also assign an id.\n                    var fo = this.convertToFullOverlaySpec(type.overlays[i]);\n                    to[fo[1].id] = fo;\n                }\n                this._connectionTypes[id].overlays = to;\n            }\n        },\n        registerConnectionTypes: function (types) {\n            for (var i in types) {\n                this.registerConnectionType(i, types[i]);\n            }\n        },\n        registerEndpointType: function (id, type) {\n            this._endpointTypes[id] = root.jsPlumb.extend({}, type);\n            if (type.overlays) {\n                var to = {};\n                for (var i = 0; i < type.overlays.length; i++) {\n                    // if a string, convert to object representation so that we can store the typeid on it.\n                    // also assign an id.\n                    var fo = this.convertToFullOverlaySpec(type.overlays[i]);\n                    to[fo[1].id] = fo;\n                }\n                this._endpointTypes[id].overlays = to;\n            }\n        },\n        registerEndpointTypes: function (types) {\n            for (var i in types) {\n                this.registerEndpointType(i, types[i]);\n            }\n        },\n        getType: function (id, typeDescriptor) {\n            return typeDescriptor === \"connection\" ? this._connectionTypes[id] : this._endpointTypes[id];\n        },\n        setIdChanged: function (oldId, newId) {\n            this.setId(oldId, newId, true);\n        },\n        // set parent: change the parent for some node and update all the registrations we need to.\n        setParent: function (el, newParent) {\n            var _dom = this.getElement(el),\n                _id = this.getId(_dom),\n                _pdom = this.getElement(newParent),\n                _pid = this.getId(_pdom),\n                dm = this.getDragManager();\n            _dom.parentNode.removeChild(_dom);\n            _pdom.appendChild(_dom);\n            if (dm) {\n                dm.setParent(_dom, _id, _pdom, _pid);\n            }\n        },\n        extend: function (o1, o2, names) {\n            var i;\n            if (names) {\n                for (i = 0; i < names.length; i++) {\n                    o1[names[i]] = o2[names[i]];\n                }\n            }\n            else {\n                for (i in o2) {\n                    o1[i] = o2[i];\n                }\n            }\n            return o1;\n        },\n        floatingConnections: {},\n        getFloatingAnchorIndex: function (jpc) {\n            return jpc.endpoints[0].isFloating() ? 0 : jpc.endpoints[1].isFloating() ? 1 : -1;\n        },\n        proxyConnection :function(connection, index, proxyEl, proxyElId, endpointGenerator, anchorGenerator) {\n            var proxyEp,\n                originalElementId = connection.endpoints[index].elementId,\n                originalEndpoint = connection.endpoints[index];\n            connection.proxies = connection.proxies || [];\n            if(connection.proxies[index]) {\n                proxyEp = connection.proxies[index].ep;\n            }else {\n                proxyEp = this.addEndpoint(proxyEl, {\n                    endpoint:endpointGenerator(connection, index),\n                    anchor:anchorGenerator(connection, index),\n                    parameters:{\n                        isProxyEndpoint:true\n                    }\n                });\n            }\n            proxyEp.setDeleteOnEmpty(true);\n            // for this index, stash proxy info: the new EP, the original EP.\n            connection.proxies[index] = { ep:proxyEp, originalEp: originalEndpoint };\n            // and advise the anchor manager\n            if (index === 0) {\n                this.router.sourceOrTargetChanged(originalElementId, proxyElId, connection, proxyEl, 0);\n            }\n            else {\n                this.router.sourceOrTargetChanged(originalElementId, proxyElId, connection, proxyEl, 1);\n            }\n            // detach the original EP from the connection.\n            originalEndpoint.detachFromConnection(connection, null, true);\n            // set the proxy as the new ep\n            proxyEp.connections = [ connection ];\n            connection.endpoints[index] = proxyEp;\n            originalEndpoint.setVisible(false);\n            connection.setVisible(true);\n            this.revalidate(proxyEl);\n        },\n        unproxyConnection : function(connection, index, proxyElId) {\n            // if connection cleaned up, no proxies, or none for this end of the connection, abort.\n            if (connection._jsPlumb == null || connection.proxies == null || connection.proxies[index] == null) {\n                return;\n            }\n            var originalElement = connection.proxies[index].originalEp.element,\n                originalElementId = connection.proxies[index].originalEp.elementId;\n            connection.endpoints[index] = connection.proxies[index].originalEp;\n            // and advise the anchor manager\n            if (index === 0) {\n                // TODO why are there two differently named methods? Why is there not one method that says \"some end of this\n                // connection changed (you give the index), and here's the new element and element id.\"\n                this.router.sourceOrTargetChanged(proxyElId, originalElementId, connection, originalElement, 0);\n            }\n            else {\n                this.router.sourceOrTargetChanged(proxyElId, originalElementId, connection, originalElement, 1);\n            }\n            // detach the proxy EP from the connection (which will cause it to be removed as we no longer need it)\n            connection.proxies[index].ep.detachFromConnection(connection, null);\n            connection.proxies[index].originalEp.addConnection(connection);\n            if(connection.isVisible()) {\n                connection.proxies[index].originalEp.setVisible(true);\n            }\n            // cleanup\n            delete connection.proxies[index];\n        }\n    });\n// --------------------- static instance + module registration -------------------------------------------\n// create static instance and assign to window if window exists.\n    var jsPlumb = new jsPlumbInstance();\n    // register on 'root' (lets us run on server or browser)\n    root.jsPlumb = jsPlumb;\n    // add 'getInstance' method to static instance\n    jsPlumb.getInstance = function (_defaults, overrideFns) {\n        var j = new jsPlumbInstance(_defaults);\n        if (overrideFns) {\n            for (var ovf in overrideFns) {\n                j[ovf] = overrideFns[ovf];\n            }\n        }\n        j.init();\n        return j;\n    };\n    jsPlumb.each = function (spec, fn) {\n        if (spec == null) {\n            return;\n        }\n        if (typeof spec === \"string\") {\n            fn(jsPlumb.getElement(spec));\n        }\n        else if (spec.length != null) {\n            for (var i = 0; i < spec.length; i++) {\n                fn(jsPlumb.getElement(spec[i]));\n            }\n        }\n        else {\n            fn(spec);\n        } // assume it's an element.\n    };\n    // CommonJS\n    if (typeof exports !== 'undefined') {\n        exports.jsPlumb = jsPlumb;\n    }\n// --------------------- end static instance + AMD registration -------------------------------------------\n}).call(typeof window !== 'undefined' ? window : this);\n/*\n * Copyright (c) 2010 - 2020 jsPlumb (hello@jsplumbtoolkit.com)\n *\n * https://jsplumbtoolkit.com\n * https://github.com/jsplumb/jsplumb\n *\n * Dual licensed under the MIT and GPL2 licenses.\n */\n;(function() {\n    \"use strict\";\n    var root = this, _jp = root.jsPlumb, _ju = root.jsPlumbUtil;\n    // ------------------------------ BEGIN OverlayCapablejsPlumbUIComponent --------------------------------------------\n    var _internalLabelOverlayId = \"__label\",\n    // this is a shortcut helper method to let people add a label as\n    // overlay.\n        _makeLabelOverlay = function (component, params) {\n            var _params = {\n                    cssClass: params.cssClass,\n                    labelStyle: component.labelStyle,\n                    id: _internalLabelOverlayId,\n                    component: component,\n                    _jsPlumb: component._jsPlumb.instance  // TODO not necessary, since the instance can be accessed through the component.\n                },\n                mergedParams = _jp.extend(_params, params);\n            return new _jp.Overlays[component._jsPlumb.instance.getRenderMode()].Label(mergedParams);\n        },\n        _processOverlay = function (component, o) {\n            var _newOverlay = null;\n            if (_ju.isArray(o)) {\t// this is for the shorthand [\"Arrow\", { width:50 }] syntax\n                // there's also a three arg version:\n                // [\"Arrow\", { width:50 }, {location:0.7}]\n                // which merges the 3rd arg into the 2nd.\n                var type = o[0],\n                // make a copy of the object so as not to mess up anyone else's reference...\n                    p = _jp.extend({component: component, _jsPlumb: component._jsPlumb.instance}, o[1]);\n                if (o.length === 3) {\n                    _jp.extend(p, o[2]);\n                }\n                _newOverlay = new _jp.Overlays[component._jsPlumb.instance.getRenderMode()][type](p);\n            } else if (o.constructor === String) {\n                _newOverlay = new _jp.Overlays[component._jsPlumb.instance.getRenderMode()][o]({component: component, _jsPlumb: component._jsPlumb.instance});\n            } else {\n                _newOverlay = o;\n            }\n            _newOverlay.id = _newOverlay.id || _ju.uuid();\n            component.cacheTypeItem(\"overlay\", _newOverlay, _newOverlay.id);\n            component._jsPlumb.overlays[_newOverlay.id] = _newOverlay;\n            return _newOverlay;\n        };\n    _jp.OverlayCapableJsPlumbUIComponent = function (params) {\n        root.jsPlumbUIComponent.apply(this, arguments);\n        this._jsPlumb.overlays = {};\n        this._jsPlumb.overlayPositions = {};\n        if (params.label) {\n            this.getDefaultType().overlays[_internalLabelOverlayId] = [\"Label\", {\n                label: params.label,\n                location: params.labelLocation || this.defaultLabelLocation || 0.5,\n                labelStyle: params.labelStyle || this._jsPlumb.instance.Defaults.LabelStyle,\n                id:_internalLabelOverlayId\n            }];\n        }\n        this.setListenerComponent = function (c) {\n            if (this._jsPlumb) {\n                for (var i in this._jsPlumb.overlays) {\n                    this._jsPlumb.overlays[i].setListenerComponent(c);\n                }\n            }\n        };\n    };\n    _jp.OverlayCapableJsPlumbUIComponent.applyType = function (component, t) {\n        if (t.overlays) {\n            // loop through the ones in the type. if already present on the component,\n            // dont remove or re-add.\n            var keep = {}, i;\n            for (i in t.overlays) {\n                var existing = component._jsPlumb.overlays[t.overlays[i][1].id];\n                if (existing) {\n                    // maybe update from data, if there were parameterised values for instance.\n                    existing.updateFrom(t.overlays[i][1]);\n                    keep[t.overlays[i][1].id] = true;\n                    existing.reattach(component._jsPlumb.instance, component);\n                }\n                else {\n                    var c = component.getCachedTypeItem(\"overlay\", t.overlays[i][1].id);\n                    if (c != null) {\n                        c.reattach(component._jsPlumb.instance, component);\n                        c.setVisible(true);\n                        // maybe update from data, if there were parameterised values for instance.\n                        c.updateFrom(t.overlays[i][1]);\n                        component._jsPlumb.overlays[c.id] = c;\n                    }\n                    else {\n                        c = component.addOverlay(t.overlays[i], true);\n                    }\n                    keep[c.id] = true;\n                }\n            }\n            // now loop through the full overlays and remove those that we dont want to keep\n            for (i in component._jsPlumb.overlays) {\n                if (keep[component._jsPlumb.overlays[i].id] == null) {\n                    component.removeOverlay(component._jsPlumb.overlays[i].id, true); // remove overlay but dont clean it up.\n                    // that would remove event listeners etc; overlays are never discarded by the types stuff, they are\n                    // just detached/reattached.\n                }\n            }\n        }\n    };\n    _ju.extend(_jp.OverlayCapableJsPlumbUIComponent, root.jsPlumbUIComponent, {\n        setHover: function (hover, ignoreAttachedElements) {\n            if (this._jsPlumb && !this._jsPlumb.instance.isConnectionBeingDragged()) {\n                for (var i in this._jsPlumb.overlays) {\n                    this._jsPlumb.overlays[i][hover ? \"addClass\" : \"removeClass\"](this._jsPlumb.instance.hoverClass);\n                }\n            }\n        },\n        addOverlay: function (overlay, doNotRepaint) {\n            var o = _processOverlay(this, overlay);\n            if (this.getData && o.type === \"Label\" && _ju.isArray(overlay)) {\n                //\n                // component data might contain label location - look for it here.\n                var d = this.getData(), p = overlay[1];\n                if (d) {\n                    var locationAttribute = p.labelLocationAttribute || \"labelLocation\";\n                    var loc = d ? d[locationAttribute] : null;\n                    if (loc) {\n                        o.loc = loc;\n                    }\n                }\n            }\n            if (!doNotRepaint) {\n                this.repaint();\n            }\n            return o;\n        },\n        getOverlay: function (id) {\n            return this._jsPlumb.overlays[id];\n        },\n        getOverlays: function () {\n            return this._jsPlumb.overlays;\n        },\n        hideOverlay: function (id) {\n            var o = this.getOverlay(id);\n            if (o) {\n                o.hide();\n            }\n        },\n        hideOverlays: function () {\n            for (var i in this._jsPlumb.overlays) {\n                this._jsPlumb.overlays[i].hide();\n            }\n        },\n        showOverlay: function (id) {\n            var o = this.getOverlay(id);\n            if (o) {\n                o.show();\n            }\n        },\n        showOverlays: function () {\n            for (var i in this._jsPlumb.overlays) {\n                this._jsPlumb.overlays[i].show();\n            }\n        },\n        removeAllOverlays: function (doNotRepaint) {\n            for (var i in this._jsPlumb.overlays) {\n                if (this._jsPlumb.overlays[i].cleanup) {\n                    this._jsPlumb.overlays[i].cleanup();\n                }\n            }\n            this._jsPlumb.overlays = {};\n            this._jsPlumb.overlayPositions = null;\n            this._jsPlumb.overlayPlacements= {};\n            if (!doNotRepaint) {\n                this.repaint();\n            }\n        },\n        removeOverlay: function (overlayId, dontCleanup) {\n            var o = this._jsPlumb.overlays[overlayId];\n            if (o) {\n                o.setVisible(false);\n                if (!dontCleanup && o.cleanup) {\n                    o.cleanup();\n                }\n                delete this._jsPlumb.overlays[overlayId];\n                if (this._jsPlumb.overlayPositions) {\n                    delete this._jsPlumb.overlayPositions[overlayId];\n                }\n                if (this._jsPlumb.overlayPlacements) {\n                    delete this._jsPlumb.overlayPlacements[overlayId];\n                }\n            }\n        },\n        removeOverlays: function () {\n            for (var i = 0, j = arguments.length; i < j; i++) {\n                this.removeOverlay(arguments[i]);\n            }\n        },\n        moveParent: function (newParent) {\n            if (this.bgCanvas) {\n                this.bgCanvas.parentNode.removeChild(this.bgCanvas);\n                newParent.appendChild(this.bgCanvas);\n            }\n            if (this.canvas && this.canvas.parentNode) {\n                this.canvas.parentNode.removeChild(this.canvas);\n                newParent.appendChild(this.canvas);\n                for (var i in this._jsPlumb.overlays) {\n                    if (this._jsPlumb.overlays[i].isAppendedAtTopLevel) {\n                        var el = this._jsPlumb.overlays[i].getElement();\n                        el.parentNode.removeChild(el);\n                        newParent.appendChild(el);\n                    }\n                }\n            }\n        },\n        getLabel: function () {\n            var lo = this.getOverlay(_internalLabelOverlayId);\n            return lo != null ? lo.getLabel() : null;\n        },\n        getLabelOverlay: function () {\n            return this.getOverlay(_internalLabelOverlayId);\n        },\n        setLabel: function (l) {\n            var lo = this.getOverlay(_internalLabelOverlayId);\n            if (!lo) {\n                var params = l.constructor === String || l.constructor === Function ? { label: l } : l;\n                lo = _makeLabelOverlay(this, params);\n                this._jsPlumb.overlays[_internalLabelOverlayId] = lo;\n            }\n            else {\n                if (l.constructor === String || l.constructor === Function) {\n                    lo.setLabel(l);\n                }\n                else {\n                    if (l.label) {\n                        lo.setLabel(l.label);\n                    }\n                    if (l.location) {\n                        lo.setLocation(l.location);\n                    }\n                }\n            }\n            if (!this._jsPlumb.instance.isSuspendDrawing()) {\n                this.repaint();\n            }\n        },\n        cleanup: function (force) {\n            for (var i in this._jsPlumb.overlays) {\n                this._jsPlumb.overlays[i].cleanup(force);\n                this._jsPlumb.overlays[i].destroy(force);\n            }\n            if (force) {\n                this._jsPlumb.overlays = {};\n                this._jsPlumb.overlayPositions = null;\n            }\n        },\n        setVisible: function (v) {\n            this[v ? \"showOverlays\" : \"hideOverlays\"]();\n        },\n        setAbsoluteOverlayPosition: function (overlay, xy) {\n            this._jsPlumb.overlayPositions[overlay.id] = xy;\n        },\n        getAbsoluteOverlayPosition: function (overlay) {\n            return this._jsPlumb.overlayPositions ? this._jsPlumb.overlayPositions[overlay.id] : null;\n        },\n        _clazzManip:function(action, clazz, dontUpdateOverlays) {\n            if (!dontUpdateOverlays) {\n                for (var i in this._jsPlumb.overlays) {\n                    this._jsPlumb.overlays[i][action + \"Class\"](clazz);\n                }\n            }\n        },\n        addClass:function(clazz, dontUpdateOverlays) {\n            this._clazzManip(\"add\", clazz, dontUpdateOverlays);\n        },\n        removeClass:function(clazz, dontUpdateOverlays) {\n            this._clazzManip(\"remove\", clazz, dontUpdateOverlays);\n        }\n    });\n// ------------------------------ END OverlayCapablejsPlumbUIComponent --------------------------------------------\n}).call(typeof window !== 'undefined' ? window : this);\n/*\n * This file contains the code for Endpoints.\n *\n * Copyright (c) 2010 - 2020 jsPlumb (hello@jsplumbtoolkit.com)\n * \n * https://jsplumbtoolkit.com\n * https://github.com/jsplumb/jsplumb\n * \n * Dual licensed under the MIT and GPL2 licenses.\n */\n;(function () {\n    \"use strict\";\n    var root = this, _jp = root.jsPlumb, _ju = root.jsPlumbUtil;\n    // create the drag handler for a connection\n    var _makeConnectionDragHandler = function (endpoint, placeholder, _jsPlumb) {\n        var stopped = false;\n        return {\n            drag: function () {\n                if (stopped) {\n                    stopped = false;\n                    return true;\n                }\n                if (placeholder.element) {\n                    var _ui = _jsPlumb.getUIPosition(arguments, _jsPlumb.getZoom());\n                    if (_ui != null) {\n                        _jsPlumb.setPosition(placeholder.element, _ui);\n                    }\n                    _jsPlumb.repaint(placeholder.element, _ui);\n                    // always repaint the source endpoint, because only continuous/dynamic anchors cause the endpoint\n                    // to be repainted, so static anchors need to be told (or the endpoint gets dragged around)\n                    endpoint.paint({anchorPoint:endpoint.anchor.getCurrentLocation({element:endpoint})});\n                }\n            },\n            stopDrag: function () {\n                stopped = true;\n            }\n        };\n    };\n    // creates a placeholder div for dragging purposes, adds it, and pre-computes its offset.\n    var _makeDraggablePlaceholder = function (placeholder, _jsPlumb, ipco, ips) {\n        var n = _jsPlumb.createElement(\"div\", { position : \"absolute\" });\n        _jsPlumb.appendElement(n);\n        var id = _jsPlumb.getId(n);\n        _jsPlumb.setPosition(n, ipco);\n        n.style.width = ips[0] + \"px\";\n        n.style.height = ips[1] + \"px\";\n        _jsPlumb.manage(id, n, true); // TRANSIENT MANAGE\n        // create and assign an id, and initialize the offset.\n        placeholder.id = id;\n        placeholder.element = n;\n    };\n    // create a floating endpoint (for drag connections)\n    var _makeFloatingEndpoint = function (paintStyle, referenceAnchor, endpoint, referenceCanvas, sourceElement, _jsPlumb, _newEndpoint, scope) {\n        var floatingAnchor = new _jp.FloatingAnchor({ reference: referenceAnchor, referenceCanvas: referenceCanvas, jsPlumbInstance: _jsPlumb });\n        return _newEndpoint({\n            paintStyle: paintStyle,\n            endpoint: endpoint,\n            anchor: floatingAnchor,\n            source: sourceElement,\n            scope: scope\n        });\n    };\n    var typeParameters = [ \"connectorStyle\", \"connectorHoverStyle\", \"connectorOverlays\",\n        \"connector\", \"connectionType\", \"connectorClass\", \"connectorHoverClass\" ];\n    // a helper function that tries to find a connection to the given element, and returns it if so. if elementWithPrecedence is null,\n    // or no connection to it is found, we return the first connection in our list.\n    var findConnectionToUseForDynamicAnchor = function (ep, elementWithPrecedence) {\n        var idx = 0;\n        if (elementWithPrecedence != null) {\n            for (var i = 0; i < ep.connections.length; i++) {\n                if (ep.connections[i].sourceId === elementWithPrecedence || ep.connections[i].targetId === elementWithPrecedence) {\n                    idx = i;\n                    break;\n                }\n            }\n        }\n        return ep.connections[idx];\n    };\n    _jp.Endpoint = function (params) {\n        var _jsPlumb = params._jsPlumb,\n            _newConnection = params.newConnection,\n            _newEndpoint = params.newEndpoint;\n        this.idPrefix = \"_jsplumb_e_\";\n        this.defaultLabelLocation = [ 0.5, 0.5 ];\n        this.defaultOverlayKeys = [\"Overlays\", \"EndpointOverlays\"];\n        _jp.OverlayCapableJsPlumbUIComponent.apply(this, arguments);\n// TYPE\n        this.appendToDefaultType({\n            connectionType:params.connectionType,\n            maxConnections: params.maxConnections == null ? this._jsPlumb.instance.Defaults.MaxConnections : params.maxConnections, // maximum number of connections this endpoint can be the source of.,\n            paintStyle: params.endpointStyle || params.paintStyle || params.style || this._jsPlumb.instance.Defaults.EndpointStyle || _jp.Defaults.EndpointStyle,\n            hoverPaintStyle: params.endpointHoverStyle || params.hoverPaintStyle || this._jsPlumb.instance.Defaults.EndpointHoverStyle || _jp.Defaults.EndpointHoverStyle,\n            connectorStyle: params.connectorStyle,\n            connectorHoverStyle: params.connectorHoverStyle,\n            connectorClass: params.connectorClass,\n            connectorHoverClass: params.connectorHoverClass,\n            connectorOverlays: params.connectorOverlays,\n            connector: params.connector,\n            connectorTooltip: params.connectorTooltip\n        });\n// END TYPE\n        this._jsPlumb.enabled = !(params.enabled === false);\n        this._jsPlumb.visible = true;\n        this.element = _jp.getElement(params.source);\n        this._jsPlumb.uuid = params.uuid;\n        this._jsPlumb.floatingEndpoint = null;\n        var inPlaceCopy = null;\n        if (this._jsPlumb.uuid) {\n            params.endpointsByUUID[this._jsPlumb.uuid] = this;\n        }\n        this.elementId = params.elementId;\n        this.dragProxy = params.dragProxy;\n        this._jsPlumb.connectionCost = params.connectionCost;\n        this._jsPlumb.connectionsDirected = params.connectionsDirected;\n        this._jsPlumb.currentAnchorClass = \"\";\n        this._jsPlumb.events = {};\n        var deleteOnEmpty = params.deleteOnEmpty === true;\n        this.setDeleteOnEmpty = function(d) {\n            deleteOnEmpty = d;\n        };\n        var _updateAnchorClass = function () {\n            // stash old, get new\n            var oldAnchorClass = _jsPlumb.endpointAnchorClassPrefix + \"-\" + this._jsPlumb.currentAnchorClass;\n            this._jsPlumb.currentAnchorClass = this.anchor.getCssClass();\n            var anchorClass = _jsPlumb.endpointAnchorClassPrefix + (this._jsPlumb.currentAnchorClass ? \"-\" + this._jsPlumb.currentAnchorClass : \"\");\n            this.removeClass(oldAnchorClass);\n            this.addClass(anchorClass);\n            // add and remove at the same time to reduce the number of reflows.\n            _jp.updateClasses(this.element, anchorClass, oldAnchorClass);\n        }.bind(this);\n        this.prepareAnchor = function(anchorParams) {\n            var a = this._jsPlumb.instance.makeAnchor(anchorParams, this.elementId, _jsPlumb);\n            a.bind(\"anchorChanged\", function (currentAnchor) {\n                this.fire(\"anchorChanged\", {endpoint: this, anchor: currentAnchor});\n                _updateAnchorClass();\n            }.bind(this));\n            return a;\n        };\n        this.setPreparedAnchor = function(anchor, doNotRepaint) {\n            this._jsPlumb.instance.continuousAnchorFactory.clear(this.elementId);\n            this.anchor = anchor;\n            _updateAnchorClass();\n            if (!doNotRepaint) {\n                this._jsPlumb.instance.repaint(this.elementId);\n            }\n            return this;\n        };\n        this.setAnchor = function (anchorParams, doNotRepaint) {\n            var a = this.prepareAnchor(anchorParams);\n            this.setPreparedAnchor(a, doNotRepaint);\n            return this;\n        };\n        var internalHover = function (state) {\n            if (this.connections.length > 0) {\n                for (var i = 0; i < this.connections.length; i++) {\n                    this.connections[i].setHover(state, false);\n                }\n            }\n            else {\n                this.setHover(state);\n            }\n        }.bind(this);\n        this.bind(\"mouseover\", function () {\n            internalHover(true);\n        });\n        this.bind(\"mouseout\", function () {\n            internalHover(false);\n        });\n        // ANCHOR MANAGER\n        if (!params._transient) { // in place copies, for example, are transient.  they will never need to be retrieved during a paint cycle, because they dont move, and then they are deleted.\n            this._jsPlumb.instance.router.addEndpoint(this, this.elementId);\n        }\n        this.prepareEndpoint = function(ep, typeId) {\n            var _e = function (t, p) {\n                var rm = _jsPlumb.getRenderMode();\n                if (_jp.Endpoints[rm][t]) {\n                    return new _jp.Endpoints[rm][t](p);\n                }\n                if (!_jsPlumb.Defaults.DoNotThrowErrors) {\n                    throw { msg: \"jsPlumb: unknown endpoint type '\" + t + \"'\" };\n                }\n            };\n            var endpointArgs = {\n                _jsPlumb: this._jsPlumb.instance,\n                cssClass: params.cssClass,\n                container: params.container,\n                tooltip: params.tooltip,\n                connectorTooltip: params.connectorTooltip,\n                endpoint: this\n            };\n            var endpoint;\n            if (_ju.isString(ep)) {\n                endpoint = _e(ep, endpointArgs);\n            }\n            else if (_ju.isArray(ep)) {\n                endpointArgs = _ju.merge(ep[1], endpointArgs);\n                endpoint = _e(ep[0], endpointArgs);\n            }\n            else {\n                endpoint = ep.clone();\n            }\n            // assign a clone function using a copy of endpointArgs. this is used when a drag starts: the endpoint that was dragged is cloned,\n            // and the clone is left in its place while the original one goes off on a magical journey.\n            // the copy is to get around a closure problem, in which endpointArgs ends up getting shared by\n            // the whole world.\n            //var argsForClone = jsPlumb.extend({}, endpointArgs);\n            endpoint.clone = function () {\n                // TODO this, and the code above, can be refactored to be more dry.\n                if (_ju.isString(ep)) {\n                    return _e(ep, endpointArgs);\n                }\n                else if (_ju.isArray(ep)) {\n                    endpointArgs = _ju.merge(ep[1], endpointArgs);\n                    return _e(ep[0], endpointArgs);\n                }\n            }.bind(this);\n            endpoint.typeId = typeId;\n            return endpoint;\n        };\n        this.setEndpoint = function(ep, doNotRepaint) {\n            var _ep = this.prepareEndpoint(ep);\n            this.setPreparedEndpoint(_ep, true);\n        };\n        this.setPreparedEndpoint = function (ep, doNotRepaint) {\n            if (this.endpoint != null) {\n                this.endpoint.cleanup();\n                this.endpoint.destroy();\n            }\n            this.endpoint = ep;\n            this.type = this.endpoint.type;\n            this.canvas = this.endpoint.canvas;\n        };\n        _jp.extend(this, params, typeParameters);\n        this.isSource = params.isSource || false;\n        this.isTemporarySource = params.isTemporarySource || false;\n        this.isTarget = params.isTarget || false;\n        this.connections = params.connections || [];\n        this.connectorPointerEvents = params[\"connector-pointer-events\"];\n        this.scope = params.scope || _jsPlumb.getDefaultScope();\n        this.timestamp = null;\n        this.reattachConnections = params.reattach || _jsPlumb.Defaults.ReattachConnections;\n        this.connectionsDetachable = _jsPlumb.Defaults.ConnectionsDetachable;\n        if (params.connectionsDetachable === false || params.detachable === false) {\n            this.connectionsDetachable = false;\n        }\n        this.dragAllowedWhenFull = params.dragAllowedWhenFull !== false;\n        if (params.onMaxConnections) {\n            this.bind(\"maxConnections\", params.onMaxConnections);\n        }\n        //\n        // add a connection. not part of public API.\n        //\n        this.addConnection = function (connection) {\n            this.connections.push(connection);\n            this[(this.connections.length > 0 ? \"add\" : \"remove\") + \"Class\"](_jsPlumb.endpointConnectedClass);\n            this[(this.isFull() ? \"add\" : \"remove\") + \"Class\"](_jsPlumb.endpointFullClass);\n        };\n        this.detachFromConnection = function (connection, idx, doNotCleanup) {\n            idx = idx == null ? this.connections.indexOf(connection) : idx;\n            if (idx >= 0) {\n                this.connections.splice(idx, 1);\n                this[(this.connections.length > 0 ? \"add\" : \"remove\") + \"Class\"](_jsPlumb.endpointConnectedClass);\n                this[(this.isFull() ? \"add\" : \"remove\") + \"Class\"](_jsPlumb.endpointFullClass);\n            }\n            if (!doNotCleanup && deleteOnEmpty && this.connections.length === 0) {\n                _jsPlumb.deleteObject({\n                    endpoint: this,\n                    fireEvent: false,\n                    deleteAttachedObjects: doNotCleanup !== true\n                });\n            }\n        };\n        this.deleteEveryConnection = function(params) {\n            var c = this.connections.length;\n            for (var i = 0; i < c; i++) {\n                _jsPlumb.deleteConnection(this.connections[0], params);\n            }\n        };\n        this.detachFrom = function (targetEndpoint, fireEvent, originalEvent) {\n            var c = [];\n            for (var i = 0; i < this.connections.length; i++) {\n                if (this.connections[i].endpoints[1] === targetEndpoint || this.connections[i].endpoints[0] === targetEndpoint) {\n                    c.push(this.connections[i]);\n                }\n            }\n            for (var j = 0, count = c.length; j < count; j++) {\n                _jsPlumb.deleteConnection(c[0]);\n            }\n            return this;\n        };\n        this.getElement = function () {\n            return this.element;\n        };\n        this.setElement = function (el) {\n            var parentId = this._jsPlumb.instance.getId(el),\n                curId = this.elementId;\n            // remove the endpoint from the list for the current endpoint's element\n            _ju.removeWithFunction(params.endpointsByElement[this.elementId], function (e) {\n                return e.id === this.id;\n            }.bind(this));\n            this.element = _jp.getElement(el);\n            this.elementId = _jsPlumb.getId(this.element);\n            _jsPlumb.router.rehomeEndpoint(this, curId, this.element);\n            _jsPlumb.dragManager.endpointAdded(this.element);\n            _ju.addToList(params.endpointsByElement, parentId, this);\n            return this;\n        };\n        /**\n         * private but must be exposed.\n         */\n        this.makeInPlaceCopy = function () {\n            var loc = this.anchor.getCurrentLocation({element: this}),\n                o = this.anchor.getOrientation(this),\n                acc = this.anchor.getCssClass(),\n                inPlaceAnchor = {\n                    bind: function () {\n                    },\n                    compute: function () {\n                        return [ loc[0], loc[1] ];\n                    },\n                    getCurrentLocation: function () {\n                        return [ loc[0], loc[1] ];\n                    },\n                    getOrientation: function () {\n                        return o;\n                    },\n                    getCssClass: function () {\n                        return acc;\n                    }\n                };\n            return _newEndpoint({\n                dropOptions: params.dropOptions,\n                anchor: inPlaceAnchor,\n                source: this.element,\n                paintStyle: this.getPaintStyle(),\n                endpoint: params.hideOnDrag ? \"Blank\" : this.endpoint,\n                _transient: true,\n                scope: this.scope,\n                reference:this\n            });\n        };\n        /**\n         * returns a connection from the pool; used when dragging starts.  just gets the head of the array if it can.\n         */\n        this.connectorSelector = function () {\n            return this.connections[0];\n        };\n        this.setStyle = this.setPaintStyle;\n        this.paint = function (params) {\n            params = params || {};\n            var timestamp = params.timestamp, recalc = !(params.recalc === false);\n            if (!timestamp || this.timestamp !== timestamp) {\n                var info = _jsPlumb.updateOffset({ elId: this.elementId, timestamp: timestamp });\n                var xy = params.offset ? params.offset.o : info.o;\n                if (xy != null) {\n                    var ap = params.anchorPoint, connectorPaintStyle = params.connectorPaintStyle;\n                    if (ap == null) {\n                        var wh = params.dimensions || info.s,\n                            anchorParams = { xy: [ xy.left, xy.top ], wh: wh, element: this, timestamp: timestamp };\n                        if (recalc && this.anchor.isDynamic && this.connections.length > 0) {\n                            var c = findConnectionToUseForDynamicAnchor(this, params.elementWithPrecedence),\n                                oIdx = c.endpoints[0] === this ? 1 : 0,\n                                oId = oIdx === 0 ? c.sourceId : c.targetId,\n                                oInfo = _jsPlumb.getCachedData(oId),\n                                oOffset = oInfo.o, oWH = oInfo.s;\n                            anchorParams.index = oIdx === 0 ? 1 : 0;\n                            anchorParams.connection = c;\n                            anchorParams.txy = [ oOffset.left, oOffset.top ];\n                            anchorParams.twh = oWH;\n                            anchorParams.tElement = c.endpoints[oIdx];\n                            anchorParams.tRotation = _jsPlumb.getRotation(oId);\n                        } else if (this.connections.length > 0) {\n                            anchorParams.connection = this.connections[0];\n                        }\n                        anchorParams.rotation = _jsPlumb.getRotation(this.elementId);\n                        ap = this.anchor.compute(anchorParams);\n                    }\n                    this.endpoint.compute(ap, this.anchor.getOrientation(this), this._jsPlumb.paintStyleInUse, connectorPaintStyle || this.paintStyleInUse);\n                    this.endpoint.paint(this._jsPlumb.paintStyleInUse, this.anchor);\n                    this.timestamp = timestamp;\n                    // paint overlays\n                    for (var i in this._jsPlumb.overlays) {\n                        if (this._jsPlumb.overlays.hasOwnProperty(i)) {\n                            var o = this._jsPlumb.overlays[i];\n                            if (o.isVisible()) {\n                                this._jsPlumb.overlayPlacements[i] = o.draw(this.endpoint, this._jsPlumb.paintStyleInUse);\n                                o.paint(this._jsPlumb.overlayPlacements[i]);\n                            }\n                        }\n                    }\n                }\n            }\n        };\n        this.getTypeDescriptor = function () {\n            return \"endpoint\";\n        };\n        this.isVisible = function () {\n            return this._jsPlumb.visible;\n        };\n        this.repaint = this.paint;\n        var draggingInitialised = false;\n        this.initDraggable = function () {\n            // is this a connection source? we make it draggable and have the\n            // drag listener maintain a connection with a floating endpoint.\n            if (!draggingInitialised && _jp.isDragSupported(this.element)) {\n                var placeholderInfo = { id: null, element: null },\n                    jpc = null,\n                    existingJpc = false,\n                    existingJpcParams = null,\n                    _dragHandler = _makeConnectionDragHandler(this, placeholderInfo, _jsPlumb),\n                    dragOptions = params.dragOptions || {},\n                    defaultOpts = {},\n                    startEvent = _jp.dragEvents.start,\n                    stopEvent = _jp.dragEvents.stop,\n                    dragEvent = _jp.dragEvents.drag,\n                    beforeStartEvent = _jp.dragEvents.beforeStart,\n                    payload;\n                // respond to beforeStart from katavorio; this will have, optionally, a payload of attribute values\n                // that were placed there by the makeSource mousedown listener.\n                var beforeStart = function(beforeStartParams) {\n                    payload = beforeStartParams.e.payload || {};\n                };\n                var start = function (startParams) {\n// -------------   first, get a connection to drag. this may be null, in which case we are dragging a new one.\n                    jpc = this.connectorSelector();\n// -------------------------------- now a bunch of tests about whether or not to proceed -------------------------\n                    var _continue = true;\n                    // if not enabled, return\n                    if (!this.isEnabled()) {\n                        _continue = false;\n                    }\n                    // if no connection and we're not a source - or temporarily a source, as is the case with makeSource - return.\n                    if (jpc == null && !this.isSource && !this.isTemporarySource) {\n                        _continue = false;\n                    }\n                    // otherwise if we're full and not allowed to drag, also return false.\n                    if (this.isSource && this.isFull() && !(jpc != null && this.dragAllowedWhenFull)) {\n                        _continue = false;\n                    }\n                    // if the connection was setup as not detachable or one of its endpoints\n                    // was setup as connectionsDetachable = false, or Defaults.ConnectionsDetachable\n                    // is set to false...\n                    if (jpc != null && !jpc.isDetachable(this)) {\n                        // .. and the endpoint is full\n                        if (this.isFull()) {\n                            _continue = false;\n                        } else {\n                            // otherwise, if not full, set the connection to null, and we will now proceed\n                            // to drag a new connection.\n                            jpc = null;\n                        }\n                    }\n                    var beforeDrag = _jsPlumb.checkCondition(jpc == null ? \"beforeDrag\" : \"beforeStartDetach\", {\n                        endpoint:this,\n                        source:this.element,\n                        sourceId:this.elementId,\n                        connection:jpc\n                    });\n                    if (beforeDrag === false) {\n                        _continue = false;\n                    }\n                    // else we might have been given some data. we'll pass it in to a new connection as 'data'.\n                    // here we also merge in the optional payload we were given on mousedown.\n                    else if (typeof beforeDrag === \"object\") {\n                        _jp.extend(beforeDrag, payload || {});\n                    }\n                    else {\n                        // or if no beforeDrag data, maybe use the payload on its own.\n                        beforeDrag = payload || {};\n                    }\n                    if (_continue === false) {\n                        // this is for mootools and yui. returning false from this causes jquery to stop drag.\n                        // the events are wrapped in both mootools and yui anyway, but i don't think returning\n                        // false from the start callback would stop a drag.\n                        if (_jsPlumb.stopDrag) {\n                            _jsPlumb.stopDrag(this.canvas);\n                        }\n                        _dragHandler.stopDrag();\n                        return false;\n                    }\n// ---------------------------------------------------------------------------------------------------------------------\n                    // ok to proceed.\n                    // clear hover for all connections for this endpoint before continuing.\n                    for (var i = 0; i < this.connections.length; i++) {\n                        this.connections[i].setHover(false);\n                    }\n                    this.addClass(\"endpointDrag\");\n                    _jsPlumb.setConnectionBeingDragged(true);\n                    // if we're not full but there was a connection, make it null. we'll create a new one.\n                    if (jpc && !this.isFull() && this.isSource) {\n                        jpc = null;\n                    }\n                    _jsPlumb.updateOffset({ elId: this.elementId });\n// ----------------    make the element we will drag around, and position it -----------------------------\n                    var ipco = this._jsPlumb.instance.getOffset(this.canvas),\n                        canvasElement = this.canvas,\n                        ips = this._jsPlumb.instance.getSize(this.canvas);\n                    _makeDraggablePlaceholder(placeholderInfo, _jsPlumb, ipco, ips);\n                    // store the id of the dragging div and the source element. the drop function will pick these up.                   \n                    _jsPlumb.setAttributes(this.canvas, {\n                        \"dragId\": placeholderInfo.id,\n                        \"elId\": this.elementId\n                    });\n// ------------------- create an endpoint that will be our floating endpoint ------------------------------------\n                    var endpointToFloat = this.dragProxy || this.endpoint;\n                    if (this.dragProxy == null && this.connectionType != null) {\n                        var aae = this._jsPlumb.instance.deriveEndpointAndAnchorSpec(this.connectionType);\n                        if (aae.endpoints[1]) {\n                            endpointToFloat = aae.endpoints[1];\n                        }\n                    }\n                    var centerAnchor = this._jsPlumb.instance.makeAnchor(\"Center\");\n                    centerAnchor.isFloating = true;\n                    this._jsPlumb.floatingEndpoint = _makeFloatingEndpoint(this.getPaintStyle(), centerAnchor, endpointToFloat, this.canvas, placeholderInfo.element, _jsPlumb, _newEndpoint, this.scope);\n                    var _savedAnchor = this._jsPlumb.floatingEndpoint.anchor;\n                    if (jpc == null) {\n                        this.setHover(false, false);\n                        // create a connection. one end is this endpoint, the other is a floating endpoint.                    \n                        jpc = _newConnection({\n                            sourceEndpoint: this,\n                            targetEndpoint: this._jsPlumb.floatingEndpoint,\n                            source: this.element,  // for makeSource with parent option.  ensure source element is represented correctly.\n                            target: placeholderInfo.element,\n                            anchors: [ this.anchor, this._jsPlumb.floatingEndpoint.anchor ],\n                            paintStyle: params.connectorStyle, // this can be null. Connection will use the default.\n                            hoverPaintStyle: params.connectorHoverStyle,\n                            connector: params.connector, // this can also be null. Connection will use the default.\n                            overlays: params.connectorOverlays,\n                            type: this.connectionType,\n                            cssClass: this.connectorClass,\n                            hoverClass: this.connectorHoverClass,\n                            scope:params.scope,\n                            data:beforeDrag\n                        });\n                        jpc.pending = true;\n                        jpc.addClass(_jsPlumb.draggingClass);\n                        this._jsPlumb.floatingEndpoint.addClass(_jsPlumb.draggingClass);\n                        this._jsPlumb.floatingEndpoint.anchor = _savedAnchor;\n                        // fire an event that informs that a connection is being dragged\n                        _jsPlumb.fire(\"connectionDrag\", jpc);\n                        // register the new connection on the drag manager. This connection, at this point, is 'pending',\n                        // and has as its target a temporary element (the 'placeholder'). If the connection subsequently\n                        // becomes established, the anchor manager is informed that the target of the connection has\n                        // changed.\n                        _jsPlumb.router.newConnection(jpc);\n                    } else {\n                        existingJpc = true;\n                        jpc.setHover(false);\n                        // new anchor idx\n                        var anchorIdx = jpc.endpoints[0].id === this.id ? 0 : 1;\n                        this.detachFromConnection(jpc, null, true);                         // detach from the connection while dragging is occurring. but dont cleanup automatically.\n                        // store the original scope (issue 57)\n                        var dragScope = _jsPlumb.getDragScope(canvasElement);\n                        _jsPlumb.setAttribute(this.canvas, \"originalScope\", dragScope);\n                        // fire an event that informs that a connection is being dragged. we do this before\n                        // replacing the original target with the floating element info.\n                        _jsPlumb.fire(\"connectionDrag\", jpc);\n                        // now we replace ourselves with the temporary div we created above:\n                        if (anchorIdx === 0) {\n                            existingJpcParams = [ jpc.source, jpc.sourceId, canvasElement, dragScope ];\n                            _jsPlumb.router.sourceOrTargetChanged(jpc.endpoints[anchorIdx].elementId, placeholderInfo.id, jpc, placeholderInfo.element, 0);\n                        } else {\n                            existingJpcParams = [ jpc.target, jpc.targetId, canvasElement, dragScope ];\n                            _jsPlumb.router.sourceOrTargetChanged(jpc.endpoints[anchorIdx].elementId, placeholderInfo.id, jpc, placeholderInfo.element, 1);\n                        }\n                        // store the original endpoint and assign the new floating endpoint for the drag.\n                        jpc.suspendedEndpoint = jpc.endpoints[anchorIdx];\n                        // PROVIDE THE SUSPENDED ELEMENT, BE IT A SOURCE OR TARGET (ISSUE 39)\n                        jpc.suspendedElement = jpc.endpoints[anchorIdx].getElement();\n                        jpc.suspendedElementId = jpc.endpoints[anchorIdx].elementId;\n                        jpc.suspendedElementType = anchorIdx === 0 ? \"source\" : \"target\";\n                        jpc.suspendedEndpoint.setHover(false);\n                        this._jsPlumb.floatingEndpoint.referenceEndpoint = jpc.suspendedEndpoint;\n                        jpc.endpoints[anchorIdx] = this._jsPlumb.floatingEndpoint;\n                        jpc.addClass(_jsPlumb.draggingClass);\n                        this._jsPlumb.floatingEndpoint.addClass(_jsPlumb.draggingClass);\n                    }\n                    _jsPlumb.registerFloatingConnection(placeholderInfo, jpc, this._jsPlumb.floatingEndpoint);\n                    // tell jsplumb about it\n                    _jsPlumb.currentlyDragging = true;\n                }.bind(this);\n                var stop = function () {\n                    _jsPlumb.setConnectionBeingDragged(false);\n                    if (jpc && jpc.endpoints != null) {\n                        // get the actual drop event (decode from library args to stop function)\n                        var originalEvent = _jsPlumb.getDropEvent(arguments);\n                        // unlock the other endpoint (if it is dynamic, it would have been locked at drag start)\n                        var idx = _jsPlumb.getFloatingAnchorIndex(jpc);\n                        jpc.endpoints[idx === 0 ? 1 : 0].anchor.locked = false;\n                        jpc.removeClass(_jsPlumb.draggingClass);\n                        // if we have the floating endpoint then the connection has not been dropped\n                        // on another endpoint.  If it is a new connection we throw it away. If it is an\n                        // existing connection we check to see if we should reattach it, throwing it away\n                        // if not.\n                        if (this._jsPlumb && (jpc.deleteConnectionNow || jpc.endpoints[idx] === this._jsPlumb.floatingEndpoint)) {\n                            // 6a. if the connection was an existing one...\n                            if (existingJpc && jpc.suspendedEndpoint) {\n                                // fix for issue35, thanks Sylvain Gizard: when firing the detach event make sure the\n                                // floating endpoint has been replaced.\n                                if (idx === 0) {\n                                    jpc.floatingElement = jpc.source;\n                                    jpc.floatingId = jpc.sourceId;\n                                    jpc.floatingEndpoint = jpc.endpoints[0];\n                                    jpc.floatingIndex = 0;\n                                    jpc.source = existingJpcParams[0];\n                                    jpc.sourceId = existingJpcParams[1];\n                                } else {\n                                    // keep a copy of the floating element; the anchor manager will want to clean up.\n                                    jpc.floatingElement = jpc.target;\n                                    jpc.floatingId = jpc.targetId;\n                                    jpc.floatingEndpoint = jpc.endpoints[1];\n                                    jpc.floatingIndex = 1;\n                                    jpc.target = existingJpcParams[0];\n                                    jpc.targetId = existingJpcParams[1];\n                                }\n                                var fe = this._jsPlumb.floatingEndpoint; // store for later removal.\n                                // restore the original scope (issue 57)\n                                _jsPlumb.setDragScope(existingJpcParams[2], existingJpcParams[3]);\n                                jpc.endpoints[idx] = jpc.suspendedEndpoint;\n                                // if the connection should be reattached, or the other endpoint refuses detach, then\n                                // reset the connection to its original state\n                                if (jpc.isReattach() || jpc._forceReattach || jpc._forceDetach || !_jsPlumb.deleteConnection(jpc, {originalEvent: originalEvent})) {\n                                    jpc.setHover(false);\n                                    jpc._forceDetach = null;\n                                    jpc._forceReattach = null;\n                                    this._jsPlumb.floatingEndpoint.detachFromConnection(jpc);\n                                    jpc.suspendedEndpoint.addConnection(jpc);\n                                    // TODO this code is duplicated in lots of places...and there is nothing external\n                                    // in the code; it all refers to the connection itself. we could add a\n                                    // `checkSanity(connection)` method to anchorManager that did this.\n                                    if (idx === 1) {\n                                        _jsPlumb.router.sourceOrTargetChanged(jpc.floatingId, jpc.targetId, jpc, jpc.target, idx);\n                                    }\n                                    else {\n                                        _jsPlumb.router.sourceOrTargetChanged(jpc.floatingId, jpc.sourceId, jpc, jpc.source, idx);\n                                    }\n                                    _jsPlumb.repaint(existingJpcParams[1]);\n                                }\n                                else {\n                                    _jsPlumb.deleteObject({endpoint: fe});\n                                }\n                            }\n                        }\n                        // makeTargets sets this flag, to tell us we have been replaced and should delete this object.\n                        if (this.deleteAfterDragStop) {\n                            _jsPlumb.deleteObject({endpoint: this});\n                        }\n                        else {\n                            if (this._jsPlumb) {\n                                 this.paint({recalc: false});\n                            }\n                        }\n                        // although the connection is no longer valid, there are use cases where this is useful.\n                        _jsPlumb.fire(\"connectionDragStop\", jpc, originalEvent);\n                        // fire this event to give people more fine-grained control (connectionDragStop fires a lot)\n                        if (jpc.pending) {\n                            _jsPlumb.fire(\"connectionAborted\", jpc, originalEvent);\n                        }\n                        // tell jsplumb that dragging is finished.\n                        _jsPlumb.currentlyDragging = false;\n                        jpc.suspendedElement = null;\n                        jpc.suspendedEndpoint = null;\n                        jpc = null;\n                    }\n                    // if no endpoints, jpc already cleaned up. but still we want to ensure we're reset properly.\n                    // remove the element associated with the floating endpoint\n                    // (and its associated floating endpoint and visual artefacts)\n                    if (placeholderInfo && placeholderInfo.element) {\n                        _jsPlumb.remove(placeholderInfo.element, false, false);\n                    }\n                    // remove the inplace copy\n                    if (inPlaceCopy) {\n                        _jsPlumb.deleteObject({endpoint: inPlaceCopy});\n                    }\n                    if (this._jsPlumb) {\n                        // make our canvas visible (TODO: hand off to library; we should not know about DOM)\n                        this.canvas.style.visibility = \"visible\";\n                        // unlock our anchor\n                        this.anchor.locked = false;\n                        // clear floating anchor.\n                        this._jsPlumb.floatingEndpoint = null;\n                    }\n                }.bind(this);\n                dragOptions = _jp.extend(defaultOpts, dragOptions);\n                dragOptions.scope = this.scope || dragOptions.scope;\n                dragOptions[beforeStartEvent] = _ju.wrap(dragOptions[beforeStartEvent], beforeStart, false);\n                dragOptions[startEvent] = _ju.wrap(dragOptions[startEvent], start, false);\n                // extracted drag handler function so can be used by makeSource\n                dragOptions[dragEvent] = _ju.wrap(dragOptions[dragEvent], _dragHandler.drag);\n                dragOptions[stopEvent] = _ju.wrap(dragOptions[stopEvent], stop);\n                dragOptions.multipleDrop = false;\n                dragOptions.canDrag = function () {\n                    return this.isSource || this.isTemporarySource || (this.connections.length > 0 && this.connectionsDetachable !== false);\n                }.bind(this);\n                _jsPlumb.initDraggable(this.canvas, dragOptions, \"internal\");\n                this.canvas._jsPlumbRelatedElement = this.element;\n                draggingInitialised = true;\n            }\n        };\n        var ep = params.endpoint || this._jsPlumb.instance.Defaults.Endpoint || _jp.Defaults.Endpoint;\n        this.setEndpoint(ep, true);\n        var anchorParamsToUse = params.anchor ? params.anchor : params.anchors ? params.anchors : (_jsPlumb.Defaults.Anchor || \"Top\");\n        this.setAnchor(anchorParamsToUse, true);\n        // finally, set type if it was provided\n        var type = [ \"default\", (params.type || \"\")].join(\" \");\n        this.addType(type, params.data, true);\n        this.canvas = this.endpoint.canvas;\n        this.canvas._jsPlumb = this;\n        this.initDraggable();\n        // pulled this out into a function so we can reuse it for the inPlaceCopy canvas; you can now drop detached connections\n        // back onto the endpoint you detached it from.\n        var _initDropTarget = function (canvas, isTransient, endpoint, referenceEndpoint) {\n            if (_jp.isDropSupported(this.element)) {\n                var dropOptions = params.dropOptions || _jsPlumb.Defaults.DropOptions || _jp.Defaults.DropOptions;\n                dropOptions = _jp.extend({}, dropOptions);\n                dropOptions.scope = dropOptions.scope || this.scope;\n                var dropEvent = _jp.dragEvents.drop,\n                    overEvent = _jp.dragEvents.over,\n                    outEvent = _jp.dragEvents.out,\n                    _ep = this,\n                    drop = _jsPlumb.EndpointDropHandler({\n                        getEndpoint: function () {\n                            return _ep;\n                        },\n                        jsPlumb: _jsPlumb,\n                        enabled: function () {\n                            return endpoint != null ? endpoint.isEnabled() : true;\n                        },\n                        isFull: function () {\n                            return endpoint.isFull();\n                        },\n                        element: this.element,\n                        elementId: this.elementId,\n                        isSource: this.isSource,\n                        isTarget: this.isTarget,\n                        addClass: function (clazz) {\n                            _ep.addClass(clazz);\n                        },\n                        removeClass: function (clazz) {\n                            _ep.removeClass(clazz);\n                        },\n                        isDropAllowed: function () {\n                            return _ep.isDropAllowed.apply(_ep, arguments);\n                        },\n                        reference:referenceEndpoint,\n                        isRedrop:function(jpc, dhParams) {\n                            return jpc.suspendedEndpoint && dhParams.reference && (jpc.suspendedEndpoint.id === dhParams.reference.id);\n                        }\n                    });\n                dropOptions[dropEvent] = _ju.wrap(dropOptions[dropEvent], drop, true);\n                dropOptions[overEvent] = _ju.wrap(dropOptions[overEvent], function () {\n                    var draggable = _jp.getDragObject(arguments),\n                        id = _jsPlumb.getAttribute(_jp.getElement(draggable), \"dragId\"),\n                        _jpc = _jsPlumb.getFloatingConnectionFor(id);//_jsPlumb.floatingConnections[id];\n                    if (_jpc != null) {\n                        var idx = _jsPlumb.getFloatingAnchorIndex(_jpc);\n                        // here we should fire the 'over' event if we are a target and this is a new connection,\n                        // or we are the same as the floating endpoint.\n                        var _cont = (this.isTarget && idx !== 0) || (_jpc.suspendedEndpoint && this.referenceEndpoint && this.referenceEndpoint.id === _jpc.suspendedEndpoint.id);\n                        if (_cont) {\n                            var bb = _jsPlumb.checkCondition(\"checkDropAllowed\", {\n                                sourceEndpoint: _jpc.endpoints[idx],\n                                targetEndpoint: this,\n                                connection: _jpc\n                            });\n                            this[(bb ? \"add\" : \"remove\") + \"Class\"](_jsPlumb.endpointDropAllowedClass);\n                            this[(bb ? \"remove\" : \"add\") + \"Class\"](_jsPlumb.endpointDropForbiddenClass);\n                            _jpc.endpoints[idx].anchor.over(this.anchor, this);\n                        }\n                    }\n                }.bind(this));\n                dropOptions[outEvent] = _ju.wrap(dropOptions[outEvent], function () {\n                    var draggable = _jp.getDragObject(arguments),\n                        id = draggable == null ? null : _jsPlumb.getAttribute(_jp.getElement(draggable), \"dragId\"),\n                        _jpc = id ? _jsPlumb.getFloatingConnectionFor(id) : null;\n                    if (_jpc != null) {\n                        var idx = _jsPlumb.getFloatingAnchorIndex(_jpc);\n                        var _cont = (this.isTarget && idx !== 0) || (_jpc.suspendedEndpoint && this.referenceEndpoint && this.referenceEndpoint.id === _jpc.suspendedEndpoint.id);\n                        if (_cont) {\n                            this.removeClass(_jsPlumb.endpointDropAllowedClass);\n                            this.removeClass(_jsPlumb.endpointDropForbiddenClass);\n                            _jpc.endpoints[idx].anchor.out();\n                        }\n                    }\n                }.bind(this));\n                _jsPlumb.initDroppable(canvas, dropOptions, \"internal\", isTransient);\n            }\n        }.bind(this);\n        // Initialise the endpoint's canvas as a drop target. The drop handler will take care of the logic of whether\n        // something can actually be dropped.\n        if (!this.anchor.isFloating) {\n            _initDropTarget(this.canvas, !(params._transient || this.anchor.isFloating), this, params.reference);\n        }\n        return this;\n    };\n    _ju.extend(_jp.Endpoint, _jp.OverlayCapableJsPlumbUIComponent, {\n        setVisible: function (v, doNotChangeConnections, doNotNotifyOtherEndpoint) {\n            this._jsPlumb.visible = v;\n            if (this.canvas) {\n                this.canvas.style.display = v ? \"block\" : \"none\";\n            }\n            this[v ? \"showOverlays\" : \"hideOverlays\"]();\n            if (!doNotChangeConnections) {\n                for (var i = 0; i < this.connections.length; i++) {\n                    this.connections[i].setVisible(v);\n                    if (!doNotNotifyOtherEndpoint) {\n                        var oIdx = this === this.connections[i].endpoints[0] ? 1 : 0;\n                        // only change the other endpoint if this is its only connection.\n                        if (this.connections[i].endpoints[oIdx].connections.length === 1) {\n                            this.connections[i].endpoints[oIdx].setVisible(v, true, true);\n                        }\n                    }\n                }\n            }\n        },\n        getAttachedElements: function () {\n            return this.connections;\n        },\n        applyType: function (t, doNotRepaint) {\n            this.setPaintStyle(t.endpointStyle || t.paintStyle, doNotRepaint);\n            this.setHoverPaintStyle(t.endpointHoverStyle || t.hoverPaintStyle, doNotRepaint);\n            if (t.maxConnections != null) {\n                this._jsPlumb.maxConnections = t.maxConnections;\n            }\n            if (t.scope) {\n                this.scope = t.scope;\n            }\n            _jp.extend(this, t, typeParameters);\n            if (t.cssClass != null && this.canvas) {\n                this._jsPlumb.instance.addClass(this.canvas, t.cssClass);\n            }\n            _jp.OverlayCapableJsPlumbUIComponent.applyType(this, t);\n        },\n        isEnabled: function () {\n            return this._jsPlumb.enabled;\n        },\n        setEnabled: function (e) {\n            this._jsPlumb.enabled = e;\n        },\n        cleanup: function () {\n            var anchorClass = this._jsPlumb.instance.endpointAnchorClassPrefix + (this._jsPlumb.currentAnchorClass ? \"-\" + this._jsPlumb.currentAnchorClass : \"\");\n            _jp.removeClass(this.element, anchorClass);\n            this.anchor = null;\n            this.endpoint.cleanup(true);\n            this.endpoint.destroy();\n            this.endpoint = null;\n            // drag/drop\n            this._jsPlumb.instance.destroyDraggable(this.canvas, \"internal\");\n            this._jsPlumb.instance.destroyDroppable(this.canvas, \"internal\");\n        },\n        setHover: function (h) {\n            if (this.endpoint && this._jsPlumb && !this._jsPlumb.instance.isConnectionBeingDragged()) {\n                this.endpoint.setHover(h);\n            }\n        },\n        isFull: function () {\n            return this._jsPlumb.maxConnections === 0 ? true : !(this.isFloating() || this._jsPlumb.maxConnections < 0 || this.connections.length < this._jsPlumb.maxConnections);\n        },\n        /**\n         * private but needs to be exposed.\n         */\n        isFloating: function () {\n            return this.anchor != null && this.anchor.isFloating;\n        },\n        isConnectedTo: function (endpoint) {\n            var found = false;\n            if (endpoint) {\n                for (var i = 0; i < this.connections.length; i++) {\n                    if (this.connections[i].endpoints[1] === endpoint || this.connections[i].endpoints[0] === endpoint) {\n                        found = true;\n                        break;\n                    }\n                }\n            }\n            return found;\n        },\n        getConnectionCost: function () {\n            return this._jsPlumb.connectionCost;\n        },\n        setConnectionCost: function (c) {\n            this._jsPlumb.connectionCost = c;\n        },\n        areConnectionsDirected: function () {\n            return this._jsPlumb.connectionsDirected;\n        },\n        setConnectionsDirected: function (b) {\n            this._jsPlumb.connectionsDirected = b;\n        },\n        setElementId: function (_elId) {\n            this.elementId = _elId;\n            this.anchor.elementId = _elId;\n        },\n        setReferenceElement: function (_el) {\n            this.element = _jp.getElement(_el);\n        },\n        setDragAllowedWhenFull: function (allowed) {\n            this.dragAllowedWhenFull = allowed;\n        },\n        equals: function (endpoint) {\n            return this.anchor.equals(endpoint.anchor);\n        },\n        getUuid: function () {\n            return this._jsPlumb.uuid;\n        },\n        computeAnchor: function (params) {\n            return this.anchor.compute(params);\n        }\n    });\n    root.jsPlumbInstance.prototype.EndpointDropHandler = function (dhParams) {\n        return function (e) {\n            var _jsPlumb = dhParams.jsPlumb;\n            // remove the classes that are added dynamically. drop is neither forbidden nor allowed now that\n            // the drop is finishing.\n            dhParams.removeClass(_jsPlumb.endpointDropAllowedClass);\n            dhParams.removeClass(_jsPlumb.endpointDropForbiddenClass);\n            var originalEvent = _jsPlumb.getDropEvent(arguments),\n                draggable = _jsPlumb.getDragObject(arguments),\n                id = _jsPlumb.getAttribute(draggable, \"dragId\"),\n                elId = _jsPlumb.getAttribute(draggable, \"elId\"),\n                scope = _jsPlumb.getAttribute(draggable, \"originalScope\"),\n                jpc = _jsPlumb.getFloatingConnectionFor(id);\n            // if no active connection, bail.\n            if (jpc == null) {\n                return;\n            }\n            // calculate if this is an existing connection.\n            var existingConnection = jpc.suspendedEndpoint != null;\n            // if suspended endpoint exists but has been cleaned up, bail. This means it's an existing connection\n            // that has been detached and will shortly be discarded.\n            if (existingConnection && jpc.suspendedEndpoint._jsPlumb == null) {\n                return;\n            }\n            // get the drop endpoint. for a normal connection this is just the one that would replace the currently\n            // floating endpoint. for a makeTarget this is a new endpoint that is created on drop. But we leave that to\n            // the handler to figure out.\n            var _ep = dhParams.getEndpoint(jpc);\n            // If we're not given an endpoint to use, bail.\n            if (_ep == null) {\n                return;\n            }\n            // if this is a drop back where the connection came from, mark it force reattach and\n            // return; the stop handler will reattach. without firing an event.\n            if (dhParams.isRedrop(jpc, dhParams)) {\n                jpc._forceReattach = true;\n                jpc.setHover(false);\n                if (dhParams.maybeCleanup) {\n                    dhParams.maybeCleanup(_ep);\n                }\n                return;\n            }\n            // ensure we dont bother trying to drop sources on non-source eps, and same for target.\n            var idx = _jsPlumb.getFloatingAnchorIndex(jpc);\n            if ((idx === 0 && !dhParams.isSource)|| (idx === 1 && !dhParams.isTarget)){\n                if (dhParams.maybeCleanup) {\n                    dhParams.maybeCleanup(_ep);\n                }\n                return;\n            }\n            if (dhParams.onDrop) {\n                dhParams.onDrop(jpc);\n            }\n            // restore the original scope if necessary (issue 57)\n            if (scope) {\n                _jsPlumb.setDragScope(draggable, scope);\n            }\n            // if the target of the drop is full, fire an event (we abort below)\n            // makeTarget: keep.\n            var isFull = dhParams.isFull(e);\n            if (isFull) {\n                _ep.fire(\"maxConnections\", {\n                    endpoint: this,\n                    connection: jpc,\n                    maxConnections: _ep._jsPlumb.maxConnections\n                }, originalEvent);\n            }\n            //\n            // if endpoint enabled, not full, and matches the index of the floating endpoint...\n            if (!isFull &&  dhParams.enabled()) {\n                var _doContinue = true;\n                // before testing for beforeDrop, reset the connection's source/target to be the actual DOM elements\n                // involved (that is, stash any temporary stuff used for dragging. but we need to keep it around in\n                // order that the anchor manager can clean things up properly).\n                if (idx === 0) {\n                    jpc.floatingElement = jpc.source;\n                    jpc.floatingId = jpc.sourceId;\n                    jpc.floatingEndpoint = jpc.endpoints[0];\n                    jpc.floatingIndex = 0;\n                    jpc.source = dhParams.element;\n                    jpc.sourceId = _jsPlumb.getId(dhParams.element);\n                } else {\n                    jpc.floatingElement = jpc.target;\n                    jpc.floatingId = jpc.targetId;\n                    jpc.floatingEndpoint = jpc.endpoints[1];\n                    jpc.floatingIndex = 1;\n                    jpc.target = dhParams.element;\n                    jpc.targetId = _jsPlumb.getId(dhParams.element);\n                }\n                // if this is an existing connection and detach is not allowed we won't continue. The connection's\n                // endpoints have been reinstated; everything is back to how it was.\n                if (existingConnection && jpc.suspendedEndpoint.id !== _ep.id) {\n                    if (!jpc.isDetachAllowed(jpc) || !jpc.endpoints[idx].isDetachAllowed(jpc) || !jpc.suspendedEndpoint.isDetachAllowed(jpc) || !_jsPlumb.checkCondition(\"beforeDetach\", jpc)) {\n                        _doContinue = false;\n                    }\n                }\n// ------------ wrap the execution path in a function so we can support asynchronous beforeDrop\n                var continueFunction = function (optionalData) {\n                    // remove this jpc from the current endpoint, which is a floating endpoint that we will\n                    // subsequently discard.\n                    jpc.endpoints[idx].detachFromConnection(jpc);\n                    // if there's a suspended endpoint, detach it from the connection.\n                    if (jpc.suspendedEndpoint) {\n                        jpc.suspendedEndpoint.detachFromConnection(jpc);\n                    }\n                    jpc.endpoints[idx] = _ep;\n                    _ep.addConnection(jpc);\n                    // copy our parameters in to the connection:\n                    var params = _ep.getParameters();\n                    for (var aParam in params) {\n                        jpc.setParameter(aParam, params[aParam]);\n                    }\n                    if (!existingConnection) {\n                        // if not an existing connection and\n                        if (params.draggable) {\n                            _jsPlumb.initDraggable(this.element, dhParams.dragOptions, \"internal\", _jsPlumb);\n                        }\n                    }\n                    else {\n                        var suspendedElementId = jpc.suspendedEndpoint.elementId;\n                        _jsPlumb.fireMoveEvent({\n                            index: idx,\n                            originalSourceId: idx === 0 ? suspendedElementId : jpc.sourceId,\n                            newSourceId: idx === 0 ? _ep.elementId : jpc.sourceId,\n                            originalTargetId: idx === 1 ? suspendedElementId : jpc.targetId,\n                            newTargetId: idx === 1 ? _ep.elementId : jpc.targetId,\n                            originalSourceEndpoint: idx === 0 ? jpc.suspendedEndpoint : jpc.endpoints[0],\n                            newSourceEndpoint: idx === 0 ? _ep : jpc.endpoints[0],\n                            originalTargetEndpoint: idx === 1 ? jpc.suspendedEndpoint : jpc.endpoints[1],\n                            newTargetEndpoint: idx === 1 ? _ep : jpc.endpoints[1],\n                            connection: jpc\n                        }, originalEvent);\n                    }\n                    if (idx === 1) {\n                        _jsPlumb.router.sourceOrTargetChanged(jpc.floatingId, jpc.targetId, jpc, jpc.target, 1);\n                    }\n                    else {\n                        _jsPlumb.router.sourceOrTargetChanged(jpc.floatingId, jpc.sourceId, jpc, jpc.source, 0);\n                    }\n                    // when makeSource has uniqueEndpoint:true, we want to create connections with new endpoints\n                    // that are subsequently deleted. So makeSource sets `finalEndpoint`, which is the Endpoint to\n                    // which the connection should be attached. The `detachFromConnection` call below results in the\n                    // temporary endpoint being cleaned up.\n                    if (jpc.endpoints[0].finalEndpoint) {\n                        var _toDelete = jpc.endpoints[0];\n                        _toDelete.detachFromConnection(jpc);\n                        jpc.endpoints[0] = jpc.endpoints[0].finalEndpoint;\n                        jpc.endpoints[0].addConnection(jpc);\n                    }\n                    // if optionalData was given, merge it onto the connection's data.\n                    if (_ju.isObject(optionalData)) {\n                        jpc.mergeData(optionalData);\n                    }\n                    // finalise will inform the anchor manager and also add to\n                    // connectionsByScope if necessary.\n                    _jsPlumb.finaliseConnection(jpc, null, originalEvent, false);\n                    jpc.setHover(false);\n                    // SP continuous anchor flush\n                    _jsPlumb.revalidate(jpc.endpoints[0].element);\n                }.bind(this);\n                var dontContinueFunction = function () {\n                    // otherwise just put it back on the endpoint it was on before the drag.\n                    if (jpc.suspendedEndpoint) {\n                        jpc.endpoints[idx] = jpc.suspendedEndpoint;\n                        jpc.setHover(false);\n                        jpc._forceDetach = true;\n                        if (idx === 0) {\n                            jpc.source = jpc.suspendedEndpoint.element;\n                            jpc.sourceId = jpc.suspendedEndpoint.elementId;\n                        } else {\n                            jpc.target = jpc.suspendedEndpoint.element;\n                            jpc.targetId = jpc.suspendedEndpoint.elementId;\n                        }\n                        jpc.suspendedEndpoint.addConnection(jpc);\n                        // TODO checkSanity\n                        if (idx === 1) {\n                            _jsPlumb.router.sourceOrTargetChanged(jpc.floatingId, jpc.targetId, jpc, jpc.target, 1);\n                        }\n                        else {\n                            _jsPlumb.router.sourceOrTargetChanged(jpc.floatingId, jpc.sourceId, jpc, jpc.source, 0);\n                        }\n                        _jsPlumb.repaint(jpc.sourceId);\n                        jpc._forceDetach = false;\n                    }\n                };\n// --------------------------------------\n                // now check beforeDrop.  this will be available only on Endpoints that are setup to\n                // have a beforeDrop condition (although, secretly, under the hood all Endpoints and\n                // the Connection have them, because they are on jsPlumbUIComponent.  shhh!), because\n                // it only makes sense to have it on a target endpoint.\n                _doContinue = _doContinue && dhParams.isDropAllowed(jpc.sourceId, jpc.targetId, jpc.scope, jpc, _ep);// && jpc.pending;\n                if (_doContinue) {\n                    continueFunction(_doContinue);\n                    return true;\n                }\n                else {\n                    dontContinueFunction();\n                }\n            }\n            if (dhParams.maybeCleanup) {\n                dhParams.maybeCleanup(_ep);\n            }\n            _jsPlumb.currentlyDragging = false;\n        };\n    };\n}).call(typeof window !== 'undefined' ? window : this);\n/*\n * This file contains the code for Connections.\n *\n * Copyright (c) 2010 - 2020 jsPlumb (hello@jsplumbtoolkit.com)\n *\n * https://jsplumbtoolkit.com\n * https://github.com/jsplumb/jsplumb\n *\n * Dual licensed under the MIT and GPL2 licenses.\n */\n;\n(function () {\n    \"use strict\";\n    var root = this,\n        _jp = root.jsPlumb,\n        _ju = root.jsPlumbUtil;\n    var makeConnector = function (_jsPlumb, renderMode, connectorName, connectorArgs, forComponent) {\n            // first make sure we have a cache for the specified renderer\n            _jp.Connectors[renderMode] = _jp.Connectors[renderMode] || {};\n            // now see if the one we want exists; if not we will try to make it\n            if (_jp.Connectors[renderMode][connectorName] == null) {\n                if (_jp.Connectors[connectorName] == null) {\n                    if (!_jsPlumb.Defaults.DoNotThrowErrors) {\n                        throw new TypeError(\"jsPlumb: unknown connector type '\" + connectorName + \"'\");\n                    } else {\n                        return null;\n                    }\n                }\n                _jp.Connectors[renderMode][connectorName] = function() {\n                    _jp.Connectors[connectorName].apply(this, arguments);\n                    _jp.ConnectorRenderers[renderMode].apply(this, arguments);\n                };\n                _ju.extend(_jp.Connectors[renderMode][connectorName], [ _jp.Connectors[connectorName], _jp.ConnectorRenderers[renderMode]]);\n            }\n            return new _jp.Connectors[renderMode][connectorName](connectorArgs, forComponent);\n        },\n        _makeAnchor = function (anchorParams, elementId, _jsPlumb) {\n            return (anchorParams) ? _jsPlumb.makeAnchor(anchorParams, elementId, _jsPlumb) : null;\n        },\n        _updateConnectedClass = function (conn, element, _jsPlumb, remove) {\n            if (element != null) {\n                element._jsPlumbConnections = element._jsPlumbConnections || {};\n                if (remove) {\n                    delete element._jsPlumbConnections[conn.id];\n                }\n                else {\n                    element._jsPlumbConnections[conn.id] = true;\n                }\n                if (_ju.isEmpty(element._jsPlumbConnections)) {\n                    _jsPlumb.removeClass(element, _jsPlumb.connectedClass);\n                }\n                else {\n                    _jsPlumb.addClass(element, _jsPlumb.connectedClass);\n                }\n            }\n        };\n    _jp.Connection = function (params) {\n        var _newEndpoint = params.newEndpoint;\n        this.id = params.id;\n        this.connector = null;\n        this.idPrefix = \"_jsplumb_c_\";\n        this.defaultLabelLocation = 0.5;\n        this.defaultOverlayKeys = [\"Overlays\", \"ConnectionOverlays\"];\n        // if a new connection is the result of moving some existing connection, params.previousConnection\n        // will have that Connection in it. listeners for the jsPlumbConnection event can look for that\n        // member and take action if they need to.\n        this.previousConnection = params.previousConnection;\n        this.source = _jp.getElement(params.source);\n        this.target = _jp.getElement(params.target);\n        _jp.OverlayCapableJsPlumbUIComponent.apply(this, arguments);\n        // sourceEndpoint and targetEndpoint override source/target, if they are present. but \n        // source is not overridden if the Endpoint has declared it is not the final target of a connection;\n        // instead we use the source that the Endpoint declares will be the final source element.\n        if (params.sourceEndpoint) {\n            this.source = params.sourceEndpoint.getElement();\n            this.sourceId = params.sourceEndpoint.elementId;\n        } else {\n            this.sourceId = this._jsPlumb.instance.getId(this.source);\n        }\n        if (params.targetEndpoint) {\n            this.target = params.targetEndpoint.getElement();\n            this.targetId = params.targetEndpoint.elementId;\n        } else {\n            this.targetId = this._jsPlumb.instance.getId(this.target);\n        }\n        this.scope = params.scope; // scope may have been passed in to the connect call. if it wasn't, we will pull it from the source endpoint, after having initialised the endpoints.            \n        this.endpoints = [];\n        this.endpointStyles = [];\n        var _jsPlumb = this._jsPlumb.instance;\n        _jsPlumb.manage(this.sourceId, this.source);\n        _jsPlumb.manage(this.targetId, this.target);\n        this._jsPlumb.visible = true;\n        this._jsPlumb.params = {\n            cssClass: params.cssClass,\n            container: params.container,\n            \"pointer-events\": params[\"pointer-events\"],\n            editorParams: params.editorParams,\n            overlays: params.overlays\n        };\n        this._jsPlumb.lastPaintedAt = null;\n        // listen to mouseover and mouseout events passed from the container delegate.\n        this.bind(\"mouseover\", function () {\n            this.setHover(true);\n        }.bind(this));\n        this.bind(\"mouseout\", function () {\n            this.setHover(false);\n        }.bind(this));\n// INITIALISATION CODE\n        this.makeEndpoint = function (isSource, el, elId, ep, definition) {\n            elId = elId || this._jsPlumb.instance.getId(el);\n            return this.prepareEndpoint(_jsPlumb, _newEndpoint, this, ep, isSource ? 0 : 1, params, el, elId, definition);\n        };\n        // if type given, get the endpoint definitions mapping to that type from the jsplumb instance, and use those.\n        // we apply types at the end of this constructor but endpoints are only honoured in a type definition at\n        // create time.\n        if (params.type) {\n            params.endpoints = params.endpoints || this._jsPlumb.instance.deriveEndpointAndAnchorSpec(params.type).endpoints;\n        }\n        var eS = this.makeEndpoint(true, this.source, this.sourceId, params.sourceEndpoint),\n            eT = this.makeEndpoint(false, this.target, this.targetId, params.targetEndpoint);\n        if (eS) {\n            _ju.addToList(params.endpointsByElement, this.sourceId, eS);\n        }\n        if (eT) {\n            _ju.addToList(params.endpointsByElement, this.targetId, eT);\n        }\n        // if scope not set, set it to be the scope for the source endpoint.\n        if (!this.scope) {\n            this.scope = this.endpoints[0].scope;\n        }\n        // if explicitly told to (or not to) delete endpoints when empty, override endpoint's preferences\n        if (params.deleteEndpointsOnEmpty != null) {\n            this.endpoints[0].setDeleteOnEmpty(params.deleteEndpointsOnEmpty);\n            this.endpoints[1].setDeleteOnEmpty(params.deleteEndpointsOnEmpty);\n        }\n// -------------------------- DEFAULT TYPE ---------------------------------------------\n        // DETACHABLE\n        var _detachable = _jsPlumb.Defaults.ConnectionsDetachable;\n        if (params.detachable === false) {\n            _detachable = false;\n        }\n        if (this.endpoints[0].connectionsDetachable === false) {\n            _detachable = false;\n        }\n        if (this.endpoints[1].connectionsDetachable === false) {\n            _detachable = false;\n        }\n        // REATTACH\n        var _reattach = params.reattach || this.endpoints[0].reattachConnections || this.endpoints[1].reattachConnections || _jsPlumb.Defaults.ReattachConnections;\n        this.appendToDefaultType({\n            detachable: _detachable,\n            reattach: _reattach,\n            paintStyle:this.endpoints[0].connectorStyle || this.endpoints[1].connectorStyle || params.paintStyle || _jsPlumb.Defaults.PaintStyle || _jp.Defaults.PaintStyle,\n            hoverPaintStyle:this.endpoints[0].connectorHoverStyle || this.endpoints[1].connectorHoverStyle || params.hoverPaintStyle || _jsPlumb.Defaults.HoverPaintStyle || _jp.Defaults.HoverPaintStyle\n        });\n        var _suspendedAt = _jsPlumb.getSuspendedAt();\n        if (!_jsPlumb.isSuspendDrawing()) {\n            // paint the endpoints\n            var myInfo = _jsPlumb.getCachedData(this.sourceId),\n                myOffset = myInfo.o, myWH = myInfo.s,\n                otherInfo = _jsPlumb.getCachedData(this.targetId),\n                otherOffset = otherInfo.o,\n                otherWH = otherInfo.s,\n                initialTimestamp = _suspendedAt || jsPlumbUtil.uuid(),\n                anchorLoc = this.endpoints[0].anchor.compute({\n                    xy: [ myOffset.left, myOffset.top ], wh: myWH, element: this.endpoints[0],\n                    elementId: this.endpoints[0].elementId,\n                    txy: [ otherOffset.left, otherOffset.top ], twh: otherWH, tElement: this.endpoints[1],\n                    timestamp: initialTimestamp,\n                    rotation:_jsPlumb.getRotation(this.endpoints[0].elementId)\n                });\n            this.endpoints[0].paint({ anchorLoc: anchorLoc, timestamp: initialTimestamp });\n            anchorLoc = this.endpoints[1].anchor.compute({\n                xy: [ otherOffset.left, otherOffset.top ], wh: otherWH, element: this.endpoints[1],\n                elementId: this.endpoints[1].elementId,\n                txy: [ myOffset.left, myOffset.top ], twh: myWH, tElement: this.endpoints[0],\n                timestamp: initialTimestamp,\n                rotation:_jsPlumb.getRotation(this.endpoints[1].elementId)\n            });\n            this.endpoints[1].paint({ anchorLoc: anchorLoc, timestamp: initialTimestamp });\n        }\n        this.getTypeDescriptor = function () {\n            return \"connection\";\n        };\n        this.getAttachedElements = function () {\n            return this.endpoints;\n        };\n        this.isDetachable = function (ep) {\n            return this._jsPlumb.detachable === false ? false : ep != null ? ep.connectionsDetachable === true : this._jsPlumb.detachable === true;\n        };\n        this.setDetachable = function (detachable) {\n            this._jsPlumb.detachable = detachable === true;\n        };\n        this.isReattach = function () {\n            return this._jsPlumb.reattach === true || this.endpoints[0].reattachConnections === true || this.endpoints[1].reattachConnections === true;\n        };\n        this.setReattach = function (reattach) {\n            this._jsPlumb.reattach = reattach === true;\n        };\n// END INITIALISATION CODE\n// COST + DIRECTIONALITY\n        // if cost not supplied, try to inherit from source endpoint\n        this._jsPlumb.cost = params.cost || this.endpoints[0].getConnectionCost();\n        this._jsPlumb.directed = params.directed;\n        // inherit directed flag if set no source endpoint\n        if (params.directed == null) {\n            this._jsPlumb.directed = this.endpoints[0].areConnectionsDirected();\n        }\n// END COST + DIRECTIONALITY\n// PARAMETERS\n        // merge all the parameters objects into the connection.  parameters set\n        // on the connection take precedence; then source endpoint params, then\n        // finally target endpoint params.\n        var _p = _jp.extend({}, this.endpoints[1].getParameters());\n        _jp.extend(_p, this.endpoints[0].getParameters());\n        _jp.extend(_p, this.getParameters());\n        this.setParameters(_p);\n// END PARAMETERS\n// PAINTING\n        this.setConnector(this.endpoints[0].connector || this.endpoints[1].connector || params.connector || _jsPlumb.Defaults.Connector || _jp.Defaults.Connector, true);\n        var data = params.data == null || !_ju.isObject(params.data) ? {} : params.data;\n        this.getData = function() { return data; };\n        this.setData = function(d) { data = d || {}; };\n        this.mergeData = function(d) { data = _jp.extend(data, d); };\n        // the very last thing we do is apply types, if there are any.\n        var _types = [ \"default\", this.endpoints[0].connectionType, this.endpoints[1].connectionType,  params.type ].join(\" \");\n        if (/[^\\s]/.test(_types)) {\n            this.addType(_types, params.data, true);\n        }\n        this.updateConnectedClass();\n// END PAINTING    \n    };\n    _ju.extend(_jp.Connection, _jp.OverlayCapableJsPlumbUIComponent, {\n        applyType: function (t, doNotRepaint, typeMap) {\n            var _connector = null;\n            if (t.connector != null) {\n                _connector = this.getCachedTypeItem(\"connector\", typeMap.connector);\n                if (_connector == null) {\n                    _connector = this.prepareConnector(t.connector, typeMap.connector);\n                    this.cacheTypeItem(\"connector\", _connector, typeMap.connector);\n                }\n                this.setPreparedConnector(_connector);\n            }\n            // none of these things result in the creation of objects so can be ignored.\n            if (t.detachable != null) {\n                this.setDetachable(t.detachable);\n            }\n            if (t.reattach != null) {\n                this.setReattach(t.reattach);\n            }\n            if (t.scope) {\n                this.scope = t.scope;\n            }\n            if (t.cssClass != null && this.canvas) {\n                this._jsPlumb.instance.addClass(this.canvas, t.cssClass);\n            }\n            var _anchors = null;\n            // this also results in the creation of objects.\n            if (t.anchor) {\n                // note that even if the param was anchor, we store `anchors`.\n                _anchors = this.getCachedTypeItem(\"anchors\", typeMap.anchor);\n                if (_anchors == null) {\n                    _anchors = [ this._jsPlumb.instance.makeAnchor(t.anchor), this._jsPlumb.instance.makeAnchor(t.anchor) ];\n                    this.cacheTypeItem(\"anchors\", _anchors, typeMap.anchor);\n                }\n            }\n            else if (t.anchors) {\n                _anchors = this.getCachedTypeItem(\"anchors\", typeMap.anchors);\n                if (_anchors == null) {\n                    _anchors = [\n                        this._jsPlumb.instance.makeAnchor(t.anchors[0]),\n                        this._jsPlumb.instance.makeAnchor(t.anchors[1])\n                    ];\n                    this.cacheTypeItem(\"anchors\", _anchors, typeMap.anchors);\n                }\n            }\n            if (_anchors != null) {\n                this.endpoints[0].anchor = _anchors[0];\n                this.endpoints[1].anchor = _anchors[1];\n                if (this.endpoints[1].anchor.isDynamic) {\n                    this._jsPlumb.instance.repaint(this.endpoints[1].elementId);\n                }\n            }\n            _jp.OverlayCapableJsPlumbUIComponent.applyType(this, t);\n        },\n        addClass: function (c, informEndpoints) {\n            if (informEndpoints) {\n                this.endpoints[0].addClass(c);\n                this.endpoints[1].addClass(c);\n                if (this.suspendedEndpoint) {\n                    this.suspendedEndpoint.addClass(c);\n                }\n            }\n            if (this.connector) {\n                this.connector.addClass(c);\n            }\n        },\n        removeClass: function (c, informEndpoints) {\n            if (informEndpoints) {\n                this.endpoints[0].removeClass(c);\n                this.endpoints[1].removeClass(c);\n                if (this.suspendedEndpoint) {\n                    this.suspendedEndpoint.removeClass(c);\n                }\n            }\n            if (this.connector) {\n                this.connector.removeClass(c);\n            }\n        },\n        isVisible: function () {\n            return this._jsPlumb.visible;\n        },\n        setVisible: function (v) {\n            this._jsPlumb.visible = v;\n            if (this.connector) {\n                this.connector.setVisible(v);\n            }\n            this.repaint();\n        },\n        cleanup: function () {\n            this.updateConnectedClass(true);\n            this.endpoints = null;\n            this.source = null;\n            this.target = null;\n            if (this.connector != null) {\n                this.connector.cleanup(true);\n                this.connector.destroy(true);\n            }\n            this.connector = null;\n        },\n        updateConnectedClass:function(remove) {\n            if (this._jsPlumb) {\n                _updateConnectedClass(this, this.source, this._jsPlumb.instance, remove);\n                _updateConnectedClass(this, this.target, this._jsPlumb.instance, remove);\n            }\n        },\n        setHover: function (state) {\n            if (this.connector && this._jsPlumb && !this._jsPlumb.instance.isConnectionBeingDragged()) {\n                this.connector.setHover(state);\n                root.jsPlumb[state ? \"addClass\" : \"removeClass\"](this.source, this._jsPlumb.instance.hoverSourceClass);\n                root.jsPlumb[state ? \"addClass\" : \"removeClass\"](this.target, this._jsPlumb.instance.hoverTargetClass);\n            }\n        },\n        getUuids:function() {\n            return [ this.endpoints[0].getUuid(), this.endpoints[1].getUuid() ];\n        },\n        getCost: function () {\n            return this._jsPlumb ? this._jsPlumb.cost : -Infinity;\n        },\n        setCost: function (c) {\n            this._jsPlumb.cost = c;\n        },\n        isDirected: function () {\n            return this._jsPlumb.directed;\n        },\n        getConnector: function () {\n            return this.connector;\n        },\n        prepareConnector:function(connectorSpec, typeId) {\n            var connectorArgs = {\n                    _jsPlumb: this._jsPlumb.instance,\n                    cssClass: this._jsPlumb.params.cssClass,\n                    container: this._jsPlumb.params.container,\n                    \"pointer-events\": this._jsPlumb.params[\"pointer-events\"]\n                },\n                renderMode = this._jsPlumb.instance.getRenderMode(),\n                connector;\n            if (_ju.isString(connectorSpec)) {\n                connector = makeConnector(this._jsPlumb.instance, renderMode, connectorSpec, connectorArgs, this);\n            } // lets you use a string as shorthand.\n            else if (_ju.isArray(connectorSpec)) {\n                if (connectorSpec.length === 1) {\n                    connector = makeConnector(this._jsPlumb.instance, renderMode, connectorSpec[0], connectorArgs, this);\n                }\n                else {\n                    connector = makeConnector(this._jsPlumb.instance, renderMode, connectorSpec[0], _ju.merge(connectorSpec[1], connectorArgs), this);\n                }\n            }\n            if (typeId != null) {\n                connector.typeId = typeId;\n            }\n            return connector;\n        },\n        setPreparedConnector: function(connector, doNotRepaint, doNotChangeListenerComponent, typeId) {\n            if (this.connector !== connector) {\n                var previous, previousClasses = \"\";\n                // the connector will not be cleaned up if it was set as part of a type, because `typeId` will be set on it\n                // and we havent passed in `true` for \"force\" here.\n                if (this.connector != null) {\n                    previous = this.connector;\n                    previousClasses = previous.getClass();\n                    this.connector.cleanup();\n                    this.connector.destroy();\n                }\n                this.connector = connector;\n                if (typeId) {\n                    this.cacheTypeItem(\"connector\", connector, typeId);\n                }\n                this.canvas = this.connector.canvas;\n                this.bgCanvas = this.connector.bgCanvas;\n                this.connector.reattach(this._jsPlumb.instance);\n                // put classes from prior connector onto the canvas\n                this.addClass(previousClasses);\n                // new: instead of binding listeners per connector, we now just have one delegate on the container.\n                // so for that handler we set the connection as the '_jsPlumb' member of the canvas element, and\n                // bgCanvas, if it exists, which it does right now in the VML renderer, so it won't from v 2.0.0 onwards.\n                if (this.canvas) {\n                    this.canvas._jsPlumb = this;\n                }\n                if (this.bgCanvas) {\n                    this.bgCanvas._jsPlumb = this;\n                }\n                if (previous != null) {\n                    var o = this.getOverlays();\n                    for (var i = 0; i < o.length; i++) {\n                        if (o[i].transfer) {\n                            o[i].transfer(this.connector);\n                        }\n                    }\n                }\n                if (!doNotChangeListenerComponent) {\n                    this.setListenerComponent(this.connector);\n                }\n                if (!doNotRepaint) {\n                    this.repaint();\n                }\n            }\n        },\n        setConnector: function (connectorSpec, doNotRepaint, doNotChangeListenerComponent, typeId) {\n            var connector = this.prepareConnector(connectorSpec, typeId);\n            this.setPreparedConnector(connector, doNotRepaint, doNotChangeListenerComponent, typeId);\n        },\n        paint: function (params) {\n            if (!this._jsPlumb.instance.isSuspendDrawing() && this._jsPlumb.visible) {\n                params = params || {};\n                var timestamp = params.timestamp,\n                // if the moving object is not the source we must transpose the two references.\n                    swap = false,\n                    tId = swap ? this.sourceId : this.targetId, sId = swap ? this.targetId : this.sourceId,\n                    tIdx = swap ? 0 : 1, sIdx = swap ? 1 : 0;\n                if (timestamp == null || timestamp !== this._jsPlumb.lastPaintedAt) {\n                    var sourceInfo = this._jsPlumb.instance.updateOffset({elId:sId}).o,\n                        targetInfo = this._jsPlumb.instance.updateOffset({elId:tId}).o,\n                        sE = this.endpoints[sIdx], tE = this.endpoints[tIdx];\n                    var sAnchorP = sE.anchor.getCurrentLocation(\n                        {\n                            xy: [sourceInfo.left, sourceInfo.top],\n                            wh: [sourceInfo.width, sourceInfo.height],\n                            element: sE,\n                            timestamp: timestamp,\n                            rotation:this._jsPlumb.instance.getRotation(this.sourceId)\n                        }),\n                        tAnchorP = tE.anchor.getCurrentLocation({\n                            xy: [targetInfo.left, targetInfo.top],\n                            wh: [targetInfo.width, targetInfo.height],\n                            element: tE,\n                            timestamp: timestamp,\n                            rotation:this._jsPlumb.instance.getRotation(this.targetId)\n                        });\n                    this.connector.resetBounds();\n                    this.connector.compute({\n                        sourcePos: sAnchorP,\n                        targetPos: tAnchorP,\n                        sourceOrientation:sE.anchor.getOrientation(sE),\n                        targetOrientation:tE.anchor.getOrientation(tE),\n                        sourceEndpoint: this.endpoints[sIdx],\n                        targetEndpoint: this.endpoints[tIdx],\n                        \"stroke-width\": this._jsPlumb.paintStyleInUse.strokeWidth,\n                        sourceInfo: sourceInfo,\n                        targetInfo: targetInfo\n                    });\n                    var overlayExtents = { minX: Infinity, minY: Infinity, maxX: -Infinity, maxY: -Infinity };\n                    // compute overlays. we do this first so we can get their placements, and adjust the\n                    // container if needs be (if an overlay would be clipped)\n                    for (var i in this._jsPlumb.overlays) {\n                        if (this._jsPlumb.overlays.hasOwnProperty(i)) {\n                            var o = this._jsPlumb.overlays[i];\n                            if (o.isVisible()) {\n                                this._jsPlumb.overlayPlacements[i] = o.draw(this.connector, this._jsPlumb.paintStyleInUse, this.getAbsoluteOverlayPosition(o));\n                                overlayExtents.minX = Math.min(overlayExtents.minX, this._jsPlumb.overlayPlacements[i].minX);\n                                overlayExtents.maxX = Math.max(overlayExtents.maxX, this._jsPlumb.overlayPlacements[i].maxX);\n                                overlayExtents.minY = Math.min(overlayExtents.minY, this._jsPlumb.overlayPlacements[i].minY);\n                                overlayExtents.maxY = Math.max(overlayExtents.maxY, this._jsPlumb.overlayPlacements[i].maxY);\n                            }\n                        }\n                    }\n                    var lineWidth = parseFloat(this._jsPlumb.paintStyleInUse.strokeWidth || 1) / 2,\n                        outlineWidth = parseFloat(this._jsPlumb.paintStyleInUse.strokeWidth || 0),\n                        extents = {\n                            xmin: Math.min(this.connector.bounds.minX - (lineWidth + outlineWidth), overlayExtents.minX),\n                            ymin: Math.min(this.connector.bounds.minY - (lineWidth + outlineWidth), overlayExtents.minY),\n                            xmax: Math.max(this.connector.bounds.maxX + (lineWidth + outlineWidth), overlayExtents.maxX),\n                            ymax: Math.max(this.connector.bounds.maxY + (lineWidth + outlineWidth), overlayExtents.maxY)\n                        };\n                    // paint the connector.\n                    this.connector.paintExtents = extents;\n                    this.connector.paint(this._jsPlumb.paintStyleInUse, null, extents);\n                    // and then the overlays\n                    for (var j in this._jsPlumb.overlays) {\n                        if (this._jsPlumb.overlays.hasOwnProperty(j)) {\n                            var p = this._jsPlumb.overlays[j];\n                            if (p.isVisible()) {\n                                p.paint(this._jsPlumb.overlayPlacements[j], extents);\n                            }\n                        }\n                    }\n                }\n                this._jsPlumb.lastPaintedAt = timestamp;\n            }\n        },\n        repaint: function (params) {\n            var p = jsPlumb.extend(params || {}, {});\n            p.elId = this.sourceId;\n            this.paint(p);\n        },\n        prepareEndpoint: function (_jsPlumb, _newEndpoint, conn, existing, index, params, element, elementId, definition) {\n            var e;\n            if (existing) {\n                conn.endpoints[index] = existing;\n                existing.addConnection(conn);\n            } else {\n                if (!params.endpoints) {\n                    params.endpoints = [ null, null ];\n                }\n                var ep = definition || params.endpoints[index] || params.endpoint || _jsPlumb.Defaults.Endpoints[index] || _jp.Defaults.Endpoints[index] || _jsPlumb.Defaults.Endpoint || _jp.Defaults.Endpoint;\n                if (!params.endpointStyles) {\n                    params.endpointStyles = [ null, null ];\n                }\n                if (!params.endpointHoverStyles) {\n                    params.endpointHoverStyles = [ null, null ];\n                }\n                var es = params.endpointStyles[index] || params.endpointStyle || _jsPlumb.Defaults.EndpointStyles[index] || _jp.Defaults.EndpointStyles[index] || _jsPlumb.Defaults.EndpointStyle || _jp.Defaults.EndpointStyle;\n                // Endpoints derive their fill from the connector's stroke, if no fill was specified.\n                if (es.fill == null && params.paintStyle != null) {\n                    es.fill = params.paintStyle.stroke;\n                }\n                if (es.outlineStroke == null && params.paintStyle != null) {\n                    es.outlineStroke = params.paintStyle.outlineStroke;\n                }\n                if (es.outlineWidth == null && params.paintStyle != null) {\n                    es.outlineWidth = params.paintStyle.outlineWidth;\n                }\n                var ehs = params.endpointHoverStyles[index] || params.endpointHoverStyle || _jsPlumb.Defaults.EndpointHoverStyles[index] || _jp.Defaults.EndpointHoverStyles[index] || _jsPlumb.Defaults.EndpointHoverStyle || _jp.Defaults.EndpointHoverStyle;\n                // endpoint hover fill style is derived from connector's hover stroke style\n                if (params.hoverPaintStyle != null) {\n                    if (ehs == null) {\n                        ehs = {};\n                    }\n                    if (ehs.fill == null) {\n                        ehs.fill = params.hoverPaintStyle.stroke;\n                    }\n                }\n                var a = params.anchors ? params.anchors[index] :\n                        params.anchor ? params.anchor :\n                            _makeAnchor(_jsPlumb.Defaults.Anchors[index], elementId, _jsPlumb) ||\n                            _makeAnchor(_jp.Defaults.Anchors[index], elementId, _jsPlumb) ||\n                            _makeAnchor(_jsPlumb.Defaults.Anchor, elementId, _jsPlumb) ||\n                            _makeAnchor(_jp.Defaults.Anchor, elementId, _jsPlumb),\n                    u = params.uuids ? params.uuids[index] : null;\n                e = _newEndpoint({\n                    paintStyle: es, hoverPaintStyle: ehs, endpoint: ep, connections: [ conn ],\n                    uuid: u, anchor: a, source: element, scope: params.scope,\n                    reattach: params.reattach || _jsPlumb.Defaults.ReattachConnections,\n                    detachable: params.detachable || _jsPlumb.Defaults.ConnectionsDetachable\n                });\n                if (existing == null) {\n                    e.setDeleteOnEmpty(true);\n                }\n                conn.endpoints[index] = e;\n                if (params.drawEndpoints === false) {\n                    e.setVisible(false, true, true);\n                }\n            }\n            return e;\n        },\n        replaceEndpoint:function(idx, endpointDef) {\n            var current = this.endpoints[idx],\n                elId = current.elementId,\n                ebe = this._jsPlumb.instance.getEndpoints(elId),\n                _idx = ebe.indexOf(current),\n                _new = this.makeEndpoint(idx === 0, current.element, elId, null, endpointDef);\n            this.endpoints[idx] = _new;\n            ebe.splice(_idx, 1, _new);\n            this._jsPlumb.instance.deleteObject({endpoint:current, deleteAttachedObjects:false});\n            this._jsPlumb.instance.fire(\"endpointReplaced\", {previous:current, current:_new});\n            this._jsPlumb.instance.router.sourceOrTargetChanged(this.endpoints[1].elementId, this.endpoints[1].elementId, this, this.endpoints[1].element, 1);\n        }\n    }); // END Connection class            \n}).call(typeof window !== 'undefined' ? window : this);\n/*\n * This file contains the code for creating and manipulating anchors.\n *\n * Copyright (c) 2010 - 2020 jsPlumb (hello@jsplumbtoolkit.com)\n *\n * https://jsplumbtoolkit.com\n * https://github.com/jsplumb/jsplumb\n *\n * Dual licensed under the MIT and GPL2 licenses.\n */\n;\n(function () {\n    \"use strict\";\n    var root = this,\n        _ju = root.jsPlumbUtil,\n        _jp = root.jsPlumb;\n    //\n    // manages anchors for all elements.\n    //\n    _jp.AnchorManager = function (params) {\n        var _amEndpoints = {},\n            continuousAnchorLocations = {},\n            continuousAnchorOrientations = {},\n            connectionsByElementId = {},\n            self = this,\n            anchorLists = {},\n            jsPlumbInstance = params.jsPlumbInstance,\n            floatingConnections = {},\n            // used by placeAnchors function\n            placeAnchorsOnLine = function (desc, elementDimensions, elementPosition, connections, horizontal, otherMultiplier, reverse, rotation) {\n                var a = [], step = elementDimensions[horizontal ? 0 : 1] / (connections.length + 1);\n                for (var i = 0; i < connections.length; i++) {\n                    var val = (i + 1) * step, other = otherMultiplier * elementDimensions[horizontal ? 1 : 0];\n                    if (reverse) {\n                        val = elementDimensions[horizontal ? 0 : 1] - val;\n                    }\n                    var dx = (horizontal ? val : other), x = elementPosition.left + dx, xp = dx / elementDimensions[0],\n                        dy = (horizontal ? other : val), y = elementPosition.top + dy, yp = dy / elementDimensions[1];\n                    if (rotation !== 0) {\n                        var rotated = jsPlumbUtil.rotatePoint([x, y], [elementPosition.centerx, elementPosition.centery], rotation);\n                        x = rotated[0];\n                        y = rotated[1];\n                    }\n                    a.push([ x, y, xp, yp, connections[i][1], connections[i][2] ]);\n                }\n                return a;\n            },\n            rightAndBottomSort = function(a, b) {\n                return b[0][0] - a[0][0];\n            },\n            // used by edgeSortFunctions\n            leftAndTopSort = function (a, b) {\n                var p1 = a[0][0] < 0 ? -Math.PI - a[0][0] : Math.PI - a[0][0],\n                    p2 = b[0][0] < 0 ? -Math.PI - b[0][0] : Math.PI - b[0][0];\n                return p1 - p2;\n            },\n            // used by placeAnchors\n            edgeSortFunctions = {\n                \"top\":leftAndTopSort,\n                \"right\": rightAndBottomSort,\n                \"bottom\": rightAndBottomSort,\n                \"left\": leftAndTopSort\n            },\n            // used by placeAnchors\n            _sortHelper = function (_array, _fn) {\n                return _array.sort(_fn);\n            },\n            // used by AnchorManager.redraw\n            placeAnchors = function (elementId, _anchorLists) {\n                var cd = jsPlumbInstance.getCachedData(elementId), sS = cd.s, sO = cd.o,\n                    placeSomeAnchors = function (desc, elementDimensions, elementPosition, unsortedConnections, isHorizontal, otherMultiplier, orientation) {\n                        if (unsortedConnections.length > 0) {\n                            var sc = _sortHelper(unsortedConnections, edgeSortFunctions[desc]), // puts them in order based on the target element's pos on screen\n                                reverse = desc === \"right\" || desc === \"top\",\n                                rotation = jsPlumbInstance.getRotation(elementId),\n                                anchors = placeAnchorsOnLine(desc, elementDimensions,\n                                    elementPosition, sc,\n                                    isHorizontal, otherMultiplier, reverse, rotation);\n                            // takes a computed anchor position and adjusts it for parent offset and scroll, then stores it.\n                            var _setAnchorLocation = function (endpoint, anchorPos) {\n                                continuousAnchorLocations[endpoint.id] = [ anchorPos[0], anchorPos[1], anchorPos[2], anchorPos[3] ];\n                                continuousAnchorOrientations[endpoint.id] = orientation;\n                            };\n                            for (var i = 0; i < anchors.length; i++) {\n                                var c = anchors[i][4], weAreSource = c.endpoints[0].elementId === elementId, weAreTarget = c.endpoints[1].elementId === elementId;\n                                if (weAreSource) {\n                                    _setAnchorLocation(c.endpoints[0], anchors[i]);\n                                }\n                                if (weAreTarget) {\n                                    _setAnchorLocation(c.endpoints[1], anchors[i]);\n                                }\n                            }\n                        }\n                    };\n                placeSomeAnchors(\"bottom\", sS, sO, _anchorLists.bottom, true, 1, [0, 1]);\n                placeSomeAnchors(\"top\", sS, sO, _anchorLists.top, true, 0, [0, -1]);\n                placeSomeAnchors(\"left\", sS, sO, _anchorLists.left, false, 0, [-1, 0]);\n                placeSomeAnchors(\"right\", sS, sO, _anchorLists.right, false, 1, [1, 0]);\n            };\n        this.reset = function () {\n            _amEndpoints = {};\n            connectionsByElementId = {};\n            anchorLists = {};\n        };\n        this.addFloatingConnection = function (key, conn) {\n            floatingConnections[key] = conn;\n        };\n        this.newConnection = function (conn) {\n            var sourceId = conn.sourceId, targetId = conn.targetId,\n                ep = conn.endpoints,\n                doRegisterTarget = true,\n                registerConnection = function (otherIndex, otherEndpoint, otherAnchor, elId, c) {\n                    if ((sourceId === targetId) && otherAnchor.isContinuous) {\n                        // remove the target endpoint's canvas.  we dont need it.\n                        conn._jsPlumb.instance.removeElement(ep[1].canvas);\n                        doRegisterTarget = false;\n                    }\n                    _ju.addToList(connectionsByElementId, elId, [c, otherEndpoint, otherAnchor.constructor === _jp.DynamicAnchor]);\n                };\n            registerConnection(0, ep[0], ep[0].anchor, targetId, conn);\n            if (doRegisterTarget) {\n                registerConnection(1, ep[1], ep[1].anchor, sourceId, conn);\n            }\n        };\n        var removeEndpointFromAnchorLists = function (endpoint) {\n            (function (list, eId) {\n                if (list) {  // transient anchors dont get entries in this list.\n                    var f = function (e) {\n                        return e[4] === eId;\n                    };\n                    _ju.removeWithFunction(list.top, f);\n                    _ju.removeWithFunction(list.left, f);\n                    _ju.removeWithFunction(list.bottom, f);\n                    _ju.removeWithFunction(list.right, f);\n                }\n            })(anchorLists[endpoint.elementId], endpoint.id);\n        };\n        this.connectionDetached = function (connInfo, doNotRedraw) {\n            var connection = connInfo.connection || connInfo,\n                sourceId = connInfo.sourceId,\n                targetId = connInfo.targetId,\n                ep = connection.endpoints,\n                removeConnection = function (otherIndex, otherEndpoint, otherAnchor, elId, c) {\n                    _ju.removeWithFunction(connectionsByElementId[elId], function (_c) {\n                        return _c[0].id === c.id;\n                    });\n                };\n            removeConnection(1, ep[1], ep[1].anchor, sourceId, connection);\n            removeConnection(0, ep[0], ep[0].anchor, targetId, connection);\n            if (connection.floatingId) {\n                removeConnection(connection.floatingIndex, connection.floatingEndpoint, connection.floatingEndpoint.anchor, connection.floatingId, connection);\n                removeEndpointFromAnchorLists(connection.floatingEndpoint);\n            }\n            // remove from anchorLists\n            removeEndpointFromAnchorLists(connection.endpoints[0]);\n            removeEndpointFromAnchorLists(connection.endpoints[1]);\n            if (!doNotRedraw) {\n                self.redraw(connection.sourceId);\n                if (connection.targetId !== connection.sourceId) {\n                    self.redraw(connection.targetId);\n                }\n            }\n        };\n        this.addEndpoint = function (endpoint, elementId) {\n            _ju.addToList(_amEndpoints, elementId, endpoint);\n        };\n        this.changeId = function (oldId, newId) {\n            connectionsByElementId[newId] = connectionsByElementId[oldId];\n            _amEndpoints[newId] = _amEndpoints[oldId];\n            delete connectionsByElementId[oldId];\n            delete _amEndpoints[oldId];\n        };\n        this.getConnectionsFor = function (elementId) {\n            return connectionsByElementId[elementId] || [];\n        };\n        this.getEndpointsFor = function (elementId) {\n            return _amEndpoints[elementId] || [];\n        };\n        this.deleteEndpoint = function (endpoint) {\n            _ju.removeWithFunction(_amEndpoints[endpoint.elementId], function (e) {\n                return e.id === endpoint.id;\n            });\n            removeEndpointFromAnchorLists(endpoint);\n        };\n        this.elementRemoved = function (elementId) {\n            delete floatingConnections[elementId];\n            delete _amEndpoints[elementId];\n            _amEndpoints[elementId] = [];\n        };\n        // updates the given anchor list by either updating an existing anchor's info, or adding it. this function\n        // also removes the anchor from its previous list, if the edge it is on has changed.\n        // all connections found along the way (those that are connected to one of the faces this function\n        // operates on) are added to the connsToPaint list, as are their endpoints. in this way we know to repaint\n        // them wthout having to calculate anything else about them.\n        var _updateAnchorList = function (lists, theta, order, conn, aBoolean, otherElId, idx, reverse, edgeId, elId, connsToPaint, endpointsToPaint) {\n            // first try to find the exact match, but keep track of the first index of a matching element id along the way.s\n            var exactIdx = -1,\n                firstMatchingElIdx = -1,\n                endpoint = conn.endpoints[idx],\n                endpointId = endpoint.id,\n                oIdx = [1, 0][idx],\n                values = [\n                    [ theta, order ],\n                    conn,\n                    aBoolean,\n                    otherElId,\n                    endpointId\n                ],\n                listToAddTo = lists[edgeId],\n                listToRemoveFrom = endpoint._continuousAnchorEdge ? lists[endpoint._continuousAnchorEdge] : null,\n                i,\n                candidate;\n            if (listToRemoveFrom) {\n                var rIdx = _ju.findWithFunction(listToRemoveFrom, function (e) {\n                    return e[4] === endpointId;\n                });\n                if (rIdx !== -1) {\n                    listToRemoveFrom.splice(rIdx, 1);\n                    // get all connections from this list\n                    for (i = 0; i < listToRemoveFrom.length; i++) {\n                        candidate = listToRemoveFrom[i][1];\n                        _ju.addWithFunction(connsToPaint, candidate, function (c) {\n                            return c.id === candidate.id;\n                        });\n                        _ju.addWithFunction(endpointsToPaint, listToRemoveFrom[i][1].endpoints[idx], function (e) {\n                            return e.id === candidate.endpoints[idx].id;\n                        });\n                        _ju.addWithFunction(endpointsToPaint, listToRemoveFrom[i][1].endpoints[oIdx], function (e) {\n                            return e.id === candidate.endpoints[oIdx].id;\n                        });\n                    }\n                }\n            }\n            for (i = 0; i < listToAddTo.length; i++) {\n                candidate = listToAddTo[i][1];\n                if (params.idx === 1 && listToAddTo[i][3] === otherElId && firstMatchingElIdx === -1) {\n                    firstMatchingElIdx = i;\n                }\n                _ju.addWithFunction(connsToPaint, candidate, function (c) {\n                    return c.id === candidate.id;\n                });\n                _ju.addWithFunction(endpointsToPaint, listToAddTo[i][1].endpoints[idx], function (e) {\n                    return e.id === candidate.endpoints[idx].id;\n                });\n                _ju.addWithFunction(endpointsToPaint, listToAddTo[i][1].endpoints[oIdx], function (e) {\n                    return e.id === candidate.endpoints[oIdx].id;\n                });\n            }\n            if (exactIdx !== -1) {\n                listToAddTo[exactIdx] = values;\n            }\n            else {\n                var insertIdx = reverse ? firstMatchingElIdx !== -1 ? firstMatchingElIdx : 0 : listToAddTo.length; // of course we will get this from having looked through the array shortly.\n                listToAddTo.splice(insertIdx, 0, values);\n            }\n            // store this for next time.\n            endpoint._continuousAnchorEdge = edgeId;\n        };\n        //\n        // Notification that the connection given has changed source/target from the originalId to the newId.\n        //\n        // For a change of source this involves:\n        // 1. removing the connection from the list of connections stored for the originalId\n        // 2. updating the source information for the target of the connection\n        // 3. re-registering the connection in connectionsByElementId with the newId\n        //\n        // For a change of target this means find the entry in an endpoint's list for this connection and update its target endpoint\n        // with the current target in the connection.\n        //\n        this.sourceOrTargetChanged = function (originalId, newId, connection, newElement, anchorIndex) {\n            if (anchorIndex === 0) {\n                if (originalId !== newId) {\n                    connection.sourceId = newId;\n                    connection.source = newElement;\n                    // remove the entry that points from the old source to the target\n                    _ju.removeWithFunction(connectionsByElementId[originalId], function (info) {\n                        return info[0].id === connection.id;\n                    });\n                    // find entry for target and update it\n                    var tIdx = _ju.findWithFunction(connectionsByElementId[connection.targetId], function (i) {\n                        return i[0].id === connection.id;\n                    });\n                    if (tIdx > -1) {\n                        connectionsByElementId[connection.targetId][tIdx][0] = connection;\n                        connectionsByElementId[connection.targetId][tIdx][1] = connection.endpoints[0];\n                        connectionsByElementId[connection.targetId][tIdx][2] = connection.endpoints[0].anchor.constructor === _jp.DynamicAnchor;\n                    }\n                    // add entry for new source\n                    _ju.addToList(connectionsByElementId, newId, [connection, connection.endpoints[1], connection.endpoints[1].anchor.constructor === _jp.DynamicAnchor]);\n                    // TODO SP not final on this yet. when a user drags an existing connection and it turns into a self\n                    // loop, then this code hides the target endpoint (by removing it from the DOM) But I think this should\n                    // occur only if the anchor is Continuous\n                    if (connection.endpoints[1].anchor.isContinuous) {\n                        if (connection.source === connection.target) {\n                            connection._jsPlumb.instance.removeElement(connection.endpoints[1].canvas);\n                        } else {\n                            if (connection.endpoints[1].canvas.parentNode == null) {\n                                connection._jsPlumb.instance.appendElement(connection.endpoints[1].canvas);\n                            }\n                        }\n                    }\n                    connection.updateConnectedClass();\n                }\n            } else if (anchorIndex === 1) {\n                var sourceElId = connection.endpoints[0].elementId;\n                connection.target = newElement;\n                connection.targetId = newId;\n                var sIndex = _ju.findWithFunction(connectionsByElementId[sourceElId], function (i) {\n                        return i[0].id === connection.id;\n                    }),\n                    tIndex = _ju.findWithFunction(connectionsByElementId[originalId], function (i) {\n                        return i[0].id === connection.id;\n                    });\n                // update or add data for source\n                if (sIndex !== -1) {\n                    connectionsByElementId[sourceElId][sIndex][0] = connection;\n                    connectionsByElementId[sourceElId][sIndex][1] = connection.endpoints[1];\n                    connectionsByElementId[sourceElId][sIndex][2] = connection.endpoints[1].anchor.constructor === _jp.DynamicAnchor;\n                }\n                // remove entry for previous target (if there)\n                if (tIndex > -1) {\n                    connectionsByElementId[originalId].splice(tIndex, 1);\n                    // add entry for new target\n                    _ju.addToList(connectionsByElementId, newId, [connection, connection.endpoints[0], connection.endpoints[0].anchor.constructor === _jp.DynamicAnchor]);\n                }\n                connection.updateConnectedClass();\n            }\n        };\n        //\n        // moves the given endpoint from `currentId` to `element`.\n        // This involves:\n        //\n        // 1. changing the key in _amEndpoints under which the endpoint is stored\n        // 2. changing the source or target values in all of the endpoint's connections\n        // 3. changing the array in connectionsByElementId in which the endpoint's connections\n        //    are stored (done by either sourceChanged or updateOtherEndpoint)\n        //\n        this.rehomeEndpoint = function (ep, currentId, element) {\n            var eps = _amEndpoints[currentId] || [],\n                elementId = jsPlumbInstance.getId(element);\n            if (elementId !== currentId) {\n                var idx = eps.indexOf(ep);\n                if (idx > -1) {\n                    var _ep = eps.splice(idx, 1)[0];\n                    self.add(_ep, elementId);\n                }\n            }\n            for (var i = 0; i < ep.connections.length; i++) {\n                if (ep.connections[i].sourceId === currentId) {\n                    self.sourceOrTargetChanged(currentId, ep.elementId, ep.connections[i], ep.element, 0);\n                }\n                else if (ep.connections[i].targetId === currentId) {\n                    self.sourceOrTargetChanged(currentId, ep.elementId, ep.connections[i], ep.element, 1);\n                }\n            }\n        };\n        this.redraw = function (elementId, ui, timestamp, offsetToUI, clearEdits, doNotRecalcEndpoint) {\n            var connectionsToPaint = [],\n                endpointsToPaint = [],\n                anchorsToUpdate = [];\n            if (!jsPlumbInstance.isSuspendDrawing()) {\n                // get all the endpoints for this element\n                var ep = _amEndpoints[elementId] || [],\n                    endpointConnections = connectionsByElementId[elementId] || [];\n                timestamp = timestamp || jsPlumbUtil.uuid();\n                // offsetToUI are values that would have been calculated in the dragManager when registering\n                // an endpoint for an element that had a parent (somewhere in the hierarchy) that had been\n                // registered as draggable.\n                offsetToUI = offsetToUI || {left: 0, top: 0};\n                if (ui) {\n                    ui = {\n                        left: ui.left + offsetToUI.left,\n                        top: ui.top + offsetToUI.top\n                    };\n                }\n                // valid for one paint cycle.\n                var myOffset = jsPlumbInstance.updateOffset({ elId: elementId, offset: ui, recalc: false, timestamp: timestamp }),\n                    orientationCache = {};\n                // actually, first we should compute the orientation of this element to all other elements to which\n                // this element is connected with a continuous anchor (whether both ends of the connection have\n                // a continuous anchor or just one)\n                for (var i = 0; i < endpointConnections.length; i++) {\n                    var conn = endpointConnections[i][0],\n                        sourceId = conn.sourceId,\n                        targetId = conn.targetId,\n                        sourceContinuous = conn.endpoints[0].anchor.isContinuous,\n                        targetContinuous = conn.endpoints[1].anchor.isContinuous;\n                    if (sourceContinuous || targetContinuous) {\n                        var oKey = sourceId + \"_\" + targetId,\n                            o = orientationCache[oKey],\n                            oIdx = conn.sourceId === elementId ? 1 : 0,\n                            targetRotation = jsPlumbInstance.getRotation(targetId),\n                            sourceRotation = jsPlumbInstance.getRotation(sourceId);\n                        if (sourceContinuous && !anchorLists[sourceId]) {\n                            anchorLists[sourceId] = { top: [], right: [], bottom: [], left: [] };\n                        }\n                        if (targetContinuous && !anchorLists[targetId]) {\n                            anchorLists[targetId] = { top: [], right: [], bottom: [], left: [] };\n                        }\n                        if (elementId !== targetId) {\n                            jsPlumbInstance.updateOffset({ elId: targetId, timestamp: timestamp });\n                        }\n                        if (elementId !== sourceId) {\n                            jsPlumbInstance.updateOffset({ elId: sourceId, timestamp: timestamp });\n                        }\n                        var td = jsPlumbInstance.getCachedData(targetId),\n                            sd = jsPlumbInstance.getCachedData(sourceId);\n                        if (targetId === sourceId && (sourceContinuous || targetContinuous)) {\n                            // here we may want to improve this by somehow determining the face we'd like\n                            // to put the connector on.  ideally, when drawing, the face should be calculated\n                            // by determining which face is closest to the point at which the mouse button\n                            // was released.  for now, we're putting it on the top face.\n                            _updateAnchorList( anchorLists[sourceId], -Math.PI / 2, 0, conn, false, targetId, 0, false, \"top\", sourceId, connectionsToPaint, endpointsToPaint);\n                            _updateAnchorList( anchorLists[targetId], -Math.PI / 2, 0, conn, false, sourceId, 1, false, \"top\", targetId, connectionsToPaint, endpointsToPaint);\n                        }\n                        else {\n                            if (!o) {\n                                o = this.calculateOrientation(sourceId, targetId, sd.o, td.o, conn.endpoints[0].anchor, conn.endpoints[1].anchor, conn, sourceRotation, targetRotation);\n                                orientationCache[oKey] = o;\n                                // this would be a performance enhancement, but the computed angles need to be clamped to\n                                //the (-PI/2 -> PI/2) range in order for the sorting to work properly.\n                                /*  orientationCache[oKey2] = {\n                                 orientation:o.orientation,\n                                 a:[o.a[1], o.a[0]],\n                                 theta:o.theta + Math.PI,\n                                 theta2:o.theta2 + Math.PI\n                                 };*/\n                            }\n                            if (sourceContinuous) {\n                                _updateAnchorList(anchorLists[sourceId], o.theta, 0, conn, false, targetId, 0, false, o.a[0], sourceId, connectionsToPaint, endpointsToPaint);\n                            }\n                            if (targetContinuous) {\n                                _updateAnchorList(anchorLists[targetId], o.theta2, -1, conn, true, sourceId, 1, true, o.a[1], targetId, connectionsToPaint, endpointsToPaint);\n                            }\n                        }\n                        if (sourceContinuous) {\n                            _ju.addWithFunction(anchorsToUpdate, sourceId, function (a) {\n                                return a === sourceId;\n                            });\n                        }\n                        if (targetContinuous) {\n                            _ju.addWithFunction(anchorsToUpdate, targetId, function (a) {\n                                return a === targetId;\n                            });\n                        }\n                        _ju.addWithFunction(connectionsToPaint, conn, function (c) {\n                            return c.id === conn.id;\n                        });\n                        if ((sourceContinuous && oIdx === 0) || (targetContinuous && oIdx === 1)) {\n                            _ju.addWithFunction(endpointsToPaint, conn.endpoints[oIdx], function (e) {\n                                return e.id === conn.endpoints[oIdx].id;\n                            });\n                        }\n                    }\n                }\n                // place Endpoints whose anchors are continuous but have no Connections\n                for (i = 0; i < ep.length; i++) {\n                    if (ep[i].connections.length === 0 && ep[i].anchor.isContinuous) {\n                        if (!anchorLists[elementId]) {\n                            anchorLists[elementId] = { top: [], right: [], bottom: [], left: [] };\n                        }\n                        _updateAnchorList(anchorLists[elementId], -Math.PI / 2, 0, {endpoints: [ep[i], ep[i]], paint: function () {\n                        }}, false, elementId, 0, false, ep[i].anchor.getDefaultFace(), elementId, connectionsToPaint, endpointsToPaint);\n                        _ju.addWithFunction(anchorsToUpdate, elementId, function (a) {\n                            return a === elementId;\n                        });\n                    }\n                }\n                // now place all the continuous anchors we need to;\n                for (i = 0; i < anchorsToUpdate.length; i++) {\n                    placeAnchors(anchorsToUpdate[i], anchorLists[anchorsToUpdate[i]]);\n                }\n                // now that continuous anchors have been placed, paint all the endpoints for this element\n                for (i = 0; i < ep.length; i++) {\n                    ep[i].paint({ timestamp: timestamp, offset: myOffset, dimensions: myOffset.s, recalc: doNotRecalcEndpoint !== true });\n                }\n                // ... and any other endpoints we came across as a result of the continuous anchors.\n                for (i = 0; i < endpointsToPaint.length; i++) {\n                    var cd = jsPlumbInstance.getCachedData(endpointsToPaint[i].elementId);\n                    //endpointsToPaint[i].paint({ timestamp: timestamp, offset: cd, dimensions: cd.s });\n                    endpointsToPaint[i].paint({ timestamp: null, offset: cd, dimensions: cd.s });\n                }\n                // paint all the standard and \"dynamic connections\", which are connections whose other anchor is\n                // static and therefore does need to be recomputed; we make sure that happens only one time.\n                // TODO we could have compiled a list of these in the first pass through connections; might save some time.\n                for (i = 0; i < endpointConnections.length; i++) {\n                    var otherEndpoint = endpointConnections[i][1];\n                    if (otherEndpoint.anchor.constructor === _jp.DynamicAnchor) {\n                        otherEndpoint.paint({ elementWithPrecedence: elementId, timestamp: timestamp });\n                        _ju.addWithFunction(connectionsToPaint, endpointConnections[i][0], function (c) {\n                            return c.id === endpointConnections[i][0].id;\n                        });\n                        // all the connections for the other endpoint now need to be repainted\n                        for (var k = 0; k < otherEndpoint.connections.length; k++) {\n                            if (otherEndpoint.connections[k] !== endpointConnections[i][0]) {\n                                _ju.addWithFunction(connectionsToPaint, otherEndpoint.connections[k], function (c) {\n                                    return c.id === otherEndpoint.connections[k].id;\n                                });\n                            }\n                        }\n                    } else {\n                        _ju.addWithFunction(connectionsToPaint, endpointConnections[i][0], function (c) {\n                            return c.id === endpointConnections[i][0].id;\n                        });\n                    }\n                }\n                // paint current floating connection for this element, if there is one.\n                var fc = floatingConnections[elementId];\n                if (fc) {\n                    fc.paint({timestamp: timestamp, recalc: false, elId: elementId});\n                }\n                // paint all the connections\n                for (i = 0; i < connectionsToPaint.length; i++) {\n                    connectionsToPaint[i].paint({elId: elementId, timestamp: null, recalc: false, clearEdits: clearEdits});\n                }\n            }\n            return {\n                c:connectionsToPaint,\n                e:endpointsToPaint\n            };\n        };\n        var ContinuousAnchor = function (anchorParams) {\n            _ju.EventGenerator.apply(this);\n            this.type = \"Continuous\";\n            this.isDynamic = true;\n            this.isContinuous = true;\n            var faces = anchorParams.faces || [\"top\", \"right\", \"bottom\", \"left\"],\n                clockwise = !(anchorParams.clockwise === false),\n                availableFaces = { },\n                opposites = { \"top\": \"bottom\", \"right\": \"left\", \"left\": \"right\", \"bottom\": \"top\" },\n                clockwiseOptions = { \"top\": \"right\", \"right\": \"bottom\", \"left\": \"top\", \"bottom\": \"left\" },\n                antiClockwiseOptions = { \"top\": \"left\", \"right\": \"top\", \"left\": \"bottom\", \"bottom\": \"right\" },\n                secondBest = clockwise ? clockwiseOptions : antiClockwiseOptions,\n                lastChoice = clockwise ? antiClockwiseOptions : clockwiseOptions,\n                cssClass = anchorParams.cssClass || \"\",\n                _currentFace = null, _lockedFace = null, X_AXIS_FACES = [\"left\", \"right\"], Y_AXIS_FACES = [\"top\", \"bottom\"],\n                _lockedAxis = null;\n            for (var i = 0; i < faces.length; i++) {\n                availableFaces[faces[i]] = true;\n            }\n            this.getDefaultFace = function () {\n                return faces.length === 0 ? \"top\" : faces[0];\n            };\n            this.isRelocatable = function() { return true; };\n            this.isSnapOnRelocate = function() { return true; };\n            // if the given edge is supported, returns it. otherwise looks for a substitute that _is_\n            // supported. if none supported we also return the request edge.\n            this.verifyEdge = function (edge) {\n                if (availableFaces[edge]) {\n                    return edge;\n                }\n                else if (availableFaces[opposites[edge]]) {\n                    return opposites[edge];\n                }\n                else if (availableFaces[secondBest[edge]]) {\n                    return secondBest[edge];\n                }\n                else if (availableFaces[lastChoice[edge]]) {\n                    return lastChoice[edge];\n                }\n                return edge; // we have to give them something.\n            };\n            this.isEdgeSupported = function (edge) {\n                return  _lockedAxis == null ?\n                    (_lockedFace == null ? availableFaces[edge] === true : _lockedFace === edge)\n                    : _lockedAxis.indexOf(edge) !== -1;\n            };\n            this.setCurrentFace = function(face, overrideLock) {\n                _currentFace = face;\n                // if currently locked, and the user wants to override, do that.\n                if (overrideLock && _lockedFace != null) {\n                    _lockedFace = _currentFace;\n                }\n            };\n            this.getCurrentFace = function() { return _currentFace; };\n            this.getSupportedFaces = function() {\n                var af = [];\n                for (var k in availableFaces) {\n                    if (availableFaces[k]) {\n                        af.push(k);\n                    }\n                }\n                return af;\n            };\n            this.lock = function() {\n                _lockedFace = _currentFace;\n            };\n            this.unlock = function() {\n                _lockedFace = null;\n            };\n            this.isLocked = function() {\n                return _lockedFace != null;\n            };\n            this.lockCurrentAxis = function() {\n                if (_currentFace != null) {\n                    _lockedAxis = (_currentFace === \"left\" || _currentFace === \"right\") ? X_AXIS_FACES : Y_AXIS_FACES;\n                }\n            };\n            this.unlockCurrentAxis = function() {\n                _lockedAxis = null;\n            };\n            this.compute = function (params) {\n                return continuousAnchorLocations[params.element.id] || [0, 0];\n            };\n            this.getCurrentLocation = function (params) {\n                return continuousAnchorLocations[params.element.id] || [0, 0];\n            };\n            this.getOrientation = function (endpoint) {\n                return continuousAnchorOrientations[endpoint.id] || [0, 0];\n            };\n            this.getCssClass = function () {\n                return cssClass;\n            };\n        };\n        // continuous anchors\n        jsPlumbInstance.continuousAnchorFactory = {\n            get: function (params) {\n                return new ContinuousAnchor(params);\n            },\n            clear: function (elementId) {\n                delete continuousAnchorLocations[elementId];\n            }\n        };\n    };\n    _jp.AnchorManager.prototype.calculateOrientation = function (sourceId,\n                                                                 targetId,\n                                                                 sd,\n                                                                 td,\n                                                                 sourceAnchor,\n                                                                 targetAnchor,\n                                                                 connection,\n                                                                 sourceRotation,\n                                                                 targetRotation) {\n        var Orientation = { HORIZONTAL: \"horizontal\", VERTICAL: \"vertical\", DIAGONAL: \"diagonal\", IDENTITY: \"identity\" },\n            axes = [\"left\", \"top\", \"right\", \"bottom\"];\n        if (sourceId === targetId) {\n            return {\n                orientation: Orientation.IDENTITY,\n                a: [\"top\", \"top\"]\n            };\n        }\n        // since we only support rotation around the center of an element these two lines don't have to take rotation\n        // into account.\n        var theta = Math.atan2((td.centery - sd.centery), (td.centerx - sd.centerx)),\n            theta2 = Math.atan2((sd.centery - td.centery), (sd.centerx - td.centerx));\n// --------------------------------------------------------------------------------------\n        // improved face calculation. get midpoints of each face for source and target, then put in an array with all combinations of\n        // source/target faces. sort this array by distance between midpoints. the entry at index 0 is our preferred option. we can\n        // go through the array one by one until we find an entry in which each requested face is supported.\n        var candidates = [], midpoints = { };\n        (function (types, dim) {\n            for (var i = 0; i < types.length; i++) {\n                midpoints[types[i]] = {\n                    \"left\": [ dim[i][0].left, dim[i][0].centery ],\n                    \"right\": [ dim[i][0].right, dim[i][0].centery ],\n                    \"top\": [ dim[i][0].centerx, dim[i][0].top ],\n                    \"bottom\": [ dim[i][0].centerx , dim[i][0].bottom]\n                };\n                if (dim[i][1] !== 0) {\n                    for (var axis in midpoints[types[i]]) {\n                        midpoints[types[i]][axis] = jsPlumbUtil.rotatePoint(midpoints[types[i]][axis], [dim[i][0].centerx, dim[i][0].centery], dim[i][1]);\n                    }\n                }\n            }\n        })([ \"source\", \"target\" ], [ [sd, sourceRotation], [td, targetRotation] ]);\n        for (var sf = 0; sf < axes.length; sf++) {\n            for (var tf = 0; tf < axes.length; tf++) {\n                candidates.push({\n                    source: axes[sf],\n                    target: axes[tf],\n                    dist: Biltong.lineLength(midpoints.source[axes[sf]], midpoints.target[axes[tf]])\n                });\n            }\n        }\n        candidates.sort(function (a, b) {\n            return a.dist < b.dist ? -1 : a.dist > b.dist ? 1 : 0;\n        });\n        // now go through this list and try to get an entry that satisfies both (there will be one, unless one of the anchors\n        // declares no available faces)\n        var sourceEdge = candidates[0].source, targetEdge = candidates[0].target;\n        for (var i = 0; i < candidates.length; i++) {\n            if (sourceAnchor.isContinuous && sourceAnchor.locked) {\n                sourceEdge = sourceAnchor.getCurrentFace();\n            }\n            else if (!sourceAnchor.isContinuous || sourceAnchor.isEdgeSupported(candidates[i].source)) {\n                sourceEdge = candidates[i].source;\n            }\n            else {\n                sourceEdge = null;\n            }\n            if (targetAnchor.isContinuous && targetAnchor.locked) {\n                targetEdge = targetAnchor.getCurrentFace();\n            }\n            else if (!targetAnchor.isContinuous || targetAnchor.isEdgeSupported(candidates[i].target)) {\n                targetEdge = candidates[i].target;\n            }\n            else {\n                targetEdge = null;\n            }\n            if (sourceEdge != null && targetEdge != null) {\n                break;\n            }\n        }\n        if (sourceAnchor.isContinuous) {\n            sourceAnchor.setCurrentFace(sourceEdge);\n        }\n        if (targetAnchor.isContinuous) {\n            targetAnchor.setCurrentFace(targetEdge);\n        }\n// --------------------------------------------------------------------------------------\n        return {\n            a: [ sourceEdge, targetEdge ],\n            theta: theta,\n            theta2: theta2\n        };\n    };\n    /**\n     * Anchors model a position on some element at which an Endpoint may be located.  They began as a first class citizen of jsPlumb, ie. a user\n     * was required to create these themselves, but over time this has been replaced by the concept of referring to them either by name (eg. \"TopMiddle\"),\n     * or by an array describing their coordinates (eg. [ 0, 0.5, 0, -1 ], which is the same as \"TopMiddle\").  jsPlumb now handles all of the\n     * creation of Anchors without user intervention.\n     */\n    _jp.Anchor = function (params) {\n        this.x = params.x || 0;\n        this.y = params.y || 0;\n        this.elementId = params.elementId;\n        this.cssClass = params.cssClass || \"\";\n        this.orientation = params.orientation || [ 0, 0 ];\n        this.lastReturnValue = null;\n        this.offsets = params.offsets || [ 0, 0 ];\n        this.timestamp = null;\n        this._unrotatedOrientation = [\n            this.orientation[0],\n            this.orientation[1]\n        ];\n        this.relocatable = params.relocatable !== false;\n        this.snapOnRelocate = params.snapOnRelocate !== false;\n        this.locked = false;\n        _ju.EventGenerator.apply(this);\n        this.compute = function (params) {\n            var xy = params.xy, wh = params.wh, timestamp = params.timestamp;\n            if (timestamp && timestamp === this.timestamp) {\n                return this.lastReturnValue;\n            }\n            // unrotated position\n            var candidate = [ xy[0] + (this.x * wh[0]) + this.offsets[0], xy[1] + (this.y * wh[1]) + this.offsets[1], this.x, this.y ];\n            // if rotation set, adjust position.\n            var rotation = params.rotation;\n            if (rotation != null && rotation !== 0) {\n                var c2 = jsPlumbUtil.rotatePoint(candidate, [xy[0] + (wh[0] / 2), xy[1] + (wh[1] / 2) ], rotation);\n                // rotate the orientation values too. for rotations that are not multiples of 90 degrees, this will result in values that are not in the set\n                // [0, -1, 1 ], and in that case the connector paint may not be perfect. need some evidence from real world usage.\n                this.orientation[0] = Math.round((this._unrotatedOrientation[0] * c2[2]) - (this._unrotatedOrientation[1] * c2[3]));\n                this.orientation[1] = Math.round((this._unrotatedOrientation[1] * c2[2]) + (this._unrotatedOrientation[0] * c2[3]));\n                this.lastReturnValue = [c2[0], c2[1], this.x, this.y];\n            } else {\n                // if rotation not set (or 0), ensure orientation is original value\n                this.orientation[0] = this._unrotatedOrientation[0];\n                this.orientation[1] = this._unrotatedOrientation[1];\n                this.lastReturnValue = candidate;\n            }\n            this.timestamp = timestamp;\n            return this.lastReturnValue;\n        };\n        this.getCurrentLocation = function (params) {\n            params = params || {};\n            return (this.lastReturnValue == null || (params.timestamp != null && this.timestamp !== params.timestamp)) ? this.compute(params) : this.lastReturnValue;\n        };\n        this.setPosition = function(x, y, ox, oy, overrideLock) {\n            if (!this.locked || overrideLock) {\n                this.x = x;\n                this.y = y;\n                this.orientation = [ ox, oy ];\n                this.lastReturnValue = null;\n            }\n        };\n    };\n    _ju.extend(_jp.Anchor, _ju.EventGenerator, {\n        equals: function (anchor) {\n            if (!anchor) {\n                return false;\n            }\n            var ao = anchor.getOrientation(),\n                o = this.getOrientation();\n            return this.x === anchor.x && this.y === anchor.y && this.offsets[0] === anchor.offsets[0] && this.offsets[1] === anchor.offsets[1] && o[0] === ao[0] && o[1] === ao[1];\n        },\n        getOrientation: function () {\n            return this.orientation;\n        },\n        getCssClass: function () {\n            return this.cssClass;\n        }\n    });\n    /**\n     * An Anchor that floats. its orientation is computed dynamically from\n     * its position relative to the anchor it is floating relative to.  It is used when creating\n     * a connection through drag and drop.\n     *\n     * TODO FloatingAnchor could totally be refactored to extend Anchor just slightly.\n     */\n    _jp.FloatingAnchor = function (params) {\n        _jp.Anchor.apply(this, arguments);\n        // this is the anchor that this floating anchor is referenced to for\n        // purposes of calculating the orientation.\n        var ref = params.reference,\n            // the canvas this refers to.\n            refCanvas = params.referenceCanvas,\n            size = _jp.getSize(refCanvas),\n            // these are used to store the current relative position of our\n            // anchor wrt the reference anchor. they only indicate\n            // direction, so have a value of 1 or -1 (or, very rarely, 0). these\n            // values are written by the compute method, and read\n            // by the getOrientation method.\n            xDir = 0, yDir = 0,\n            // temporary member used to store an orientation when the floating\n            // anchor is hovering over another anchor.\n            orientation = null,\n            _lastResult = null;\n        // clear from parent. we want floating anchor orientation to always be computed.\n        this.orientation = null;\n        // set these to 0 each; they are used by certain types of connectors in the loopback case,\n        // when the connector is trying to clear the element it is on. but for floating anchor it's not\n        // very important.\n        this.x = 0;\n        this.y = 0;\n        this.isFloating = true;\n        this.compute = function (params) {\n            var xy = params.xy,\n                result = [ xy[0] + (size[0] / 2), xy[1] + (size[1] / 2) ]; // return origin of the element. we may wish to improve this so that any object can be the drag proxy.\n            _lastResult = result;\n            return result;\n        };\n        this.getOrientation = function (_endpoint) {\n            if (orientation) {\n                return orientation;\n            }\n            else {\n                var o = ref.getOrientation(_endpoint);\n                // here we take into account the orientation of the other\n                // anchor: if it declares zero for some direction, we declare zero too. this might not be the most awesome. perhaps we can come\n                // up with a better way. it's just so that the line we draw looks like it makes sense. maybe this wont make sense.\n                return [ Math.abs(o[0]) * xDir * -1,\n                    Math.abs(o[1]) * yDir * -1 ];\n            }\n        };\n        /**\n         * notification the endpoint associated with this anchor is hovering\n         * over another anchor; we want to assume that anchor's orientation\n         * for the duration of the hover.\n         */\n        this.over = function (anchor, endpoint) {\n            orientation = anchor.getOrientation(endpoint);\n        };\n        /**\n         * notification the endpoint associated with this anchor is no\n         * longer hovering over another anchor; we should resume calculating\n         * orientation as we normally do.\n         */\n        this.out = function () {\n            orientation = null;\n        };\n        this.getCurrentLocation = function (params) {\n            return _lastResult == null ? this.compute(params) : _lastResult;\n        };\n    };\n    _ju.extend(_jp.FloatingAnchor, _jp.Anchor);\n    var _convertAnchor = function (anchor, jsPlumbInstance, elementId) {\n        return anchor.constructor === _jp.Anchor ? anchor : jsPlumbInstance.makeAnchor(anchor, elementId, jsPlumbInstance);\n    };\n    /* \n     * A DynamicAnchor is an Anchor that contains a list of other Anchors, which it cycles\n     * through at compute time to find the one that is located closest to\n     * the center of the target element, and returns that Anchor's compute\n     * method result. this causes endpoints to follow each other with\n     * respect to the orientation of their target elements, which is a useful\n     * feature for some applications.\n     * \n     */\n    _jp.DynamicAnchor = function (params) {\n        _jp.Anchor.apply(this, arguments);\n        this.isDynamic = true;\n        this.anchors = [];\n        this.elementId = params.elementId;\n        this.jsPlumbInstance = params.jsPlumbInstance;\n        for (var i = 0; i < params.anchors.length; i++) {\n            this.anchors[i] = _convertAnchor(params.anchors[i], this.jsPlumbInstance, this.elementId);\n        }\n        this.getAnchors = function () {\n            return this.anchors;\n        };\n        var _curAnchor = this.anchors.length > 0 ? this.anchors[0] : null,\n            _lastAnchor = _curAnchor,\n            self = this,\n            // helper method to calculate the distance between the centers of the two elements.\n            _distance = function (anchor, cx, cy, xy, wh, r, tr) {\n                var ax = xy[0] + (anchor.x * wh[0]), ay = xy[1] + (anchor.y * wh[1]),\n                    acx = xy[0] + (wh[0] / 2), acy = xy[1] + (wh[1] / 2);\n                if(r != null && r !== 0) {\n                    var rotated = jsPlumbUtil.rotatePoint([ax,ay], [acx, acy], r);\n                    ax = rotated[0];\n                    ay = rotated[1];\n                }\n                return (Math.sqrt(Math.pow(cx - ax, 2) + Math.pow(cy - ay, 2)) +\n                        Math.sqrt(Math.pow(acx - ax, 2) + Math.pow(acy - ay, 2)));\n            },\n            // default method uses distance between element centers.  you can provide your own method in the dynamic anchor\n            // constructor (and also to jsPlumb.makeDynamicAnchor). the arguments to it are:\n            // xy - xy loc of the anchor's element\n            // wh - anchor's element's dimensions\n            // txy - xy loc of the element of the other anchor in the connection\n            // twh - dimensions of the element of the other anchor in the connection.\n            // r - the rotation of the anchor's element\n            // tr - the rotation of the target anchor's element. currently unused;  a placeholder for possible future refactoring.\n            // anchors - the list of selectable anchors\n            _anchorSelector = params.selector || function (xy, wh, txy, twh, r, tr, anchors) {\n                    var cx = txy[0] + (twh[0] / 2), cy = txy[1] + (twh[1] / 2);\n                    var minIdx = -1, minDist = Infinity;\n                    for (var i = 0; i < anchors.length; i++) {\n                        var d = _distance(anchors[i], cx, cy, xy, wh, r, tr);\n                        if (d < minDist) {\n                            minIdx = i + 0;\n                            minDist = d;\n                        }\n                    }\n                    return anchors[minIdx];\n                };\n        this.compute = function (params) {\n            var xy = params.xy, wh = params.wh, txy = params.txy, twh = params.twh, r = params.rotation, tr = params.tRotation;\n            this.timestamp = params.timestamp;\n            // if anchor is locked or an opposite element was not given, we\n            // maintain our state. anchor will be locked\n            // if it is the source of a drag and drop.\n            if (this.locked || txy == null || twh == null) {\n                this.lastReturnValue = _curAnchor.compute(params);\n                return this.lastReturnValue;\n            }\n            else {\n                params.timestamp = null; // otherwise clear this, i think. we want the anchor to compute.\n            }\n            _curAnchor = _anchorSelector(xy, wh, txy, twh, r, tr, this.anchors);\n            this.x = _curAnchor.x;\n            this.y = _curAnchor.y;\n            if (_curAnchor !== _lastAnchor) {\n                this.fire(\"anchorChanged\", _curAnchor);\n            }\n            _lastAnchor = _curAnchor;\n            this.lastReturnValue = _curAnchor.compute(params);\n            return this.lastReturnValue;\n        };\n        this.getCurrentLocation = function (params) {\n            return _curAnchor != null ? _curAnchor.getCurrentLocation(params) : null;\n        };\n        this.getOrientation = function (_endpoint) {\n            return _curAnchor != null ? _curAnchor.getOrientation(_endpoint) : [ 0, 0 ];\n        };\n        this.over = function (anchor, endpoint) {\n            if (_curAnchor != null) {\n                _curAnchor.over(anchor, endpoint);\n            }\n        };\n        this.out = function () {\n            if (_curAnchor != null) {\n                _curAnchor.out();\n            }\n        };\n        this.setAnchor = function(a) {\n            _curAnchor = a;\n        };\n        this.getCssClass = function () {\n            return (_curAnchor && _curAnchor.getCssClass()) || \"\";\n        };\n        /**\n         * Attempt to match an anchor with the given coordinates and then set it.\n         * @param coords\n         * @returns true if matching anchor found, false otherwise.\n         */\n        this.setAnchorCoordinates = function(coords) {\n            var idx = jsPlumbUtil.findWithFunction(this.anchors, function(a) {\n                return a.x === coords[0] && a.y === coords[1];\n            });\n            if (idx !== -1) {\n                this.setAnchor(this.anchors[idx]);\n                return true;\n            } else {\n                return false;\n            }\n        };\n    };\n    _ju.extend(_jp.DynamicAnchor, _jp.Anchor);\n// -------- basic anchors ------------------    \n    var _curryAnchor = function (x, y, ox, oy, type, fnInit) {\n        _jp.Anchors[type] = function (params) {\n            var a = params.jsPlumbInstance.makeAnchor([ x, y, ox, oy, 0, 0 ], params.elementId, params.jsPlumbInstance);\n            a.type = type;\n            if (fnInit) {\n                fnInit(a, params);\n            }\n            return a;\n        };\n    };\n    _curryAnchor(0.5, 0, 0, -1, \"TopCenter\");\n    _curryAnchor(0.5, 1, 0, 1, \"BottomCenter\");\n    _curryAnchor(0, 0.5, -1, 0, \"LeftMiddle\");\n    _curryAnchor(1, 0.5, 1, 0, \"RightMiddle\");\n    _curryAnchor(0.5, 0, 0, -1, \"Top\");\n    _curryAnchor(0.5, 1, 0, 1, \"Bottom\");\n    _curryAnchor(0, 0.5, -1, 0, \"Left\");\n    _curryAnchor(1, 0.5, 1, 0, \"Right\");\n    _curryAnchor(0.5, 0.5, 0, 0, \"Center\");\n    _curryAnchor(1, 0, 0, -1, \"TopRight\");\n    _curryAnchor(1, 1, 0, 1, \"BottomRight\");\n    _curryAnchor(0, 0, 0, -1, \"TopLeft\");\n    _curryAnchor(0, 1, 0, 1, \"BottomLeft\");\n// ------- dynamic anchors -------------------    \n    // default dynamic anchors chooses from Top, Right, Bottom, Left\n    _jp.Defaults.DynamicAnchors = function (params) {\n        return params.jsPlumbInstance.makeAnchors([\"TopCenter\", \"RightMiddle\", \"BottomCenter\", \"LeftMiddle\"], params.elementId, params.jsPlumbInstance);\n    };\n    // default dynamic anchors bound to name 'AutoDefault'\n    _jp.Anchors.AutoDefault = function (params) {\n        var a = params.jsPlumbInstance.makeDynamicAnchor(_jp.Defaults.DynamicAnchors(params));\n        a.type = \"AutoDefault\";\n        return a;\n    };\n// ------- continuous anchors -------------------    \n    var _curryContinuousAnchor = function (type, faces) {\n        _jp.Anchors[type] = function (params) {\n            var a = params.jsPlumbInstance.makeAnchor([\"Continuous\", { faces: faces }], params.elementId, params.jsPlumbInstance);\n            a.type = type;\n            return a;\n        };\n    };\n    _jp.Anchors.Continuous = function (params) {\n        return params.jsPlumbInstance.continuousAnchorFactory.get(params);\n    };\n    _curryContinuousAnchor(\"ContinuousLeft\", [\"left\"]);\n    _curryContinuousAnchor(\"ContinuousTop\", [\"top\"]);\n    _curryContinuousAnchor(\"ContinuousBottom\", [\"bottom\"]);\n    _curryContinuousAnchor(\"ContinuousRight\", [\"right\"]);\n// ------- position assign anchors -------------------    \n    // this anchor type lets you assign the position at connection time.\n    _curryAnchor(0, 0, 0, 0, \"Assign\", function (anchor, params) {\n        // find what to use as the \"position finder\". the user may have supplied a String which represents\n        // the id of a position finder in jsPlumb.AnchorPositionFinders, or the user may have supplied the\n        // position finder as a function.  we find out what to use and then set it on the anchor.\n        var pf = params.position || \"Fixed\";\n        anchor.positionFinder = pf.constructor === String ? params.jsPlumbInstance.AnchorPositionFinders[pf] : pf;\n        // always set the constructor params; the position finder might need them later (the Grid one does,\n        // for example)\n        anchor.constructorParams = params;\n    });\n    // these are the default anchor positions finders, which are used by the makeTarget function.  supplying\n    // a position finder argument to that function allows you to specify where the resulting anchor will\n    // be located\n    root.jsPlumbInstance.prototype.AnchorPositionFinders = {\n        \"Fixed\": function (dp, ep, es) {\n            return [ (dp.left - ep.left) / es[0], (dp.top - ep.top) / es[1] ];\n        },\n        \"Grid\": function (dp, ep, es, params) {\n            var dx = dp.left - ep.left, dy = dp.top - ep.top,\n                gx = es[0] / (params.grid[0]), gy = es[1] / (params.grid[1]),\n                mx = Math.floor(dx / gx), my = Math.floor(dy / gy);\n            return [ ((mx * gx) + (gx / 2)) / es[0], ((my * gy) + (gy / 2)) / es[1] ];\n        }\n    };\n// ------- perimeter anchors -------------------    \n    _jp.Anchors.Perimeter = function (params) {\n        params = params || {};\n        var anchorCount = params.anchorCount || 60,\n            shape = params.shape;\n        if (!shape) {\n            throw new Error(\"no shape supplied to Perimeter Anchor type\");\n        }\n        var _circle = function () {\n                var r = 0.5, step = Math.PI * 2 / anchorCount, current = 0, a = [];\n                for (var i = 0; i < anchorCount; i++) {\n                    var x = r + (r * Math.sin(current)),\n                        y = r + (r * Math.cos(current));\n                    a.push([ x, y, 0, 0 ]);\n                    current += step;\n                }\n                return a;\n            },\n            _path = function (segments) {\n                var anchorsPerFace = anchorCount / segments.length, a = [],\n                    _computeFace = function (x1, y1, x2, y2, fractionalLength, ox, oy) {\n                        anchorsPerFace = anchorCount * fractionalLength;\n                        var dx = (x2 - x1) / anchorsPerFace, dy = (y2 - y1) / anchorsPerFace;\n                        for (var i = 0; i < anchorsPerFace; i++) {\n                            a.push([\n                                x1 + (dx * i),\n                                y1 + (dy * i),\n                                ox == null ? 0 : ox,\n                                oy == null ? 0 : oy\n                            ]);\n                        }\n                    };\n                for (var i = 0; i < segments.length; i++) {\n                    _computeFace.apply(null, segments[i]);\n                }\n                return a;\n            },\n            _shape = function (faces) {\n                var s = [];\n                for (var i = 0; i < faces.length; i++) {\n                    s.push([faces[i][0], faces[i][1], faces[i][2], faces[i][3], 1 / faces.length, faces[i][4], faces[i][5]]);\n                }\n                return _path(s);\n            },\n            _rectangle = function () {\n                return _shape([\n                    [ 0, 0, 1, 0, 0, -1 ],\n                    [ 1, 0, 1, 1, 1, 0 ],\n                    [ 1, 1, 0, 1, 0, 1 ],\n                    [ 0, 1, 0, 0, -1, 0 ]\n                ]);\n            };\n        var _shapes = {\n                \"Circle\": _circle,\n                \"Ellipse\": _circle,\n                \"Diamond\": function () {\n                    return _shape([\n                        [ 0.5, 0, 1, 0.5 ],\n                        [ 1, 0.5, 0.5, 1 ],\n                        [ 0.5, 1, 0, 0.5 ],\n                        [ 0, 0.5, 0.5, 0 ]\n                    ]);\n                },\n                \"Rectangle\": _rectangle,\n                \"Square\": _rectangle,\n                \"Triangle\": function () {\n                    return _shape([\n                        [ 0.5, 0, 1, 1 ],\n                        [ 1, 1, 0, 1 ],\n                        [ 0, 1, 0.5, 0]\n                    ]);\n                },\n                \"Path\": function (params) {\n                    var points = params.points, p = [], tl = 0;\n                    for (var i = 0; i < points.length - 1; i++) {\n                        var l = Math.sqrt(Math.pow(points[i][2] - points[i][0]) + Math.pow(points[i][3] - points[i][1]));\n                        tl += l;\n                        p.push([points[i][0], points[i][1], points[i + 1][0], points[i + 1][1], l]);\n                    }\n                    for (var j = 0; j < p.length; j++) {\n                        p[j][4] = p[j][4] / tl;\n                    }\n                    return _path(p);\n                }\n            },\n            _rotate = function (points, amountInDegrees) {\n                var o = [], theta = amountInDegrees / 180 * Math.PI;\n                for (var i = 0; i < points.length; i++) {\n                    var _x = points[i][0] - 0.5,\n                        _y = points[i][1] - 0.5;\n                    o.push([\n                        0.5 + ((_x * Math.cos(theta)) - (_y * Math.sin(theta))),\n                        0.5 + ((_x * Math.sin(theta)) + (_y * Math.cos(theta))),\n                        points[i][2],\n                        points[i][3]\n                    ]);\n                }\n                return o;\n            };\n        if (!_shapes[shape]) {\n            throw new Error(\"Shape [\" + shape + \"] is unknown by Perimeter Anchor type\");\n        }\n        var da = _shapes[shape](params);\n        if (params.rotation) {\n            da = _rotate(da, params.rotation);\n        }\n        var a = params.jsPlumbInstance.makeDynamicAnchor(da);\n        a.type = \"Perimeter\";\n        return a;\n    };\n}).call(typeof window !== 'undefined' ? window : this);\n/*\n * Default router. Defers to an AnchorManager for placement of anchors, and connector paint routines for paths.\n * Currently this is a placeholder and acts as a facade to the pre-existing anchor manager. The Toolkit edition\n * will make use of concept to provide more advanced routing.\n *\n * Copyright (c) 2010 - 2020 jsPlumb (hello@jsplumbtoolkit.com)\n *\n * https://jsplumbtoolkit.com\n * https://github.com/jsplumb/jsplumb\n *\n * Dual licensed under the MIT and GPL2 licenses.\n */\n;\n(function () {\n    \"use strict\";\n    var root = this,\n        _ju = root.jsPlumbUtil,\n        _jp = root.jsPlumb;\n    _jp.DefaultRouter = function(jsPlumbInstance) {\n        this.jsPlumbInstance = jsPlumbInstance;\n        this.anchorManager = new _jp.AnchorManager({jsPlumbInstance:jsPlumbInstance});\n        this.sourceOrTargetChanged = function (originalId, newId, connection, newElement, anchorIndex) {\n            this.anchorManager.sourceOrTargetChanged(originalId, newId, connection, newElement, anchorIndex);\n        };\n        this.reset = function() {\n            this.anchorManager.reset();\n        };\n        this.changeId = function (oldId, newId) {\n            this.anchorManager.changeId(oldId, newId);\n        };\n        this.elementRemoved = function (elementId) {\n            this.anchorManager.elementRemoved(elementId);\n        };\n        this.newConnection = function (conn) {\n            this.anchorManager.newConnection(conn);\n        };\n        this.connectionDetached = function (connInfo, doNotRedraw) {\n            this.anchorManager.connectionDetached(connInfo, doNotRedraw);\n        };\n        this.redraw = function (elementId, ui, timestamp, offsetToUI, clearEdits, doNotRecalcEndpoint) {\n            return this.anchorManager.redraw(elementId, ui, timestamp, offsetToUI, clearEdits, doNotRecalcEndpoint);\n        };\n        this.deleteEndpoint = function (endpoint) {\n            this.anchorManager.deleteEndpoint(endpoint);\n        };\n        this.rehomeEndpoint = function (ep, currentId, element) {\n            this.anchorManager.rehomeEndpoint(ep, currentId, element);\n        };\n        this.addEndpoint = function (endpoint, elementId) {\n            this.anchorManager.addEndpoint(endpoint, elementId);\n        };\n    };\n}).call(typeof window !== 'undefined' ? window : this);\n/*\n * This file contains the default Connectors, Endpoint and Overlay definitions.\n *\n * Copyright (c) 2010 - 2020 jsPlumb (hello@jsplumbtoolkit.com)\n * \n * https://jsplumbtoolkit.com\n * https://github.com/jsplumb/jsplumb\n * \n * Dual licensed under the MIT and GPL2 licenses.\n */\n;\n(function () {\n    \"use strict\";\n    var root = this, _jp = root.jsPlumb, _ju = root.jsPlumbUtil, _jg = root.Biltong;\n    _jp.Segments = {\n        /*\n         * Class: AbstractSegment\n         * A Connector is made up of 1..N Segments, each of which has a Type, such as 'Straight', 'Arc',\n         * 'Bezier'. This is new from 1.4.2, and gives us a lot more flexibility when drawing connections: things such\n         * as rounded corners for flowchart connectors, for example, or a straight line stub for Bezier connections, are\n         * much easier to do now.\n         *\n         * A Segment is responsible for providing coordinates for painting it, and also must be able to report its length.\n         * \n         */\n        AbstractSegment: function (params) {\n            this.params = params;\n            /**\n             * Function: findClosestPointOnPath\n             * Finds the closest point on this segment to the given [x, y],\n             * returning both the x and y of the point plus its distance from\n             * the supplied point, and its location along the length of the\n             * path inscribed by the segment.  This implementation returns\n             * Infinity for distance and null values for everything else;\n             * subclasses are expected to override.\n             */\n            this.findClosestPointOnPath = function (x, y) {\n                return {\n                    d: Infinity,\n                    x: null,\n                    y: null,\n                    l: null\n                };\n            };\n            this.getBounds = function () {\n                return {\n                    minX: Math.min(params.x1, params.x2),\n                    minY: Math.min(params.y1, params.y2),\n                    maxX: Math.max(params.x1, params.x2),\n                    maxY: Math.max(params.y1, params.y2)\n                };\n            };\n            /**\n             * Computes the list of points on the segment that intersect the given line.\n             * @method lineIntersection\n             * @param {number} x1\n             * @param {number} y1\n             * @param {number} x2\n             * @param {number} y2\n             * @returns {Array<[number, number]>}\n             */\n            this.lineIntersection = function(x1, y1, x2, y2) {\n                return [];\n            };\n            /**\n             * Computes the list of points on the segment that intersect the box with the given origin and size.\n             * @method boxIntersection\n             * @param {number} x1\n             * @param {number} y1\n             * @param {number} w\n             * @param {number} h\n             * @returns {Array<[number, number]>}\n             */\n            this.boxIntersection = function(x, y, w, h) {\n                var a = [];\n                a.push.apply(a, this.lineIntersection(x, y, x + w, y));\n                a.push.apply(a, this.lineIntersection(x + w, y, x + w, y + h));\n                a.push.apply(a, this.lineIntersection(x + w, y + h, x, y + h));\n                a.push.apply(a, this.lineIntersection(x, y + h, x, y));\n                return a;\n            };\n            /**\n             * Computes the list of points on the segment that intersect the given bounding box, which is an object of the form { x:.., y:.., w:.., h:.. }.\n             * @method lineIntersection\n             * @param {BoundingRectangle} box\n             * @returns {Array<[number, number]>}\n             */\n            this.boundingBoxIntersection = function(box) {\n                return this.boxIntersection(box.x, box.y, box.w, box.y);\n            };\n        },\n        Straight: function (params) {\n            var _super = _jp.Segments.AbstractSegment.apply(this, arguments),\n                length, m, m2, x1, x2, y1, y2,\n                _recalc = function () {\n                    length = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n                    m = _jg.gradient({x: x1, y: y1}, {x: x2, y: y2});\n                    m2 = -1 / m;\n                };\n            this.type = \"Straight\";\n            this.getLength = function () {\n                return length;\n            };\n            this.getGradient = function () {\n                return m;\n            };\n            this.getCoordinates = function () {\n                return { x1: x1, y1: y1, x2: x2, y2: y2 };\n            };\n            this.setCoordinates = function (coords) {\n                x1 = coords.x1;\n                y1 = coords.y1;\n                x2 = coords.x2;\n                y2 = coords.y2;\n                _recalc();\n            };\n            this.setCoordinates({x1: params.x1, y1: params.y1, x2: params.x2, y2: params.y2});\n            this.getBounds = function () {\n                return {\n                    minX: Math.min(x1, x2),\n                    minY: Math.min(y1, y2),\n                    maxX: Math.max(x1, x2),\n                    maxY: Math.max(y1, y2)\n                };\n            };\n            /**\n             * returns the point on the segment's path that is 'location' along the length of the path, where 'location' is a decimal from\n             * 0 to 1 inclusive. for the straight line segment this is simple maths.\n             */\n            this.pointOnPath = function (location, absolute) {\n                if (location === 0 && !absolute) {\n                    return { x: x1, y: y1 };\n                }\n                else if (location === 1 && !absolute) {\n                    return { x: x2, y: y2 };\n                }\n                else {\n                    var l = absolute ? location > 0 ? location : length + location : location * length;\n                    return _jg.pointOnLine({x: x1, y: y1}, {x: x2, y: y2}, l);\n                }\n            };\n            /**\n             * returns the gradient of the segment at the given point - which for us is constant.\n             */\n            this.gradientAtPoint = function (_) {\n                return m;\n            };\n            /**\n             * returns the point on the segment's path that is 'distance' along the length of the path from 'location', where\n             * 'location' is a decimal from 0 to 1 inclusive, and 'distance' is a number of pixels.\n             * this hands off to jsPlumbUtil to do the maths, supplying two points and the distance.\n             */\n            this.pointAlongPathFrom = function (location, distance, absolute) {\n                var p = this.pointOnPath(location, absolute),\n                    farAwayPoint = distance <= 0 ? {x: x1, y: y1} : {x: x2, y: y2 };\n                /*\n                 location == 1 ? {\n                 x:x1 + ((x2 - x1) * 10),\n                 y:y1 + ((y1 - y2) * 10)\n                 } :\n                 */\n                if (distance <= 0 && Math.abs(distance) > 1) {\n                    distance *= -1;\n                }\n                return _jg.pointOnLine(p, farAwayPoint, distance);\n            };\n            // is c between a and b?\n            var within = function (a, b, c) {\n                return c >= Math.min(a, b) && c <= Math.max(a, b);\n            };\n            // find which of a and b is closest to c\n            var closest = function (a, b, c) {\n                return Math.abs(c - a) < Math.abs(c - b) ? a : b;\n            };\n            /**\n             Function: findClosestPointOnPath\n             Finds the closest point on this segment to [x,y]. See\n             notes on this method in AbstractSegment.\n             */\n            this.findClosestPointOnPath = function (x, y) {\n                var out = {\n                    d: Infinity,\n                    x: null,\n                    y: null,\n                    l: null,\n                    x1: x1,\n                    x2: x2,\n                    y1: y1,\n                    y2: y2\n                };\n                if (m === 0) {\n                    out.y = y1;\n                    out.x = within(x1, x2, x) ? x : closest(x1, x2, x);\n                }\n                else if (m === Infinity || m === -Infinity) {\n                    out.x = x1;\n                    out.y = within(y1, y2, y) ? y : closest(y1, y2, y);\n                }\n                else {\n                    // closest point lies on normal from given point to this line.  \n                    var b = y1 - (m * x1),\n                        b2 = y - (m2 * x),\n                    // y1 = m.x1 + b and y1 = m2.x1 + b2\n                    // so m.x1 + b = m2.x1 + b2\n                    // x1(m - m2) = b2 - b\n                    // x1 = (b2 - b) / (m - m2)\n                        _x1 = (b2 - b) / (m - m2),\n                        _y1 = (m * _x1) + b;\n                    out.x = within(x1, x2, _x1) ? _x1 : closest(x1, x2, _x1);//_x1;\n                    out.y = within(y1, y2, _y1) ? _y1 : closest(y1, y2, _y1);//_y1;\n                }\n                var fractionInSegment = _jg.lineLength([ out.x, out.y ], [ x1, y1 ]);\n                out.d = _jg.lineLength([x, y], [out.x, out.y]);\n                out.l = fractionInSegment / length;\n                return out;\n            };\n            var _pointLiesBetween = function(q, p1, p2) {\n                return (p2 > p1) ? (p1 <= q && q <= p2) : (p1 >= q && q >= p2);\n            }, _plb = _pointLiesBetween;\n            /**\n             * Calculates all intersections of the given line with this segment.\n             * @param _x1\n             * @param _y1\n             * @param _x2\n             * @param _y2\n             * @returns {Array}\n             */\n            this.lineIntersection = function(_x1, _y1, _x2, _y2) {\n                var m2 = Math.abs(_jg.gradient({x: _x1, y: _y1}, {x: _x2, y: _y2})),\n                    m1 = Math.abs(m),\n                    b = m1 === Infinity ? x1 : y1 - (m1 * x1),\n                    out = [],\n                    b2 = m2 === Infinity ? _x1 : _y1 - (m2 * _x1);\n                // if lines parallel, no intersection\n                if  (m2 !== m1) {\n                    // perpendicular, segment horizontal\n                    if(m2 === Infinity  && m1 === 0) {\n                        if (_plb(_x1, x1, x2) && _plb(y1, _y1, _y2)) {\n                            out = [ _x1, y1 ];  // we return X on the incident line and Y from the segment\n                        }\n                    } else if(m2 === 0 && m1 === Infinity) {\n                        // perpendicular, segment vertical\n                        if(_plb(_y1, y1, y2) && _plb(x1, _x1, _x2)) {\n                            out = [x1, _y1];  // we return X on the segment and Y from the incident line\n                        }\n                    } else {\n                        var X, Y;\n                        if (m2 === Infinity) {\n                            // test line is a vertical line. where does it cross the segment?\n                            X = _x1;\n                            if (_plb(X, x1, x2)) {\n                                Y = (m1 * _x1) + b;\n                                if (_plb(Y, _y1, _y2)) {\n                                    out = [ X, Y ];\n                                }\n                            }\n                        } else if (m2 === 0) {\n                            Y = _y1;\n                            // test line is a horizontal line. where does it cross the segment?\n                            if (_plb(Y, y1, y2)) {\n                                X = (_y1 - b) / m1;\n                                if (_plb(X, _x1, _x2)) {\n                                    out = [ X, Y ];\n                                }\n                            }\n                        } else {\n                            // mX + b = m2X + b2\n                            // mX - m2X = b2 - b\n                            // X(m - m2) = b2 - b\n                            // X = (b2 - b) / (m - m2)\n                            // Y = mX + b\n                            X = (b2 - b) / (m1 - m2);\n                            Y = (m1 * X) + b;\n                            if(_plb(X, x1, x2) && _plb(Y, y1, y2)) {\n                                out = [ X,  Y];\n                            }\n                        }\n                    }\n                }\n                return out;\n            };\n            /**\n             * Calculates all intersections of the given box with this segment. By default this method simply calls `lineIntersection` with each of the four\n             * faces of the box; subclasses can override this if they think there's a faster way to compute the entire box at once.\n             * @param x X position of top left corner of box\n             * @param y Y position of top left corner of box\n             * @param w width of box\n             * @param h height of box\n             * @returns {Array}\n             */\n            this.boxIntersection = function(x, y, w, h) {\n                var a = [];\n                a.push.apply(a, this.lineIntersection(x, y, x + w, y));\n                a.push.apply(a, this.lineIntersection(x + w, y, x + w, y + h));\n                a.push.apply(a, this.lineIntersection(x + w, y + h, x, y + h));\n                a.push.apply(a, this.lineIntersection(x, y + h, x, y));\n                return a;\n            };\n            /**\n             * Calculates all intersections of the given bounding box with this segment. By default this method simply calls `lineIntersection` with each of the four\n             * faces of the box; subclasses can override this if they think there's a faster way to compute the entire box at once.\n             * @param box Bounding box, in { x:.., y:..., w:..., h:... } format.\n             * @returns {Array}\n             */\n            this.boundingBoxIntersection = function(box) {\n                return this.boxIntersection(box.x, box.y, box.w, box.h);\n            };\n        },\n        /*\n         Arc Segment. You need to supply:\n         r   -   radius\n         cx  -   center x for the arc\n         cy  -   center y for the arc\n         ac  -   whether the arc is anticlockwise or not. default is clockwise.\n         and then either:\n         startAngle  -   startAngle for the arc.\n         endAngle    -   endAngle for the arc.\n         or:\n         x1          -   x for start point\n         y1          -   y for start point\n         x2          -   x for end point\n         y2          -   y for end point\n         */\n        Arc: function (params) {\n            var _super = _jp.Segments.AbstractSegment.apply(this, arguments),\n                _calcAngle = function (_x, _y) {\n                    return _jg.theta([params.cx, params.cy], [_x, _y]);\n                },\n                _calcAngleForLocation = function (segment, location) {\n                    if (segment.anticlockwise) {\n                        var sa = segment.startAngle < segment.endAngle ? segment.startAngle + TWO_PI : segment.startAngle,\n                            s = Math.abs(sa - segment.endAngle);\n                        return sa - (s * location);\n                    }\n                    else {\n                        var ea = segment.endAngle < segment.startAngle ? segment.endAngle + TWO_PI : segment.endAngle,\n                            ss = Math.abs(ea - segment.startAngle);\n                        return segment.startAngle + (ss * location);\n                    }\n                },\n                TWO_PI = 2 * Math.PI;\n            this.radius = params.r;\n            this.anticlockwise = params.ac;\n            this.type = \"Arc\";\n            if (params.startAngle && params.endAngle) {\n                this.startAngle = params.startAngle;\n                this.endAngle = params.endAngle;\n                this.x1 = params.cx + (this.radius * Math.cos(params.startAngle));\n                this.y1 = params.cy + (this.radius * Math.sin(params.startAngle));\n                this.x2 = params.cx + (this.radius * Math.cos(params.endAngle));\n                this.y2 = params.cy + (this.radius * Math.sin(params.endAngle));\n            }\n            else {\n                this.startAngle = _calcAngle(params.x1, params.y1);\n                this.endAngle = _calcAngle(params.x2, params.y2);\n                this.x1 = params.x1;\n                this.y1 = params.y1;\n                this.x2 = params.x2;\n                this.y2 = params.y2;\n            }\n            if (this.endAngle < 0) {\n                this.endAngle += TWO_PI;\n            }\n            if (this.startAngle < 0) {\n                this.startAngle += TWO_PI;\n            }\n            // segment is used by vml     \n            //this.segment = _jg.quadrant([this.x1, this.y1], [this.x2, this.y2]);\n            // we now have startAngle and endAngle as positive numbers, meaning the\n            // absolute difference (|d|) between them is the sweep (s) of this arc, unless the\n            // arc is 'anticlockwise' in which case 's' is given by 2PI - |d|.\n            var ea = this.endAngle < this.startAngle ? this.endAngle + TWO_PI : this.endAngle;\n            this.sweep = Math.abs(ea - this.startAngle);\n            if (this.anticlockwise) {\n                this.sweep = TWO_PI - this.sweep;\n            }\n            var circumference = 2 * Math.PI * this.radius,\n                frac = this.sweep / TWO_PI,\n                length = circumference * frac;\n            this.getLength = function () {\n                return length;\n            };\n            this.getBounds = function () {\n                return {\n                    minX: params.cx - params.r,\n                    maxX: params.cx + params.r,\n                    minY: params.cy - params.r,\n                    maxY: params.cy + params.r\n                };\n            };\n            var VERY_SMALL_VALUE = 0.0000000001,\n                gentleRound = function (n) {\n                    var f = Math.floor(n), r = Math.ceil(n);\n                    if (n - f < VERY_SMALL_VALUE) {\n                        return f;\n                    }\n                    else if (r - n < VERY_SMALL_VALUE) {\n                        return r;\n                    }\n                    return n;\n                };\n            /**\n             * returns the point on the segment's path that is 'location' along the length of the path, where 'location' is a decimal from\n             * 0 to 1 inclusive.\n             */\n            this.pointOnPath = function (location, absolute) {\n                if (location === 0) {\n                    return { x: this.x1, y: this.y1, theta: this.startAngle };\n                }\n                else if (location === 1) {\n                    return { x: this.x2, y: this.y2, theta: this.endAngle };\n                }\n                if (absolute) {\n                    location = location / length;\n                }\n                var angle = _calcAngleForLocation(this, location),\n                    _x = params.cx + (params.r * Math.cos(angle)),\n                    _y = params.cy + (params.r * Math.sin(angle));\n                return { x: gentleRound(_x), y: gentleRound(_y), theta: angle };\n            };\n            /**\n             * returns the gradient of the segment at the given point.\n             */\n            this.gradientAtPoint = function (location, absolute) {\n                var p = this.pointOnPath(location, absolute);\n                var m = _jg.normal([ params.cx, params.cy ], [p.x, p.y ]);\n                if (!this.anticlockwise && (m === Infinity || m === -Infinity)) {\n                    m *= -1;\n                }\n                return m;\n            };\n            this.pointAlongPathFrom = function (location, distance, absolute) {\n                var p = this.pointOnPath(location, absolute),\n                    arcSpan = distance / circumference * 2 * Math.PI,\n                    dir = this.anticlockwise ? -1 : 1,\n                    startAngle = p.theta + (dir * arcSpan),\n                    startX = params.cx + (this.radius * Math.cos(startAngle)),\n                    startY = params.cy + (this.radius * Math.sin(startAngle));\n                return {x: startX, y: startY};\n            };\n            // TODO: lineIntersection\n        },\n        Bezier: function (params) {\n            this.curve = [\n                { x: params.x1, y: params.y1},\n                { x: params.cp1x, y: params.cp1y },\n                { x: params.cp2x, y: params.cp2y },\n                { x: params.x2, y: params.y2 }\n            ];\n            var _isPoint = function(c) {\n                return c[0].x === c[1].x && c[0].y === c[1].y;\n            };\n            var _dist = function(p1, p2 ) {\n                return Math.sqrt(Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2));\n            };\n            var _compute = function(loc) {\n                var EMPTY_POINT  = {x:0, y:0};\n                if (loc === 0) {\n                    return this.curve[0];\n                }\n                var degree = this.curve.length - 1;\n                if (loc === 1) {\n                    return this.curve[degree];\n                }\n                var o = this.curve;\n                var s = 1 - loc;\n                if (degree === 0) {\n                    return this.curve[0];\n                }\n                if (degree === 1) {\n                    return {\n                        x: s * o[0].x + loc * o[1].x,\n                        y: s * o[0].y + loc * o[1].y\n                    };\n                }\n                if (degree < 4) {\n                    var l = s * s, h = loc * loc, u = 0, m, g, f;\n                    if (degree === 2) {\n                        o = [o[0], o[1], o[2], EMPTY_POINT];\n                        m = l;\n                        g = 2 * (s * loc);\n                        f = h;\n                    } else if (degree === 3) {\n                        m = l * s;\n                        g = 3 * (l * loc);\n                        f = 3 * (s * h);\n                        u = loc * h;\n                    }\n                    return {\n                        x: m * o[0].x + g * o[1].x + f * o[2].x + u * o[3].x,\n                        y: m * o[0].y + g * o[1].y + f * o[2].y + u * o[3].y\n                    };\n                } else {\n                    return EMPTY_POINT; // not supported.\n                }\n            }.bind(this);\n            var _getLUT = function(steps) {\n                var out = [];\n                steps--;\n                for (var n = 0; n <= steps; n++) {\n                    out.push(_compute(n / steps));\n                }\n                return out;\n            };\n            var _computeLength = function() {\n                if (_isPoint(this.curve)) {\n                    this.length = 0;\n                }\n                var steps = 16;\n                var  lut = _getLUT(steps);\n                this.length = 0;\n                for (var i = 0; i < steps - 1; i++) {\n                    var a = lut[i], b = lut[i + 1];\n                    this.length += _dist(a, b);\n                }\n            }.bind(this);\n            var _super = _jp.Segments.AbstractSegment.apply(this, arguments);\n            // although this is not a strictly rigorous determination of bounds\n            // of a bezier curve, it works for the types of curves that this segment\n            // type produces.\n            this.bounds = {\n                minX: Math.min(params.x1, params.x2, params.cp1x, params.cp2x),\n                minY: Math.min(params.y1, params.y2, params.cp1y, params.cp2y),\n                maxX: Math.max(params.x1, params.x2, params.cp1x, params.cp2x),\n                maxY: Math.max(params.y1, params.y2, params.cp1y, params.cp2y)\n            };\n            this.type = \"Bezier\";\n            _computeLength();\n            var _translateLocation = function (_curve, location, absolute) {\n                if (absolute) {\n                    location = root.jsBezier.locationAlongCurveFrom(_curve, location > 0 ? 0 : 1, location);\n                }\n                return location;\n            };\n            /**\n             * returns the point on the segment's path that is 'location' along the length of the path, where 'location' is a decimal from\n             * 0 to 1 inclusive.\n             */\n            this.pointOnPath = function (location, absolute) {\n                location = _translateLocation(this.curve, location, absolute);\n                return root.jsBezier.pointOnCurve(this.curve, location);\n            };\n            /**\n             * returns the gradient of the segment at the given point.\n             */\n            this.gradientAtPoint = function (location, absolute) {\n                location = _translateLocation(this.curve, location, absolute);\n                return root.jsBezier.gradientAtPoint(this.curve, location);\n            };\n            this.pointAlongPathFrom = function (location, distance, absolute) {\n                location = _translateLocation(this.curve, location, absolute);\n                return root.jsBezier.pointAlongCurveFrom(this.curve, location, distance);\n            };\n            this.getLength = function () {\n                return this.length;\n            };\n            this.getBounds = function () {\n                return this.bounds;\n            };\n            this.findClosestPointOnPath = function (x, y) {\n                var p = root.jsBezier.nearestPointOnCurve({x:x,y:y}, this.curve);\n                return {\n                    d:Math.sqrt(Math.pow(p.point.x - x, 2) + Math.pow(p.point.y - y, 2)),\n                    x:p.point.x,\n                    y:p.point.y,\n                    l:1 - p.location,\n                    s:this\n                };\n            };\n            this.lineIntersection = function(x1, y1, x2, y2) {\n                return root.jsBezier.lineIntersection(x1, y1, x2, y2, this.curve);\n            };\n        }\n    };\n    _jp.SegmentRenderer = {\n        getPath: function (segment, isFirstSegment) {\n            return ({\n                \"Straight\": function (isFirstSegment) {\n                    var d = segment.getCoordinates();\n                    return (isFirstSegment ? \"M \" + d.x1 + \" \" + d.y1 + \" \" : \"\") + \"L \" + d.x2 + \" \" + d.y2;\n                },\n                \"Bezier\": function (isFirstSegment) {\n                    var d = segment.params;\n                    return (isFirstSegment ? \"M \" + d.x2 + \" \" + d.y2 + \" \" : \"\") +\n                        \"C \" + d.cp2x + \" \" + d.cp2y + \" \" + d.cp1x + \" \" + d.cp1y + \" \" + d.x1 + \" \" + d.y1;\n                },\n                \"Arc\": function (isFirstSegment) {\n                    var d = segment.params,\n                        laf = segment.sweep > Math.PI ? 1 : 0,\n                        sf = segment.anticlockwise ? 0 : 1;\n                    return  (isFirstSegment ? \"M\" + segment.x1 + \" \" + segment.y1  + \" \" : \"\")  + \"A \" + segment.radius + \" \" + d.r + \" 0 \" + laf + \",\" + sf + \" \" + segment.x2 + \" \" + segment.y2;\n                }\n            })[segment.type](isFirstSegment);\n        }\n    };\n    /*\n     Class: UIComponent\n     Superclass for Connector and AbstractEndpoint.\n     */\n    var AbstractComponent = function () {\n        this.resetBounds = function () {\n            this.bounds = { minX: Infinity, minY: Infinity, maxX: -Infinity, maxY: -Infinity };\n        };\n        this.resetBounds();\n    };\n    /*\n     * Class: Connector\n     * Superclass for all Connectors; here is where Segments are managed.  This is exposed on jsPlumb just so it\n     * can be accessed from other files. You should not try to instantiate one of these directly.\n     *\n     * When this class is asked for a pointOnPath, or gradient etc, it must first figure out which segment to dispatch\n     * that request to. This is done by keeping track of the total connector length as segments are added, and also\n     * their cumulative ratios to the total length.  Then when the right segment is found it is a simple case of dispatching\n     * the request to it (and adjusting 'location' so that it is relative to the beginning of that segment.)\n     */\n    _jp.Connectors.AbstractConnector = function (params) {\n        AbstractComponent.apply(this, arguments);\n        var segments = [],\n            totalLength = 0,\n            segmentProportions = [],\n            segmentProportionalLengths = [],\n            stub = params.stub || 0,\n            sourceStub = _ju.isArray(stub) ? stub[0] : stub,\n            targetStub = _ju.isArray(stub) ? stub[1] : stub,\n            gap = params.gap || 0,\n            sourceGap = _ju.isArray(gap) ? gap[0] : gap,\n            targetGap = _ju.isArray(gap) ? gap[1] : gap,\n            userProvidedSegments = null,\n            paintInfo = null;\n        this.getPathData = function() {\n            var p = \"\";\n            for (var i = 0; i < segments.length; i++) {\n                p += _jp.SegmentRenderer.getPath(segments[i], i === 0);\n                p += \" \";\n            }\n            return p;\n        };\n        /**\n         * Function: findSegmentForPoint\n         * Returns the segment that is closest to the given [x,y],\n         * null if nothing found.  This function returns a JS\n         * object with:\n         *\n         *   d   -   distance from segment\n         *   l   -   proportional location in segment\n         *   x   -   x point on the segment\n         *   y   -   y point on the segment\n         *   s   -   the segment itself.\n         *   connectorLocation - the location on the connector of the point, expressed as a decimal between 0 and 1 inclusive.\n         */\n        this.findSegmentForPoint = function (x, y) {\n            var out = { d: Infinity, s: null, x: null, y: null, l: null };\n            for (var i = 0; i < segments.length; i++) {\n                var _s = segments[i].findClosestPointOnPath(x, y);\n                if (_s.d < out.d) {\n                    out.d = _s.d;\n                    out.l = _s.l;\n                    out.x = _s.x;\n                    out.y = _s.y;\n                    out.s = segments[i];\n                    out.x1 = _s.x1;\n                    out.x2 = _s.x2;\n                    out.y1 = _s.y1;\n                    out.y2 = _s.y2;\n                    out.index = i;\n                    out.connectorLocation = segmentProportions[i][0] + (_s.l * (segmentProportions[i][1] - segmentProportions[i][0]));\n                }\n            }\n            return out;\n        };\n        this.lineIntersection = function(x1, y1, x2, y2) {\n            var out = [];\n            for (var i = 0; i < segments.length; i++) {\n                out.push.apply(out, segments[i].lineIntersection(x1, y1, x2, y2));\n            }\n            return out;\n        };\n        this.boxIntersection = function(x, y, w, h) {\n            var out = [];\n            for (var i = 0; i < segments.length; i++) {\n                out.push.apply(out, segments[i].boxIntersection(x, y, w, h));\n            }\n            return out;\n        };\n        this.boundingBoxIntersection = function(box) {\n            var out = [];\n            for (var i = 0; i < segments.length; i++) {\n                out.push.apply(out, segments[i].boundingBoxIntersection(box));\n            }\n            return out;\n        };\n        var _updateSegmentProportions = function () {\n                var curLoc = 0;\n                for (var i = 0; i < segments.length; i++) {\n                    var sl = segments[i].getLength();\n                    segmentProportionalLengths[i] = sl / totalLength;\n                    segmentProportions[i] = [curLoc, (curLoc += (sl / totalLength)) ];\n                }\n            },\n            /**\n             * returns [segment, proportion of travel in segment, segment index] for the segment\n             * that contains the point which is 'location' distance along the entire path, where\n             * 'location' is a decimal between 0 and 1 inclusive. in this connector type, paths\n             * are made up of a list of segments, each of which contributes some fraction to\n             * the total length.\n             * From 1.3.10 this also supports the 'absolute' property, which lets us specify a location\n             * as the absolute distance in pixels, rather than a proportion of the total path.\n             */\n            _findSegmentForLocation = function (location, absolute) {\n                var idx, i, inSegmentProportion;\n                if (absolute) {\n                    location = location > 0 ? location / totalLength : (totalLength + location) / totalLength;\n                }\n                // if location 1 we know its the last segment\n                if (location === 1) {\n                    idx = segments.length - 1;\n                    inSegmentProportion = 1;\n                } else if (location === 0) {\n                    // if location 0 we know its the first segment\n                    inSegmentProportion = 0;\n                    idx = 0;\n                } else {\n                    // if location >= 0.5, traverse backwards (of course not exact, who knows the segment proportions. but\n                    // an educated guess at least)\n                    if (location >= 0.5) {\n                        idx = 0;\n                        inSegmentProportion = 0;\n                        for (i = segmentProportions.length - 1; i > -1; i--) {\n                            if (segmentProportions[i][1] >= location && segmentProportions[i][0] <= location) {\n                                idx = i;\n                                inSegmentProportion = (location - segmentProportions[i][0]) / segmentProportionalLengths[i];\n                                break;\n                            }\n                        }\n                    } else {\n                        idx = segmentProportions.length - 1;\n                        inSegmentProportion = 1;\n                        for (i = 0; i < segmentProportions.length; i++) {\n                            if (segmentProportions[i][1] >= location) {\n                                idx = i;\n                                inSegmentProportion = (location - segmentProportions[i][0]) / segmentProportionalLengths[i];\n                                break;\n                            }\n                        }\n                    }\n                }\n                return { segment: segments[idx], proportion: inSegmentProportion, index: idx };\n            },\n            _addSegment = function (conn, type, params) {\n                if (params.x1 === params.x2 && params.y1 === params.y2) {\n                    return;\n                }\n                var s = new _jp.Segments[type](params);\n                segments.push(s);\n                totalLength += s.getLength();\n                conn.updateBounds(s);\n            },\n            _clearSegments = function () {\n                totalLength = segments.length = segmentProportions.length = segmentProportionalLengths.length = 0;\n            };\n        this.setSegments = function (_segs) {\n            userProvidedSegments = [];\n            totalLength = 0;\n            for (var i = 0; i < _segs.length; i++) {\n                userProvidedSegments.push(_segs[i]);\n                totalLength += _segs[i].getLength();\n            }\n        };\n        this.getLength = function() {\n            return totalLength;\n        };\n        var _prepareCompute = function (params) {\n            this.strokeWidth = params.strokeWidth;\n            var segment = _jg.quadrant(params.sourcePos, params.targetPos),\n                swapX = params.targetPos[0] < params.sourcePos[0],\n                swapY = params.targetPos[1] < params.sourcePos[1],\n                lw = params.strokeWidth || 1,\n                so = params.sourceEndpoint.anchor.getOrientation(params.sourceEndpoint),\n                to = params.targetEndpoint.anchor.getOrientation(params.targetEndpoint),\n                x = swapX ? params.targetPos[0] : params.sourcePos[0],\n                y = swapY ? params.targetPos[1] : params.sourcePos[1],\n                w = Math.abs(params.targetPos[0] - params.sourcePos[0]),\n                h = Math.abs(params.targetPos[1] - params.sourcePos[1]);\n            \n            // if either anchor does not have an orientation set, we derive one from their relative\n            // positions.  we fix the axis to be the one in which the two elements are further apart, and\n            // point each anchor at the other element.  this is also used when dragging a new connection.\n            if (so[0] === 0 && so[1] === 0 || to[0] === 0 && to[1] === 0) {\n                var index = w > h ? 0 : 1, oIndex = [1, 0][index];\n                so = [];\n                to = [];\n                so[index] = params.sourcePos[index] > params.targetPos[index] ? -1 : 1;\n                to[index] = params.sourcePos[index] > params.targetPos[index] ? 1 : -1;\n                so[oIndex] = 0;\n                to[oIndex] = 0;\n            }\n            var sx = swapX ? w + (sourceGap * so[0]) : sourceGap * so[0],\n                sy = swapY ? h + (sourceGap * so[1]) : sourceGap * so[1],\n                tx = swapX ? targetGap * to[0] : w + (targetGap * to[0]),\n                ty = swapY ? targetGap * to[1] : h + (targetGap * to[1]),\n                oProduct = ((so[0] * to[0]) + (so[1] * to[1]));\n            var result = {\n                sx: sx, sy: sy, tx: tx, ty: ty, lw: lw,\n                xSpan: Math.abs(tx - sx),\n                ySpan: Math.abs(ty - sy),\n                mx: (sx + tx) / 2,\n                my: (sy + ty) / 2,\n                so: so, to: to, x: x, y: y, w: w, h: h,\n                segment: segment,\n                startStubX: sx + (so[0] * sourceStub),\n                startStubY: sy + (so[1] * sourceStub),\n                endStubX: tx + (to[0] * targetStub),\n                endStubY: ty + (to[1] * targetStub),\n                isXGreaterThanStubTimes2: Math.abs(sx - tx) > (sourceStub + targetStub),\n                isYGreaterThanStubTimes2: Math.abs(sy - ty) > (sourceStub + targetStub),\n                opposite: oProduct === -1,\n                perpendicular: oProduct === 0,\n                orthogonal: oProduct === 1,\n                sourceAxis: so[0] === 0 ? \"y\" : \"x\",\n                points: [x, y, w, h, sx, sy, tx, ty ],\n                stubs:[sourceStub, targetStub]\n            };\n            result.anchorOrientation = result.opposite ? \"opposite\" : result.orthogonal ? \"orthogonal\" : \"perpendicular\";\n            return result;\n        };\n        this.getSegments = function () {\n            return segments;\n        };\n        this.updateBounds = function (segment) {\n            var segBounds = segment.getBounds();\n            this.bounds.minX = Math.min(this.bounds.minX, segBounds.minX);\n            this.bounds.maxX = Math.max(this.bounds.maxX, segBounds.maxX);\n            this.bounds.minY = Math.min(this.bounds.minY, segBounds.minY);\n            this.bounds.maxY = Math.max(this.bounds.maxY, segBounds.maxY);\n        };\n        var dumpSegmentsToConsole = function () {\n            console.log(\"SEGMENTS:\");\n            for (var i = 0; i < segments.length; i++) {\n                console.log(segments[i].type, segments[i].getLength(), segmentProportions[i]);\n            }\n        };\n        this.pointOnPath = function (location, absolute) {\n            var seg = _findSegmentForLocation(location, absolute);\n            return seg.segment && seg.segment.pointOnPath(seg.proportion, false) || [0, 0];\n        };\n        this.gradientAtPoint = function (location, absolute) {\n            var seg = _findSegmentForLocation(location, absolute);\n            return seg.segment && seg.segment.gradientAtPoint(seg.proportion, false) || 0;\n        };\n        this.pointAlongPathFrom = function (location, distance, absolute) {\n            var seg = _findSegmentForLocation(location, absolute);\n            // TODO what happens if this crosses to the next segment?\n            return seg.segment && seg.segment.pointAlongPathFrom(seg.proportion, distance, false) || [0, 0];\n        };\n        this.compute = function (params) {\n            paintInfo = _prepareCompute.call(this, params);\n            _clearSegments();\n            this._compute(paintInfo, params);\n            this.x = paintInfo.points[0];\n            this.y = paintInfo.points[1];\n            this.w = paintInfo.points[2];\n            this.h = paintInfo.points[3];\n            this.segment = paintInfo.segment;\n            _updateSegmentProportions();\n        };\n        return {\n            addSegment: _addSegment,\n            prepareCompute: _prepareCompute,\n            sourceStub: sourceStub,\n            targetStub: targetStub,\n            maxStub: Math.max(sourceStub, targetStub),\n            sourceGap: sourceGap,\n            targetGap: targetGap,\n            maxGap: Math.max(sourceGap, targetGap)\n        };\n    };\n    _ju.extend(_jp.Connectors.AbstractConnector, AbstractComponent);\n    // ********************************* END OF CONNECTOR TYPES *******************************************************************\n    // ********************************* ENDPOINT TYPES *******************************************************************\n    _jp.Endpoints.AbstractEndpoint = function (params) {\n        AbstractComponent.apply(this, arguments);\n        var compute = this.compute = function (anchorPoint, orientation, endpointStyle, connectorPaintStyle) {\n            var out = this._compute.apply(this, arguments);\n            this.x = out[0];\n            this.y = out[1];\n            this.w = out[2];\n            this.h = out[3];\n            this.bounds.minX = this.x;\n            this.bounds.minY = this.y;\n            this.bounds.maxX = this.x + this.w;\n            this.bounds.maxY = this.y + this.h;\n            return out;\n        };\n        return {\n            compute: compute,\n            cssClass: params.cssClass\n        };\n    };\n    _ju.extend(_jp.Endpoints.AbstractEndpoint, AbstractComponent);\n    /**\n     * Class: Endpoints.Dot\n     * A round endpoint, with default radius 10 pixels.\n     */\n    /**\n     * Function: Constructor\n     *\n     * Parameters:\n     *\n     *    radius    -    radius of the endpoint.  defaults to 10 pixels.\n     */\n    _jp.Endpoints.Dot = function (params) {\n        this.type = \"Dot\";\n        var _super = _jp.Endpoints.AbstractEndpoint.apply(this, arguments);\n        params = params || {};\n        this.radius = params.radius || 10;\n        this.defaultOffset = 0.5 * this.radius;\n        this.defaultInnerRadius = this.radius / 3;\n        this._compute = function (anchorPoint, orientation, endpointStyle, connectorPaintStyle) {\n            this.radius = endpointStyle.radius || this.radius;\n            var x = anchorPoint[0] - this.radius,\n                y = anchorPoint[1] - this.radius,\n                w = this.radius * 2,\n                h = this.radius * 2;\n            if (endpointStyle.stroke) {\n                var lw = endpointStyle.strokeWidth || 1;\n                x -= lw;\n                y -= lw;\n                w += (lw * 2);\n                h += (lw * 2);\n            }\n            return [ x, y, w, h, this.radius ];\n        };\n    };\n    _ju.extend(_jp.Endpoints.Dot, _jp.Endpoints.AbstractEndpoint);\n    _jp.Endpoints.Rectangle = function (params) {\n        this.type = \"Rectangle\";\n        var _super = _jp.Endpoints.AbstractEndpoint.apply(this, arguments);\n        params = params || {};\n        this.width = params.width || 20;\n        this.height = params.height || 20;\n        this._compute = function (anchorPoint, orientation, endpointStyle, connectorPaintStyle) {\n            var width = endpointStyle.width || this.width,\n                height = endpointStyle.height || this.height,\n                x = anchorPoint[0] - (width / 2),\n                y = anchorPoint[1] - (height / 2);\n            return [ x, y, width, height];\n        };\n    };\n    _ju.extend(_jp.Endpoints.Rectangle, _jp.Endpoints.AbstractEndpoint);\n    var DOMElementEndpoint = function (params) {\n        _jp.jsPlumbUIComponent.apply(this, arguments);\n        this._jsPlumb.displayElements = [];\n    };\n    _ju.extend(DOMElementEndpoint, _jp.jsPlumbUIComponent, {\n        getDisplayElements: function () {\n            return this._jsPlumb.displayElements;\n        },\n        appendDisplayElement: function (el) {\n            this._jsPlumb.displayElements.push(el);\n        }\n    });\n    /**\n     * Class: Endpoints.Image\n     * Draws an image as the Endpoint.\n     */\n    /**\n     * Function: Constructor\n     *\n     * Parameters:\n     *\n     *    src    -    location of the image to use.\n     TODO: multiple references to self. not sure quite how to get rid of them entirely. perhaps self = null in the cleanup\n     function will suffice\n     TODO this class still might leak memory.\n     */\n    _jp.Endpoints.Image = function (params) {\n        this.type = \"Image\";\n        DOMElementEndpoint.apply(this, arguments);\n        _jp.Endpoints.AbstractEndpoint.apply(this, arguments);\n        var _onload = params.onload,\n            src = params.src || params.url,\n            clazz = params.cssClass ? \" \" + params.cssClass : \"\";\n        this._jsPlumb.img = new Image();\n        this._jsPlumb.ready = false;\n        this._jsPlumb.initialized = false;\n        this._jsPlumb.deleted = false;\n        this._jsPlumb.widthToUse = params.width;\n        this._jsPlumb.heightToUse = params.height;\n        this._jsPlumb.endpoint = params.endpoint;\n        this._jsPlumb.img.onload = function () {\n            if (this._jsPlumb != null) {\n                this._jsPlumb.ready = true;\n                this._jsPlumb.widthToUse = this._jsPlumb.widthToUse || this._jsPlumb.img.width;\n                this._jsPlumb.heightToUse = this._jsPlumb.heightToUse || this._jsPlumb.img.height;\n                if (_onload) {\n                    _onload(this);\n                }\n            }\n        }.bind(this);\n        /*\n         Function: setImage\n         Sets the Image to use in this Endpoint.\n         Parameters:\n         img         -   may be a URL or an Image object\n         onload      -   optional; a callback to execute once the image has loaded.\n         */\n        this._jsPlumb.endpoint.setImage = function (_img, onload) {\n            var s = _img.constructor === String ? _img : _img.src;\n            _onload = onload;\n            this._jsPlumb.img.src = s;\n            if (this.canvas != null) {\n                this.canvas.setAttribute(\"src\", this._jsPlumb.img.src);\n            }\n        }.bind(this);\n        this._jsPlumb.endpoint.setImage(src, _onload);\n        this._compute = function (anchorPoint, orientation, endpointStyle, connectorPaintStyle) {\n            this.anchorPoint = anchorPoint;\n            if (this._jsPlumb.ready) {\n                return [anchorPoint[0] - this._jsPlumb.widthToUse / 2, anchorPoint[1] - this._jsPlumb.heightToUse / 2,\n                    this._jsPlumb.widthToUse, this._jsPlumb.heightToUse];\n            }\n            else {\n                return [0, 0, 0, 0];\n            }\n        };\n        this.canvas = _jp.createElement(\"img\", {\n            position:\"absolute\",\n            margin:0,\n            padding:0,\n            outline:0\n        }, this._jsPlumb.instance.endpointClass + clazz);\n        if (this._jsPlumb.widthToUse) {\n            this.canvas.setAttribute(\"width\", this._jsPlumb.widthToUse);\n        }\n        if (this._jsPlumb.heightToUse) {\n            this.canvas.setAttribute(\"height\", this._jsPlumb.heightToUse);\n        }\n        this._jsPlumb.instance.appendElement(this.canvas);\n        this.actuallyPaint = function (d, style, anchor) {\n            if (!this._jsPlumb.deleted) {\n                if (!this._jsPlumb.initialized) {\n                    this.canvas.setAttribute(\"src\", this._jsPlumb.img.src);\n                    this.appendDisplayElement(this.canvas);\n                    this._jsPlumb.initialized = true;\n                }\n                var x = this.anchorPoint[0] - (this._jsPlumb.widthToUse / 2),\n                    y = this.anchorPoint[1] - (this._jsPlumb.heightToUse / 2);\n                _ju.sizeElement(this.canvas, x, y, this._jsPlumb.widthToUse, this._jsPlumb.heightToUse);\n            }\n        };\n        this.paint = function (style, anchor) {\n            if (this._jsPlumb != null) {  // may have been deleted\n                if (this._jsPlumb.ready) {\n                    this.actuallyPaint(style, anchor);\n                }\n                else {\n                    root.setTimeout(function () {\n                        this.paint(style, anchor);\n                    }.bind(this), 200);\n                }\n            }\n        };\n    };\n    _ju.extend(_jp.Endpoints.Image, [ DOMElementEndpoint, _jp.Endpoints.AbstractEndpoint ], {\n        cleanup: function (force) {\n            if (force) {\n                this._jsPlumb.deleted = true;\n                if (this.canvas) {\n                    this.canvas.parentNode.removeChild(this.canvas);\n                }\n                this.canvas = null;\n            }\n        }\n    });\n    /*\n     * Class: Endpoints.Blank\n     * An Endpoint that paints nothing (visible) on the screen.  Supports cssClass and hoverClass parameters like all Endpoints.\n     */\n    _jp.Endpoints.Blank = function (params) {\n        var _super = _jp.Endpoints.AbstractEndpoint.apply(this, arguments);\n        this.type = \"Blank\";\n        DOMElementEndpoint.apply(this, arguments);\n        this._compute = function (anchorPoint, orientation, endpointStyle, connectorPaintStyle) {\n            return [anchorPoint[0], anchorPoint[1], 10, 0];\n        };\n        var clazz = params.cssClass ? \" \" + params.cssClass : \"\";\n        this.canvas = _jp.createElement(\"div\", {\n            display: \"block\",\n            width: \"1px\",\n            height: \"1px\",\n            background: \"transparent\",\n            position: \"absolute\"\n        }, this._jsPlumb.instance.endpointClass + clazz);\n        this._jsPlumb.instance.appendElement(this.canvas);\n        this.paint = function (style, anchor) {\n            _ju.sizeElement(this.canvas, this.x, this.y, this.w, this.h);\n        };\n    };\n    _ju.extend(_jp.Endpoints.Blank, [_jp.Endpoints.AbstractEndpoint, DOMElementEndpoint], {\n        cleanup: function () {\n            if (this.canvas && this.canvas.parentNode) {\n                this.canvas.parentNode.removeChild(this.canvas);\n            }\n        }\n    });\n    /*\n     * Class: Endpoints.Triangle\n     * A triangular Endpoint.\n     */\n    /*\n     * Function: Constructor\n     *\n     * Parameters:\n     *\n     * width   width of the triangle's base.  defaults to 55 pixels.\n     * height  height of the triangle from base to apex.  defaults to 55 pixels.\n     */\n    _jp.Endpoints.Triangle = function (params) {\n        this.type = \"Triangle\";\n        _jp.Endpoints.AbstractEndpoint.apply(this, arguments);\n        var self = this;\n        params = params || {  };\n        params.width = params.width || 55;\n        params.height = params.height || 55;\n        this.width = params.width;\n        this.height = params.height;\n        this._compute = function (anchorPoint, orientation, endpointStyle, connectorPaintStyle) {\n            var width = endpointStyle.width || self.width,\n                height = endpointStyle.height || self.height,\n                x = anchorPoint[0] - (width / 2),\n                y = anchorPoint[1] - (height / 2);\n            return [ x, y, width, height ];\n        };\n    };\n// ********************************* END OF ENDPOINT TYPES *******************************************************************\n// ********************************* OVERLAY DEFINITIONS ***********************************************************************    \n    var AbstractOverlay = _jp.Overlays.AbstractOverlay = function (params) {\n        this.visible = true;\n        this.isAppendedAtTopLevel = true;\n        this.component = params.component;\n        this.loc = params.location == null ? 0.5 : params.location;\n        this.endpointLoc = params.endpointLocation == null ? [ 0.5, 0.5] : params.endpointLocation;\n        this.visible = params.visible !== false;\n    };\n    AbstractOverlay.prototype = {\n        cleanup: function (force) {\n            if (force) {\n                this.component = null;\n                this.canvas = null;\n                this.endpointLoc = null;\n            }\n        },\n        reattach:function(instance, component) { },\n        setVisible: function (val) {\n            this.visible = val;\n            this.component.repaint();\n        },\n        isVisible: function () {\n            return this.visible;\n        },\n        hide: function () {\n            this.setVisible(false);\n        },\n        show: function () {\n            this.setVisible(true);\n        },\n        incrementLocation: function (amount) {\n            this.loc += amount;\n            this.component.repaint();\n        },\n        setLocation: function (l) {\n            this.loc = l;\n            this.component.repaint();\n        },\n        getLocation: function () {\n            return this.loc;\n        },\n        updateFrom:function() { }\n    };\n    /*\n     * Class: Overlays.Arrow\n     *\n     * An arrow overlay, defined by four points: the head, the two sides of the tail, and a 'foldback' point at some distance along the length\n     * of the arrow that lines from each tail point converge into.  The foldback point is defined using a decimal that indicates some fraction\n     * of the length of the arrow and has a default value of 0.623.  A foldback point value of 1 would mean that the arrow had a straight line\n     * across the tail.\n     */\n    /*\n     * @constructor\n     *\n     * @param {Object} params Constructor params.\n     * @param {Number} [params.length] Distance in pixels from head to tail baseline. default 20.\n     * @param {Number} [params.width] Width in pixels of the tail baseline. default 20.\n     * @param {String} [params.fill] Style to use when filling the arrow.  defaults to \"black\".\n     * @param {String} [params.stroke] Style to use when stroking the arrow. defaults to null, which means the arrow is not stroked.\n     * @param {Number} [params.stroke-width] Line width to use when stroking the arrow. defaults to 1, but only used if stroke is not null.\n     * @param {Number} [params.foldback] Distance (as a decimal from 0 to 1 inclusive) along the length of the arrow marking the point the tail points should fold back to.  defaults to 0.623.\n     * @param {Number} [params.location] Distance (as a decimal from 0 to 1 inclusive) marking where the arrow should sit on the connector. defaults to 0.5.\n     * @param {NUmber} [params.direction] Indicates the direction the arrow points in. valid values are -1 and 1; 1 is default.\n     */\n    _jp.Overlays.Arrow = function (params) {\n        this.type = \"Arrow\";\n        AbstractOverlay.apply(this, arguments);\n        this.isAppendedAtTopLevel = false;\n        params = params || {};\n        var self = this;\n        this.length = params.length || 20;\n        this.width = params.width || 20;\n        this.id = params.id;\n        this.direction = (params.direction || 1) < 0 ? -1 : 1;\n        var paintStyle = params.paintStyle || { \"stroke-width\": 1 },\n        // how far along the arrow the lines folding back in come to. default is 62.3%.\n            foldback = params.foldback || 0.623;\n        this.computeMaxSize = function () {\n            return self.width * 1.5;\n        };\n        this.elementCreated = function(p, component) {\n            this.path = p;\n            if (params.events) {\n                for (var i in params.events) {\n                    _jp.on(p, i, params.events[i]);\n                }\n            }\n        };\n        this.draw = function (component, currentConnectionPaintStyle) {\n            var hxy, mid, txy, tail, cxy;\n            if (component.pointAlongPathFrom) {\n                if (_ju.isString(this.loc) || this.loc > 1 || this.loc < 0) {\n                    var l = parseInt(this.loc, 10),\n                        fromLoc = this.loc < 0 ? 1 : 0;\n                    hxy = component.pointAlongPathFrom(fromLoc, l, false);\n                    mid = component.pointAlongPathFrom(fromLoc, l - (this.direction * this.length / 2), false);\n                    txy = _jg.pointOnLine(hxy, mid, this.length);\n                }\n                else if (this.loc === 1) {\n                    hxy = component.pointOnPath(this.loc);\n                    mid = component.pointAlongPathFrom(this.loc, -(this.length));\n                    txy = _jg.pointOnLine(hxy, mid, this.length);\n                    if (this.direction === -1) {\n                        var _ = txy;\n                        txy = hxy;\n                        hxy = _;\n                    }\n                }\n                else if (this.loc === 0) {\n                    txy = component.pointOnPath(this.loc);\n                    mid = component.pointAlongPathFrom(this.loc, this.length);\n                    hxy = _jg.pointOnLine(txy, mid, this.length);\n                    if (this.direction === -1) {\n                        var __ = txy;\n                        txy = hxy;\n                        hxy = __;\n                    }\n                }\n                else {\n                    hxy = component.pointAlongPathFrom(this.loc, this.direction * this.length / 2);\n                    mid = component.pointOnPath(this.loc);\n                    txy = _jg.pointOnLine(hxy, mid, this.length);\n                }\n                tail = _jg.perpendicularLineTo(hxy, txy, this.width);\n                cxy = _jg.pointOnLine(hxy, txy, foldback * this.length);\n                var d = { hxy: hxy, tail: tail, cxy: cxy },\n                    stroke = paintStyle.stroke || currentConnectionPaintStyle.stroke,\n                    fill = paintStyle.fill || currentConnectionPaintStyle.stroke,\n                    lineWidth = paintStyle.strokeWidth || currentConnectionPaintStyle.strokeWidth;\n                return {\n                    component: component,\n                    d: d,\n                    \"stroke-width\": lineWidth,\n                    stroke: stroke,\n                    fill: fill,\n                    minX: Math.min(hxy.x, tail[0].x, tail[1].x),\n                    maxX: Math.max(hxy.x, tail[0].x, tail[1].x),\n                    minY: Math.min(hxy.y, tail[0].y, tail[1].y),\n                    maxY: Math.max(hxy.y, tail[0].y, tail[1].y)\n                };\n            }\n            else {\n                return {component: component, minX: 0, maxX: 0, minY: 0, maxY: 0};\n            }\n        };\n    };\n    _ju.extend(_jp.Overlays.Arrow, AbstractOverlay, {\n        updateFrom:function(d) {\n            this.length = d.length || this.length;\n            this.width = d.width|| this.width;\n            this.direction = d.direction != null ? d.direction : this.direction;\n            this.foldback = d.foldback|| this.foldback;\n        },\n        cleanup:function() {\n            if (this.path && this.path.parentNode) {\n                this.path.parentNode.removeChild(this.path);\n            }\n        }\n    });\n    /*\n     * Class: Overlays.PlainArrow\n     *\n     * A basic arrow.  This is in fact just one instance of the more generic case in which the tail folds back on itself to some\n     * point along the length of the arrow: in this case, that foldback point is the full length of the arrow.  so it just does\n     * a 'call' to Arrow with foldback set appropriately.\n     */\n    /*\n     * Function: Constructor\n     * See <Overlays.Arrow> for allowed parameters for this overlay.\n     */\n    _jp.Overlays.PlainArrow = function (params) {\n        params = params || {};\n        var p = _jp.extend(params, {foldback: 1});\n        _jp.Overlays.Arrow.call(this, p);\n        this.type = \"PlainArrow\";\n    };\n    _ju.extend(_jp.Overlays.PlainArrow, _jp.Overlays.Arrow);\n    /*\n     * Class: Overlays.Diamond\n     * \n     * A diamond. Like PlainArrow, this is a concrete case of the more generic case of the tail points converging on some point...it just\n     * happens that in this case, that point is greater than the length of the the arrow.\n     *\n     *      this could probably do with some help with positioning...due to the way it reuses the Arrow paint code, what Arrow thinks is the\n     *      center is actually 1/4 of the way along for this guy.  but we don't have any knowledge of pixels at this point, so we're kind of\n     *      stuck when it comes to helping out the Arrow class. possibly we could pass in a 'transpose' parameter or something. the value\n     *      would be -l/4 in this case - move along one quarter of the total length.\n     */\n    /*\n     * Function: Constructor\n     * See <Overlays.Arrow> for allowed parameters for this overlay.\n     */\n    _jp.Overlays.Diamond = function (params) {\n        params = params || {};\n        var l = params.length || 40,\n            p = _jp.extend(params, {length: l / 2, foldback: 2});\n        _jp.Overlays.Arrow.call(this, p);\n        this.type = \"Diamond\";\n    };\n    _ju.extend(_jp.Overlays.Diamond, _jp.Overlays.Arrow);\n    var _getDimensions = function (component, forceRefresh) {\n        if (component._jsPlumb.cachedDimensions == null || forceRefresh) {\n            component._jsPlumb.cachedDimensions = component.getDimensions();\n        }\n        return component._jsPlumb.cachedDimensions;\n    };\n    // abstract superclass for overlays that add an element to the DOM.\n    var AbstractDOMOverlay = function (params) {\n        _jp.jsPlumbUIComponent.apply(this, arguments);\n        AbstractOverlay.apply(this, arguments);\n        // hand off fired events to associated component.\n        var _f = this.fire;\n        this.fire = function () {\n            _f.apply(this, arguments);\n            if (this.component) {\n                this.component.fire.apply(this.component, arguments);\n            }\n        };\n        this.detached=false;\n        this.id = params.id;\n        this._jsPlumb.div = null;\n        this._jsPlumb.initialised = false;\n        this._jsPlumb.component = params.component;\n        this._jsPlumb.cachedDimensions = null;\n        this._jsPlumb.create = params.create;\n        this._jsPlumb.initiallyInvisible = params.visible === false;\n        this.getElement = function () {\n            if (this._jsPlumb.div == null) {\n                var div = this._jsPlumb.div = _jp.getElement(this._jsPlumb.create(this._jsPlumb.component));\n                div.style.position = \"absolute\";\n                jsPlumb.addClass(div, this._jsPlumb.instance.overlayClass + \" \" +\n                    (this.cssClass ? this.cssClass :\n                        params.cssClass ? params.cssClass : \"\"));\n                this._jsPlumb.instance.appendElement(div);\n                this._jsPlumb.instance.getId(div);\n                this.canvas = div;\n                // in IE the top left corner is what it placed at the desired location.  This will not\n                // be fixed. IE8 is not going to be supported for much longer.\n                var ts = \"translate(-50%, -50%)\";\n                div.style.webkitTransform = ts;\n                div.style.mozTransform = ts;\n                div.style.msTransform = ts;\n                div.style.oTransform = ts;\n                div.style.transform = ts;\n                // write the related component into the created element\n                div._jsPlumb = this;\n                if (params.visible === false) {\n                    div.style.display = \"none\";\n                }\n            }\n            return this._jsPlumb.div;\n        };\n        this.draw = function (component, currentConnectionPaintStyle, absolutePosition) {\n            var td = _getDimensions(this);\n            if (td != null && td.length === 2) {\n                var cxy = { x: 0, y: 0 };\n                // absolutePosition would have been set by a call to connection.setAbsoluteOverlayPosition.\n                if (absolutePosition) {\n                    cxy = { x: absolutePosition[0], y: absolutePosition[1] };\n                }\n                else if (component.pointOnPath) {\n                    var loc = this.loc, absolute = false;\n                    if (_ju.isString(this.loc) || this.loc < 0 || this.loc > 1) {\n                        loc = parseInt(this.loc, 10);\n                        absolute = true;\n                    }\n                    cxy = component.pointOnPath(loc, absolute);  // a connection\n                }\n                else {\n                    var locToUse = this.loc.constructor === Array ? this.loc : this.endpointLoc;\n                    cxy = { x: locToUse[0] * component.w,\n                        y: locToUse[1] * component.h };\n                }\n                var minx = cxy.x - (td[0] / 2),\n                    miny = cxy.y - (td[1] / 2);\n                return {\n                    component: component,\n                    d: { minx: minx, miny: miny, td: td, cxy: cxy },\n                    minX: minx,\n                    maxX: minx + td[0],\n                    minY: miny,\n                    maxY: miny + td[1]\n                };\n            }\n            else {\n                return {minX: 0, maxX: 0, minY: 0, maxY: 0};\n            }\n        };\n    };\n    _ju.extend(AbstractDOMOverlay, [_jp.jsPlumbUIComponent, AbstractOverlay], {\n        getDimensions: function () {\n            return [1,1];\n        },\n        setVisible: function (state) {\n            if (this._jsPlumb.div) {\n                this._jsPlumb.div.style.display = state ? \"block\" : \"none\";\n                // if initially invisible, dimensions are 0,0 and never get updated\n                if (state && this._jsPlumb.initiallyInvisible) {\n                    _getDimensions(this, true);\n                    this.component.repaint();\n                    this._jsPlumb.initiallyInvisible = false;\n                }\n            }\n        },\n        /*\n         * Function: clearCachedDimensions\n         * Clears the cached dimensions for the label. As a performance enhancement, label dimensions are\n         * cached from 1.3.12 onwards. The cache is cleared when you change the label text, of course, but\n         * there are other reasons why the text dimensions might change - if you make a change through CSS, for\n         * example, you might change the font size.  in that case you should explicitly call this method.\n         */\n        clearCachedDimensions: function () {\n            this._jsPlumb.cachedDimensions = null;\n        },\n        cleanup: function (force) {\n            if (force) {\n                if (this._jsPlumb.div != null) {\n                    this._jsPlumb.div._jsPlumb = null;\n                    this._jsPlumb.instance.removeElement(this._jsPlumb.div);\n                }\n            }\n            else {\n                // if not a forced cleanup, just detach child from parent for now.\n                if (this._jsPlumb && this._jsPlumb.div && this._jsPlumb.div.parentNode) {\n                    this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div);\n                }\n                this.detached = true;\n            }\n        },\n        reattach:function(instance, component) {\n            if (this._jsPlumb.div != null) {\n                instance.getContainer().appendChild(this._jsPlumb.div);\n            }\n            this.detached = false;\n        },\n        computeMaxSize: function () {\n            var td = _getDimensions(this);\n            return Math.max(td[0], td[1]);\n        },\n        paint: function (p, containerExtents) {\n            if (!this._jsPlumb.initialised) {\n                this.getElement();\n                p.component.appendDisplayElement(this._jsPlumb.div);\n                this._jsPlumb.initialised = true;\n                if (this.detached) {\n                    this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div);\n                }\n            }\n            this._jsPlumb.div.style.left = (p.component.x + p.d.minx) + \"px\";\n            this._jsPlumb.div.style.top = (p.component.y + p.d.miny) + \"px\";\n        }\n    });\n    /*\n     * Class: Overlays.Custom\n     * A Custom overlay. You supply a 'create' function which returns some DOM element, and jsPlumb positions it.\n     * The 'create' function is passed a Connection or Endpoint.\n     */\n    /*\n     * Function: Constructor\n     * \n     * Parameters:\n     * create - function for jsPlumb to call that returns a DOM element.\n     * location - distance (as a decimal from 0 to 1 inclusive) marking where the label should sit on the connector. defaults to 0.5.\n     * id - optional id to use for later retrieval of this overlay.\n     *\n     */\n    _jp.Overlays.Custom = function (params) {\n        this.type = \"Custom\";\n        AbstractDOMOverlay.apply(this, arguments);\n    };\n    _ju.extend(_jp.Overlays.Custom, AbstractDOMOverlay);\n    _jp.Overlays.GuideLines = function () {\n        var self = this;\n        self.length = 50;\n        self.strokeWidth = 5;\n        this.type = \"GuideLines\";\n        AbstractOverlay.apply(this, arguments);\n        _jp.jsPlumbUIComponent.apply(this, arguments);\n        this.draw = function (connector, currentConnectionPaintStyle) {\n            var head = connector.pointAlongPathFrom(self.loc, self.length / 2),\n                mid = connector.pointOnPath(self.loc),\n                tail = _jg.pointOnLine(head, mid, self.length),\n                tailLine = _jg.perpendicularLineTo(head, tail, 40),\n                headLine = _jg.perpendicularLineTo(tail, head, 20);\n            return {\n                connector: connector,\n                head: head,\n                tail: tail,\n                headLine: headLine,\n                tailLine: tailLine,\n                minX: Math.min(head.x, tail.x, headLine[0].x, headLine[1].x),\n                minY: Math.min(head.y, tail.y, headLine[0].y, headLine[1].y),\n                maxX: Math.max(head.x, tail.x, headLine[0].x, headLine[1].x),\n                maxY: Math.max(head.y, tail.y, headLine[0].y, headLine[1].y)\n            };\n        };\n        // this.cleanup = function() { };  // nothing to clean up for GuideLines\n    };\n    /*\n     * Class: Overlays.Label\n     */\n    /*\n     * Function: Constructor\n     * \n     * Parameters:\n     * cssClass - optional css class string to append to css class. This string is appended \"as-is\", so you can of course have multiple classes\n     *             defined.  This parameter is preferred to using labelStyle, borderWidth and borderStyle.\n     * label - the label to paint.  May be a string or a function that returns a string.  Nothing will be painted if your label is null or your\n     *         label function returns null.  empty strings _will_ be painted.\n     * location - distance (as a decimal from 0 to 1 inclusive) marking where the label should sit on the connector. defaults to 0.5.\n     * id - optional id to use for later retrieval of this overlay.\n     * \n     *\n     */\n    _jp.Overlays.Label = function (params) {\n        this.labelStyle = params.labelStyle;\n        var labelWidth = null, labelHeight = null, labelText = null, labelPadding = null;\n        this.cssClass = this.labelStyle != null ? this.labelStyle.cssClass : null;\n        var p = _jp.extend({\n            create: function () {\n                return _jp.createElement(\"div\");\n            }}, params);\n        _jp.Overlays.Custom.call(this, p);\n        this.type = \"Label\";\n        this.label = params.label || \"\";\n        this.labelText = null;\n        if (this.labelStyle) {\n            var el = this.getElement();\n            this.labelStyle.font = this.labelStyle.font || \"12px sans-serif\";\n            el.style.font = this.labelStyle.font;\n            el.style.color = this.labelStyle.color || \"black\";\n            if (this.labelStyle.fill) {\n                el.style.background = this.labelStyle.fill;\n            }\n            if (this.labelStyle.borderWidth > 0) {\n                var dStyle = this.labelStyle.borderStyle ? this.labelStyle.borderStyle : \"black\";\n                el.style.border = this.labelStyle.borderWidth + \"px solid \" + dStyle;\n            }\n            if (this.labelStyle.padding) {\n                el.style.padding = this.labelStyle.padding;\n            }\n        }\n    };\n    _ju.extend(_jp.Overlays.Label, _jp.Overlays.Custom, {\n        cleanup: function (force) {\n            if (force) {\n                this.div = null;\n                this.label = null;\n                this.labelText = null;\n                this.cssClass = null;\n                this.labelStyle = null;\n            }\n        },\n        getLabel: function () {\n            return this.label;\n        },\n        /*\n         * Function: setLabel\n         * sets the label's, um, label.  you would think i'd call this function\n         * 'setText', but you can pass either a Function or a String to this, so\n         * it makes more sense as 'setLabel'. This uses innerHTML on the label div, so keep\n         * that in mind if you need escaped HTML.\n         */\n        setLabel: function (l) {\n            this.label = l;\n            this.labelText = null;\n            this.clearCachedDimensions();\n            this.update();\n            this.component.repaint();\n        },\n        getDimensions: function () {\n            this.update();\n            return AbstractDOMOverlay.prototype.getDimensions.apply(this, arguments);\n        },\n        update: function () {\n            if (typeof this.label === \"function\") {\n                var lt = this.label(this);\n                this.getElement().innerHTML = lt.replace(/\\n\\n/g, \"<br/>\");\n            }\n            else {\n                if (this.labelText == null) {\n                    this.labelText = this.label;\n                    this.getElement().innerHTML = this.labelText.replace(/\\n\\n/g, \"<br/>\");\n                }\n            }\n        },\n        updateFrom:function(d) {\n            if(d.label != null){\n                this.setLabel(d.label);\n            }\n        }\n    });\n    // ********************************* END OF OVERLAY DEFINITIONS ***********************************************************************\n}).call(typeof window !== 'undefined' ? window : this);\n/*\n * Copyright (c) 2010 - 2020 jsPlumb (hello@jsplumbtoolkit.com)\n *\n * https://jsplumbtoolkit.com\n * https://github.com/jsplumb/jsplumb\n *\n * Dual licensed under the MIT and GPL2 licenses.\n */\n;(function() {\n    \"use strict\";\n    var root = this,\n        _ju = root.jsPlumbUtil,\n        _jpi = root.jsPlumbInstance;\n    var GROUP_COLLAPSED_CLASS = \"jtk-group-collapsed\";\n    var GROUP_EXPANDED_CLASS = \"jtk-group-expanded\";\n    var GROUP_CONTAINER_SELECTOR = \"[jtk-group-content]\";\n    var ELEMENT_DRAGGABLE_EVENT = \"elementDraggable\";\n    var STOP = \"stop\";\n    var REVERT = \"revert\";\n    var GROUP_MANAGER = \"_groupManager\";\n    var GROUP = \"_jsPlumbGroup\";\n    var GROUP_DRAG_SCOPE = \"_jsPlumbGroupDrag\";\n    var EVT_CHILD_ADDED = \"group:addMember\";\n    var EVT_CHILD_REMOVED = \"group:removeMember\";\n    var EVT_GROUP_ADDED = \"group:add\";\n    var EVT_GROUP_REMOVED = \"group:remove\";\n    var EVT_EXPAND = \"group:expand\";\n    var EVT_COLLAPSE = \"group:collapse\";\n    var EVT_GROUP_DRAG_STOP = \"groupDragStop\";\n    var EVT_CONNECTION_MOVED = \"connectionMoved\";\n    var EVT_INTERNAL_CONNECTION_DETACHED = \"internal.connectionDetached\";\n    var CMD_REMOVE_ALL = \"removeAll\";\n    var CMD_ORPHAN_ALL = \"orphanAll\";\n    var CMD_SHOW = \"show\";\n    var CMD_HIDE = \"hide\";\n    var GroupManager = function(_jsPlumb) {\n        var _managedGroups = {}, _connectionSourceMap = {}, _connectionTargetMap = {}, self = this;\n        // function findGroupFor(el) {\n        //     var c = _jsPlumb.getContainer();\n        //     var abort = false, g = null, child = null;\n        //     while (!abort) {\n        //         if (el == null || el === c) {\n        //             abort = true;\n        //         } else {\n        //             if (el[GROUP]) {\n        //                 g = el[GROUP];\n        //                 child = el;\n        //                 abort = true;\n        //             } else {\n        //                 el = el.parentNode;\n        //             }\n        //         }\n        //     }\n        //     return g;\n        // }\n        function isDescendant(el, parentEl) {\n            var c = _jsPlumb.getContainer();\n            var abort = false, g = null, child = null;\n            while (!abort) {\n                if (el == null || el === c) {\n                    return false;\n                } else {\n                    if (el === parentEl) {\n                        return true;\n                    } else {\n                        el = el.parentNode;\n                    }\n                }\n            }\n        }\n        _jsPlumb.bind(\"connection\", function(p) {\n            var sourceGroup = _jsPlumb.getGroupFor(p.source);\n            var targetGroup = _jsPlumb.getGroupFor(p.target);\n            if (sourceGroup != null && targetGroup != null && sourceGroup === targetGroup) {\n                _connectionSourceMap[p.connection.id] = sourceGroup;\n                _connectionTargetMap[p.connection.id] = sourceGroup;\n            }\n            else {\n                if (sourceGroup != null) {\n                    _ju.suggest(sourceGroup.connections.source, p.connection);\n                    _connectionSourceMap[p.connection.id] = sourceGroup;\n                }\n                if (targetGroup != null) {\n                    _ju.suggest(targetGroup.connections.target, p.connection);\n                    _connectionTargetMap[p.connection.id] = targetGroup;\n                }\n            }\n        });\n        function _cleanupDetachedConnection(conn) {\n            delete conn.proxies;\n            var group = _connectionSourceMap[conn.id], f;\n            if (group != null) {\n                f = function(c) { return c.id === conn.id; };\n                _ju.removeWithFunction(group.connections.source, f);\n                _ju.removeWithFunction(group.connections.target, f);\n                delete _connectionSourceMap[conn.id];\n            }\n            group = _connectionTargetMap[conn.id];\n            if (group != null) {\n                f = function(c) { return c.id === conn.id; };\n                _ju.removeWithFunction(group.connections.source, f);\n                _ju.removeWithFunction(group.connections.target, f);\n                delete _connectionTargetMap[conn.id];\n            }\n        }\n        _jsPlumb.bind(EVT_INTERNAL_CONNECTION_DETACHED, function(p) {\n            _cleanupDetachedConnection(p.connection);\n        });\n        _jsPlumb.bind(EVT_CONNECTION_MOVED, function(p) {\n            var connMap = p.index === 0 ? _connectionSourceMap : _connectionTargetMap;\n            var group = connMap[p.connection.id];\n            if (group) {\n                var list = group.connections[p.index === 0 ? \"source\" : \"target\"];\n                var idx = list.indexOf(p.connection);\n                if (idx !== -1) {\n                    list.splice(idx, 1);\n                }\n            }\n        });\n        this.addGroup = function(group) {\n            _jsPlumb.addClass(group.getEl(), GROUP_EXPANDED_CLASS);\n            _managedGroups[group.id] = group;\n            group.manager = this;\n            _updateConnectionsForGroup(group);\n            _jsPlumb.fire(EVT_GROUP_ADDED, { group:group });\n        };\n        this.addToGroup = function(group, el, doNotFireEvent) {\n            group = this.getGroup(group);\n            if (group) {\n                var groupEl = group.getEl();\n                if (el._isJsPlumbGroup) {\n                    return;\n                }\n                var currentGroup = el._jsPlumbGroup;\n                // if already a member of this group, do nothing\n                if (currentGroup !== group) {\n                    _jsPlumb.removeFromDragSelection(el);\n                    var elpos = _jsPlumb.getOffset(el, true);\n                    var cpos = group.collapsed ? _jsPlumb.getOffset(groupEl, true) : _jsPlumb.getOffset(group.getDragArea(), true);\n                    // otherwise, transfer to this group.\n                    if (currentGroup != null) {\n                        currentGroup.remove(el, false, doNotFireEvent, false, group);\n                        self.updateConnectionsForGroup(currentGroup);\n                    }\n                    group.add(el, doNotFireEvent/*, currentGroup*/);\n                    var handleDroppedConnections = function (list, index) {\n                        var oidx = index === 0 ? 1 : 0;\n                        list.each(function (c) {\n                            c.setVisible(false);\n                            if (c.endpoints[oidx].element._jsPlumbGroup === group) {\n                                c.endpoints[oidx].setVisible(false);\n                                _expandConnection(c, oidx, group);\n                            }\n                            else {\n                                c.endpoints[index].setVisible(false);\n                                _collapseConnection(c, index, group);\n                            }\n                        });\n                    };\n                    if (group.collapsed) {\n                        handleDroppedConnections(_jsPlumb.select({source: el}), 0);\n                        handleDroppedConnections(_jsPlumb.select({target: el}), 1);\n                    }\n                    var elId = _jsPlumb.getId(el);\n                    _jsPlumb.dragManager.setParent(el, elId, groupEl, _jsPlumb.getId(groupEl), elpos);\n                    var newPosition = { left: elpos.left - cpos.left, top: elpos.top - cpos.top };\n                    _jsPlumb.setPosition(el, newPosition);\n                    _jsPlumb.dragManager.revalidateParent(el, elId, elpos);\n                    self.updateConnectionsForGroup(group);\n                    _jsPlumb.revalidate(elId);\n                    if (!doNotFireEvent) {\n                        var p = {group: group, el: el, pos:newPosition};\n                        if (currentGroup) {\n                            p.sourceGroup = currentGroup;\n                        }\n                        _jsPlumb.fire(EVT_CHILD_ADDED, p);\n                    }\n                }\n            }\n        };\n        this.removeFromGroup = function(group, el, doNotFireEvent) {\n            group = this.getGroup(group);\n            if (group) {\n                // if this group is currently collapsed then any proxied connections for the given el (or its descendants) need\n                // to be put back on their original element, and unproxied\n                if (group.collapsed) {\n                    var _expandSet = function (conns, index) {\n                        for (var i = 0; i < conns.length; i++) {\n                            var c = conns[i];\n                            if (c.proxies) {\n                                for(var j = 0; j < c.proxies.length; j++) {\n                                    if (c.proxies[j] != null) {\n                                        var proxiedElement = c.proxies[j].originalEp.element;\n                                        if (proxiedElement === el || isDescendant(proxiedElement, el)) {\n                                            _expandConnection(c, index, group);\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    };\n                    // setup proxies for sources and targets\n                    _expandSet(group.connections.source.slice(), 0);\n                    _expandSet(group.connections.target.slice(), 1);\n                }\n                group.remove(el, null, doNotFireEvent);\n            }\n        };\n        this.getGroup = function(groupId) {\n            var group = groupId;\n            if (_ju.isString(groupId)) {\n                group = _managedGroups[groupId];\n                if (group == null) {\n                    throw new TypeError(\"No such group [\" + groupId + \"]\");\n                }\n            }\n            return group;\n        };\n        this.getGroups = function() {\n            var o = [];\n            for (var g in _managedGroups) {\n                o.push(_managedGroups[g]);\n            }\n            return o;\n        };\n        this.removeGroup = function(group, deleteMembers, manipulateDOM, doNotFireEvent) {\n            group = this.getGroup(group);\n            this.expandGroup(group, true); // this reinstates any original connections and removes all proxies, but does not fire an event.\n            var newPositions = group[deleteMembers ? CMD_REMOVE_ALL : CMD_ORPHAN_ALL](manipulateDOM, doNotFireEvent);\n            _jsPlumb.remove(group.getEl());\n            delete _managedGroups[group.id];\n            delete _jsPlumb._groups[group.id];\n            _jsPlumb.fire(EVT_GROUP_REMOVED, { group:group });\n            return newPositions; // this will be null in the case or remove, but be a map of {id->[x,y]} in the case of orphan\n        };\n        this.removeAllGroups = function(deleteMembers, manipulateDOM, doNotFireEvent) {\n            for (var g in _managedGroups) {\n                this.removeGroup(_managedGroups[g], deleteMembers, manipulateDOM, doNotFireEvent);\n            }\n        };\n        function _setVisible(group, state) {\n            // TODO discovering the list of elements would ideally be a pluggable function.\n            var m = group.getEl().querySelectorAll(\".jtk-managed\");\n            for (var i = 0; i < m.length; i++) {\n                _jsPlumb[state ? CMD_SHOW : CMD_HIDE](m[i], true);\n            }\n        }\n        var _collapseConnection = function(c, index, group) {\n            var otherEl = c.endpoints[index === 0 ? 1 : 0].element;\n            if (otherEl[GROUP] && (!otherEl[GROUP].shouldProxy() && otherEl[GROUP].collapsed)) {\n                return;\n            }\n            var groupEl = group.getEl(), groupElId = _jsPlumb.getId(groupEl);\n            _jsPlumb.proxyConnection(c, index, groupEl, groupElId, function(c, index) { return group.getEndpoint(c, index); }, function(c, index) { return group.getAnchor(c, index); });\n        };\n        this.collapseGroup = function(group) {\n            group = this.getGroup(group);\n            if (group == null || group.collapsed) {\n                return;\n            }\n            var groupEl = group.getEl();\n            // todo remove old proxy endpoints first, just in case?\n            //group.proxies.length = 0;\n            // hide all connections\n            _setVisible(group, false);\n            if (group.shouldProxy()) {\n                // collapses all connections in a group.\n                var _collapseSet = function (conns, index) {\n                    for (var i = 0; i < conns.length; i++) {\n                        var c = conns[i];\n                        _collapseConnection(c, index, group);\n                    }\n                };\n                // setup proxies for sources and targets\n                _collapseSet(group.connections.source, 0);\n                _collapseSet(group.connections.target, 1);\n            }\n            group.collapsed = true;\n            _jsPlumb.removeClass(groupEl, GROUP_EXPANDED_CLASS);\n            _jsPlumb.addClass(groupEl, GROUP_COLLAPSED_CLASS);\n            _jsPlumb.revalidate(groupEl);\n            _jsPlumb.fire(EVT_COLLAPSE, { group:group  });\n        };\n        var _expandConnection = function(c, index, group) {\n            _jsPlumb.unproxyConnection(c, index, _jsPlumb.getId(group.getEl()));\n        };\n        this.expandGroup = function(group, doNotFireEvent) {\n            group = this.getGroup(group);\n            if (group == null || !group.collapsed) {\n                return;\n            }\n            var groupEl = group.getEl();\n            _setVisible(group, true);\n            if (group.shouldProxy()) {\n                // expands all connections in a group.\n                var _expandSet = function (conns, index) {\n                    for (var i = 0; i < conns.length; i++) {\n                        var c = conns[i];\n                        _expandConnection(c, index, group);\n                    }\n                };\n                // setup proxies for sources and targets\n                _expandSet(group.connections.source, 0);\n                _expandSet(group.connections.target, 1);\n            }\n            group.collapsed = false;\n            _jsPlumb.addClass(groupEl, GROUP_EXPANDED_CLASS);\n            _jsPlumb.removeClass(groupEl, GROUP_COLLAPSED_CLASS);\n            _jsPlumb.revalidate(groupEl);\n            this.repaintGroup(group);\n            if (!doNotFireEvent) {\n                _jsPlumb.fire(EVT_EXPAND, { group: group});\n            }\n        };\n        this.repaintGroup = function(group) {\n            group = this.getGroup(group);\n            var m = group.getMembers();\n            for (var i = 0; i < m.length; i++) {\n                _jsPlumb.revalidate(m[i]);\n            }\n        };\n        // TODO refactor this with the code that responds to `connection` events.\n        function _updateConnectionsForGroup(group) {\n            var members = group.getMembers().slice();\n            var childMembers = [];\n            for (var i = 0; i < members.length; i++) {\n                Array.prototype.push.apply(childMembers, members[i].querySelectorAll(\".jtk-managed\"));\n            }\n            Array.prototype.push.apply(members, childMembers);\n            var c1 = _jsPlumb.getConnections({source:members, scope:\"*\"}, true);\n            var c2 = _jsPlumb.getConnections({target:members, scope:\"*\"}, true);\n            var processed = {};\n            group.connections.source.length = 0;\n            group.connections.target.length = 0;\n            var oneSet = function(c) {\n                for (var i = 0; i < c.length; i++) {\n                    if (processed[c[i].id]) {\n                        continue;\n                    }\n                    processed[c[i].id] = true;\n                    var gs = _jsPlumb.getGroupFor(c[i].source),\n                        gt = _jsPlumb.getGroupFor(c[i].target);\n                    if (gs === group) {\n                        if (gt !== group) {\n                            group.connections.source.push(c[i]);\n                        }\n                        _connectionSourceMap[c[i].id] = group;\n                    }\n                    else if (gt === group) {\n                        group.connections.target.push(c[i]);\n                        _connectionTargetMap[c[i].id] = group;\n                    }\n                }\n            };\n            oneSet(c1); oneSet(c2);\n        }\n        this.updateConnectionsForGroup = _updateConnectionsForGroup;\n        this.refreshAllGroups = function() {\n            for (var g in _managedGroups) {\n                _updateConnectionsForGroup(_managedGroups[g]);\n                _jsPlumb.dragManager.updateOffsets(_jsPlumb.getId(_managedGroups[g].getEl()));\n            }\n        };\n    };\n    /**\n     *\n     * @param {jsPlumbInstance} _jsPlumb Associated jsPlumb instance.\n     * @param {Object} params\n     * @param {Element} params.el The DOM element representing the Group.\n     * @param {String} [params.id] Optional ID for the Group. A UUID will be assigned as the Group's ID if you do not provide one.\n     * @param {Boolean} [params.constrain=false] If true, child elements will not be able to be dragged outside of the Group container.\n     * @param {Boolean} [params.revert=true] By default, child elements revert to the container if dragged outside. You can change this by setting `revert:false`. This behaviour is also overridden if you set `orphan` or `prune`.\n     * @param {Boolean} [params.orphan=false] If true, child elements dropped outside of the Group container will be removed from the Group (but not from the DOM).\n     * @param {Boolean} [params.prune=false] If true, child elements dropped outside of the Group container will be removed from the Group and also from the DOM.\n     * @param {Boolean} [params.dropOverride=false] If true, a child element that has been dropped onto some other Group will not be subject to the controls imposed by `prune`, `revert` or `orphan`.\n     * @constructor\n     */\n    var Group = function(_jsPlumb, params) {\n        var self = this;\n        var el = params.el;\n        this.getEl = function() { return el; };\n        this.id = params.id || _ju.uuid();\n        el._isJsPlumbGroup = true;\n        var getDragArea = this.getDragArea = function() {\n            var da = _jsPlumb.getSelector(el, GROUP_CONTAINER_SELECTOR);\n            return da && da.length > 0 ? da[0] : el;\n        };\n        var ghost = params.ghost === true;\n        var constrain = ghost || (params.constrain === true);\n        var revert = params.revert !== false;\n        var orphan = params.orphan === true;\n        var prune = params.prune === true;\n        var dropOverride = params.dropOverride === true;\n        var proxied = params.proxied !== false;\n        var elements = [];\n        this.connections = { source:[], target:[], internal:[] };\n        // this function, and getEndpoint below, are stubs for a future setup in which we can choose endpoint\n        // and anchor based upon the connection and the index (source/target) of the endpoint to be proxied.\n        this.getAnchor = function(conn, endpointIndex) {\n            return params.anchor || \"Continuous\";\n        };\n        this.getEndpoint = function(conn, endpointIndex) {\n            return params.endpoint || [ \"Dot\", { radius:10 }];\n        };\n        this.collapsed = false;\n        if (params.draggable !== false) {\n            var opts = {\n                drag:function() {\n                    for (var i = 0; i < elements.length; i++) {\n                        _jsPlumb.draw(elements[i]);\n                    }\n                },\n                stop:function(params) {\n                    _jsPlumb.fire(EVT_GROUP_DRAG_STOP, jsPlumb.extend(params, {group:self}));\n                },\n                scope:GROUP_DRAG_SCOPE\n            };\n            if (params.dragOptions) {\n                root.jsPlumb.extend(opts, params.dragOptions);\n            }\n            _jsPlumb.draggable(params.el, opts);\n        }\n        if (params.droppable !== false) {\n            _jsPlumb.droppable(params.el, {\n                drop:function(p) {\n                    var el = p.drag.el;\n                    if (el._isJsPlumbGroup) {\n                        return;\n                    }\n                    var currentGroup = el._jsPlumbGroup;\n                    if (currentGroup !== self) {\n                        if (currentGroup != null) {\n                            if (currentGroup.overrideDrop(el, self)) {\n                                return;\n                            }\n                        }\n                        _jsPlumb.getGroupManager().addToGroup(self, el, false);\n                    }\n                }\n            });\n        }\n        var _each = function(_el, fn) {\n            var els = _el.nodeType == null ?  _el : [ _el ];\n            for (var i = 0; i < els.length; i++) {\n                fn(els[i]);\n            }\n        };\n        this.overrideDrop = function(_el, targetGroup) {\n            return dropOverride && (revert || prune || orphan);\n        };\n        this.add = function(_el, doNotFireEvent/*, sourceGroup*/) {\n            var dragArea = getDragArea();\n            _each(_el, function(__el) {\n                if (__el._jsPlumbGroup != null) {\n                    if (__el._jsPlumbGroup === self) {\n                        return;\n                    } else {\n                        __el._jsPlumbGroup.remove(__el, true, doNotFireEvent, false);\n                    }\n                }\n                __el._jsPlumbGroup = self;\n                elements.push(__el);\n                // test if draggable and add handlers if so.\n                if (_jsPlumb.isAlreadyDraggable(__el)) {\n                    _bindDragHandlers(__el);\n                }\n                if (__el.parentNode !== dragArea) {\n                    dragArea.appendChild(__el);\n                }\n                // if (!doNotFireEvent) {\n                //     var p = {group: self, el: __el};\n                //     if (sourceGroup) {\n                //         p.sourceGroup = sourceGroup;\n                //     }\n                //     //_jsPlumb.fire(EVT_CHILD_ADDED, p);\n                // }\n            });\n            _jsPlumb.getGroupManager().updateConnectionsForGroup(self);\n        };\n        this.remove = function(el, manipulateDOM, doNotFireEvent, doNotUpdateConnections, targetGroup) {\n            _each(el, function(__el) {\n                if (__el._jsPlumbGroup === self) {\n                    delete __el._jsPlumbGroup;\n                    _ju.removeWithFunction(elements, function (e) {\n                        return e === __el;\n                    });\n                    if (manipulateDOM) {\n                        try {\n                            self.getDragArea().removeChild(__el);\n                        } catch (e) {\n                            jsPlumbUtil.log(\"Could not remove element from Group \" + e);\n                        }\n                    }\n                    _unbindDragHandlers(__el);\n                    if (!doNotFireEvent) {\n                        var p = {group: self, el: __el};\n                        if (targetGroup) {\n                            p.targetGroup = targetGroup;\n                        }\n                        _jsPlumb.fire(EVT_CHILD_REMOVED, p);\n                    }\n                }\n            });\n            if (!doNotUpdateConnections) {\n                _jsPlumb.getGroupManager().updateConnectionsForGroup(self);\n            }\n        };\n        this.removeAll = function(manipulateDOM, doNotFireEvent) {\n            for (var i = 0, l = elements.length; i < l; i++) {\n                var el = elements[0];\n                self.remove(el, manipulateDOM, doNotFireEvent, true);\n                _jsPlumb.remove(el, true);\n            }\n            elements.length = 0;\n            _jsPlumb.getGroupManager().updateConnectionsForGroup(self);\n        };\n        this.orphanAll = function() {\n            var orphanedPositions = {};\n            for (var i = 0; i < elements.length; i++) {\n                var newPosition = _orphan(elements[i]);\n                orphanedPositions[newPosition[0]] = newPosition[1];\n            }\n            elements.length = 0;\n            return orphanedPositions;\n        };\n        this.getMembers = function() { return elements; };\n        el[GROUP] = this;\n        _jsPlumb.bind(ELEMENT_DRAGGABLE_EVENT, function(dragParams) {\n            // if its for the current group,\n            if (dragParams.el._jsPlumbGroup === this) {\n                _bindDragHandlers(dragParams.el);\n            }\n        }.bind(this));\n        function _findParent(_el) {\n            return _el.offsetParent;\n        }\n        function _isInsideParent(_el, pos) {\n            var p = _findParent(_el),\n                s = _jsPlumb.getSize(p),\n                ss = _jsPlumb.getSize(_el),\n                leftEdge = pos[0],\n                rightEdge = leftEdge + ss[0],\n                topEdge = pos[1],\n                bottomEdge = topEdge + ss[1];\n            return rightEdge > 0 && leftEdge < s[0] && bottomEdge > 0 && topEdge < s[1];\n        }\n        //\n        // orphaning an element means taking it out of the group and adding it to the main jsplumb container.\n        // we return the new calculated position from this method and the element's id.\n        //\n        function _orphan(_el) {\n            var id = _jsPlumb.getId(_el);\n            var pos = _jsPlumb.getOffset(_el);\n            _el.parentNode.removeChild(_el);\n            _jsPlumb.getContainer().appendChild(_el);\n            _jsPlumb.setPosition(_el, pos);\n            _unbindDragHandlers(_el);\n            _jsPlumb.dragManager.clearParent(_el, id);\n            return [id, pos];\n        }\n        //\n        // remove an element from the group, then either prune it from the jsplumb instance, or just orphan it.\n        //\n        function _pruneOrOrphan(p) {\n            var out = [];\n            function _one(el, left, top) {\n                var orphanedPosition = null;\n                if (!_isInsideParent(el, [left, top])) {\n                    var group = el._jsPlumbGroup;\n                    if (prune) {\n                        _jsPlumb.remove(el);\n                    } else {\n                        orphanedPosition = _orphan(el);\n                    }\n                    group.remove(el);\n                }\n                return orphanedPosition;\n            }\n            for (var i = 0; i < p.selection.length; i++) {\n                out.push(_one(p.selection[i][0], p.selection[i][1].left, p.selection[i][1].top));\n            }\n            return out.length === 1 ? out[0] : out;\n        }\n        //\n        // redraws the element\n        //\n        function _revalidate(_el) {\n            var id = _jsPlumb.getId(_el);\n            _jsPlumb.revalidate(_el);\n            _jsPlumb.dragManager.revalidateParent(_el, id);\n        }\n        //\n        // unbind the group specific drag/revert handlers.\n        //\n        function _unbindDragHandlers(_el) {\n            if (!_el._katavorioDrag) {\n                return;\n            }\n            if (prune || orphan) {\n                _el._katavorioDrag.off(STOP, _pruneOrOrphan);\n            }\n            if (!prune && !orphan && revert) {\n                _el._katavorioDrag.off(REVERT, _revalidate);\n                _el._katavorioDrag.setRevert(null);\n            }\n        }\n        function _bindDragHandlers(_el) {\n            if (!_el._katavorioDrag) {\n                return;\n            }\n            if (prune || orphan) {\n                _el._katavorioDrag.on(STOP, _pruneOrOrphan);\n            }\n            if (constrain) {\n                _el._katavorioDrag.setConstrain(true);\n            }\n            if (ghost) {\n                _el._katavorioDrag.setUseGhostProxy(true);\n            }\n            if (!prune && !orphan && revert) {\n                _el._katavorioDrag.on(REVERT, _revalidate);\n                _el._katavorioDrag.setRevert(function(__el, pos) {\n                    return !_isInsideParent(__el, pos);\n                });\n            }\n        }\n        this.shouldProxy = function() {\n            return proxied;\n        };\n        _jsPlumb.getGroupManager().addGroup(this);\n    };\n    /**\n     * Adds a group to the jsPlumb instance.\n     * @method addGroup\n     * @param {Object} params\n     * @return {Group} The newly created Group.\n     */\n    _jpi.prototype.addGroup = function(params) {\n        var j = this;\n        j._groups = j._groups || {};\n        if (j._groups[params.id] != null) {\n            throw new TypeError(\"cannot create Group [\" + params.id + \"]; a Group with that ID exists\");\n        }\n        if (params.el[GROUP] != null) {\n            throw new TypeError(\"cannot create Group [\" + params.id + \"]; the given element is already a Group\");\n        }\n        var group = new Group(j, params);\n        j._groups[group.id] = group;\n        if (params.collapsed) {\n            this.collapseGroup(group);\n        }\n        return group;\n    };\n    /**\n     * Add an element to a group.\n     * @method addToGroup\n     * @param {String} group Group, or ID of the group, to add the element to.\n     * @param {Element} el Element to add to the group.\n     */\n    _jpi.prototype.addToGroup = function(group, el, doNotFireEvent) {\n        var _one = function(_el) {\n            var id = this.getId(_el);\n            this.manage(id, _el);\n            this.getGroupManager().addToGroup(group, _el, doNotFireEvent);\n        }.bind(this);\n        if (Array.isArray(el)) {\n            for (var i = 0; i < el.length; i++) {\n                _one(el[i]);\n            }\n        } else {\n            _one(el);\n        }\n    };\n    /**\n     * Remove an element from a group, and sets its DOM element to be a child of the container again.  ??\n     * @method removeFromGroup\n     * @param {String} group Group, or ID of the group, to remove the element from.\n     * @param {Element} el Element to add to the group.\n     */\n    _jpi.prototype.removeFromGroup = function(group, el, doNotFireEvent) {\n        this.getGroupManager().removeFromGroup(group, el, doNotFireEvent);\n        this.getContainer().appendChild(el);\n    };\n    /**\n     * Remove a group, and optionally remove its members from the jsPlumb instance.\n     * @method removeGroup\n     * @param {String|Group} group Group to delete, or ID of Group to delete.\n     * @param {Boolean} [deleteMembers=false] If true, group members will be removed along with the group. Otherwise they will\n     * just be 'orphaned' (returned to the main container).\n     * @returns {Map[String, Position}} When deleteMembers is false, this method returns a map of {id->position}\n     */\n    _jpi.prototype.removeGroup = function(group, deleteMembers, manipulateDOM, doNotFireEvent) {\n        return this.getGroupManager().removeGroup(group, deleteMembers, manipulateDOM, doNotFireEvent);\n    };\n    /**\n     * Remove all groups, and optionally remove their members from the jsPlumb instance.\n     * @method removeAllGroup\n     * @param {Boolean} [deleteMembers=false] If true, group members will be removed along with the groups. Otherwise they will\n     * just be 'orphaned' (returned to the main container).\n     */\n    _jpi.prototype.removeAllGroups = function(deleteMembers, manipulateDOM, doNotFireEvent) {\n        this.getGroupManager().removeAllGroups(deleteMembers, manipulateDOM, doNotFireEvent);\n    };\n    /**\n     * Get a Group\n     * @method getGroup\n     * @param {String} groupId ID of the group to get\n     * @return {Group} Group with the given ID, null if not found.\n     */\n    _jpi.prototype.getGroup = function(groupId) {\n        return this.getGroupManager().getGroup(groupId);\n    };\n    /**\n     * Gets all the Groups managed by the jsPlumb instance.\n     * @returns {Group[]} List of Groups. Empty if none.\n     */\n    _jpi.prototype.getGroups = function() {\n        return this.getGroupManager().getGroups();\n    };\n    /**\n     * Expands a group element. jsPlumb doesn't do \"everything\" for you here, because what it means to expand a Group\n     * will vary from application to application. jsPlumb does these things:\n     *\n     * - Hides any connections that are internal to the group (connections between members, and connections from member of\n     * the group to the group itself)\n     * - Proxies all connections for which the source or target is a member of the group.\n     * - Hides the proxied connections.\n     * - Adds the jtk-group-expanded class to the group's element\n     * - Removes the jtk-group-collapsed class from the group's element.\n     *\n     * @method expandGroup\n     * @param {String|Group} group Group to expand, or ID of Group to expand.\n     */\n    _jpi.prototype.expandGroup = function(group) {\n        this.getGroupManager().expandGroup(group);\n    };\n    /**\n     * Collapses a group element. jsPlumb doesn't do \"everything\" for you here, because what it means to collapse a Group\n     * will vary from application to application. jsPlumb does these things:\n     *\n     * - Shows any connections that are internal to the group (connections between members, and connections from member of\n     * the group to the group itself)\n     * - Removes proxies for all connections for which the source or target is a member of the group.\n     * - Shows the previously proxied connections.\n     * - Adds the jtk-group-collapsed class to the group's element\n     * - Removes the jtk-group-expanded class from the group's element.\n     *\n     * @method expandGroup\n     * @param {String|Group} group Group to expand, or ID of Group to expand.\n     */\n    _jpi.prototype.collapseGroup = function(groupId) {\n        this.getGroupManager().collapseGroup(groupId);\n    };\n    _jpi.prototype.repaintGroup = function(group) {\n        this.getGroupManager().repaintGroup(group);\n    };\n    /**\n     * Collapses or expands a group element depending on its current state. See notes in the collapseGroup and expandGroup method.\n     *\n     * @method toggleGroup\n     * @param {String|Group} group Group to expand/collapse, or ID of Group to expand/collapse.\n     */\n    _jpi.prototype.toggleGroup = function(group) {\n        group = this.getGroupManager().getGroup(group);\n        if (group != null) {\n            this.getGroupManager()[group.collapsed ? \"expandGroup\" : \"collapseGroup\"](group);\n        }\n    };\n    //\n    // lazy init a group manager for the given jsplumb instance.\n    //\n    _jpi.prototype.getGroupManager = function() {\n        var mgr = this[GROUP_MANAGER];\n        if (mgr == null) {\n            mgr = this[GROUP_MANAGER] = new GroupManager(this);\n        }\n        return mgr;\n    };\n    _jpi.prototype.removeGroupManager = function() {\n        delete this[GROUP_MANAGER];\n    };\n    /**\n     * Gets the Group that the given element belongs to, null if none.\n     * @method getGroupFor\n     * @param {String|Element} el Element, or element ID.\n     * @returns {Group} A Group, if found, or null.\n     */\n    _jpi.prototype.getGroupFor = function(el) {\n        el = this.getElement(el);\n        if (el) {\n            var c = this.getContainer();\n            var abort = false, g = null, child = null;\n            while (!abort) {\n                if (el == null || el === c) {\n                    abort = true;\n                } else {\n                    if (el[GROUP]) {\n                        g = el[GROUP];\n                        child = el;\n                        abort = true;\n                    } else {\n                        el = el.parentNode;\n                    }\n                }\n            }\n            return g;\n        }\n    };\n}).call(typeof window !== 'undefined' ? window : this);\n/*\n * This file contains the 'flowchart' connectors, consisting of vertical and horizontal line segments.\n *\n * Copyright (c) 2010 - 2020 jsPlumb (hello@jsplumbtoolkit.com)\n *\n * https://jsplumbtoolkit.com\n * https://github.com/jsplumb/jsplumb\n *\n * Dual licensed under the MIT and GPL2 licenses.\n */\n;\n(function () {\n    \"use strict\";\n    var root = this, _jp = root.jsPlumb, _ju = root.jsPlumbUtil;\n    var STRAIGHT = \"Straight\";\n    var ARC = \"Arc\";\n    var Flowchart = function (params) {\n        this.type = \"Flowchart\";\n        params = params || {};\n        params.stub = params.stub == null ? 30 : params.stub;\n        var segments,\n            _super = _jp.Connectors.AbstractConnector.apply(this, arguments),\n            midpoint = params.midpoint == null || isNaN(params.midpoint) ? 0.5 : params.midpoint,\n            alwaysRespectStubs = params.alwaysRespectStubs === true,\n            lastx = null, lasty = null, lastOrientation,\n            cornerRadius = params.cornerRadius != null ? params.cornerRadius : 0,\n            // TODO now common between this and AbstractBezierEditor; refactor into superclass?\n            loopbackRadius = params.loopbackRadius || 25,\n            isLoopbackCurrently = false,\n            sgn = function (n) {\n                return n < 0 ? -1 : n === 0 ? 0 : 1;\n            },\n            segmentDirections = function(segment) {\n            return [\n                    sgn( segment[2] - segment[0] ),\n                    sgn( segment[3] - segment[1] )\n                ];\n            },\n            /**\n             * helper method to add a segment.\n             */\n            addSegment = function (segments, x, y, paintInfo) {\n                if (lastx === x && lasty === y) {\n                    return;\n                }\n                var lx = lastx == null ? paintInfo.sx : lastx,\n                    ly = lasty == null ? paintInfo.sy : lasty,\n                    o = lx === x ? \"v\" : \"h\";\n                lastx = x;\n                lasty = y;\n                segments.push([ lx, ly, x, y, o ]);\n            },\n            segLength = function (s) {\n                return Math.sqrt(Math.pow(s[0] - s[2], 2) + Math.pow(s[1] - s[3], 2));\n            },\n            _cloneArray = function (a) {\n                var _a = [];\n                _a.push.apply(_a, a);\n                return _a;\n            },\n            writeSegments = function (conn, segments, paintInfo) {\n                var current = null, next, currentDirection, nextDirection;\n                for (var i = 0; i < segments.length - 1; i++) {\n                    current = current || _cloneArray(segments[i]);\n                    next = _cloneArray(segments[i + 1]);\n                    currentDirection = segmentDirections(current);\n                    nextDirection = segmentDirections(next);\n                    if (cornerRadius > 0 && current[4] !== next[4]) {\n                        var minSegLength = Math.min(segLength(current), segLength(next));\n                        var radiusToUse = Math.min(cornerRadius, minSegLength / 2);\n                        current[2] -= currentDirection[0] * radiusToUse;\n                        current[3] -= currentDirection[1] * radiusToUse;\n                        next[0] += nextDirection[0] * radiusToUse;\n                        next[1] += nextDirection[1] * radiusToUse;\n                        var ac = (currentDirection[1] === nextDirection[0] && nextDirection[0] === 1) ||\n                                ((currentDirection[1] === nextDirection[0] && nextDirection[0] === 0) && currentDirection[0] !== nextDirection[1]) ||\n                                (currentDirection[1] === nextDirection[0] && nextDirection[0] === -1),\n                                sgny = next[1] > current[3] ? 1 : -1,\n                                sgnx = next[0] > current[2] ? 1 : -1,\n                                sgnEqual = sgny === sgnx,\n                                cx = (sgnEqual && ac || (!sgnEqual && !ac)) ? next[0] : current[2],\n                                cy = (sgnEqual && ac || (!sgnEqual && !ac)) ? current[3] : next[1];\n                        _super.addSegment(conn, STRAIGHT, {\n                            x1: current[0], y1: current[1], x2: current[2], y2: current[3]\n                        });\n                        _super.addSegment(conn, ARC, {\n                            r: radiusToUse,\n                            x1: current[2],\n                            y1: current[3],\n                            x2: next[0],\n                            y2: next[1],\n                            cx: cx,\n                            cy: cy,\n                            ac: ac\n                        });\n                    }\n                    else {\n                        // dx + dy are used to adjust for line width.\n                        var dx = (current[2] === current[0]) ? 0 : (current[2] > current[0]) ? (paintInfo.lw / 2) : -(paintInfo.lw / 2),\n                            dy = (current[3] === current[1]) ? 0 : (current[3] > current[1]) ? (paintInfo.lw / 2) : -(paintInfo.lw / 2);\n                        _super.addSegment(conn, STRAIGHT, {\n                            x1: current[0] - dx, y1: current[1] - dy, x2: current[2] + dx, y2: current[3] + dy\n                        });\n                    }\n                    current = next;\n                }\n                if (next != null) {\n                    // last segment\n                    _super.addSegment(conn, STRAIGHT, {\n                        x1: next[0], y1: next[1], x2: next[2], y2: next[3]\n                    });\n                }\n            };\n        this.midpoint = midpoint;\n        this._compute = function (paintInfo, params) {\n            segments = [];\n            lastx = null;\n            lasty = null;\n            lastOrientation = null;\n            var commonStubCalculator = function () {\n                    return [paintInfo.startStubX, paintInfo.startStubY, paintInfo.endStubX, paintInfo.endStubY];\n                },\n                stubCalculators = {\n                    perpendicular: commonStubCalculator,\n                    orthogonal: commonStubCalculator,\n                    opposite: function (axis) {\n                        var pi = paintInfo,\n                            idx = axis === \"x\" ? 0 : 1,\n                            areInProximity = {\n                                \"x\": function () {\n                                    return ( (pi.so[idx] === 1 && (\n                                        ( (pi.startStubX > pi.endStubX) && (pi.tx > pi.startStubX) ) ||\n                                        ( (pi.sx > pi.endStubX) && (pi.tx > pi.sx))))) ||\n                                        ( (pi.so[idx] === -1 && (\n                                        ( (pi.startStubX < pi.endStubX) && (pi.tx < pi.startStubX) ) ||\n                                        ( (pi.sx < pi.endStubX) && (pi.tx < pi.sx)))));\n                                },\n                                \"y\": function () {\n                                    return ( (pi.so[idx] === 1 && (\n                                        ( (pi.startStubY > pi.endStubY) && (pi.ty > pi.startStubY) ) ||\n                                        ( (pi.sy > pi.endStubY) && (pi.ty > pi.sy))))) ||\n                                        ( (pi.so[idx] === -1 && (\n                                        ( (pi.startStubY < pi.endStubY) && (pi.ty < pi.startStubY) ) ||\n                                        ( (pi.sy < pi.endStubY) && (pi.ty < pi.sy)))));\n                                }\n                            };\n                        if (!alwaysRespectStubs && areInProximity[axis]()) {\n                            return {\n                                \"x\": [(paintInfo.sx + paintInfo.tx) / 2, paintInfo.startStubY, (paintInfo.sx + paintInfo.tx) / 2, paintInfo.endStubY],\n                                \"y\": [paintInfo.startStubX, (paintInfo.sy + paintInfo.ty) / 2, paintInfo.endStubX, (paintInfo.sy + paintInfo.ty) / 2]\n                            }[axis];\n                        }\n                        else {\n                            return [paintInfo.startStubX, paintInfo.startStubY, paintInfo.endStubX, paintInfo.endStubY];\n                        }\n                    }\n                };\n            // calculate Stubs.\n            var stubs = stubCalculators[paintInfo.anchorOrientation](paintInfo.sourceAxis),\n                idx = paintInfo.sourceAxis === \"x\" ? 0 : 1,\n                oidx = paintInfo.sourceAxis === \"x\" ? 1 : 0,\n                ss = stubs[idx],\n                oss = stubs[oidx],\n                es = stubs[idx + 2],\n                oes = stubs[oidx + 2];\n            // add the start stub segment. use stubs for loopback as it will look better, with the loop spaced\n            // away from the element.\n            addSegment(segments, stubs[0], stubs[1], paintInfo);\n            // if its a loopback and we should treat it differently.\n            // if (false && params.sourcePos[0] === params.targetPos[0] && params.sourcePos[1] === params.targetPos[1]) {\n            //\n            //     // we use loopbackRadius here, as statemachine connectors do.\n            //     // so we go radius to the left from stubs[0], then upwards by 2*radius, to the right by 2*radius,\n            //     // down by 2*radius, left by radius.\n            //     addSegment(segments, stubs[0] - loopbackRadius, stubs[1], paintInfo);\n            //     addSegment(segments, stubs[0] - loopbackRadius, stubs[1] - (2 * loopbackRadius), paintInfo);\n            //     addSegment(segments, stubs[0] + loopbackRadius, stubs[1] - (2 * loopbackRadius), paintInfo);\n            //     addSegment(segments, stubs[0] + loopbackRadius, stubs[1], paintInfo);\n            //     addSegment(segments, stubs[0], stubs[1], paintInfo);\n            //\n            // }\n            // else {\n                var midx = paintInfo.startStubX + ((paintInfo.endStubX - paintInfo.startStubX) * midpoint),\n                    midy = paintInfo.startStubY + ((paintInfo.endStubY - paintInfo.startStubY) * midpoint);\n                var orientations = {x: [0, 1], y: [1, 0]},\n                    lineCalculators = {\n                        perpendicular: function (axis) {\n                            var pi = paintInfo,\n                                sis = {\n                                    x: [\n                                        [[1, 2, 3, 4], null, [2, 1, 4, 3]],\n                                        null,\n                                        [[4, 3, 2, 1], null, [3, 4, 1, 2]]\n                                    ],\n                                    y: [\n                                        [[3, 2, 1, 4], null, [2, 3, 4, 1]],\n                                        null,\n                                        [[4, 1, 2, 3], null, [1, 4, 3, 2]]\n                                    ]\n                                },\n                                stubs = {\n                                    x: [[pi.startStubX, pi.endStubX], null, [pi.endStubX, pi.startStubX]],\n                                    y: [[pi.startStubY, pi.endStubY], null, [pi.endStubY, pi.startStubY]]\n                                },\n                                midLines = {\n                                    x: [[midx, pi.startStubY], [midx, pi.endStubY]],\n                                    y: [[pi.startStubX, midy], [pi.endStubX, midy]]\n                                },\n                                linesToEnd = {\n                                    x: [[pi.endStubX, pi.startStubY]],\n                                    y: [[pi.startStubX, pi.endStubY]]\n                                },\n                                startToEnd = {\n                                    x: [[pi.startStubX, pi.endStubY], [pi.endStubX, pi.endStubY]],\n                                    y: [[pi.endStubX, pi.startStubY], [pi.endStubX, pi.endStubY]]\n                                },\n                                startToMidToEnd = {\n                                    x: [[pi.startStubX, midy], [pi.endStubX, midy], [pi.endStubX, pi.endStubY]],\n                                    y: [[midx, pi.startStubY], [midx, pi.endStubY], [pi.endStubX, pi.endStubY]]\n                                },\n                                otherStubs = {\n                                    x: [pi.startStubY, pi.endStubY],\n                                    y: [pi.startStubX, pi.endStubX]\n                                },\n                                soIdx = orientations[axis][0], toIdx = orientations[axis][1],\n                                _so = pi.so[soIdx] + 1,\n                                _to = pi.to[toIdx] + 1,\n                                otherFlipped = (pi.to[toIdx] === -1 && (otherStubs[axis][1] < otherStubs[axis][0])) || (pi.to[toIdx] === 1 && (otherStubs[axis][1] > otherStubs[axis][0])),\n                                stub1 = stubs[axis][_so][0],\n                                stub2 = stubs[axis][_so][1],\n                                segmentIndexes = sis[axis][_so][_to];\n                            if (pi.segment === segmentIndexes[3] || (pi.segment === segmentIndexes[2] && otherFlipped)) {\n                                return midLines[axis];\n                            }\n                            else if (pi.segment === segmentIndexes[2] && stub2 < stub1) {\n                                return linesToEnd[axis];\n                            }\n                            else if ((pi.segment === segmentIndexes[2] && stub2 >= stub1) || (pi.segment === segmentIndexes[1] && !otherFlipped)) {\n                                return startToMidToEnd[axis];\n                            }\n                            else if (pi.segment === segmentIndexes[0] || (pi.segment === segmentIndexes[1] && otherFlipped)) {\n                                return startToEnd[axis];\n                            }\n                        },\n                        orthogonal: function (axis, startStub, otherStartStub, endStub, otherEndStub) {\n                            var pi = paintInfo,\n                                extent = {\n                                    \"x\": pi.so[0] === -1 ? Math.min(startStub, endStub) : Math.max(startStub, endStub),\n                                    \"y\": pi.so[1] === -1 ? Math.min(startStub, endStub) : Math.max(startStub, endStub)\n                                }[axis];\n                            return {\n                                \"x\": [\n                                    [extent, otherStartStub],\n                                    [extent, otherEndStub],\n                                    [endStub, otherEndStub]\n                                ],\n                                \"y\": [\n                                    [otherStartStub, extent],\n                                    [otherEndStub, extent],\n                                    [otherEndStub, endStub]\n                                ]\n                            }[axis];\n                        },\n                        opposite: function (axis, ss, oss, es) {\n                            var pi = paintInfo,\n                                otherAxis = {\"x\": \"y\", \"y\": \"x\"}[axis],\n                                dim = {\"x\": \"height\", \"y\": \"width\"}[axis],\n                                comparator = pi[\"is\" + axis.toUpperCase() + \"GreaterThanStubTimes2\"];\n                            if (params.sourceEndpoint.elementId === params.targetEndpoint.elementId) {\n                                var _val = oss + ((1 - params.sourceEndpoint.anchor[otherAxis]) * params.sourceInfo[dim]) + _super.maxStub;\n                                return {\n                                    \"x\": [\n                                        [ss, _val],\n                                        [es, _val]\n                                    ],\n                                    \"y\": [\n                                        [_val, ss],\n                                        [_val, es]\n                                    ]\n                                }[axis];\n                            }\n                            else if (!comparator || (pi.so[idx] === 1 && ss > es) || (pi.so[idx] === -1 && ss < es)) {\n                                return {\n                                    \"x\": [\n                                        [ss, midy],\n                                        [es, midy]\n                                    ],\n                                    \"y\": [\n                                        [midx, ss],\n                                        [midx, es]\n                                    ]\n                                }[axis];\n                            }\n                            else if ((pi.so[idx] === 1 && ss < es) || (pi.so[idx] === -1 && ss > es)) {\n                                return {\n                                    \"x\": [\n                                        [midx, pi.sy],\n                                        [midx, pi.ty]\n                                    ],\n                                    \"y\": [\n                                        [pi.sx, midy],\n                                        [pi.tx, midy]\n                                    ]\n                                }[axis];\n                            }\n                        }\n                    };\n                // compute the rest of the line\n                var p = lineCalculators[paintInfo.anchorOrientation](paintInfo.sourceAxis, ss, oss, es, oes);\n                if (p) {\n                    for (var i = 0; i < p.length; i++) {\n                        addSegment(segments, p[i][0], p[i][1], paintInfo);\n                    }\n                }\n                // line to end stub\n                addSegment(segments, stubs[2], stubs[3], paintInfo);\n            //}\n            // end stub to end (common)\n            addSegment(segments, paintInfo.tx, paintInfo.ty, paintInfo);\n            // write out the segments.\n            writeSegments(this, segments, paintInfo);\n        };\n    };\n    _jp.Connectors.Flowchart = Flowchart;\n    _ju.extend(_jp.Connectors.Flowchart, _jp.Connectors.AbstractConnector);\n}).call(typeof window !== 'undefined' ? window : this);\n/*\n * This file contains the code for the Bezier connector type.\n *\n * Copyright (c) 2010 - 2020 jsPlumb (hello@jsplumbtoolkit.com)\n *\n * https://jsplumbtoolkit.com\n * https://github.com/jsplumb/jsplumb\n *\n * Dual licensed under the MIT and GPL2 licenses.\n */\n;\n(function () {\n    \"use strict\";\n    var root = this, _jp = root.jsPlumb, _ju = root.jsPlumbUtil;\n    _jp.Connectors.AbstractBezierConnector = function(params) {\n        params = params || {};\n        var showLoopback = params.showLoopback !== false,\n            curviness = params.curviness || 10,\n            margin = params.margin || 5,\n            proximityLimit = params.proximityLimit || 80,\n            clockwise = params.orientation && params.orientation === \"clockwise\",\n            loopbackRadius = params.loopbackRadius || 25,\n            isLoopbackCurrently = false,\n            _super;\n        this._compute = function (paintInfo, p) {\n            var sp = p.sourcePos,\n                tp = p.targetPos,\n                _w = Math.abs(sp[0] - tp[0]),\n                _h = Math.abs(sp[1] - tp[1]);\n            if (!showLoopback || (p.sourceEndpoint.elementId !== p.targetEndpoint.elementId)) {\n                isLoopbackCurrently = false;\n                this._computeBezier(paintInfo, p, sp, tp, _w, _h);\n            } else {\n                isLoopbackCurrently = true;\n                // a loopback connector.  draw an arc from one anchor to the other.\n                var x1 = p.sourcePos[0], y1 = p.sourcePos[1] - margin,\n                    cx = x1, cy = y1 - loopbackRadius,\n                // canvas sizing stuff, to ensure the whole painted area is visible.\n                    _x = cx - loopbackRadius,\n                    _y = cy - loopbackRadius;\n                _w = 2 * loopbackRadius;\n                _h = 2 * loopbackRadius;\n                paintInfo.points[0] = _x;\n                paintInfo.points[1] = _y;\n                paintInfo.points[2] = _w;\n                paintInfo.points[3] = _h;\n                // ADD AN ARC SEGMENT.\n                _super.addSegment(this, \"Arc\", {\n                    loopback: true,\n                    x1: (x1 - _x) + 4,\n                    y1: y1 - _y,\n                    startAngle: 0,\n                    endAngle: 2 * Math.PI,\n                    r: loopbackRadius,\n                    ac: !clockwise,\n                    x2: (x1 - _x) - 4,\n                    y2: y1 - _y,\n                    cx: cx - _x,\n                    cy: cy - _y\n                });\n            }\n        };\n        _super = _jp.Connectors.AbstractConnector.apply(this, arguments);\n        return _super;\n    };\n    _ju.extend(_jp.Connectors.AbstractBezierConnector, _jp.Connectors.AbstractConnector);\n    var Bezier = function (params) {\n        params = params || {};\n        this.type = \"Bezier\";\n        var _super = _jp.Connectors.AbstractBezierConnector.apply(this, arguments),\n            majorAnchor = params.curviness || 150,\n            minorAnchor = 10;\n        this.getCurviness = function () {\n            return majorAnchor;\n        };\n        this._findControlPoint = function (point, sourceAnchorPosition, targetAnchorPosition, sourceEndpoint, targetEndpoint, soo, too) {\n            // determine if the two anchors are perpendicular to each other in their orientation.  we swap the control\n            // points around if so (code could be tightened up)\n            var perpendicular = soo[0] !== too[0] || soo[1] === too[1],\n                p = [];\n            if (!perpendicular) {\n                if (soo[0] === 0) {\n                    p.push(sourceAnchorPosition[0] < targetAnchorPosition[0] ? point[0] + minorAnchor : point[0] - minorAnchor);\n                }\n                else {\n                    p.push(point[0] - (majorAnchor * soo[0]));\n                }\n                if (soo[1] === 0) {\n                    p.push(sourceAnchorPosition[1] < targetAnchorPosition[1] ? point[1] + minorAnchor : point[1] - minorAnchor);\n                }\n                else {\n                    p.push(point[1] + (majorAnchor * too[1]));\n                }\n            }\n            else {\n                if (too[0] === 0) {\n                    p.push(targetAnchorPosition[0] < sourceAnchorPosition[0] ? point[0] + minorAnchor : point[0] - minorAnchor);\n                }\n                else {\n                    p.push(point[0] + (majorAnchor * too[0]));\n                }\n                if (too[1] === 0) {\n                    p.push(targetAnchorPosition[1] < sourceAnchorPosition[1] ? point[1] + minorAnchor : point[1] - minorAnchor);\n                }\n                else {\n                    p.push(point[1] + (majorAnchor * soo[1]));\n                }\n            }\n            return p;\n        };\n        this._computeBezier = function (paintInfo, p, sp, tp, _w, _h) {\n            var _CP, _CP2,\n                _sx = sp[0] < tp[0] ? _w : 0,\n                _sy = sp[1] < tp[1] ? _h : 0,\n                _tx = sp[0] < tp[0] ? 0 : _w,\n                _ty = sp[1] < tp[1] ? 0 : _h;\n            _CP = this._findControlPoint([_sx, _sy], sp, tp, p.sourceEndpoint, p.targetEndpoint, paintInfo.so, paintInfo.to);\n            _CP2 = this._findControlPoint([_tx, _ty], tp, sp, p.targetEndpoint, p.sourceEndpoint, paintInfo.to, paintInfo.so);\n            _super.addSegment(this, \"Bezier\", {\n                x1: _sx, y1: _sy, x2: _tx, y2: _ty,\n                cp1x: _CP[0], cp1y: _CP[1], cp2x: _CP2[0], cp2y: _CP2[1]\n            });\n        };\n    };\n    _jp.Connectors.Bezier = Bezier;\n    _ju.extend(Bezier, _jp.Connectors.AbstractBezierConnector);\n}).call(typeof window !== 'undefined' ? window : this);\n/*\n * This file contains the state machine connectors, which extend AbstractBezierConnector.\n *\n * Copyright (c) 2010 - 2020 jsPlumb (hello@jsplumbtoolkit.com)\n *\n * https://jsplumbtoolkit.com\n * https://github.com/jsplumb/jsplumb\n * \n * Dual licensed under the MIT and GPL2 licenses.\n */\n;\n(function () {\n    \"use strict\";\n    var root = this, _jp = root.jsPlumb, _ju = root.jsPlumbUtil;\n    var _segment = function (x1, y1, x2, y2) {\n            if (x1 <= x2 && y2 <= y1) {\n                return 1;\n            }\n            else if (x1 <= x2 && y1 <= y2) {\n                return 2;\n            }\n            else if (x2 <= x1 && y2 >= y1) {\n                return 3;\n            }\n            return 4;\n        },\n    // the control point we will use depends on the faces to which each end of the connection is assigned, specifically whether or not the\n    // two faces are parallel or perpendicular.  if they are parallel then the control point lies on the midpoint of the axis in which they\n    // are parellel and varies only in the other axis; this variation is proportional to the distance that the anchor points lie from the\n    // center of that face.  if the two faces are perpendicular then the control point is at some distance from both the midpoints; the amount and\n    // direction are dependent on the orientation of the two elements. 'seg', passed in to this method, tells you which segment the target element\n    // lies in with respect to the source: 1 is top right, 2 is bottom right, 3 is bottom left, 4 is top left.\n    //\n    // sourcePos and targetPos are arrays of info about where on the source and target each anchor is located.  their contents are:\n    //\n    // 0 - absolute x\n    // 1 - absolute y\n    // 2 - proportional x in element (0 is left edge, 1 is right edge)\n    // 3 - proportional y in element (0 is top edge, 1 is bottom edge)\n    //\n        _findControlPoint = function (midx, midy, segment, sourceEdge, targetEdge, dx, dy, distance, proximityLimit) {\n            // TODO (maybe)\n            // - if anchor pos is 0.5, make the control point take into account the relative position of the elements.\n            if (distance <= proximityLimit) {\n                return [midx, midy];\n            }\n            if (segment === 1) {\n                if (sourceEdge[3] <= 0 && targetEdge[3] >= 1) {\n                    return [ midx + (sourceEdge[2] < 0.5 ? -1 * dx : dx), midy ];\n                }\n                else if (sourceEdge[2] >= 1 && targetEdge[2] <= 0) {\n                    return [ midx, midy + (sourceEdge[3] < 0.5 ? -1 * dy : dy) ];\n                }\n                else {\n                    return [ midx + (-1 * dx) , midy + (-1 * dy) ];\n                }\n            }\n            else if (segment === 2) {\n                if (sourceEdge[3] >= 1 && targetEdge[3] <= 0) {\n                    return [ midx + (sourceEdge[2] < 0.5 ? -1 * dx : dx), midy ];\n                }\n                else if (sourceEdge[2] >= 1 && targetEdge[2] <= 0) {\n                    return [ midx, midy + (sourceEdge[3] < 0.5 ? -1 * dy : dy) ];\n                }\n                else {\n                    return [ midx + dx, midy + (-1 * dy) ];\n                }\n            }\n            else if (segment === 3) {\n                if (sourceEdge[3] >= 1 && targetEdge[3] <= 0) {\n                    return [ midx + (sourceEdge[2] < 0.5 ? -1 * dx : dx), midy ];\n                }\n                else if (sourceEdge[2] <= 0 && targetEdge[2] >= 1) {\n                    return [ midx, midy + (sourceEdge[3] < 0.5 ? -1 * dy : dy) ];\n                }\n                else {\n                    return [ midx + (-1 * dx) , midy + (-1 * dy) ];\n                }\n            }\n            else if (segment === 4) {\n                if (sourceEdge[3] <= 0 && targetEdge[3] >= 1) {\n                    return [ midx + (sourceEdge[2] < 0.5 ? -1 * dx : dx), midy ];\n                }\n                else if (sourceEdge[2] <= 0 && targetEdge[2] >= 1) {\n                    return [ midx, midy + (sourceEdge[3] < 0.5 ? -1 * dy : dy) ];\n                }\n                else {\n                    return [ midx + dx , midy + (-1 * dy) ];\n                }\n            }\n        };\n    var StateMachine = function (params) {\n        params = params || {};\n        this.type = \"StateMachine\";\n        var _super = _jp.Connectors.AbstractBezierConnector.apply(this, arguments),\n            curviness = params.curviness || 10,\n            margin = params.margin || 5,\n            proximityLimit = params.proximityLimit || 80,\n            clockwise = params.orientation && params.orientation === \"clockwise\",\n            _controlPoint;\n        this._computeBezier = function(paintInfo, params, sp, tp, w, h) {\n            var _sx = params.sourcePos[0] < params.targetPos[0] ? 0 : w,\n                _sy = params.sourcePos[1] < params.targetPos[1] ? 0 : h,\n                _tx = params.sourcePos[0] < params.targetPos[0] ? w : 0,\n                _ty = params.sourcePos[1] < params.targetPos[1] ? h : 0;\n            // now adjust for the margin\n            if (params.sourcePos[2] === 0) {\n                _sx -= margin;\n            }\n            if (params.sourcePos[2] === 1) {\n                _sx += margin;\n            }\n            if (params.sourcePos[3] === 0) {\n                _sy -= margin;\n            }\n            if (params.sourcePos[3] === 1) {\n                _sy += margin;\n            }\n            if (params.targetPos[2] === 0) {\n                _tx -= margin;\n            }\n            if (params.targetPos[2] === 1) {\n                _tx += margin;\n            }\n            if (params.targetPos[3] === 0) {\n                _ty -= margin;\n            }\n            if (params.targetPos[3] === 1) {\n                _ty += margin;\n            }\n            //\n            // these connectors are quadratic bezier curves, having a single control point. if both anchors\n            // are located at 0.5 on their respective faces, the control point is set to the midpoint and you\n            // get a straight line.  this is also the case if the two anchors are within 'proximityLimit', since\n            // it seems to make good aesthetic sense to do that. outside of that, the control point is positioned\n            // at 'curviness' pixels away along the normal to the straight line connecting the two anchors.\n            //\n            // there may be two improvements to this.  firstly, we might actually support the notion of avoiding nodes\n            // in the UI, or at least making a good effort at doing so.  if a connection would pass underneath some node,\n            // for example, we might increase the distance the control point is away from the midpoint in a bid to\n            // steer it around that node.  this will work within limits, but i think those limits would also be the likely\n            // limits for, once again, aesthetic good sense in the layout of a chart using these connectors.\n            //\n            // the second possible change is actually two possible changes: firstly, it is possible we should gradually\n            // decrease the 'curviness' as the distance between the anchors decreases; start tailing it off to 0 at some\n            // point (which should be configurable).  secondly, we might slightly increase the 'curviness' for connectors\n            // with respect to how far their anchor is from the center of its respective face. this could either look cool,\n            // or stupid, and may indeed work only in a way that is so subtle as to have been a waste of time.\n            //\n            var _midx = (_sx + _tx) / 2,\n                _midy = (_sy + _ty) / 2,\n                segment = _segment(_sx, _sy, _tx, _ty),\n                distance = Math.sqrt(Math.pow(_tx - _sx, 2) + Math.pow(_ty - _sy, 2)),\n                cp1x, cp2x, cp1y, cp2y;\n            // calculate the control point.  this code will be where we'll put in a rudimentary element avoidance scheme; it\n            // will work by extending the control point to force the curve to be, um, curvier.\n            _controlPoint = _findControlPoint(_midx,\n                _midy,\n                segment,\n                params.sourcePos,\n                params.targetPos,\n                curviness, curviness,\n                distance,\n                proximityLimit);\n            cp1x = _controlPoint[0];\n            cp2x = _controlPoint[0];\n            cp1y = _controlPoint[1];\n            cp2y = _controlPoint[1];\n            _super.addSegment(this, \"Bezier\", {\n                x1: _tx, y1: _ty, x2: _sx, y2: _sy,\n                cp1x: cp1x, cp1y: cp1y,\n                cp2x: cp2x, cp2y: cp2y\n            });\n        };\n    };\n    _jp.Connectors.StateMachine = StateMachine;\n    _ju.extend(StateMachine, _jp.Connectors.AbstractBezierConnector);\n}).call(typeof window !== 'undefined' ? window : this);\n/*\n * This file contains the 'flowchart' connectors, consisting of vertical and horizontal line segments.\n *\n * Copyright (c) 2010 - 2020 jsPlumb (hello@jsplumbtoolkit.com)\n *\n * https://jsplumbtoolkit.com\n * https://github.com/jsplumb/jsplumb\n *\n * Dual licensed under the MIT and GPL2 licenses.\n */\n;\n(function () {\n    \"use strict\";\n    var root = this, _jp = root.jsPlumb, _ju = root.jsPlumbUtil;\n    var STRAIGHT = \"Straight\";\n    var Straight = function (params) {\n        this.type = STRAIGHT;\n        var _super = _jp.Connectors.AbstractConnector.apply(this, arguments);\n        this._compute = function (paintInfo, _) {\n            _super.addSegment(this, STRAIGHT, {x1: paintInfo.sx, y1: paintInfo.sy, x2: paintInfo.startStubX, y2: paintInfo.startStubY});\n            _super.addSegment(this, STRAIGHT, {x1: paintInfo.startStubX, y1: paintInfo.startStubY, x2: paintInfo.endStubX, y2: paintInfo.endStubY});\n            _super.addSegment(this, STRAIGHT, {x1: paintInfo.endStubX, y1: paintInfo.endStubY, x2: paintInfo.tx, y2: paintInfo.ty});\n        };\n    };\n    _jp.Connectors.Straight = Straight;\n    _ju.extend(Straight, _jp.Connectors.AbstractConnector);\n}).call(typeof window !== 'undefined' ? window : this);\n/*\n * This file contains the SVG renderers.\n *\n * Copyright (c) 2010 - 2020 jsPlumb (hello@jsplumbtoolkit.com)\n * \n * https://jsplumbtoolkit.com\n * https://github.com/jsplumb/jsplumb\n * \n * Dual licensed under the MIT and GPL2 licenses.\n */\n;\n(function () {\n// ************************** SVG utility methods ********************************************\t\n    \"use strict\";\n    var root = this, _jp = root.jsPlumb, _ju = root.jsPlumbUtil;\n    var svgAttributeMap = {\n            \"stroke-linejoin\": \"stroke-linejoin\",\n            \"stroke-dashoffset\": \"stroke-dashoffset\",\n            \"stroke-linecap\": \"stroke-linecap\"\n        },\n        STROKE_DASHARRAY = \"stroke-dasharray\",\n        DASHSTYLE = \"dashstyle\",\n        LINEAR_GRADIENT = \"linearGradient\",\n        RADIAL_GRADIENT = \"radialGradient\",\n        DEFS = \"defs\",\n        FILL = \"fill\",\n        STOP = \"stop\",\n        STROKE = \"stroke\",\n        STROKE_WIDTH = \"stroke-width\",\n        STYLE = \"style\",\n        NONE = \"none\",\n        JSPLUMB_GRADIENT = \"jsplumb_gradient_\",\n        LINE_WIDTH = \"strokeWidth\",\n        ns = {\n            svg: \"http://www.w3.org/2000/svg\"\n        },\n        _attr = function (node, attributes) {\n            for (var i in attributes) {\n                node.setAttribute(i, \"\" + attributes[i]);\n            }\n        },\n        _node = function (name, attributes) {\n            attributes = attributes || {};\n            attributes.version = \"1.1\";\n            attributes.xmlns = ns.svg;\n            return _jp.createElementNS(ns.svg, name, null, null, attributes);\n        },\n        _pos = function (d) {\n            return \"position:absolute;left:\" + d[0] + \"px;top:\" + d[1] + \"px\";\n        },\n        _clearGradient = function (parent) {\n            var els = parent.querySelectorAll(\" defs,linearGradient,radialGradient\");\n            for (var i = 0; i < els.length; i++) {\n                els[i].parentNode.removeChild(els[i]);\n            }\n        },\n        _updateGradient = function (parent, node, style, dimensions, uiComponent) {\n            var id = JSPLUMB_GRADIENT + uiComponent._jsPlumb.instance.idstamp();\n            // first clear out any existing gradient\n            _clearGradient(parent);\n            // this checks for an 'offset' property in the gradient, and in the absence of it, assumes\n            // we want a linear gradient. if it's there, we create a radial gradient.\n            // it is possible that a more explicit means of defining the gradient type would be\n            // better. relying on 'offset' means that we can never have a radial gradient that uses\n            // some default offset, for instance.\n            // issue 244 suggested the 'gradientUnits' attribute; without this, straight/flowchart connectors with gradients would\n            // not show gradients when the line was perfectly horizontal or vertical.\n            var g;\n            if (!style.gradient.offset) {\n                g = _node(LINEAR_GRADIENT, {id: id, gradientUnits: \"userSpaceOnUse\"});\n            }\n            else {\n                g = _node(RADIAL_GRADIENT, { id: id });\n            }\n            var defs = _node(DEFS);\n            parent.appendChild(defs);\n            defs.appendChild(g);\n            // the svg radial gradient seems to treat stops in the reverse\n            // order to how canvas does it.  so we want to keep all the maths the same, but\n            // iterate the actual style declarations in reverse order, if the x indexes are not in order.\n            for (var i = 0; i < style.gradient.stops.length; i++) {\n                var styleToUse = uiComponent.segment === 1 || uiComponent.segment === 2 ? i : style.gradient.stops.length - 1 - i,\n                    stopColor = style.gradient.stops[styleToUse][1],\n                    s = _node(STOP, {\"offset\": Math.floor(style.gradient.stops[i][0] * 100) + \"%\", \"stop-color\": stopColor});\n                g.appendChild(s);\n            }\n            var applyGradientTo = style.stroke ? STROKE : FILL;\n            node.setAttribute(applyGradientTo, \"url(#\" + id + \")\");\n        },\n        _applyStyles = function (parent, node, style, dimensions, uiComponent) {\n            node.setAttribute(FILL, style.fill ? style.fill : NONE);\n            node.setAttribute(STROKE, style.stroke ? style.stroke : NONE);\n            if (style.gradient) {\n                _updateGradient(parent, node, style, dimensions, uiComponent);\n            }\n            else {\n                // make sure we clear any existing gradient\n                _clearGradient(parent);\n                node.setAttribute(STYLE, \"\");\n            }\n            if (style.strokeWidth) {\n                node.setAttribute(STROKE_WIDTH, style.strokeWidth);\n            }\n            // in SVG there is a stroke-dasharray attribute we can set, and its syntax looks like\n            // the syntax in VML but is actually kind of nasty: values are given in the pixel\n            // coordinate space, whereas in VML they are multiples of the width of the stroked\n            // line, which makes a lot more sense.  for that reason, jsPlumb is supporting both\n            // the native svg 'stroke-dasharray' attribute, and also the 'dashstyle' concept from\n            // VML, which will be the preferred method.  the code below this converts a dashstyle\n            // attribute given in terms of stroke width into a pixel representation, by using the\n            // stroke's lineWidth.\n            if (style[DASHSTYLE] && style[LINE_WIDTH] && !style[STROKE_DASHARRAY]) {\n                var sep = style[DASHSTYLE].indexOf(\",\") === -1 ? \" \" : \",\",\n                    parts = style[DASHSTYLE].split(sep),\n                    styleToUse = \"\";\n                parts.forEach(function (p) {\n                    styleToUse += (Math.floor(p * style.strokeWidth) + sep);\n                });\n                node.setAttribute(STROKE_DASHARRAY, styleToUse);\n            }\n            else if (style[STROKE_DASHARRAY]) {\n                node.setAttribute(STROKE_DASHARRAY, style[STROKE_DASHARRAY]);\n            }\n            // extra attributes such as join type, dash offset.\n            for (var i in svgAttributeMap) {\n                if (style[i]) {\n                    node.setAttribute(svgAttributeMap[i], style[i]);\n                }\n            }\n        },\n        _appendAtIndex = function (svg, path, idx) {\n            if (svg.childNodes.length > idx) {\n                svg.insertBefore(path, svg.childNodes[idx]);\n            }\n            else {\n                svg.appendChild(path);\n            }\n        };\n    /**\n     utility methods for other objects to use.\n     */\n    _ju.svg = {\n        node: _node,\n        attr: _attr,\n        pos: _pos\n    };\n    // ************************** / SVG utility methods ********************************************\n    /*\n     * Base class for SVG components.\n     */\n    var SvgComponent = function (params) {\n        var pointerEventsSpec = params.pointerEventsSpec || \"all\", renderer = {};\n        _jp.jsPlumbUIComponent.apply(this, params.originalArgs);\n        this.canvas = null;\n        this.path = null;\n        this.svg = null;\n        this.bgCanvas = null;\n        var clazz = params.cssClass + \" \" + (params.originalArgs[0].cssClass || \"\"),\n            svgParams = {\n                \"style\": \"\",\n                \"width\": 0,\n                \"height\": 0,\n                \"pointer-events\": pointerEventsSpec,\n                \"position\": \"absolute\"\n            };\n        this.svg = _node(\"svg\", svgParams);\n        if (params.useDivWrapper) {\n            this.canvas = _jp.createElement(\"div\", { position : \"absolute\" });\n            _ju.sizeElement(this.canvas, 0, 0, 1, 1);\n            this.canvas.className = clazz;\n        }\n        else {\n            _attr(this.svg, { \"class\": clazz });\n            this.canvas = this.svg;\n        }\n        params._jsPlumb.appendElement(this.canvas, params.originalArgs[0].parent);\n        if (params.useDivWrapper) {\n            this.canvas.appendChild(this.svg);\n        }\n        var displayElements = [ this.canvas ];\n        this.getDisplayElements = function () {\n            return displayElements;\n        };\n        this.appendDisplayElement = function (el) {\n            displayElements.push(el);\n        };\n        this.paint = function (style, anchor, extents) {\n            if (style != null) {\n                var xy = [ this.x, this.y ], wh = [ this.w, this.h ], p;\n                if (extents != null) {\n                    if (extents.xmin < 0) {\n                        xy[0] += extents.xmin;\n                    }\n                    if (extents.ymin < 0) {\n                        xy[1] += extents.ymin;\n                    }\n                    wh[0] = extents.xmax + ((extents.xmin < 0) ? -extents.xmin : 0);\n                    wh[1] = extents.ymax + ((extents.ymin < 0) ? -extents.ymin : 0);\n                }\n                if (params.useDivWrapper) {\n                    _ju.sizeElement(this.canvas, xy[0], xy[1], wh[0] > 0 ? wh[0] : 1, wh[1] > 0 ? wh[1] : 1);\n                    xy[0] = 0;\n                    xy[1] = 0;\n                    p = _pos([ 0, 0 ]);\n                }\n                else {\n                    p = _pos([ xy[0], xy[1] ]);\n                }\n                renderer.paint.apply(this, arguments);\n                _attr(this.svg, {\n                    \"style\": p,\n                    \"width\": wh[0] || 1,\n                    \"height\": wh[1] || 1\n                });\n            }\n        };\n        return {\n            renderer: renderer\n        };\n    };\n    _ju.extend(SvgComponent, _jp.jsPlumbUIComponent, {\n        cleanup: function (force) {\n            if (force || this.typeId == null) {\n                if (this.canvas) {\n                    this.canvas._jsPlumb = null;\n                }\n                if (this.svg) {\n                    this.svg._jsPlumb = null;\n                }\n                if (this.bgCanvas) {\n                    this.bgCanvas._jsPlumb = null;\n                }\n                if (this.canvas && this.canvas.parentNode) {\n                    this.canvas.parentNode.removeChild(this.canvas);\n                }\n                if (this.bgCanvas && this.bgCanvas.parentNode) {\n                    this.canvas.parentNode.removeChild(this.canvas);\n                }\n                this.svg = null;\n                this.canvas = null;\n                this.path = null;\n                this.group = null;\n                this._jsPlumb = null;\n            }\n            else {\n                // if not a forced cleanup, just detach from DOM for now.\n                if (this.canvas && this.canvas.parentNode) {\n                    this.canvas.parentNode.removeChild(this.canvas);\n                }\n                if (this.bgCanvas && this.bgCanvas.parentNode) {\n                    this.bgCanvas.parentNode.removeChild(this.bgCanvas);\n                }\n            }\n        },\n        reattach:function(instance) {\n            var c = instance.getContainer();\n            if (this.canvas && this.canvas.parentNode == null) {\n                c.appendChild(this.canvas);\n            }\n            if (this.bgCanvas && this.bgCanvas.parentNode == null) {\n                c.appendChild(this.bgCanvas);\n            }\n        },\n        setVisible: function (v) {\n            if (this.canvas) {\n                this.canvas.style.display = v ? \"block\" : \"none\";\n            }\n        }\n    });\n    /*\n     * Base class for SVG connectors.\n     */\n    _jp.ConnectorRenderers.svg = function (params) {\n        var self = this,\n            _super = SvgComponent.apply(this, [\n                {\n                    cssClass: params._jsPlumb.connectorClass,\n                    originalArgs: arguments,\n                    pointerEventsSpec: \"none\",\n                    _jsPlumb: params._jsPlumb\n                }\n            ]);\n        _super.renderer.paint = function (style, anchor, extents) {\n            var segments = self.getSegments(), p = \"\", offset = [0, 0];\n            if (extents.xmin < 0) {\n                offset[0] = -extents.xmin;\n            }\n            if (extents.ymin < 0) {\n                offset[1] = -extents.ymin;\n            }\n            if (segments.length > 0) {\n                p = self.getPathData();\n                var a = {\n                        d: p,\n                        transform: \"translate(\" + offset[0] + \",\" + offset[1] + \")\",\n                        \"pointer-events\": params[\"pointer-events\"] || \"visibleStroke\"\n                    },\n                    outlineStyle = null,\n                    d = [self.x, self.y, self.w, self.h];\n                // outline style.  actually means drawing an svg object underneath the main one.\n                if (style.outlineStroke) {\n                    var outlineWidth = style.outlineWidth || 1,\n                        outlineStrokeWidth = style.strokeWidth + (2 * outlineWidth);\n                    outlineStyle = _jp.extend({}, style);\n                    delete outlineStyle.gradient;\n                    outlineStyle.stroke = style.outlineStroke;\n                    outlineStyle.strokeWidth = outlineStrokeWidth;\n                    if (self.bgPath == null) {\n                        self.bgPath = _node(\"path\", a);\n                        _jp.addClass(self.bgPath, _jp.connectorOutlineClass);\n                        _appendAtIndex(self.svg, self.bgPath, 0);\n                    }\n                    else {\n                        _attr(self.bgPath, a);\n                    }\n                    _applyStyles(self.svg, self.bgPath, outlineStyle, d, self);\n                }\n                if (self.path == null) {\n                    self.path = _node(\"path\", a);\n                    _appendAtIndex(self.svg, self.path, style.outlineStroke ? 1 : 0);\n                }\n                else {\n                    _attr(self.path, a);\n                }\n                _applyStyles(self.svg, self.path, style, d, self);\n            }\n        };\n    };\n    _ju.extend(_jp.ConnectorRenderers.svg, SvgComponent);\n// ******************************* svg segment renderer *****************************************************\t\n// ******************************* /svg segments *****************************************************\n    /*\n     * Base class for SVG endpoints.\n     */\n    var SvgEndpoint = _jp.SvgEndpoint = function (params) {\n        var _super = SvgComponent.apply(this, [\n            {\n                cssClass: params._jsPlumb.endpointClass,\n                originalArgs: arguments,\n                pointerEventsSpec: \"all\",\n                useDivWrapper: true,\n                _jsPlumb: params._jsPlumb\n            }\n        ]);\n        _super.renderer.paint = function (style) {\n            var s = _jp.extend({}, style);\n            if (s.outlineStroke) {\n                s.stroke = s.outlineStroke;\n            }\n            if (this.node == null) {\n                this.node = this.makeNode(s);\n                this.svg.appendChild(this.node);\n            }\n            else if (this.updateNode != null) {\n                this.updateNode(this.node);\n            }\n            _applyStyles(this.svg, this.node, s, [ this.x, this.y, this.w, this.h ], this);\n            _pos(this.node, [ this.x, this.y ]);\n        }.bind(this);\n    };\n    _ju.extend(SvgEndpoint, SvgComponent);\n    /*\n     * SVG Dot Endpoint\n     */\n    _jp.Endpoints.svg.Dot = function () {\n        _jp.Endpoints.Dot.apply(this, arguments);\n        SvgEndpoint.apply(this, arguments);\n        this.makeNode = function (style) {\n            return _node(\"circle\", {\n                \"cx\": this.w / 2,\n                \"cy\": this.h / 2,\n                \"r\": this.radius\n            });\n        };\n        this.updateNode = function (node) {\n            _attr(node, {\n                \"cx\": this.w / 2,\n                \"cy\": this.h / 2,\n                \"r\": this.radius\n            });\n        };\n    };\n    _ju.extend(_jp.Endpoints.svg.Dot, [_jp.Endpoints.Dot, SvgEndpoint]);\n    /*\n     * SVG Rectangle Endpoint\n     */\n    _jp.Endpoints.svg.Rectangle = function () {\n        _jp.Endpoints.Rectangle.apply(this, arguments);\n        SvgEndpoint.apply(this, arguments);\n        this.makeNode = function (style) {\n            return _node(\"rect\", {\n                \"width\": this.w,\n                \"height\": this.h\n            });\n        };\n        this.updateNode = function (node) {\n            _attr(node, {\n                \"width\": this.w,\n                \"height\": this.h\n            });\n        };\n    };\n    _ju.extend(_jp.Endpoints.svg.Rectangle, [_jp.Endpoints.Rectangle, SvgEndpoint]);\n    /*\n     * SVG Image Endpoint is the default image endpoint.\n     */\n    _jp.Endpoints.svg.Image = _jp.Endpoints.Image;\n    /*\n     * Blank endpoint in svg renderer is the default Blank endpoint.\n     */\n    _jp.Endpoints.svg.Blank = _jp.Endpoints.Blank;\n    /*\n     * Label overlay in svg renderer is the default Label overlay.\n     */\n    _jp.Overlays.svg.Label = _jp.Overlays.Label;\n    /*\n     * Custom overlay in svg renderer is the default Custom overlay.\n     */\n    _jp.Overlays.svg.Custom = _jp.Overlays.Custom;\n    var AbstractSvgArrowOverlay = function (superclass, originalArgs) {\n        superclass.apply(this, originalArgs);\n        _jp.jsPlumbUIComponent.apply(this, originalArgs);\n        this.isAppendedAtTopLevel = false;\n        var self = this;\n        this.path = null;\n        this.paint = function (params, containerExtents) {\n            // only draws on connections, not endpoints.\n            if (params.component.svg && containerExtents) {\n                if (this.path == null) {\n                    this.path = _node(\"path\", {\n                        \"pointer-events\": \"all\"\n                    });\n                    params.component.svg.appendChild(this.path);\n                    if (this.elementCreated) {\n                        this.elementCreated(this.path, params.component);\n                    }\n                    this.canvas = params.component.svg; // for the sake of completeness; this behaves the same as other overlays\n                }\n                var clazz = originalArgs && (originalArgs.length === 1) ? (originalArgs[0].cssClass || \"\") : \"\",\n                    offset = [0, 0];\n                if (containerExtents.xmin < 0) {\n                    offset[0] = -containerExtents.xmin;\n                }\n                if (containerExtents.ymin < 0) {\n                    offset[1] = -containerExtents.ymin;\n                }\n                _attr(this.path, {\n                    \"d\": makePath(params.d),\n                    \"class\": clazz,\n                    stroke: params.stroke ? params.stroke : null,\n                    fill: params.fill ? params.fill : null,\n                    transform: \"translate(\" + offset[0] + \",\" + offset[1] + \")\"\n                });\n            }\n        };\n        var makePath = function (d) {\n            return (isNaN(d.cxy.x) || isNaN(d.cxy.y)) ? \"\" : \"M\" + d.hxy.x + \",\" + d.hxy.y +\n                \" L\" + d.tail[0].x + \",\" + d.tail[0].y +\n                \" L\" + d.cxy.x + \",\" + d.cxy.y +\n                \" L\" + d.tail[1].x + \",\" + d.tail[1].y +\n                \" L\" + d.hxy.x + \",\" + d.hxy.y;\n        };\n        this.transfer = function(target) {\n            if (target.canvas && this.path && this.path.parentNode) {\n                this.path.parentNode.removeChild(this.path);\n                target.canvas.appendChild(this.path);\n            }\n        };\n    };\n    var svgProtoFunctions = {\n        cleanup : function (force) {\n            if (this.path != null) {\n                if (force) {\n                    this._jsPlumb.instance.removeElement(this.path);\n                }\n                else {\n                    if (this.path.parentNode) {\n                        this.path.parentNode.removeChild(this.path);\n                    }\n                }\n            }\n        }, reattach :function(instance, component) {\n            if (this.path && component.canvas) {\n                component.canvas.appendChild(this.path);\n            }\n        },\n        setVisible : function (v) {\n            if (this.path != null) {\n                (this.path.style.display = (v ? \"block\" : \"none\"));\n            }\n        }\n    };\n    _ju.extend(AbstractSvgArrowOverlay, [_jp.jsPlumbUIComponent, _jp.Overlays.AbstractOverlay]);\n    _jp.Overlays.svg.Arrow = function () {\n        AbstractSvgArrowOverlay.apply(this, [_jp.Overlays.Arrow, arguments]);\n    };\n    _ju.extend(_jp.Overlays.svg.Arrow, [ _jp.Overlays.Arrow, AbstractSvgArrowOverlay ], svgProtoFunctions);\n    _jp.Overlays.svg.PlainArrow = function () {\n        AbstractSvgArrowOverlay.apply(this, [_jp.Overlays.PlainArrow, arguments]);\n    };\n    _ju.extend(_jp.Overlays.svg.PlainArrow, [ _jp.Overlays.PlainArrow, AbstractSvgArrowOverlay ], svgProtoFunctions);\n    _jp.Overlays.svg.Diamond = function () {\n        AbstractSvgArrowOverlay.apply(this, [_jp.Overlays.Diamond, arguments]);\n    };\n    _ju.extend(_jp.Overlays.svg.Diamond, [ _jp.Overlays.Diamond, AbstractSvgArrowOverlay ], svgProtoFunctions);\n    // a test\n    _jp.Overlays.svg.GuideLines = function () {\n        var path = null, self = this, p1_1, p1_2;\n        _jp.Overlays.GuideLines.apply(this, arguments);\n        this.paint = function (params, containerExtents) {\n            if (path == null) {\n                path = _node(\"path\");\n                params.connector.svg.appendChild(path);\n                self.attachListeners(path, params.connector);\n                self.attachListeners(path, self);\n                p1_1 = _node(\"path\");\n                params.connector.svg.appendChild(p1_1);\n                self.attachListeners(p1_1, params.connector);\n                self.attachListeners(p1_1, self);\n                p1_2 = _node(\"path\");\n                params.connector.svg.appendChild(p1_2);\n                self.attachListeners(p1_2, params.connector);\n                self.attachListeners(p1_2, self);\n            }\n            var offset = [0, 0];\n            if (containerExtents.xmin < 0) {\n                offset[0] = -containerExtents.xmin;\n            }\n            if (containerExtents.ymin < 0) {\n                offset[1] = -containerExtents.ymin;\n            }\n            _attr(path, {\n                \"d\": makePath(params.head, params.tail),\n                stroke: \"red\",\n                fill: null,\n                transform: \"translate(\" + offset[0] + \",\" + offset[1] + \")\"\n            });\n            _attr(p1_1, {\n                \"d\": makePath(params.tailLine[0], params.tailLine[1]),\n                stroke: \"blue\",\n                fill: null,\n                transform: \"translate(\" + offset[0] + \",\" + offset[1] + \")\"\n            });\n            _attr(p1_2, {\n                \"d\": makePath(params.headLine[0], params.headLine[1]),\n                stroke: \"green\",\n                fill: null,\n                transform: \"translate(\" + offset[0] + \",\" + offset[1] + \")\"\n            });\n        };\n        var makePath = function (d1, d2) {\n            return \"M \" + d1.x + \",\" + d1.y +\n                \" L\" + d2.x + \",\" + d2.y;\n        };\n    };\n    _ju.extend(_jp.Overlays.svg.GuideLines, _jp.Overlays.GuideLines);\n}).call(typeof window !== 'undefined' ? window : this);\n/*\n * This file contains code used when jsPlumb is being rendered in a DOM.\n *\n * Copyright (c) 2010 - 2020 jsPlumb (hello@jsplumbtoolkit.com)\n *\n * https://jsplumbtoolkit.com\n * https://github.com/jsplumb/jsplumb\n *\n * Dual licensed under the MIT and GPL2 licenses.\n */\n;\n(function () {\n    \"use strict\";\n    var root = this, _jp = root.jsPlumb, _ju = root.jsPlumbUtil,\n        _jk = root.Katavorio, _jg = root.Biltong;\n    var _getEventManager = function(instance) {\n        var e = instance._mottle;\n        if (!e) {\n            e = instance._mottle = new root.Mottle();\n        }\n        return e;\n    };\n    var _getDragManager = function (instance, category) {\n        category = category || \"main\";\n        var key = \"_katavorio_\" + category;\n        var k = instance[key],\n            e = instance.getEventManager();\n        if (!k) {\n            k = new _jk({\n                bind: e.on,\n                unbind: e.off,\n                getSize: _jp.getSize,\n                getConstrainingRectangle:function(el) {\n                    return [ el.parentNode.scrollWidth, el.parentNode.scrollHeight ];\n                },\n                getPosition: function (el, relativeToRoot) {\n                    // if this is a nested draggable then compute the offset against its own offsetParent, otherwise\n                    // compute against the Container's origin. see also the getUIPosition method below.\n                    var o = instance.getOffset(el, relativeToRoot, el._katavorioDrag ? el.offsetParent : null);\n                    return [o.left, o.top];\n                },\n                setPosition: function (el, xy) {\n                    el.style.left = xy[0] + \"px\";\n                    el.style.top = xy[1] + \"px\";\n                },\n                addClass: _jp.addClass,\n                removeClass: _jp.removeClass,\n                intersects: _jg.intersects,\n                indexOf: function(l, i) { return l.indexOf(i); },\n                scope:instance.getDefaultScope(),\n                css: {\n                    noSelect: instance.dragSelectClass,\n                    droppable: \"jtk-droppable\",\n                    draggable: \"jtk-draggable\",\n                    drag: \"jtk-drag\",\n                    selected: \"jtk-drag-selected\",\n                    active: \"jtk-drag-active\",\n                    hover: \"jtk-drag-hover\",\n                    ghostProxy:\"jtk-ghost-proxy\"\n                }\n            });\n            k.setZoom(instance.getZoom());\n            instance[key] = k;\n            instance.bind(\"zoom\", k.setZoom);\n        }\n        return k;\n    };\n    var _dragStart=function(params) {\n        var options = params.el._jsPlumbDragOptions;\n        var cont = true;\n        if (options.canDrag) {\n            cont = options.canDrag();\n        }\n        if (cont) {\n            this.setHoverSuspended(true);\n            this.select({source: params.el}).addClass(this.elementDraggingClass + \" \" + this.sourceElementDraggingClass, true);\n            this.select({target: params.el}).addClass(this.elementDraggingClass + \" \" + this.targetElementDraggingClass, true);\n            this.setConnectionBeingDragged(true);\n        }\n        return cont;\n    };\n    var _dragMove=function(params) {\n        var ui = this.getUIPosition(arguments, this.getZoom());\n        if (ui != null) {\n            var o = params.el._jsPlumbDragOptions;\n            this.draw(params.el, ui, null, true);\n            if (o._dragging) {\n                this.addClass(params.el, \"jtk-dragged\");\n            }\n            o._dragging = true;\n        }\n    };\n    var _dragStop=function(params) {\n        var elements = params.selection, uip;\n        var _one = function (_e) {\n            var drawResult;\n            if (_e[1] != null) {\n                // run the reported offset through the code that takes parent containers\n                // into account, to adjust if necessary (issue 554)\n                uip = this.getUIPosition([{\n                    el:_e[2].el,\n                    pos:[_e[1].left, _e[1].top]\n                }]);\n                drawResult = this.draw(_e[2].el, uip);\n            }\n            if (_e[0]._jsPlumbDragOptions != null) {\n                delete _e[0]._jsPlumbDragOptions._dragging;\n            }\n            this.removeClass(_e[0], \"jtk-dragged\");\n            this.select({source: _e[2].el}).removeClass(this.elementDraggingClass + \" \" + this.sourceElementDraggingClass, true);\n            this.select({target: _e[2].el}).removeClass(this.elementDraggingClass + \" \" + this.targetElementDraggingClass, true);\n            params.e._drawResult = params.e._drawResult || {c:[],e:[], a:[]};\n            Array.prototype.push.apply(params.e._drawResult.c, drawResult.c);\n            Array.prototype.push.apply(params.e._drawResult.e, drawResult.e);\n            Array.prototype.push.apply(params.e._drawResult.a, drawResult.a);\n            this.getDragManager().dragEnded(_e[2].el);\n        }.bind(this);\n        for (var i = 0; i < elements.length; i++) {\n            _one(elements[i]);\n        }\n        this.setHoverSuspended(false);\n        this.setConnectionBeingDragged(false);\n    };\n    var _animProps = function (o, p) {\n        var _one = function (pName) {\n            if (p[pName] != null) {\n                if (_ju.isString(p[pName])) {\n                    var m = p[pName].match(/-=/) ? -1 : 1,\n                        v = p[pName].substring(2);\n                    return o[pName] + (m * v);\n                }\n                else {\n                    return p[pName];\n                }\n            }\n            else {\n                return o[pName];\n            }\n        };\n        return [ _one(\"left\"), _one(\"top\") ];\n    };\n    var _genLoc = function (prefix, e) {\n            if (e == null) {\n                return [ 0, 0 ];\n            }\n            var ts = _touches(e), t = _getTouch(ts, 0);\n            return [t[prefix + \"X\"], t[prefix + \"Y\"]];\n        },\n        _pageLocation = _genLoc.bind(this, \"page\"),\n        _screenLocation = _genLoc.bind(this, \"screen\"),\n        _clientLocation = _genLoc.bind(this, \"client\"),\n        _getTouch = function (touches, idx) {\n            return touches.item ? touches.item(idx) : touches[idx];\n        },\n        _touches = function (e) {\n            return e.touches && e.touches.length > 0 ? e.touches :\n                e.changedTouches && e.changedTouches.length > 0 ? e.changedTouches :\n                    e.targetTouches && e.targetTouches.length > 0 ? e.targetTouches :\n                        [ e ];\n        };\n    /**\n     Manages dragging for some instance of jsPlumb.\n     TODO instead of this being accessed directly, it should subscribe to events on the jsPlumb instance: every method\n     in here is called directly by jsPlumb. But what should happen is that we have unpublished events that this listens\n     to.  The only trick is getting one of these instantiated with every jsPlumb instance: it needs to have a hook somehow.\n     Basically the general idea is to pull ALL the drag code out (prototype method registrations plus this) into a\n     dedicated drag script), that does not necessarily need to be included.\n     */\n    var DragManager = function (_currentInstance) {\n        var _draggables = {}, _dlist = [], _delements = {}, _elementsWithEndpoints = {},\n            // elementids mapped to the draggable to which they belong.\n            _draggablesForElements = {};\n        /**\n         register some element as draggable.  right now the drag init stuff is done elsewhere, and it is\n         possible that will continue to be the case.\n         */\n        this.register = function (el) {\n            var id = _currentInstance.getId(el),\n                parentOffset;\n            if (!_draggables[id]) {\n                _draggables[id] = el;\n                _dlist.push(el);\n                _delements[id] = {};\n            }\n            // look for child elements that have endpoints and register them against this draggable.\n            var _oneLevel = function (p) {\n                if (p) {\n                    for (var i = 0; i < p.childNodes.length; i++) {\n                        if (p.childNodes[i].nodeType !== 3 && p.childNodes[i].nodeType !== 8) {\n                            var cEl = jsPlumb.getElement(p.childNodes[i]),\n                                cid = _currentInstance.getId(p.childNodes[i], null, true);\n                            if (cid && _elementsWithEndpoints[cid] && _elementsWithEndpoints[cid] > 0) {\n                                if (!parentOffset) {\n                                    parentOffset = _currentInstance.getOffset(el);\n                                }\n                                var cOff = _currentInstance.getOffset(cEl);\n                                _delements[id][cid] = {\n                                    id: cid,\n                                    offset: {\n                                        left: cOff.left - parentOffset.left,\n                                        top: cOff.top - parentOffset.top\n                                    }\n                                };\n                                _draggablesForElements[cid] = id;\n                            }\n                            _oneLevel(p.childNodes[i]);\n                        }\n                    }\n                }\n            };\n            _oneLevel(el);\n        };\n        // refresh the offsets for child elements of this element.\n        this.updateOffsets = function (elId, childOffsetOverrides) {\n            if (elId != null) {\n                childOffsetOverrides = childOffsetOverrides || {};\n                var domEl = jsPlumb.getElement(elId),\n                    id = _currentInstance.getId(domEl),\n                    children = _delements[id],\n                    parentOffset;\n                if (children) {\n                    for (var i in children) {\n                        if (children.hasOwnProperty(i)) {\n                            var cel = jsPlumb.getElement(i),\n                                cOff = childOffsetOverrides[i] || _currentInstance.getOffset(cel);\n                            // do not update if we have a value already and we'd just be writing 0,0\n                            if (cel.offsetParent == null && _delements[id][i] != null) {\n                                continue;\n                            }\n                            if (!parentOffset) {\n                                parentOffset = _currentInstance.getOffset(domEl);\n                            }\n                            _delements[id][i] = {\n                                id: i,\n                                offset: {\n                                    left: cOff.left - parentOffset.left,\n                                    top: cOff.top - parentOffset.top\n                                }\n                            };\n                            _draggablesForElements[i] = id;\n                        }\n                    }\n                }\n            }\n        };\n        /**\n         notification that an endpoint was added to the given el.  we go up from that el's parent\n         node, looking for a parent that has been registered as a draggable. if we find one, we add this\n         el to that parent's list of elements to update on drag (if it is not there already)\n         */\n        this.endpointAdded = function (el, id) {\n            id = id || _currentInstance.getId(el);\n            var b = document.body,\n                p = el.parentNode;\n            _elementsWithEndpoints[id] = _elementsWithEndpoints[id] ? _elementsWithEndpoints[id] + 1 : 1;\n            while (p != null && p !== b) {\n                var pid = _currentInstance.getId(p, null, true);\n                if (pid && _draggables[pid]) {\n                    var pLoc = _currentInstance.getOffset(p);\n                    if (_delements[pid][id] == null) {\n                        var cLoc = _currentInstance.getOffset(el);\n                        _delements[pid][id] = {\n                            id: id,\n                            offset: {\n                                left: cLoc.left - pLoc.left,\n                                top: cLoc.top - pLoc.top\n                            }\n                        };\n                        _draggablesForElements[id] = pid;\n                    }\n                    break;\n                }\n                p = p.parentNode;\n            }\n        };\n        this.endpointDeleted = function (endpoint) {\n            if (_elementsWithEndpoints[endpoint.elementId]) {\n                _elementsWithEndpoints[endpoint.elementId]--;\n                if (_elementsWithEndpoints[endpoint.elementId] <= 0) {\n                    for (var i in _delements) {\n                        if (_delements.hasOwnProperty(i) && _delements[i]) {\n                            delete _delements[i][endpoint.elementId];\n                            delete _draggablesForElements[endpoint.elementId];\n                        }\n                    }\n                }\n            }\n        };\n        this.changeId = function (oldId, newId) {\n            _delements[newId] = _delements[oldId];\n            _delements[oldId] = {};\n            _draggablesForElements[newId] = _draggablesForElements[oldId];\n            _draggablesForElements[oldId] = null;\n        };\n        this.getElementsForDraggable = function (id) {\n            return _delements[id];\n        };\n        this.elementRemoved = function (elementId) {\n            var elId = _draggablesForElements[elementId];\n            if (elId) {\n                _delements[elId] && delete _delements[elId][elementId];\n                delete _draggablesForElements[elementId];\n            }\n        };\n        this.reset = function () {\n            _draggables = {};\n            _dlist = [];\n            _delements = {};\n            _elementsWithEndpoints = {};\n        };\n        //\n        // notification drag ended. We check automatically if need to update some\n        // ancestor's offsets.\n        //\n        this.dragEnded = function (el) {\n            if (el.offsetParent != null) {\n                var id = _currentInstance.getId(el),\n                    ancestor = _draggablesForElements[id];\n                if (ancestor) {\n                    this.updateOffsets(ancestor);\n                }\n            }\n        };\n        this.setParent = function (el, elId, p, pId, currentChildLocation) {\n            var current = _draggablesForElements[elId];\n            if (!_delements[pId]) {\n                _delements[pId] = {};\n            }\n            var pLoc = _currentInstance.getOffset(p),\n                cLoc = currentChildLocation || _currentInstance.getOffset(el);\n            if (current && _delements[current]) {\n                delete _delements[current][elId];\n            }\n            _delements[pId][elId] = {\n                id:elId,\n                offset : {\n                    left: cLoc.left - pLoc.left,\n                    top: cLoc.top - pLoc.top\n                }\n            };\n            _draggablesForElements[elId] = pId;\n        };\n        this.clearParent = function(el, elId) {\n            var current = _draggablesForElements[elId];\n            if (current) {\n                delete _delements[current][elId];\n                delete _draggablesForElements[elId];\n            }\n        };\n        this.revalidateParent = function(el, elId, childOffset) {\n            var current = _draggablesForElements[elId];\n            if (current) {\n                var co = {};\n                co[elId] = childOffset;\n                this.updateOffsets(current, co);\n                _currentInstance.revalidate(current);\n            }\n        };\n        this.getDragAncestor = function (el) {\n            var de = jsPlumb.getElement(el),\n                id = _currentInstance.getId(de),\n                aid = _draggablesForElements[id];\n            if (aid) {\n                return jsPlumb.getElement(aid);\n            }\n            else {\n                return null;\n            }\n        };\n    };\n    var _setClassName = function (el, cn, classList) {\n            cn = _ju.fastTrim(cn);\n            if (typeof el.className.baseVal !== \"undefined\") {\n                el.className.baseVal = cn;\n            }\n            else {\n                el.className = cn;\n            }\n            // recent (i currently have  61.0.3163.100) version of chrome do not update classList when you set the base val\n            // of an svg element's className. in the long run we'd like to move to just using classList anyway\n            try {\n                var cl = el.classList;\n                if (cl != null) {\n                    while (cl.length > 0) {\n                        cl.remove(cl.item(0));\n                    }\n                    for (var i = 0; i < classList.length; i++) {\n                        if (classList[i]) {\n                            cl.add(classList[i]);\n                        }\n                    }\n                }\n            }\n            catch(e) {\n                // not fatal\n                _ju.log(\"JSPLUMB: cannot set class list\", e);\n            }\n        },\n        _getClassName = function (el) {\n            return (typeof el.className.baseVal === \"undefined\") ? el.className : el.className.baseVal;\n        },\n        _classManip = function (el, classesToAdd, classesToRemove) {\n            classesToAdd = classesToAdd == null ? [] : _ju.isArray(classesToAdd) ? classesToAdd : classesToAdd.split(/\\s+/);\n            classesToRemove = classesToRemove == null ? [] : _ju.isArray(classesToRemove) ? classesToRemove : classesToRemove.split(/\\s+/);\n            var className = _getClassName(el),\n                curClasses = className.split(/\\s+/);\n            var _oneSet = function (add, classes) {\n                for (var i = 0; i < classes.length; i++) {\n                    if (add) {\n                        if (curClasses.indexOf(classes[i]) === -1) {\n                            curClasses.push(classes[i]);\n                        }\n                    }\n                    else {\n                        var idx = curClasses.indexOf(classes[i]);\n                        if (idx !== -1) {\n                            curClasses.splice(idx, 1);\n                        }\n                    }\n                }\n            };\n            _oneSet(true, classesToAdd);\n            _oneSet(false, classesToRemove);\n            _setClassName(el, curClasses.join(\" \"), curClasses);\n        };\n    root.jsPlumb.extend(root.jsPlumbInstance.prototype, {\n        headless: false,\n        pageLocation: _pageLocation,\n        screenLocation: _screenLocation,\n        clientLocation: _clientLocation,\n        getDragManager:function() {\n            if (this.dragManager == null) {\n                this.dragManager = new DragManager(this);\n            }\n            return this.dragManager;\n        },\n        recalculateOffsets:function(elId) {\n            this.getDragManager().updateOffsets(elId);\n        },\n        createElement:function(tag, style, clazz, atts) {\n            return this.createElementNS(null, tag, style, clazz, atts);\n        },\n        createElementNS:function(ns, tag, style, clazz, atts) {\n            var e = ns == null ? document.createElement(tag) : document.createElementNS(ns, tag);\n            var i;\n            style = style || {};\n            for (i in style) {\n                e.style[i] = style[i];\n            }\n            if (clazz) {\n                e.className = clazz;\n            }\n            atts = atts || {};\n            for (i in atts) {\n                e.setAttribute(i, \"\" + atts[i]);\n            }\n            return e;\n        },\n        getAttribute: function (el, attName) {\n            return el.getAttribute != null ? el.getAttribute(attName) : null;\n        },\n        setAttribute: function (el, a, v) {\n            if (el.setAttribute != null) {\n                el.setAttribute(a, v);\n            }\n        },\n        setAttributes: function (el, atts) {\n            for (var i in atts) {\n                if (atts.hasOwnProperty(i)) {\n                    el.setAttribute(i, atts[i]);\n                }\n            }\n        },\n        appendToRoot: function (node) {\n            document.body.appendChild(node);\n        },\n        getRenderModes: function () {\n            return [ \"svg\"  ];\n        },\n        getClass:_getClassName,\n        addClass: function (el, clazz) {\n            jsPlumb.each(el, function (e) {\n                _classManip(e, clazz);\n            });\n        },\n        hasClass: function (el, clazz) {\n            el = jsPlumb.getElement(el);\n            if (el.classList) {\n                return el.classList.contains(clazz);\n            }\n            else {\n                return _getClassName(el).indexOf(clazz) !== -1;\n            }\n        },\n        removeClass: function (el, clazz) {\n            jsPlumb.each(el, function (e) {\n                _classManip(e, null, clazz);\n            });\n        },\n        toggleClass:function(el, clazz) {\n            if (jsPlumb.hasClass(el, clazz)) {\n                jsPlumb.removeClass(el, clazz);\n            } else {\n                jsPlumb.addClass(el, clazz);\n            }\n        },\n        updateClasses: function (el, toAdd, toRemove) {\n            jsPlumb.each(el, function (e) {\n                _classManip(e, toAdd, toRemove);\n            });\n        },\n        setClass: function (el, clazz) {\n            if (clazz != null) {\n                jsPlumb.each(el, function (e) {\n                    _setClassName(e, clazz, clazz.split(/\\s+/));\n                });\n            }\n        },\n        setPosition: function (el, p) {\n            el.style.left = p.left + \"px\";\n            el.style.top = p.top + \"px\";\n        },\n        getPosition: function (el) {\n            var _one = function (prop) {\n                var v = el.style[prop];\n                return v ? v.substring(0, v.length - 2) : 0;\n            };\n            return {\n                left: _one(\"left\"),\n                top: _one(\"top\")\n            };\n        },\n        getStyle:function(el, prop) {\n            if (typeof window.getComputedStyle !== 'undefined') {\n                return getComputedStyle(el, null).getPropertyValue(prop);\n            } else {\n                return el.currentStyle[prop];\n            }\n        },\n        getSelector: function (ctx, spec) {\n            var sel = null;\n            if (arguments.length === 1) {\n                sel = ctx.nodeType != null ? ctx : document.querySelectorAll(ctx);\n            }\n            else {\n                sel = ctx.querySelectorAll(spec);\n            }\n            return sel;\n        },\n        getOffset:function(el, relativeToRoot, container) {\n            el = jsPlumb.getElement(el);\n            container = container || this.getContainer();\n            var out = {\n                    left: el.offsetLeft,\n                    top: el.offsetTop\n                },\n                op = (relativeToRoot  || (container != null && (el !== container && el.offsetParent !== container))) ?  el.offsetParent : null,\n                _maybeAdjustScroll = function(offsetParent) {\n                    if (offsetParent != null && offsetParent !== document.body && (offsetParent.scrollTop > 0 || offsetParent.scrollLeft > 0)) {\n                        out.left -= offsetParent.scrollLeft;\n                        out.top -= offsetParent.scrollTop;\n                    }\n                }.bind(this);\n            while (op != null) {\n                out.left += op.offsetLeft;\n                out.top += op.offsetTop;\n                _maybeAdjustScroll(op);\n                op = relativeToRoot ? op.offsetParent :\n                    op.offsetParent === container ? null : op.offsetParent;\n            }\n            // if container is scrolled and the element (or its offset parent) is not absolute or fixed, adjust accordingly.\n            if (container != null && !relativeToRoot && (container.scrollTop > 0 || container.scrollLeft > 0)) {\n                var pp = el.offsetParent != null ? this.getStyle(el.offsetParent, \"position\") : \"static\",\n                    p = this.getStyle(el, \"position\");\n                if (p !== \"absolute\" && p !== \"fixed\" && pp !== \"absolute\" && pp !== \"fixed\") {\n                    out.left -= container.scrollLeft;\n                    out.top -= container.scrollTop;\n                }\n            }\n            return out;\n        },\n        //\n        // return x+y proportion of the given element's size corresponding to the location of the given event.\n        //\n        getPositionOnElement: function (evt, el, zoom) {\n            var box = typeof el.getBoundingClientRect !== \"undefined\" ? el.getBoundingClientRect() : { left: 0, top: 0, width: 0, height: 0 },\n                body = document.body,\n                docElem = document.documentElement,\n                scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop,\n                scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft,\n                clientTop = docElem.clientTop || body.clientTop || 0,\n                clientLeft = docElem.clientLeft || body.clientLeft || 0,\n                pst = 0,\n                psl = 0,\n                top = box.top + scrollTop - clientTop + (pst * zoom),\n                left = box.left + scrollLeft - clientLeft + (psl * zoom),\n                cl = jsPlumb.pageLocation(evt),\n                w = box.width || (el.offsetWidth * zoom),\n                h = box.height || (el.offsetHeight * zoom),\n                x = (cl[0] - left) / w,\n                y = (cl[1] - top) / h;\n            return [ x, y ];\n        },\n        /**\n         * Gets the absolute position of some element as read from the left/top properties in its style.\n         * @method getAbsolutePosition\n         * @param {Element} el The element to retrieve the absolute coordinates from. **Note** this is a DOM element, not a selector from the underlying library.\n         * @return {Number[]} [left, top] pixel values.\n         */\n        getAbsolutePosition: function (el) {\n            var _one = function (s) {\n                var ss = el.style[s];\n                if (ss) {\n                    return parseFloat(ss.substring(0, ss.length - 2));\n                }\n            };\n            return [ _one(\"left\"), _one(\"top\") ];\n        },\n        /**\n         * Sets the absolute position of some element by setting the left/top properties in its style.\n         * @method setAbsolutePosition\n         * @param {Element} el The element to set the absolute coordinates on. **Note** this is a DOM element, not a selector from the underlying library.\n         * @param {Number[]} xy x and y coordinates\n         * @param {Number[]} [animateFrom] Optional previous xy to animate from.\n         * @param {Object} [animateOptions] Options for the animation.\n         */\n        setAbsolutePosition: function (el, xy, animateFrom, animateOptions) {\n            if (animateFrom) {\n                this.animate(el, {\n                    left: \"+=\" + (xy[0] - animateFrom[0]),\n                    top: \"+=\" + (xy[1] - animateFrom[1])\n                }, animateOptions);\n            }\n            else {\n                el.style.left = xy[0] + \"px\";\n                el.style.top = xy[1] + \"px\";\n            }\n        },\n        /**\n         * gets the size for the element, in an array : [ width, height ].\n         */\n        getSize: function (el) {\n            return [ el.offsetWidth, el.offsetHeight ];\n        },\n        getWidth: function (el) {\n            return el.offsetWidth;\n        },\n        getHeight: function (el) {\n            return el.offsetHeight;\n        },\n        getRenderMode : function() { return \"svg\"; },\n        draggable : function (el, options) {\n            var info;\n            el = _ju.isArray(el) || (el.length != null && !_ju.isString(el)) ? el: [ el ];\n            Array.prototype.slice.call(el).forEach(function(_el) {\n                info = this.info(_el);\n                if (info.el) {\n                    this._initDraggableIfNecessary(info.el, true, options, info.id, true);\n                }\n            }.bind(this));\n            return this;\n        },\n        snapToGrid : function(el, x, y) {\n            var out = [];\n            var _oneEl = function(_el) {\n                var info = this.info(_el);\n                if (info.el != null && info.el._katavorioDrag) {\n                    var snapped = info.el._katavorioDrag.snap(x, y);\n                    this.revalidate(info.el);\n                    out.push([info.el, snapped]);\n                }\n            }.bind(this);\n            // if you call this method with 0 arguments or 2 arguments it is assumed you want to snap all managed elements to\n            // a grid. if you supply one argument or 3, then you are assumed to be specifying one element.\n            if(arguments.length === 1 || arguments.length === 3) {\n                _oneEl(el, x, y);\n            } else {\n                var _me = this.getManagedElements();\n                for (var mel in _me) {\n                    _oneEl(mel, arguments[0], arguments[1]);\n                }\n            }\n            return out;\n        },\n        initDraggable: function (el, options, category) {\n            _getDragManager(this, category).draggable(el, options);\n            el._jsPlumbDragOptions = options;\n        },\n        destroyDraggable: function (el, category) {\n            _getDragManager(this, category).destroyDraggable(el);\n            el._jsPlumbDragOptions = null;\n            el._jsPlumbRelatedElement = null;\n        },\n        unbindDraggable: function (el, evt, fn, category) {\n            _getDragManager(this, category).destroyDraggable(el, evt, fn);\n        },\n        setDraggable : function (element, draggable) {\n            return jsPlumb.each(element, function (el) {\n                if (this.isDragSupported(el)) {\n                    this._draggableStates[this.getAttribute(el, \"id\")] = draggable;\n                    this.setElementDraggable(el, draggable);\n                }\n            }.bind(this));\n        },\n        _draggableStates : {},\n        /*\n         * toggles the draggable state of the given element(s).\n         * el is either an id, or an element object, or a list of ids/element objects.\n         */\n        toggleDraggable : function (el) {\n            var state;\n            jsPlumb.each(el, function (el) {\n                var elId = this.getAttribute(el, \"id\");\n                state = this._draggableStates[elId] == null ? false : this._draggableStates[elId];\n                state = !state;\n                this._draggableStates[elId] = state;\n                this.setDraggable(el, state);\n                return state;\n            }.bind(this));\n            return state;\n        },\n        _initDraggableIfNecessary : function (element, isDraggable, dragOptions, id, fireEvent) {\n            // TODO FIRST: move to DragManager. including as much of the decision to init dragging as possible.\n            if (!jsPlumb.headless) {\n                var _draggable = isDraggable == null ? false : isDraggable;\n                if (_draggable) {\n                    if (jsPlumb.isDragSupported(element, this)) {\n                        var options = dragOptions || this.Defaults.DragOptions;\n                        options = jsPlumb.extend({}, options); // make a copy.\n                        if (!jsPlumb.isAlreadyDraggable(element, this)) {\n                            var dragEvent = jsPlumb.dragEvents.drag,\n                                stopEvent = jsPlumb.dragEvents.stop,\n                                startEvent = jsPlumb.dragEvents.start;\n                            this.manage(id, element);\n                            options[startEvent] = _ju.wrap(options[startEvent], _dragStart.bind(this));\n                            options[dragEvent] = _ju.wrap(options[dragEvent], _dragMove.bind(this));\n                            options[stopEvent] = _ju.wrap(options[stopEvent], _dragStop.bind(this));\n                            var elId = this.getId(element); // need ID\n                            this._draggableStates[elId] = true;\n                            var draggable = this._draggableStates[elId];\n                            options.disabled = draggable == null ? false : !draggable;\n                            this.initDraggable(element, options);\n                            this.getDragManager().register(element);\n                            if (fireEvent) {\n                                this.fire(\"elementDraggable\", {el:element, options:options});\n                            }\n                        }\n                        else {\n                            // already draggable. attach any start, drag or stop listeners to the current Drag.\n                            if (dragOptions.force) {\n                                this.initDraggable(element, options);\n                            }\n                        }\n                    }\n                }\n            }\n        },\n        animationSupported:true,\n        getElement: function (el) {\n            if (el == null) {\n                return null;\n            }\n            // here we pluck the first entry if el was a list of entries.\n            // this is not my favourite thing to do, but previous versions of\n            // jsplumb supported jquery selectors, and it is possible a selector\n            // will be passed in here.\n            el = typeof el === \"string\" ? el : (el.tagName == null && el.length != null && el.enctype == null) ? el[0] : el;\n            return typeof el === \"string\" ? document.getElementById(el) : el;\n        },\n        removeElement: function (element) {\n            _getDragManager(this).elementRemoved(element);\n            this.getEventManager().remove(element);\n        },\n        //\n        // this adapter supports a rudimentary animation function. no easing is supported.  only\n        // left/top properties are supported. property delta args are expected to be in the form\n        //\n        // +=x.xxxx\n        //\n        // or\n        //\n        // -=x.xxxx\n        //\n        doAnimate: function (el, properties, options) {\n            options = options || {};\n            var o = this.getOffset(el),\n                ap = _animProps(o, properties),\n                ldist = ap[0] - o.left,\n                tdist = ap[1] - o.top,\n                d = options.duration || 250,\n                step = 15, steps = d / step,\n                linc = (step / d) * ldist,\n                tinc = (step / d) * tdist,\n                idx = 0,\n                _int = setInterval(function () {\n                    _jp.setPosition(el, {\n                        left: o.left + (linc * (idx + 1)),\n                        top: o.top + (tinc * (idx + 1))\n                    });\n                    if (options.step != null) {\n                        options.step(idx, Math.ceil(steps));\n                    }\n                    idx++;\n                    if (idx >= steps) {\n                        window.clearInterval(_int);\n                        if (options.complete != null) {\n                            options.complete();\n                        }\n                    }\n                }, step);\n        },\n        // DRAG/DROP\n        destroyDroppable: function (el, category) {\n            _getDragManager(this, category).destroyDroppable(el);\n        },\n        unbindDroppable: function (el, evt, fn, category) {\n            _getDragManager(this, category).destroyDroppable(el, evt, fn);\n        },\n        droppable :function(el, options) {\n            el = _ju.isArray(el) || (el.length != null && !_ju.isString(el)) ? el: [ el ];\n            var info;\n            options = options || {};\n            options.allowLoopback = false;\n            Array.prototype.slice.call(el).forEach(function(_el) {\n                info = this.info(_el);\n                if (info.el) {\n                    this.initDroppable(info.el, options);\n                }\n            }.bind(this));\n            return this;\n        },\n        initDroppable: function (el, options, category) {\n            _getDragManager(this, category).droppable(el, options);\n        },\n        isAlreadyDraggable: function (el) {\n            return el._katavorioDrag != null;\n        },\n        isDragSupported: function (el, options) {\n            return true;\n        },\n        isDropSupported: function (el, options) {\n            return true;\n        },\n        isElementDraggable: function (el) {\n            el = _jp.getElement(el);\n            return el._katavorioDrag && el._katavorioDrag.isEnabled();\n        },\n        getDragObject: function (eventArgs) {\n            return eventArgs[0].drag.getDragElement();\n        },\n        getDragScope: function (el) {\n            return el._katavorioDrag && el._katavorioDrag.scopes.join(\" \") || \"\";\n        },\n        getDropEvent: function (args) {\n            return args[0].e;\n        },\n        getUIPosition: function (eventArgs, zoom) {\n            // here the position reported to us by Katavorio is relative to the element's offsetParent. For top\n            // level nodes that is fine, but if we have a nested draggable then its offsetParent is actually\n            // not going to be the jsplumb container; it's going to be some child of that element. In that case\n            // we want to adjust the UI position to account for the offsetParent's position relative to the Container\n            // origin.\n            var el = eventArgs[0].el;\n            if (el.offsetParent == null) {\n                return null;\n            }\n            var finalPos = eventArgs[0].finalPos || eventArgs[0].pos;\n            var p = { left:finalPos[0], top:finalPos[1] };\n            if (el._katavorioDrag && el.offsetParent !== this.getContainer()) {\n                var oc = this.getOffset(el.offsetParent);\n                p.left += oc.left;\n                p.top += oc.top;\n            }\n            return p;\n        },\n        setDragFilter: function (el, filter, _exclude) {\n            if (el._katavorioDrag) {\n                el._katavorioDrag.setFilter(filter, _exclude);\n            }\n        },\n        setElementDraggable: function (el, draggable) {\n            el = _jp.getElement(el);\n            if (el._katavorioDrag) {\n                el._katavorioDrag.setEnabled(draggable);\n            }\n        },\n        setDragScope: function (el, scope) {\n            if (el._katavorioDrag) {\n                el._katavorioDrag.k.setDragScope(el, scope);\n            }\n        },\n        setDropScope:function(el, scope) {\n            if (el._katavorioDrop && el._katavorioDrop.length > 0) {\n                el._katavorioDrop[0].k.setDropScope(el, scope);\n            }\n        },\n        addToPosse:function(el, spec) {\n            var specs = Array.prototype.slice.call(arguments, 1);\n            var dm = _getDragManager(this);\n            _jp.each(el, function(_el) {\n                _el = [ _jp.getElement(_el) ];\n                _el.push.apply(_el, specs );\n                dm.addToPosse.apply(dm, _el);\n            });\n        },\n        setPosse:function(el, spec) {\n            var specs = Array.prototype.slice.call(arguments, 1);\n            var dm = _getDragManager(this);\n            _jp.each(el, function(_el) {\n                _el = [ _jp.getElement(_el) ];\n                _el.push.apply(_el, specs );\n                dm.setPosse.apply(dm, _el);\n            });\n        },\n        removeFromPosse:function(el, posseId) {\n            var specs = Array.prototype.slice.call(arguments, 1);\n            var dm = _getDragManager(this);\n            _jp.each(el, function(_el) {\n                _el = [ _jp.getElement(_el) ];\n                _el.push.apply(_el, specs );\n                dm.removeFromPosse.apply(dm, _el);\n            });\n        },\n        removeFromAllPosses:function(el) {\n            var dm = _getDragManager(this);\n            _jp.each(el, function(_el) { dm.removeFromAllPosses(_jp.getElement(_el)); });\n        },\n        setPosseState:function(el, posseId, state) {\n            var dm = _getDragManager(this);\n            _jp.each(el, function(_el) { dm.setPosseState(_jp.getElement(_el), posseId, state); });\n        },\n        dragEvents: {\n            'start': 'start', 'stop': 'stop', 'drag': 'drag', 'step': 'step',\n            'over': 'over', 'out': 'out', 'drop': 'drop', 'complete': 'complete',\n            'beforeStart':'beforeStart'\n        },\n        animEvents: {\n            'step': \"step\", 'complete': 'complete'\n        },\n        stopDrag: function (el) {\n            if (el._katavorioDrag) {\n                el._katavorioDrag.abort();\n            }\n        },\n        addToDragSelection: function (spec) {\n            var el = this.getElement(spec);\n            if (el != null && (el._isJsPlumbGroup || el._jsPlumbGroup == null)) {\n                _getDragManager(this).select(spec);\n            }\n        },\n        removeFromDragSelection: function (spec) {\n            _getDragManager(this).deselect(spec);\n        },\n        getDragSelection:function() {\n            return _getDragManager(this).getSelection();\n        },\n        clearDragSelection: function () {\n            _getDragManager(this).deselectAll();\n        },\n        trigger: function (el, event, originalEvent, payload) {\n            this.getEventManager().trigger(el, event, originalEvent, payload);\n        },\n        doReset:function() {\n            // look for katavorio instances and reset each one if found.\n            for (var key in this) {\n                if (key.indexOf(\"_katavorio_\") === 0) {\n                    this[key].reset();\n                }\n            }\n        },\n        getEventManager:function() {\n            return _getEventManager(this);\n        },\n        on : function(el, event, callback) {\n            // TODO: here we would like to map the tap event if we know its\n            // an internal bind to a click. we have to know its internal because only\n            // then can we be sure that the UP event wont be consumed (tap is a synthesized\n            // event from a mousedown followed by a mouseup).\n            //event = { \"click\":\"tap\", \"dblclick\":\"dbltap\"}[event] || event;\n            this.getEventManager().on.apply(this, arguments);\n            return this;\n        },\n        off : function(el, event, callback) {\n            this.getEventManager().off.apply(this, arguments);\n            return this;\n        }\n    });\n    var ready = function (f) {\n        var _do = function () {\n            if (/complete|loaded|interactive/.test(document.readyState) && typeof(document.body) !== \"undefined\" && document.body != null) {\n                f();\n            }\n            else {\n                setTimeout(_do, 9);\n            }\n        };\n        _do();\n    };\n    ready(_jp.init);\n}).call(typeof window !== 'undefined' ? window : this);\n"],"names":["Math","sgn","x","Vectors","subtract","v1","v2","y","dotProduct","square","v","sqrt","scale","s","_distanceFromCurve","point","curve","candidates","w","_convertToBezier","degree","length","numSolutions","_findRoots","dist","t","i","_bezier","newDist","location","distance","higherDegree","c","d","cdTable","z","row","column","parseFloat","m","k","n","lb","max","ub","min","j","depth","left_count","right_count","left","right","left_t","right_t","_getCrossingCount","_isFlatEnough","_computeXIntercept","sign","old_sign","n_crossings","a","b","max_distance_above","max_distance_below","intercept_1","intercept_2","left_intercept","dInv","a2","b2","c2","value","a1","b1","error","XNM","YNM","XMK","XLK","temp","_curveFunctionCache","_getCurveFunctions","order","fns","c_term","t_term","one_minus_t_term","_termFunc","terms","p","push","pow","_pointOnPath","cc","_x","_y","_dist","p1","p2","_isPoint","_pointAlongPath","prev","tally","curLoc","direction","cur","abs","_gradientAtPoint","slice","dy","dx","Infinity","atan","_lineIntersection","x1","y1","x2","y2","coeffs","_computeCoefficientsForAxis","r","_cubicRoots","apply","intersections","t2","t3","axis","S","T","A","B","Q","R","D","th","acos","cos","PI","jsBezier","distanceFromCurve","gradientAtPoint","gradientAtPointAlongCurveFrom","nearestPointOnCurve","td","pointOnCurve","pointAlongCurveFrom","perpendicularToCurveAt","_theta2","sin","locationAlongCurveFrom","getLength","Date","getTime","console","log","lineIntersection","boxIntersection","h","boundingBoxIntersection","boundingBox","version","exports","call","window","Biltong","root","_isa","Object","prototype","toString","_pointHelper","fn","_gradient","gradient","_p1","_p2","_quadrant","normal","lineLength","quadrant","_segmentMultipliers","theta","intersects","r1","r2","encloses","allowSharedEdges","v3","v4","_inverseSegmentMultipliers","pointOnLine","fromPoint","toPoint","segmentMultiplier","perpendicularLineTo","theta2","_touch","view","target","pageX","pageY","screenX","screenY","clientX","clientY","Touch","identifier","_uuid","matchesSelector","el","selector","ctx","possibles","parentNode","querySelectorAll","_gel","constructor","String","document","getElementById","_t","e","srcElement","_pi","obj","doCompute","path","end","indexOf","out","_one","_d","l","splice","guid","_store","event","g","__ta","__tauid","_unstore","__taExtra","_unbind","__taUnstore","_curryChildFilter","children","evt","split","_fn","pathInfo","arguments","registerExtraFunction","newFn","DefaultHandler","isTouchDevice","touchMap","tfn","_bind","getAttribute","setAttribute","SmartClickHandler","__taSmartClicks","__tad","_pageLocation","__tau","_tapProfiles","touches","taps","TapHandler","clickThreshold","dblClickThreshold","isMouseDevice","__taTapHandler","tt","tap","dbltap","contextmenu","down","downSelectors","clearSingle","clearDouble","finished","setTimeout","currentTarget","tc","_touchCount","eventId","hasOwnProperty","pLoop","meeHelper","type","__tamee","MouseEnterExitHandler","activeElements","over","mouseenter","mouseexit","relatedTarget","toElement","documentElement","navigator","maxTouchPoints","iev","rv","appName","ua","userAgent","re","RegExp","exec","$1","isIELT9","_genLoc","prefix","_getTouch","_touches","scrollLeft","scrollTop","idx","item","changedTouches","targetTouches","originalFn","addEventListener","attachEvent","key","_each","_el","removeEventListener","detachEvent","__taTouchProxy","Window","top","tagName","replace","random","Mottle","params","mouseEnterExitHandler","tapHandler","_smartClicks","smartClicks","_doBind","remove","removeChild","on","_c","_e","_f","off","trigger","originalEvent","payload","originalIsMouse","MouseEvent","eventToBind","bindingAMouseEvent","pl","sl","cl","_decorate","_evt","createEvent","evtName","ite","eventGenerators","touchList","_touchAndList","_touchList","list","Array","index","init","initTouchEvent","initEvent","initMouseEvent","dispatchEvent","createEventObject","eventType","eventName","fireEvent","consume","doNotPreventDefault","stopPropagation","returnValue","preventDefault","pageLocation","setForceTouchEvents","setForceMouseEvents","_suggest","head","unshift","_vanquish","_difference","l1","l2","_isString","f","getOffsetRect","elem","box","getBoundingClientRect","body","docElem","pageYOffset","pageXOffset","clientTop","clientLeft","round","findDelegateElement","parentElement","childElement","currentParent","findMatchingSelector","availableSelectors","draggableId","filter","matches","filterExclude","isIE9","_pl","_classes","delegatedDraggable","draggable","droppable","drag","selected","active","hover","noSelect","ghostProxy","clonedDrag","_events","_devNull","_true","_foreach","from","_setDroppablesActive","dd","val","andHover","setActive","updatePosition","setHover","_consume","Super","css","scope","addClass","_class","uuid","enabled","setEnabled","isEnabled","toggleEnabled","setScope","scopes","addScope","removeScope","toggleScope","katavorio","TRUE","FALSE","Drag","ghostProxyOffsets","rightButtonCanDrag","useGhostProxy","currentParentPosition","ghostParentPosition","ghostDx","ghostDy","downAt","posAtDown","pagePosAtDown","pageDelta","moving","initialScroll","consumeStartEvent","dragEl","clone","_multipleDrop","scroll","multipleDrop","isConstrained","elementToDrag","activeSelectorParams","ghostProxyParent","container","makeGhostProxy","cloneNode","snapThreshold","_snap","pos","gridX","gridY","thresholdX","thresholdY","_dx","floor","_dxl","_dxt","_dy","_dyl","_dyt","posses","posseRoles","toGrid","grid","tx","DEFAULT_GRID_X","ty","DEFAULT_GRID_Y","snap","snapped","getPosition","setPosition","setUseGhostProxy","negativeFilter","allowNegative","_setConstrain","constrain","_constrainRect","_size","bind","containment","setConstrain","setRevert","revertFunction","revert","_filters","_testFilter","_setFilter","setFilter","_exclude","_katavorioId","addFilter","removeFilter","clearAllFilters","canDrag","constrainRect","matchingDroppables","intersectingDroppables","addSelector","downListener","defaultPrevented","isNotRightClick","which","button","_katavorio","getInputFilterSelector","match","style","position","parent","appendChild","moveListener","upListener","markSelection","markPosses","_dispatch","consumeFilteredEvents","_continue","mark","abort","ignoreZoom","getZoom","moveBy","updateSelection","updatePosses","unbind","removeClass","unmark","unmarkSelection","unmarkPosses","stop","notifyPosseDragStop","getFilters","getDragElement","retrieveOriginalElement","listeners","events","start","beforeStart","result","notifyStart","force","positions","sel","getSelection","dPos","finalPos","selection","andNotify","cs","size","getSize","getMatchingDroppables","dragClass","getConstrainingRectangle","notifySelectionDragStart","doNotCheckDroppables","offsetLeft","offsetTop","sort","_rankSort","retVal","drop","desiredLoc","cPos","gp","rect","pageRect","focusDropElement","pagePosition","canDrop","isHover","destroy","handle","Drop","rank","_activeClass","activeClass","_hoverClass","hoverClass","allowLoopback","_katavorioDragHover","Katavorio","katavorioParams","_selection","_selectionMap","_dragsByScope","_dropsByScope","_zoom","_reg","map","_obj","_unreg","_prepareParams","_m","_dd","_p","_mistletoe","existingDrag","_css","overrideCss","_scope","inputFilterSelector","setInputFilterSelector","o","_katavorioDrag","_katavorioDrop","select","deselect","_s","deselectAll","_posses","members","_posseAction","notifySelectionDragStop","setZoom","_scopeManip","kObj","_kObj","snapToGrid","getDragsForScope","getDropsForScope","_destroy","selIdx","_removeListener","elementRemoved","destroyDraggable","destroyDroppable","reset","_processOneSpec","_spec","dontAddExisting","posseId","id","posse","name","addToPosse","spec","setPosse","diff","removeFromPosse","TypeError","removeFromAllPosses","setPosseState","state","jsPlumbUtil","isArray","isString","isBoolean","isObject","isDate","isFunction","merge","collations","overwrites","ar","cMap","oMap","findWithFunction","addToList","insertAtStart","isNumber","isNull","isNamedFunction","isEmpty","inObj","term","lc","str","array","last","_getArray","a_1","functionChain","successValue","failValue","populate","model","values","functionPrefix","doNotExpandFunctions","getValue","fromString","substring","removeWithFunction","addWithFunction","hashFunction","suggest","insertAtHead","extend","child","_protoFn","_copyProtoChain","focus","proto","__proto__","_makeFn","protoFn","_oneSet","lut","d0","d1","d2","d3","args","_i","logEnabled","msg","rotatePoint","center","rotation","radial","cr","sr","fastTrim","ws","test","charAt","each","mergeWithParents","parentAttribute","_def","_parent","def","overrides","mergeStrategy","d_1","_getDef","done","wrap","wrappedFunction","newFunction","returnOnThisValue","EventGenerator","_this","_listeners","eventsSuspended","tick","eventsToDieOn","queue","listener","__jsPlumb","fire","_gone","ret","shouldFireEvent","_drain","pop","eventOrListener","getListener","forEvent","setSuspendEvents","isSuspendEvents","silently","cleanupListeners","rotateAnchorOrientation","orientation","sizeElement","height","width","DEFAULT_OPTIONS","deriveAnchor","edge","ep","conn","bottom","ListManager","jsPlumbInstance","count","instance","lists","options","addList","listManager","removeList","scrollableLists","getSelector","_maybeUpdateParentList","source","jsPlumbListManager","dp","getInstanceIndex","join","List","_jsPlumbList","getContainer","_jsPlumbScrollHandler","anchor","deriveEndpoint","endpoint","scrollHandler","elId","getId","_jsPlumbProxies","proxyConnection","endpoints","offsetHeight","unproxyConnection","revalidate","_maybeUpdateDraggable","hasClass","recalculateOffsets","_ju","_updateHoverStyle","component","_jsPlumb","paintStyle","hoverPaintStyle","mergedHoverStyle","jsPlumb","fill","_updateAttachedElements","timestamp","sourceElement","affectedElements","getAttachedElements","_splitType","_mapType","typeId","_applyTypes","doNotRepaint","getDefaultType","getTypeDescriptor","defType","types","tid","getType","applyType","repaint","jsPlumbUIComponent","idPrefix","self","parameters","paintStyleInUse","beforeDetach","beforeDrop","overlayPlacements","Defaults","HoverClass","typeCache","cacheTypeItem","getCachedTypeItem","overlays","oo","defaultOverlayKeys","fo","convertToFullOverlaySpec","_defaultType","getDefaultScope","appendToDefaultType","create","isDetachAllowed","connection","isDropAllowed","sourceId","targetId","dropEndpoint","checkCondition","domListeners","setListenerComponent","_removeTypeCssHelper","typeIndex","cssClass","canvas","getParameter","setParameter","getParameters","setParameters","getClass","clazz","updateClasses","classesToAdd","classesToRemove","setType","clearTypes","reapplyTypes","hasType","addType","_cont","removeType","toggleType","setPaintStyle","setHoverPaintStyle","getPaintStyle","getHoverPaintStyle","ignoreAttachedElements","currentlyDragging","isHoverSuspended","method","isSuspendDrawing","recalc","_jsPlumbInstanceIndex","_defaults","Anchor","Anchors","ConnectionsDetachable","ConnectionOverlays","Connector","Container","DoNotThrowErrors","DragOptions","DropOptions","Endpoint","EndpointOverlays","Endpoints","EndpointStyle","EndpointStyles","EndpointHoverStyle","EndpointHoverStyles","HoverPaintStyle","LabelStyle","color","ListStyle","LogEnabled","Overlays","MaxConnections","PaintStyle","stroke","ReattachConnections","RenderMode","Scope","_connectionTypes","_endpointTypes","_currentInstance","_instanceIndex","_bb","_initialDefaults","_info","nodeType","text","getElement","_getId","repaintEverything","_container","_containerDelegations","unbindContainer","setContainer","moveParent","selectEndpoints","previousContainer","eventAliases","_oneDelegateHandler","componentType","jp","alias","_addOneDelegate","_oneDelegate","managedElements","initialized","importDefaults","restoreDefaults","connections","endpointsByElement","endpointsByUUID","offsets","offsetTimestamps","connectionBeingDragged","sizes","_suspendDrawing","_suspendedAt","DEFAULT_SCOPE","_curIdStamp","_idstamp","_appendElement","appendToRoot","_draw","element","ui","clearEdits","drawResult","repaintEls","_updateOffset","offset","router","redraw","_getEndpoint","_scopeMatch","e1","e2","s1","s2","_mergeOverrides","_prepareConnectionParams","referenceParams","sourceEndpoint","targetEndpoint","uuids","isFull","connectionType","connectorOverlays","connectorPointerEvents","_addEndpoint","anchors","endpointStyles","endpointStyle","endpointHoverStyles","endpointHoverStyle","addEndpoint","_oneElementDef","defs","matchType","newConnection","tep","epDef","label","newEndpoint","uniqueEndpoint","finalEndpoint","setDeleteOnEmpty","sourceEndpointDefinitions","targetEndpointDefinitions","_newConnection","connectionFunc","ConnectionType","getDefaultConnectionType","_newEndpoint","finaliseConnection","_finaliseConnection","con","isDetachable","initDraggable","jpc","doInformAnchorManager","suspendedEndpoint","pending","isTemporarySource","doNotFireConnectionEvent","eventArgs","endpointFunc","EndpointType","fireDetachEvent","elementId","_manage","headless","getDragManager","endpointAdded","_operation","func","ii","jj","_setVisible","alsoChangeEndpoints","setVisible","info","oidx","isVisible","doNotCreateIfNotFound","undefined","setConnectionBeingDragged","isConnectionBeingDragged","getManagedElements","connectorClass","connectorOutlineClass","connectedClass","endpointClass","endpointConnectedClass","endpointFullClass","endpointDropAllowedClass","endpointDropForbiddenClass","overlayClass","draggingClass","elementDraggingClass","sourceElementDraggingClass","targetElementDraggingClass","endpointAnchorClassPrefix","hoverSourceClass","hoverTargetClass","dragSelectClass","Connectors","ConnectorRenderers","SVG","results","inputs","_ensureContainer","myOffset","paint","anchorLoc","compute","xy","wh","getRotation","addEndpoints","animate","properties","animationSupported","del","stepFunction","animEvents","step","completeFunction","complete","doAnimate","conditionName","connect","stTypes","epDefs","_set","sid","sep","_st","cId","oldEndpoint","evtParams","originalSourceId","newSourceId","originalTargetId","newTargetId","addConnection","makeEndpoint","detachFromConnection","fireMoveEvent","setSource","sourceOrTargetChanged","setTarget","deleteEndpoint","object","dontUpdateHover","deleteAttachedObjects","deleteObject","deleteEveryEndpoint","_is","setSuspendDrawing","dm","doFireEvent","connType","argIsConnection","connectionDetached","unregisterEndpoint","newEndpoints","IS_DETACH_ALLOWED","deleteConnection","cleanup","deleteEveryConnection","deletedCount","batch","deleteConnectionsForElement","endpointCount","connectionCount","unravelConnection","unravelEndpoint","doNotCleanup","_setOperation","_getOperation","setter","getter","prepareList","input","doNotGetIds","filterList","missingIsFalse","getConnections","flat","sources","targets","proxies","originalEp","_addOne","ss","_makeCommonSelectHandler","executor","get","setters","getters","_makeConnectionSelectHandler","common","setDetachable","setReattach","setConnector","delete","isReattach","_makeEndpointSelectHandler","setAnchor","noElementFilters","elements","either","sourceMatchExact","targetMatchExact","_ep","noMatchSource","isSource","noMatchTarget","isTarget","getAllConnections","getEndpoint","getEndpoints","getDefaultEndpointType","Connection","draw","appendElement","_hoverSuspended","setHoverSuspended","hide","changeEndpoints","idstamp","candidate","can","offsetParent","_getContainerFromDefaults","manage","_transient","_recalc","unmanage","rotate","amountInDegrees","doNotRedraw","transform","transformOrigin","getOffset","centerx","centery","updateOffset","DefaultRouter","anchorManager","makeAnchor","pp","_a","specimen","newAnchor","getOrientation","DynamicAnchor","anchorParams","makeAnchors","makeDynamicAnchor","anchorSelector","selectorFilter","_instance","negate","ok","_makeElementDropHandler","elInfo","dropOptions","proxyComponent","_drop","EndpointDropHandler","targetCount","maxConnections","onDrop","locked","isRedrop","suspendedElement","eps","deriveEndpointAndAnchorSpec","_mtNew","positionFinder","dropPosition","getUIPosition","elPosition","elSize","ap","constructorParams","maybeCleanup","dropEvent","dragEvents","_drag","de","_jsPlumbRelatedElement","initDroppable","makeTarget","_doOne","elid","_isJsPlumbGroup","createEndpoint","targetDef","unmakeTarget","doNotClearArrays","makeSource","aae","onMaxConnections","_del","stopEvent","dragEvent","dragOptions","existingStop","endpointAddedButNoDragYet","anchorDef","oldAnchor","oldConnection","mouseDownListener","sourceCount","elxy","getPositionOnElement","tempEndpointParams","_delTempEndpoint","extract","att","setDragFilter","unmakeSource","eldefs","unmakeEverySource","_getScope","_setScope","getScope","getSourceScope","getTargetScope","setSourceScope","setTargetScope","setDragScope","setDropScope","unmakeEveryTarget","_setEnabled","toggle","originalState","newState","_first","toggleSourceEnabled","isSourceEnabled","setSourceEnabled","toggleTargetEnabled","isTargetEnabled","setTargetEnabled","ready","_elEach","isIdAlready","updateOffsets","removeAllEndpoints","recurse","ebe","childNodes","_doRemove","floatingConnections","removeElement","ae","empty","dontRemoveFocus","doNotUnbindInstanceEventListeners","removeAllGroups","removeGroupManager","doReset","_clearObject","clear","setDefaultScope","dontPrependDefault","bits","as","setId","newId","doNotSetAttribute","sConns","tConns","setElementId","setReferenceElement","changeId","_conns","epIdx","setDebugLog","debugLog","repaintAfterwards","curVal","getSuspendedAt","doNotRepaintAfterwards","_wasSuspended","doWhileSuspended","getCachedData","show","toggleVisible","addListener","registerFloatingConnection","getFloatingConnectionFor","registerConnectionType","to","registerConnectionTypes","registerEndpointType","registerEndpointTypes","typeDescriptor","setIdChanged","oldId","setParent","newParent","_dom","_id","_pdom","_pid","o1","o2","names","getFloatingAnchorIndex","isFloating","proxyEl","proxyElId","endpointGenerator","anchorGenerator","proxyEp","originalElementId","originalEndpoint","isProxyEndpoint","originalElement","getInstance","overrideFns","ovf","_jp","_internalLabelOverlayId","_makeLabelOverlay","_params","labelStyle","mergedParams","getRenderMode","Label","_processOverlay","_newOverlay","OverlayCapableJsPlumbUIComponent","overlayPositions","labelLocation","defaultLabelLocation","keep","existing","updateFrom","reattach","addOverlay","removeOverlay","overlay","getData","locationAttribute","labelLocationAttribute","loc","getOverlay","getOverlays","hideOverlay","hideOverlays","showOverlay","showOverlays","removeAllOverlays","overlayId","dontCleanup","removeOverlays","bgCanvas","isAppendedAtTopLevel","getLabel","lo","getLabelOverlay","setLabel","Function","setLocation","setAbsoluteOverlayPosition","getAbsoluteOverlayPosition","_clazzManip","action","dontUpdateOverlays","_makeConnectionDragHandler","placeholder","stopped","_ui","anchorPoint","getCurrentLocation","stopDrag","_makeDraggablePlaceholder","ipco","ips","createElement","typeParameters","findConnectionToUseForDynamicAnchor","elementWithPrecedence","connectorStyle","connectorHoverStyle","connectorHoverClass","connector","connectorTooltip","visible","floatingEndpoint","dragProxy","connectionCost","connectionsDirected","currentAnchorClass","deleteOnEmpty","_updateAnchorClass","oldAnchorClass","getCssClass","anchorClass","prepareAnchor","currentAnchor","setPreparedAnchor","continuousAnchorFactory","internalHover","prepareEndpoint","rm","endpointArgs","tooltip","setEndpoint","setPreparedEndpoint","reattachConnections","connectionsDetachable","detachable","dragAllowedWhenFull","detachFrom","setElement","parentId","curId","rehomeEndpoint","dragManager","makeInPlaceCopy","acc","hideOnDrag","reference","connectorSelector","setStyle","connectorPaintStyle","dimensions","isDynamic","oIdx","oId","oInfo","oOffset","oWH","txy","twh","tElement","tRotation","draggingInitialised","isDragSupported","placeholderInfo","existingJpc","existingJpcParams","_dragHandler","startEvent","beforeStartEvent","startParams","referenceCanvas","beforeDrag","canvasElement","setAttributes","endpointToFloat","centerAnchor","FloatingAnchor","_savedAnchor","data","anchorIdx","dragScope","getDragScope","suspendedElementId","suspendedElementType","referenceEndpoint","getDropEvent","deleteConnectionNow","floatingElement","floatingId","floatingIndex","fe","_forceReattach","_forceDetach","deleteAfterDragStop","visibility","beforeStartParams","anchorParamsToUse","_initDropTarget","isTransient","isDropSupported","overEvent","outEvent","dhParams","getDragObject","_jpc","bb","doNotChangeConnections","doNotNotifyOtherEndpoint","display","isConnectedTo","found","getConnectionCost","setConnectionCost","areConnectionsDirected","setConnectionsDirected","_elId","setDragAllowedWhenFull","allowed","equals","getUuid","computeAnchor","existingConnection","_doContinue","continueFunction","optionalData","aParam","originalSourceEndpoint","newSourceEndpoint","originalTargetEndpoint","newTargetEndpoint","_toDelete","mergeData","makeConnector","renderMode","connectorName","connectorArgs","forComponent","_makeAnchor","_updateConnectedClass","_jsPlumbConnections","previousConnection","editorParams","lastPaintedAt","definition","eS","eT","deleteEndpointsOnEmpty","_detachable","_reattach","myInfo","myWH","otherInfo","otherOffset","otherWH","initialTimestamp","cost","directed","setData","_types","updateConnectedClass","typeMap","_connector","prepareConnector","setPreparedConnector","_anchors","informEndpoints","getUuids","getCost","setCost","isDirected","getConnector","connectorSpec","doNotChangeListenerComponent","previous","previousClasses","transfer","tId","swap","sId","sourceInfo","targetInfo","sE","tE","sAnchorP","tAnchorP","resetBounds","sourcePos","targetPos","sourceOrientation","targetOrientation","strokeWidth","overlayExtents","minX","minY","maxX","maxY","lineWidth","outlineWidth","extents","xmin","bounds","ymin","xmax","ymax","paintExtents","es","outlineStroke","ehs","drawEndpoints","replaceEndpoint","endpointDef","current","_idx","_new","AnchorManager","_amEndpoints","continuousAnchorLocations","continuousAnchorOrientations","connectionsByElementId","anchorLists","placeAnchorsOnLine","desc","elementDimensions","elementPosition","horizontal","otherMultiplier","reverse","other","xp","yp","rotated","rightAndBottomSort","leftAndTopSort","edgeSortFunctions","placeAnchors","_anchorLists","cd","sS","sO","placeSomeAnchors","unsortedConnections","isHorizontal","sc","_array","_setAnchorLocation","anchorPos","weAreSource","weAreTarget","addFloatingConnection","doRegisterTarget","registerConnection","otherIndex","otherEndpoint","otherAnchor","isContinuous","removeEndpointFromAnchorLists","eId","connInfo","removeConnection","getConnectionsFor","getEndpointsFor","_updateAnchorList","aBoolean","otherElId","edgeId","connsToPaint","endpointsToPaint","firstMatchingElIdx","endpointId","listToAddTo","listToRemoveFrom","_continuousAnchorEdge","rIdx","insertIdx","originalId","newElement","anchorIndex","tIdx","sourceElId","sIndex","tIndex","currentId","add","offsetToUI","doNotRecalcEndpoint","connectionsToPaint","anchorsToUpdate","endpointConnections","orientationCache","sourceContinuous","targetContinuous","oKey","targetRotation","sourceRotation","sd","calculateOrientation","getDefaultFace","fc","ContinuousAnchor","faces","clockwise","availableFaces","opposites","clockwiseOptions","antiClockwiseOptions","secondBest","lastChoice","_currentFace","_lockedFace","X_AXIS_FACES","Y_AXIS_FACES","_lockedAxis","isRelocatable","isSnapOnRelocate","verifyEdge","isEdgeSupported","setCurrentFace","face","overrideLock","getCurrentFace","getSupportedFaces","af","lock","unlock","isLocked","lockCurrentAxis","unlockCurrentAxis","sourceAnchor","targetAnchor","axes","atan2","midpoints","dim","sf","tf","sourceEdge","targetEdge","lastReturnValue","_unrotatedOrientation","relocatable","snapOnRelocate","ox","oy","ao","ref","refCanvas","_lastResult","_endpoint","getAnchors","_curAnchor","_lastAnchor","_distance","cx","cy","tr","ax","ay","acx","acy","_anchorSelector","minIdx","minDist","setAnchorCoordinates","coords","_curryAnchor","fnInit","DynamicAnchors","AutoDefault","_curryContinuousAnchor","Continuous","pf","AnchorPositionFinders","gx","gy","my","Perimeter","anchorCount","shape","Error","_circle","_path","segments","anchorsPerFace","_computeFace","fractionalLength","_shape","_rectangle","_shapes","points","tl","da","_rotate","_jg","Segments","AbstractSegment","findClosestPointOnPath","getBounds","Straight","m2","getGradient","getCoordinates","setCoordinates","pointOnPath","absolute","_","pointAlongPathFrom","farAwayPoint","within","closest","_x1","_y1","fractionInSegment","_plb","q","_x2","_y2","X","Y","m1","Arc","_calcAngle","_calcAngleForLocation","segment","anticlockwise","sa","startAngle","endAngle","TWO_PI","ea","radius","ac","sweep","circumference","gentleRound","ceil","angle","arcSpan","dir","Bezier","cp1x","cp1y","cp2x","cp2y","_compute","EMPTY_POINT","u","_getLUT","steps","_computeLength","_translateLocation","_curve","SegmentRenderer","getPath","isFirstSegment","laf","AbstractComponent","AbstractConnector","totalLength","segmentProportions","segmentProportionalLengths","stub","sourceStub","targetStub","gap","sourceGap","targetGap","userProvidedSegments","paintInfo","getPathData","findSegmentForPoint","connectorLocation","_updateSegmentProportions","_findSegmentForLocation","inSegmentProportion","proportion","_clearSegments","setSegments","_segs","_prepareCompute","swapX","swapY","lw","so","oIndex","sx","sy","oProduct","xSpan","ySpan","mx","startStubX","startStubY","endStubX","endStubY","isXGreaterThanStubTimes2","isYGreaterThanStubTimes2","opposite","perpendicular","orthogonal","sourceAxis","stubs","anchorOrientation","getSegments","updateBounds","segBounds","seg","addSegment","prepareCompute","maxStub","maxGap","AbstractEndpoint","Dot","defaultOffset","defaultInnerRadius","Rectangle","DOMElementEndpoint","displayElements","getDisplayElements","appendDisplayElement","Image","_onload","onload","src","url","img","deleted","widthToUse","heightToUse","setImage","_img","margin","padding","outline","actuallyPaint","Blank","background","Triangle","AbstractOverlay","endpointLoc","endpointLocation","incrementLocation","amount","getLocation","Arrow","foldback","computeMaxSize","elementCreated","currentConnectionPaintStyle","hxy","mid","tail","cxy","parseInt","fromLoc","__","PlainArrow","Diamond","_getDimensions","forceRefresh","cachedDimensions","getDimensions","AbstractDOMOverlay","detached","div","initialised","initiallyInvisible","ts","webkitTransform","mozTransform","msTransform","oTransform","absolutePosition","locToUse","minx","miny","clearCachedDimensions","containerExtents","Custom","GuideLines","tailLine","headLine","labelText","font","borderWidth","dStyle","borderStyle","border","update","lt","innerHTML","_jpi","GROUP_COLLAPSED_CLASS","GROUP_EXPANDED_CLASS","STOP","REVERT","GROUP_MANAGER","GROUP","GroupManager","_managedGroups","_connectionSourceMap","_connectionTargetMap","group","getEl","sourceGroup","getGroupFor","targetGroup","connMap","addGroup","manager","_updateConnectionsForGroup","addToGroup","doNotFireEvent","getGroup","groupEl","currentGroup","_jsPlumbGroup","removeFromDragSelection","elpos","cpos","collapsed","getDragArea","updateConnectionsForGroup","handleDroppedConnections","_expandConnection","_collapseConnection","newPosition","revalidateParent","removeFromGroup","_expandSet","conns","proxiedElement","isDescendant","parentEl","groupId","getGroups","removeGroup","deleteMembers","manipulateDOM","expandGroup","newPositions","_groups","otherEl","shouldProxy","groupElId","getAnchor","collapseGroup","_collapseSet","getMembers","childMembers","c1","processed","oneSet","gs","gt","repaintGroup","refreshAllGroups","Group","ghost","orphan","prune","dropOverride","proxied","internal","endpointIndex","opts","overrideDrop","getGroupManager","els","_isInsideParent","leftEdge","rightEdge","topEdge","bottomEdge","_orphan","_unbindDragHandlers","clearParent","_pruneOrOrphan","orphanedPosition","_revalidate","_bindDragHandlers","__el","dragArea","isAlreadyDraggable","doNotUpdateConnections","removeAll","orphanAll","orphanedPositions","dragParams","toggleGroup","mgr","STRAIGHT","Flowchart","_super","midpoint","isNaN","alwaysRespectStubs","lastx","lasty","cornerRadius","loopbackRadius","segmentDirections","lx","ly","segLength","_cloneArray","writeSegments","next","currentDirection","nextDirection","radiusToUse","minSegLength","sgnEqual","sgny","commonStubCalculator","stubCalculators","areInProximity","pi","oss","oes","midx","midy","orientations","lineCalculators","midLines","linesToEnd","startToEnd","startToMidToEnd","otherStubs","soIdx","toIdx","_so","_to","otherFlipped","stub1","stub2","segmentIndexes","sis","startStub","otherStartStub","endStub","otherEndStub","extent","otherAxis","comparator","toUpperCase","_val","AbstractBezierConnector","showLoopback","curviness","proximityLimit","sp","tp","_w","_h","loopback","_computeBezier","majorAnchor","getCurviness","_findControlPoint","sourceAnchorPosition","targetAnchorPosition","soo","too","_CP","_CP2","_sx","_sy","_tx","_ty","StateMachine","_controlPoint","_midx","_midy","svgAttributeMap","STROKE_DASHARRAY","DASHSTYLE","FILL","STROKE","NONE","_attr","node","attributes","_node","xmlns","createElementNS","_pos","_clearGradient","_updateGradient","uiComponent","JSPLUMB_GRADIENT","gradientUnits","stops","styleToUse","stopColor","applyGradientTo","_applyStyles","parts","forEach","_appendAtIndex","svg","insertBefore","attr","SvgComponent","pointerEventsSpec","renderer","originalArgs","useDivWrapper","className","outlineStyle","outlineStrokeWidth","bgPath","SvgEndpoint","makeNode","updateNode","AbstractSvgArrowOverlay","superclass","makePath","svgProtoFunctions","p1_1","p1_2","attachListeners","_do","_jk","_getEventManager","_mottle","_getDragManager","category","getEventManager","scrollWidth","scrollHeight","relativeToRoot","_dragStart","_jsPlumbDragOptions","cont","_dragMove","_dragging","_dragStop","uip","_drawResult","dragEnded","_animProps","pName","_screenLocation","_clientLocation","DragManager","_draggables","_dlist","_delements","_elementsWithEndpoints","_draggablesForElements","register","parentOffset","_oneLevel","cEl","cid","cOff","childOffsetOverrides","domEl","cel","pid","pLoc","cLoc","endpointDeleted","getElementsForDraggable","ancestor","pId","currentChildLocation","childOffset","co","getDragAncestor","aid","_setClassName","cn","classList","baseVal","_getClassName","_classManip","curClasses","classes","screenLocation","clientLocation","tag","atts","ns","attName","getRenderModes","contains","toggleClass","toAdd","toRemove","setClass","prop","getStyle","getComputedStyle","getPropertyValue","currentStyle","op","_maybeAdjustScroll","zoom","pst","psl","offsetWidth","getAbsolutePosition","setAbsolutePosition","animateFrom","animateOptions","getWidth","getHeight","_initDraggableIfNecessary","_oneEl","_me","mel","unbindDraggable","setDraggable","_draggableStates","setElementDraggable","toggleDraggable","isDraggable","disabled","enctype","ldist","tdist","duration","linc","tinc","_int","setInterval","clearInterval","unbindDroppable","isElementDraggable","oc","specs","addToDragSelection","getDragSelection","clearDragSelection","callback","readyState"],"mappings":"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"}
