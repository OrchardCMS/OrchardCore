!function(e,t,o,n){var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r="function"==typeof i[n]&&i[n],s=r.cache||{},a="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function l(t,o){if(!s[t]){if(!e[t]){var c="function"==typeof i[n]&&i[n];if(!o&&c)return c(t,!0);if(r)return r(t,!0);if(a&&"string"==typeof t)return a(t);var u=new Error("Cannot find module '"+t+"'");throw u.code="MODULE_NOT_FOUND",u}f.resolve=function(o){var n=e[t][1][o];return null!=n?n:o},f.cache={};var d=s[t]=new l.Module(t);e[t][0].call(d.exports,f,d,d.exports,i)}return s[t].exports;function f(e){var t=f.resolve(e);return!1===t?{}:l(t)}}l.isParcelRequire=!0,l.Module=function(e){this.id=e,this.bundle=l,this.exports={}},l.modules=e,l.cache=s,l.parent=r,l.register=function(t,o){e[t]=[function(e,t){t.exports=o},{}]},Object.defineProperty(l,"root",{get:function(){return i[n]}}),i[n]=l;for(var c=0;c<t.length;c++)l(t[c]);if(o){var u=l(o);"object"==typeof exports&&"undefined"!=typeof module?module.exports=u:"function"==typeof define&&define.amd&&define((function(){return u}))}}({"2Pu8x":[function(e,t,o,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js"),r=(e("./workflow-models"),e("./workflow-canvas")),s=i.interopDefault(r);class a extends s.default{constructor(e,t){super(e,t),this.container=e,this.workflowType=t,this.getEndpointColor=e=>e.isBlocking?"#7ab02c":e.isEvent?"#3a8acd":"#7ab02c";jsPlumb.ready((()=>{jsPlumb.importDefaults(this.getDefaults());const e=this.createJsPlumbInstance();e.bind("connection",(function(e,t){const o=e.connection,n=o.getParameters().outcome;o.getOverlay("label").setLabel(n.displayName)}));let t=this.getActivityElements();e.batch((()=>{this.workflowType.id;t.each(((t,o)=>{const n=$(o).data("activity-id"),i=this.getActivity(n);e.makeTarget(o,{dropOptions:{hoverClass:"hover"},anchor:"Continuous",endpoint:["Blank",{radius:8}]});for(let t of i.outcomes){const n=this.getSourceEndpointOptions(i,t);e.addEndpoint(o,{connectorOverlays:[["Label",{label:t.displayName,cssClass:"connection-label"}]]},n)}})),this.updateConnections(e),t=this.getActivityElements(),t.show(),this.updateCanvasHeight()})),this.jsPlumbInstance=e}))}}$.fn.workflowViewer=function(){return this.each(((e,t)=>{var o=$(t),n=o.data("workflow-type");o.data("workflowViewer",new a(t,n))})),this},$(document).ready((function(){$(".workflow-canvas").workflowViewer().data("workflowViewer")}))},{"./workflow-models":"aM2tG","./workflow-canvas":"cHBDw","@parcel/transformer-js/src/esmodule-helpers.js":"dGByK"}],aM2tG:[function(e,t,o,n){},{}],cHBDw:[function(e,t,o,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(o);e("./workflow-models");o.default=class{constructor(e,t){this.container=e,this.workflowType=t,this.minCanvasHeight=400,this.getActivityElements=()=>$(this.container).find(".activity"),this.getDefaults=()=>({Anchor:"Continuous",DragOptions:{cursor:"pointer",zIndex:2e3},EndpointStyles:[{fillStyle:"#225588"}],Endpoints:[["Dot",{radius:7}],["Blank"]],ConnectionOverlays:[["Arrow",{width:12,length:12,location:-5}]],ConnectorZIndex:5}),this.createJsPlumbInstance=()=>jsPlumb.getInstance({DragOptions:{cursor:"pointer",zIndex:2e3},ConnectionOverlays:[["Arrow",{location:1,visible:!0,width:11,length:11}],["Label",{location:.5,id:"label",cssClass:"connection-label"}]],Container:this.container}),this.getEndpointColor=e=>e.isBlocking||e.isStart?"#7ab02c":e.isEvent?"#3a8acd":"#7ab02c",this.getSourceEndpointOptions=(e,t)=>{const o=this.getEndpointColor(e);return{endpoint:"Dot",anchor:"Continuous",paintStyle:{stroke:o,fill:o,radius:7,strokeWidth:1},isSource:!0,connector:["Flowchart",{stub:[40,60],gap:0,cornerRadius:5,alwaysRespectStubs:!0}],connectorStyle:{strokeWidth:2,stroke:"#999999",joinstyle:"round",outlineStroke:"white",outlineWidth:2},hoverPaintStyle:{fill:"#216477",stroke:"#216477"},connectorHoverStyle:{strokeWidth:3,stroke:"#216477",outlineWidth:5,outlineStroke:"white"},connectorOverlays:[["Label",{location:[3,-1.5],cssClass:"endpointSourceLabel"}]],dragOptions:{},uuid:`${e.id}-${t.name}`,parameters:{outcome:t}}},this.getActivity=function(e,t=null){return t||(t=this.workflowType.activities),$.grep(t,(t=>t.id===e))[0]},this.updateConnections=e=>{var t=this.workflowType.id;for(let o of this.workflowType.transitions){const n=`${o.sourceActivityId}-${o.sourceOutcomeName}`,i=e.getEndpoint(n),r=`activity-${t}-${o.destinationActivityId}`;e.connect({source:i,target:r})}},this.updateCanvasHeight=function(){const e=$(this.container),t=e.find(".activity");let o=0,n=0;for(let e of t.toArray()){const t=$(e),i=t.position().top;i>o&&(o=i,n=t.height())}let i=o+n;i-(o+n)<=100&&(i+=100),e.height(Math.max(this.minCanvasHeight,i))}}}},{"./workflow-models":"aM2tG","@parcel/transformer-js/src/esmodule-helpers.js":"dGByK"}],dGByK:[function(e,t,o,n){o.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},o.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},o.exportAll=function(e,t){return Object.keys(e).forEach((function(o){"default"===o||"__esModule"===o||Object.prototype.hasOwnProperty.call(t,o)||Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[o]}})})),t},o.export=function(e,t,o){Object.defineProperty(e,t,{enumerable:!0,get:o})}},{}]},["2Pu8x"],"2Pu8x","parcelRequire94c2");
