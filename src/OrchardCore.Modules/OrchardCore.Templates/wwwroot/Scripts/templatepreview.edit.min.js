var editor;function initializeTemplatePreview(e,t){var n=$("[name='__RequestVerificationToken']").val();sendFormData=function(e){var t={Name:e.value,Content:editor.getValue(),__RequestVerificationToken:n};localStorage.setItem("OrchardCore.templates",JSON.stringify($.param(t)))},(editor=CodeMirror.fromTextArea(t,{autoRefresh:!0,lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,styleActiveLine:!0,mode:{name:"liquid"},extraKeys:{F11:function(e){e.setOption("fullScreen",!e.getOption("fullScreen"))},Esc:function(e){e.getOption("fullScreen")&&e.setOption("fullScreen",!1)}}})).on("change",function(t){sendFormData(e)}),window.addEventListener("storage",function(t){"OrchardCore.templates:ready"==t.key&&sendFormData(e)},!1),$(e).on("input",function(){sendFormData(e)}).on("propertychange",function(){sendFormData(e)}).on("change",function(){sendFormData(e)}).on("keyup",function(t){(46==t.keyCode||t.ctrlKey)&&sendFormData(e)}),$(window).on("unload",function(){localStorage.removeItem("OrchardCore.templates"),localStorage.setItem("OrchardCore.templates:not-connected",""),localStorage.removeItem("OrchardCore.templates:not-connected")})}