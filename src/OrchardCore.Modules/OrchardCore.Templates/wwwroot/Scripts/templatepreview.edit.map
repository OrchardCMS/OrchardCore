{"version":3,"sources":["<anon>"],"sourcesContent":["var editor;\nfunction initializeTemplatePreview(nameElement, editorElement) {\n    var antiforgerytoken = document.querySelector(\"[name='__RequestVerificationToken']\").value;\n    function sendFormData() {\n        var formData = {\n            'Name': nameElement.value,\n            'Content': editor.getValue(),\n            '__RequestVerificationToken': antiforgerytoken\n        };\n        // store the form data to pass it in the event handler\n        localStorage.setItem('OrchardCore.templates', JSON.stringify(new URLSearchParams(formData).toString()));\n    }\n    editor = CodeMirror.fromTextArea(editorElement, {\n        autoRefresh: true,\n        lineNumbers: true,\n        lineWrapping: true,\n        matchBrackets: true,\n        styleActiveLine: true,\n        mode: { name: \"liquid\" },\n        extraKeys: {\n            \"F11\": function (cm) {\n                cm.setOption(\"fullScreen\", !cm.getOption(\"fullScreen\"));\n            },\n            \"Esc\": function (cm) {\n                if (cm.getOption(\"fullScreen\")) cm.setOption(\"fullScreen\", false);\n            }\n        }\n    });\n    editor.on('change', sendFormData);\n    window.addEventListener('storage', function (ev) {\n        if (ev.key != 'OrchardCore.templates:ready') return; // ignore other keys\n        // triggered by the preview window the first time it is loaded in order\n        // to pre-render the view even if no contentpreview:render is already sent\n        sendFormData();\n    }, false);\n    nameElement.addEventListener('input', sendFormData);\n    nameElement.addEventListener('propertychange', sendFormData);\n    nameElement.addEventListener('change', sendFormData);\n    nameElement.addEventListener('keyup', function (event) {\n        // handle backspace\n        if (event.keyCode == 46 || event.ctrlKey) {\n            sendFormData();\n        }\n    });\n    window.addEventListener('unload', function () {\n        localStorage.removeItem('OrchardCore.templates');\n        // this will raise an event in the preview window to notify that the live preview is no longer active.\n        localStorage.setItem('OrchardCore.templates:not-connected', '');\n        localStorage.removeItem('OrchardCore.templates:not-connected');\n   });\n}\n"],"names":["editor","initializeTemplatePreview","nameElement","editorElement","antiforgerytoken","document","querySelector","value","sendFormData","formData","getValue","localStorage","setItem","JSON","stringify","URLSearchParams","toString","CodeMirror","fromTextArea","autoRefresh","lineNumbers","lineWrapping","matchBrackets","styleActiveLine","mode","name","extraKeys","cm","setOption","getOption","on","window","addEventListener","ev","key","event","keyCode","ctrlKey","removeItem"],"mappings":"AAAA,IAAIA,OAEJ,SAASC,0BAA0BC,CAAW,CAAEC,CAAa,EAEzD,IAAIC,EAAmBC,SAASC,aAAa,CAAC,uCAAuCC,KAAK,CAE1F,SAASC,IAEL,IAAIC,EAAW,CACX,KAAQP,EAAYK,KAAK,CACzB,QAAWP,OAAOU,QAAQ,GAC1B,2BAA8BN,CAClC,EAGAO,aAAaC,OAAO,CAAC,wBAAyBC,KAAKC,SAAS,CAAC,IAAIC,gBAAgBN,GAAUO,QAAQ,IACvG,CAmBAhB,AAjBAA,CAAAA,OAASiB,WAAWC,YAAY,CAACf,EAAe,CAC5CgB,YAAa,CAAA,EACbC,YAAa,CAAA,EACbC,aAAc,CAAA,EACdC,cAAe,CAAA,EACfC,gBAAiB,CAAA,EACjBC,KAAM,CAAEC,KAAM,QAAS,EACvBC,UAAW,CACP,IAAO,SAAUC,CAAE,EACfA,EAAGC,SAAS,CAAC,aAAc,CAACD,EAAGE,SAAS,CAAC,cAC7C,EACA,IAAO,SAAUF,CAAE,EACXA,EAAGE,SAAS,CAAC,eAAeF,EAAGC,SAAS,CAAC,aAAc,CAAA,EAC/D,CACJ,CACJ,EAAC,EAEME,EAAE,CAAC,SAAUtB,GAEpBuB,OAAOC,gBAAgB,CAAC,UAAW,SAAUC,CAAE,EAC7B,+BAAVA,EAAGC,GAAG,EAIV1B,GACJ,EAAG,CAAA,GAEHN,EAAY8B,gBAAgB,CAAC,QAASxB,GACtCN,EAAY8B,gBAAgB,CAAC,iBAAkBxB,GAC/CN,EAAY8B,gBAAgB,CAAC,SAAUxB,GACvCN,EAAY8B,gBAAgB,CAAC,QAAS,SAAUG,CAAK,EAE7CA,CAAAA,AAAiB,IAAjBA,EAAMC,OAAO,EAAUD,EAAME,OAAO,AAAD,GACnC7B,GAER,GAEAuB,OAAOC,gBAAgB,CAAC,SAAU,WAC9BrB,aAAa2B,UAAU,CAAC,yBAExB3B,aAAaC,OAAO,CAAC,sCAAuC,IAC5DD,aAAa2B,UAAU,CAAC,sCAC7B,EACH"}
