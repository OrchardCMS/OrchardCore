{
  "name": "Blog",
  "displayName": "Blog",
  "description": "Provides a functional Blog with CMS features.",
  "author": "The Orchard Core Team",
  "website": "https://orchardcore.net",
  "version": "1.0.0",
  "issetuprecipe": true,
  "categories": [ "default" ],
  "tags": [ "blog" ],

  // The variables are evaluated the first time they are accessed, and reused across steps
  "variables": {
    "adminUrlPrefix": "[js: configuration('OrchardCore_Admin:AdminUrlPrefix', 'Admin')]",
   
    "menuContentItemId": "[js:uuid()]"   
  },

  "steps": [
    {
      "name": "feature",
      "enable": [
        // SaaS
        "OrchardCore.HomeRoute",
        "OrchardCore.Admin",
        "OrchardCore.Diagnostics",
        "OrchardCore.DynamicCache",
        "OrchardCore.Features",
        "OrchardCore.Navigation",
        "OrchardCore.Recipes",
        "OrchardCore.Resources",
        "OrchardCore.Roles",
        "OrchardCore.Security",
        "OrchardCore.Settings",
        "OrchardCore.Themes",
        "OrchardCore.Users",

        // Content Management
        "OrchardCore.Alias",
        "OrchardCore.AdminMenu",
        "OrchardCore.Autoroute",
        "OrchardCore.Html",
        "OrchardCore.ContentFields",
        "OrchardCore.ContentPreview",
        "OrchardCore.Contents",
        "OrchardCore.ContentTypes",
        "OrchardCore.CustomSettings",
        "OrchardCore.Deployment",
        "OrchardCore.Deployment.Remote",
        "OrchardCore.Feeds",
        "OrchardCore.Flows",
        "OrchardCore.Indexing",
        "OrchardCore.Layers",
        "OrchardCore.Lists",
        "OrchardCore.Markdown",
        "OrchardCore.Media",
        "OrchardCore.Menu",
        "OrchardCore.Placements",
        "OrchardCore.Queries",
        "OrchardCore.Queries.Sql",
        "OrchardCore.Shortcodes.Templates",
        "OrchardCore.Rules",
        "OrchardCore.Taxonomies",
        "OrchardCore.Title",
        "OrchardCore.Templates",
        "OrchardCore.Widgets",

        // Themes
        "TheBlogTheme",
        "TheAdmin",
        "SafeMode"
      ]
    },
    {
      "name": "themes",
      "admin": "TheAdmin",
      "site": "TheBlogTheme"
    },
    {
      "name": "Roles",
      "Roles": [
        {
          "Name": "Moderator",
          "Description": "Grants users the ability to moderate content.",
          "Permissions": []
        },
        {
          "Name": "Editor",
          "Description": "Grants users the ability to edit existing content.",
          "Permissions": []
        },
        {
          "Name": "Author",
          "Description": "Grants users the ability to create content.",
          "Permissions": []
        },
        {
          "Name": "Contributor",
          "Description": "Grants users the ability to contribute content.",
          "Permissions": []
        }
      ]
    },

    {
      "name": "ContentDefinition",
      "ContentTypes": [
        {
          "Name": "Article",
          "DisplayName": "Article",
          "Hidden": false,
          "Settings": {
            "ContentTypeSettings": {
              "Creatable": true,
              "Draftable": true,
              "Versionable": true,
              "Listable": true
            }
          },
          "ContentTypePartDefinitionRecords": [
            {
              "PartName": "Article",
              "Name": "Article",
              "Settings": {
                "ContentTypePartSettings": {
                  "Position": "3"
                }
              }
            },
            {
              "PartName": "AutoroutePart",
              "Name": "AutoroutePart",
              "Settings": {
                "AutoroutePartSettings": {
                  "AllowCustomPath": true,
                  "Pattern": "{{ Model.ContentItem | display_text | slugify }}",
                  "ShowHomepageOption": true
                },
                "ContentTypePartSettings": {
                  "Position": "1"
                }
              }
            },
            {
              "PartName": "HtmlBodyPart",
              "Name": "HtmlBodyPart",
              "Settings": {
                "ContentTypePartSettings": {
                  "Editor": "Wysiwyg",
                  "Position": "2"
                }
              }
            },
            {
              "PartName": "TitlePart",
              "Name": "TitlePart",
              "Settings": {
                "ContentTypePartSettings": {
                  "Position": "0"
                }
              }
            }
          ]
        },       
        {
          "Name": "Blockquote",
          "DisplayName": "Blockquote",
          "Settings": {
            "ContentTypeSettings": {
              "Draftable": true,
              "Versionable": true,
              "Securable": true,
              "Stereotype": "Widget"
            }
          },
          "ContentTypePartDefinitionRecords": [
            {
              "PartName": "Blockquote",
              "Name": "Blockquote",
              "Settings": {
                "ContentTypePartSettings": {
                  "Position": "0"
                }
              }
            }
          ]
        },
        {
          "Name": "Image",
          "DisplayName": "Image",
          "Settings": {
            "ContentTypeSettings": {
              "Draftable": true,
              "Versionable": true,
              "Securable": true,
              "Stereotype": "Widget"
            }
          },
          "ContentTypePartDefinitionRecords": [
            {
              "PartName": "Image",
              "Name": "Image",
              "Settings": {
                "ContentTypePartSettings": {
                  "Position": "0"
                }
              }
            }
          ]
        },
        {
          "Name": "Paragraph",
          "DisplayName": "Paragraph",
          "Settings": {
            "ContentTypeSettings": {
              "Draftable": true,
              "Versionable": true,
              "Securable": true,
              "Stereotype": "Widget"
            }
          },
          "ContentTypePartDefinitionRecords": [
            {
              "PartName": "Paragraph",
              "Name": "Paragraph",
              "Settings": {
                "ContentTypePartSettings": {
                  "Position": "0"
                }
              }
            }
          ]
        },
        {
          "Name": "RawHtml",
          "DisplayName": "Raw Html",
          "Settings": {
            "ContentTypeSettings": {
              "Draftable": true,
              "Versionable": true,
              "Securable": true,
              "Stereotype": "Widget"
            }
          },
          "ContentTypePartDefinitionRecords": [
            {
              "PartName": "RawHtml",
              "Name": "RawHtml",
              "Settings": {
                "ContentTypePartSettings": {
                  "Position": "0"
                }
              }
            }
          ]
        },
        {
          "Name": "Page",
          "DisplayName": "Page",
          "Settings": {
            "ContentTypeSettings": {
              "Creatable": true,
              "Draftable": true,
              "Versionable": true,
              "Listable": true,
              "Securable": true
            }
          },
          "ContentTypePartDefinitionRecords": [
            {
              "PartName": "Page",
              "Name": "Page",
              "Settings": {
                "ContentTypePartSettings": {
                  "Position": "3"
                }
              }
            },
            {
              "PartName": "AutoroutePart",
              "Name": "AutoroutePart",
              "Settings": {
                "ContentTypePartSettings": {
                  "Position": "1"
                },
                "AutoroutePartSettings": {
                  "AllowCustomPath": true,
                  "Pattern": "{{ Model.ContentItem | display_text | slugify }}",
                  "ShowHomepageOption": true
                }
              }
            },
            {
              "PartName": "FlowPart",
              "Name": "FlowPart",
              "Settings": {
                "ContentTypePartSettings": {
                  "Position": "2"
                }
              }
            },
            {
              "PartName": "TitlePart",
              "Name": "TitlePart",
              "Settings": {
                "ContentTypePartSettings": {
                  "Position": "0"
                }
              }
            }
          ]
        } 
        
      ],
      "ContentParts": [
        {
          "Name": "Article",
          "Settings": {},
          "ContentPartFieldDefinitionRecords": [
            {
              "FieldName": "TextField",
              "Name": "Subtitle",
              "Settings": {
                "ContentPartFieldSettings": {
                  "DisplayName": "Subtitle",
                  "Position": "0"
                }
              }
            },
            {
              "FieldName": "MediaField",
              "Name": "Image",
              "Settings": {
                "ContentPartFieldSettings": {
                  "DisplayName": "Banner Image",
                  "Position": "0"
                },
                "MediaFieldSettings": {
                  "Multiple": false,
                  "AllowAnchors": true
                }
              }
            }
          ]
        },
        {
          "Name": "Blockquote",
          "Settings": {},
          "ContentPartFieldDefinitionRecords": [
            {
              "FieldName": "TextField",
              "Name": "Quote",
              "Settings": {
                "ContentPartFieldSettings": {
                  "DisplayName": "Quote",
                  "Editor": "TextArea",
                  "Position": "0"
                }
              }
            }
          ]
        },
        {
          "Name": "Image",
          "Settings": {
            "Attachable": true
          },
          "ContentPartFieldDefinitionRecords": [
            {
              "FieldName": "MediaField",
              "Name": "Media",
              "Settings": {
                "ContentPartFieldSettings": {
                  "DisplayName": "Image",
                  "Position": "0"
                },
                "MediaFieldSettings": {
                  "Multiple": false,
                  "Required": true
                }
              }
            },
            {
              "FieldName": "TextField",
              "Name": "Caption",
              "Settings": {
                "ContentPartFieldSettings": {
                  "DisplayName": "Caption",
                  "Position": "1"
                },
                "TextFieldSettings": {
                  "Hint": "A description of the image used as title or alternate text"
                }
              }
            }
          ]
        },
        {
          "Name": "Paragraph",
          "Settings": {},
          "ContentPartFieldDefinitionRecords": [
            {
              "FieldName": "HtmlField",
              "Name": "Content",
              "Settings": {
                "ContentPartFieldSettings": {
                  "DisplayName": "Content",
                  "Position": "0",
                  "Editor": "Wysiwyg"
                }
              }
            }
          ]
        },
        {
          "Name": "RawHtml",
          "Settings": {},
          "ContentPartFieldDefinitionRecords": [
            {
              "FieldName": "HtmlField",
              "Name": "Content",
              "Settings": {
                "ContentPartFieldSettings": {
                  "DisplayName": "Content",
                  "Position": "0",
                  "Editor": "Multiline"
                }
              }
            }
          ]
        },
        {
          "Name": "Category",
          "Settings": {},
          "ContentPartFieldDefinitionRecords": [
            {
              "FieldName": "TextField",
              "Name": "Icon",
              "Settings": {
                "ContentPartFieldSettings": {
                  "DisplayName": "Icon",
                  "Editor": "IconPicker",
                  "Position": "0"
                },
                "TextFieldSettings": {
                  "Required": true
                }
              }
            }
          ]
        }
      ]
    },
    {
      "name": "content",
      "Data": [
        {
          "ContentType": "Menu",
          "ContentItemId": "[js: variables('menuContentItemId')]",
          "Owner": "[js: parameters('AdminUserId')]",
          "Author": "[js: parameters('AdminUsername')]",
          "DisplayText": "Main Menu",
          "Latest": true,
          "Published": true,
          "MenuPart": {},
          "TitlePart": {
            "Title": "Main Menu"
          },
          "MenuItemsListPart": {
            "MenuItems": [
              {
                "ContentType": "LinkMenuItem",
                "ContentItemId": "[js: uuid()]",
                "DisplayText": "Home",
                "LinkMenuItemPart": {
                  "Name": "Home",
                  "Url": "~/"
                }
              },
              {
                "ContentType": "LinkMenuItem",
                "ContentItemId": "[js: uuid()]",
                "DisplayText": "About",
                "LinkMenuItemPart": {
                  "Name": "About",
                  "Url": "~/about"
                }
              }
            ]
          },
          "AliasPart": {
            "Alias": "main-menu"
          }
        },

        {
          "ContentItemId": "[js: uuid()]",
          "ContentType": "Article",
          "DisplayText": "About",
          "Latest": true,
          "Published": true,
          "Owner": "[js: parameters('AdminUserId')]",
          "Author": "[js: parameters('AdminUsername')]",
          "AutoroutePart": {
            "Path": "about",
            "SetHomepage": false
          },
          "HtmlBodyPart": {
            "Html": "<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Saepe nostrum ullam eveniet pariatur voluptates odit, fuga atque ea nobis sit soluta odio, adipisci quas excepturi maxime quae totam ducimus consectetur?</p><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eius praesentium recusandae illo eaque architecto error, repellendus iusto reprehenderit, doloribus, minus sunt. Numquam at quae voluptatum in officia voluptas voluptatibus, minus!</p><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nostrum molestiae debitis nobis, quod sapiente qui voluptatum, placeat magni repudiandae accusantium fugit quas labore non rerum possimus, corrupti enim modi! Et.</p>"
          },
          "TitlePart": {
            "Title": "About"
          },
          "Article": {
            "Subtitle": {
              "Text": "This is what I do."
            },
            "Image": {
              "Paths": [
                "about-bg.jpg"
              ]
            }
          }
        },
        {
          "ContentItemId": "[js: uuid()]",
          "ContentType": "RawHtml",
          "DisplayText": "Footer",
          "Latest": true,
          "Published": true,
          "Owner": "[js: parameters('AdminUserId')]",
          "Author": "[js: parameters('AdminUsername')]",
          "LayerMetadata": {
            "Layer": "Always",
            "Zone": "Footer",
            "RenderTitle": false,
            "Position": 10
          },
          "RawHtml": {
            "Content": {
              "Html": "[file:text('Snippets/footer.html')]"
            }
          }
        }
      ]
    },
    {
      "name": "MediaProfiles",
      "MediaProfiles": {
        "banner": {
          "Hint": "A banner image (2048px x 600px, cropped)",
          "Width": 2048,
          "Height": 600,
          "Mode": 2,
          "Format": 0,
          "Quality": 100
        }
      }
    },
    {
      "name": "media",
      "Files": [
        {
          "TargetPath": "about-bg.jpg",
          "SourcePath": "../wwwroot/assets/img/about-bg.jpg"
        },
        {
          "TargetPath": "home-bg.jpg",
          "SourcePath": "../wwwroot/assets/img/home-bg.jpg"
        },
        {
          "TargetPath": "post-bg.jpg",
          "SourcePath": "../wwwroot/assets/img/post-bg.jpg"
        }
      ]
    },
    {
      "name": "layers",
      "Layers": [
        {
          "Name": "Always",
          "LayerRule": {
            "ConditionId": "[js: uuid()]",
            "Conditions": [
              {
                "$type": "OrchardCore.Rules.Models.BooleanCondition, OrchardCore.Rules",
                "Name": "BooleanCondition",
                "Value": true,
                "ConditionId": "[js: uuid()]"
              }
            ]
          },
          "Description": "The widgets in this layer are displayed on any page of this site."
        },
        {
          "Name": "Homepage",
          "LayerRule": {
            "ConditionId": "[js: uuid()]",
            "Conditions": [
              {
                "$type": "OrchardCore.Rules.Models.HomepageCondition, OrchardCore.Rules",
                "Name": "HomepageCondition",
                "Value": true,
                "ConditionId": "[js: uuid()]"
              }
            ]
          },
          "Description": "The widgets in this layer are only displayed on the homepage."
        }
      ]
    },
    {
      "name": "AdminMenu",
      "data": [
        {
          "Id": "baef6f85ad13481681cde70ada401333",
          "Name": "Admin menus",
          "Enabled": true,
          "MenuItems": [

            {
              "$type": "OrchardCore.AdminMenu.AdminNodes.LinkAdminNode, OrchardCore.AdminMenu",
              "LinkText": "Main Menu",
              "LinkUrl": "[js: variables('adminUrlPrefix') + '/Contents/ContentItems/' +  variables('menuContentItemId') + '/Edit']",
              "IconClass": "fas fa-sitemap",
              "PermissionNames": [],
              "UniqueId": "5118cecfde834dacb26ac08980f1b5a7",
              "Enabled": true,
              "Text": null,
              "Id": null,
              "Href": null,
              "Url": null,
              "Position": null,
              "LinkToFirstChild": true,
              "LocalNav": false,
              "Culture": null,
              "Items": [],
              "Classes": []
            },
            {
              "$type": "OrchardCore.AdminMenu.AdminNodes.PlaceholderAdminNode, OrchardCore.AdminMenu",
              "LinkText": "Content",
              "IconClass": null,
              "PermissionNames": [],
              "UniqueId": "3e590d44f8704e4588e272dd966ce291",
              "Enabled": true,
              "Text": null,
              "Id": null,
              "Href": null,
              "Url": null,
              "Position": null,
              "LinkToFirstChild": true,
              "LocalNav": false,
              "Culture": null,
              "Items": [
                {
                  "$type": "OrchardCore.AdminMenu.AdminNodes.LinkAdminNode, OrchardCore.AdminMenu",
                  "LinkText": "Content Items",
                  "LinkUrl": "[js: variables('adminUrlPrefix') + '/Contents/ContentItems/']",
                  "IconClass": null,
                  "UniqueId": "7b293d57056a4eebb3713f07f12c65d9",
                  "Enabled": true,
                  "Text": null,
                  "Id": null,
                  "Href": null,
                  "Url": null,
                  "Position": "0",
                  "LinkToFirstChild": true,
                  "LocalNav": false,
                  "Culture": null,
                  "Items": [],
                  "Classes": []
                },
                {
                  "$type": "OrchardCore.Contents.AdminNodes.ContentTypesAdminNode, OrchardCore.Contents",
                  "ShowAll": false,
                  "ContentTypes": [
                    {
                      "ContentTypeId": "Article"
                    },
                    {
                      "ContentTypeId": "Page"
                    },
                    {
                      "ContentTypeId": "Taxonomy"
                    }
                  ],
                  "UniqueId": "ee18224e1b814c638b0732678b74cfd9",
                  "Enabled": true,
                  "Text": null,
                  "Id": null,
                  "Href": null,
                  "Url": null,
                  "Position": null,
                  "LinkToFirstChild": true,
                  "LocalNav": false,
                  "Culture": null,
                  "Items": [],
                  "Classes": []
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "recipes",
      "Values": [
        {
          "name": "Blog.Core"
        }
      ]
    }

  ]
}
