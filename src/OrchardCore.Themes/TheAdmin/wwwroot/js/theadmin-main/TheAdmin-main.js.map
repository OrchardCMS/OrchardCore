{"mappings":"ssCAIA,IAAAA,EAAAC,EAAA,gBAE8B,MAC1B,MAAMC,EAAW,IAAIC,kBAAiB,SAAUC,GAC5C,IAAK,MAAMC,KAAYD,EACnB,IAAK,MAAME,KAAQD,EAASE,WACxB,GAAID,aAAgBE,aAAgC,SAAjBF,EAAKG,QAAoB,CACxD,MAAMC,EAAOJ,EACPK,GAAmB,EAAAX,EAAAY,uBAEzB,GAAID,EACA,KACI,EAAAX,EAAAa,oBAAmBF,EAAiBG,mBAChCH,EAAiBI,oBACjBL,EAAKM,UAAUC,IAAI,uBAE3B,CAAE,MAAOC,GACLC,QAAQD,MAAM,wCAAyCA,EAC3D,CAGJhB,EAASkB,aACT,KACJ,CAGZ,IAEAlB,EAASmB,QAAQC,SAASC,gBAAiB,CACvCC,WAAW,EACXC,SAAS,GACb,EAGJC,E,wICIAC,EAAAC,OAAAC,EAAA,yBACIf,IADJa,EAAAC,OAAAC,EAAA,0BAEIhB,IAFJc,EAAAC,OAAAC,EAAA,2BAGIjB,IAHJe,EAAAC,OAAAC,EAAA,2BAIIC,IA9CJ,IAAAC,EAAA9B,EAAA,sCACA+B,EAAA/B,EAAA,a,sBAEA,IAAIa,GAAoB,EAExB,MAAMD,EAAsBoB,IACxBnB,EAAoBmB,CAAA,EAGlBC,EAAwB,KAAM,EAAAH,EAAAI,iBAAkB,oBAEhDvB,EAAsB,KACxB,MAAMwB,EAAcC,aAAaC,QAAQJ,KAEzC,IAAKE,EACD,MAAO,CAAC,EAGZ,IACI,OAAOG,KAAKC,MAAMJ,EACtB,CAAE,MAAOK,GAEL,OADAtB,QAAQD,MAAM,qCAAsCuB,GAC7C,CAAC,CACZ,GAGEX,EAAuBnB,IACzB,GAAwB,MAApBA,EAEA,YADAQ,QAAQD,MAAM,qDAIlB,MAAMwB,EAAMR,IAEZ,IACIG,aAAaM,QAAQD,EAAKH,KAAKK,UAAUjC,IACzCkC,EAAAC,QAAQC,IAAIL,EAAKH,KAAKK,UAAUjC,GAAmB,CAAEqC,QAAS,KAClE,CAAE,MAAOP,GACLtB,QAAQD,MAAM,kCAAmCuB,EACrD,E,yOCrCJd,EAAAC,OAAAC,EAAA,qBAASM,IAFT,MAAMA,EAAgB,IAAMb,SAASC,gBAAgB0B,aAAa,gBAAkB,S,uFCApFpB,EAAQqB,eAAiB,SAAUC,GACjC,OAAOA,GAAKA,EAAEC,WAAaD,EAAI,CAACL,QAASK,EAC3C,EAEAtB,EAAQwB,kBAAoB,SAAUF,GACpCG,OAAOC,eAAeJ,EAAG,aAAc,CAAClB,OAAO,GACjD,EAEAJ,EAAQ2B,UAAY,SAAUC,EAAQC,GAkBpC,OAjBAJ,OAAOK,KAAKF,GAAQG,SAAQ,SAAUlB,GAE1B,YAARA,GACQ,eAARA,GACAY,OAAOO,UAAUC,eAAeC,KAAKL,EAAMhB,IAK7CY,OAAOC,eAAeG,EAAMhB,EAAK,CAC/BsB,YAAY,EACZC,IAAK,WACH,OAAOR,EAAOf,EAChB,GAEJ,IAEOgB,CACT,EAEA7B,EAAQD,OAAS,SAAU8B,EAAMQ,EAAUD,GACzCX,OAAOC,eAAeG,EAAMQ,EAAU,CACpCF,YAAY,EACZC,IAAKA,GAET,C,+BC/BiEE,EAAOtC,QAO9D,WAAc,aAGtB,SAASuC,EAAQC,GACf,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CACzC,IAAIb,EAASc,UAAUD,GACvB,IAAK,IAAI5B,KAAOe,EACdY,EAAO3B,GAAOe,EAAOf,EAEzB,CACA,OAAO2B,CACT,CAsBA,SAASI,EAAMC,EAAWC,GACxB,SAAS5B,EAAK6B,EAAM3C,EAAO4C,GACzB,GAAwB,oBAAbvD,SAAX,CAMkC,iBAFlCuD,EAAaT,EAAO,CAAC,EAAGO,EAAmBE,IAErB7B,UACpB6B,EAAW7B,QAAU,IAAI8B,KAAKA,KAAKC,MAA6B,MAArBF,EAAW7B,UAEpD6B,EAAW7B,UACb6B,EAAW7B,QAAU6B,EAAW7B,QAAQgC,eAG1CJ,EAAOK,mBAAmBL,GACvBM,QAAQ,uBAAwBC,oBAChCD,QAAQ,QAASE,QAEpB,IAAIC,EAAwB,GAC5B,IAAK,IAAIC,KAAiBT,EACnBA,EAAWS,KAIhBD,GAAyB,KAAOC,GAEE,IAA9BT,EAAWS,KAWfD,GAAyB,IAAMR,EAAWS,GAAeC,MAAM,KAAK,KAGtE,OAAQjE,SAASkE,OACfZ,EAAO,IAAMF,EAAUe,MAAMxD,EAAO2C,GAAQS,CAvC5C,CAwCJ,CAEA,SAASpB,EAAKW,GACZ,GAAwB,oBAAbtD,YAA6BiD,UAAUC,QAAWI,GAA7D,CAQA,IAFA,IAAIc,EAAUpE,SAASkE,OAASlE,SAASkE,OAAOD,MAAM,MAAQ,GAC1DI,EAAM,CAAC,EACFrB,EAAI,EAAGA,EAAIoB,EAAQlB,OAAQF,IAAK,CACvC,IAAIsB,EAAQF,EAAQpB,GAAGiB,MAAM,KACzBtD,EAAQ2D,EAAMC,MAAM,GAAGC,KAAK,KAEhC,IACE,IAAIC,EAAQZ,mBAAmBS,EAAM,IAGrC,GAFAD,EAAII,GAASrB,EAAUsB,KAAK/D,EAAO8D,GAE/BnB,IAASmB,EACX,KAEJ,CAAE,MAAOE,GAAI,CACf,CAEA,OAAOrB,EAAOe,EAAIf,GAAQe,CArBxB,CAsBJ,CAEA,OAAOrC,OAAO4C,OACZ,CACEnD,MACAkB,MACAkC,OAAQ,SAAUvB,EAAMC,GACtB9B,EACE6B,EACA,GACAR,EAAO,CAAC,EAAGS,EAAY,CACrB7B,SAAS,IAGf,EACAoD,eAAgB,SAAUvB,GACxB,OAAOJ,EAAK4B,KAAK3B,UAAWN,EAAO,CAAC,EAAGiC,KAAKxB,WAAYA,GAC1D,EACAyB,cAAe,SAAU5B,GACvB,OAAOD,EAAKL,EAAO,CAAC,EAAGiC,KAAK3B,UAAWA,GAAY2B,KAAKxB,WAC1D,GAEF,CACEA,WAAY,CAAE5C,MAAOqB,OAAOiD,OAAO5B,IACnCD,UAAW,CAAEzC,MAAOqB,OAAOiD,OAAO7B,KAGxC,CAKA,OAHUD,EApHa,CACrBuB,KAAM,SAAU/D,GAId,MAHiB,MAAbA,EAAM,KACRA,EAAQA,EAAM4D,MAAM,GAAG,IAElB5D,EAAMiD,QAAQ,mBAAoBC,mBAC3C,EACAM,MAAO,SAAUxD,GACf,OAAOgD,mBAAmBhD,GAAOiD,QAC/B,2CACAC,mBAEJ,GAwG+B,CAAEqB,KAAM,KAK3C,CA/IkFC,E","sources":["src/OrchardCore.Themes/TheAdmin/Assets/js/TheAdmin-main/TheAdmin-main.ts","src/OrchardCore.Themes/TheAdmin/Assets/js/constants.ts",".scripts/bloom/helpers/globals.ts","node_modules/@parcel/transformer-js/src/esmodule-helpers.js","node_modules/js-cookie/dist/js.cookie.js"],"sourcesContent":["// We add some classes to the body tag to restore the sidebar to the state is was before reload.\n// That state was saved to localstorage by userPreferencesPersistor.js\n// We need to apply the classes BEFORE the page is rendered.\n// That is why we use a MutationObserver instead of document.Ready().\nimport { getAdminPreferences, setCompactExplicit } from '../constants';\nconst userPreferencesLoader = () => {\n    const observer = new MutationObserver(function (mutations) {\n        for (const mutation of mutations) {\n            for (const node of mutation.addedNodes) {\n                if (node instanceof HTMLElement && node.tagName === 'BODY') {\n                    const body = node;\n                    const adminPreferences = getAdminPreferences();\n                    if (adminPreferences) {\n                        try {\n                            setCompactExplicit(adminPreferences.isCompactExplicit);\n                            if (adminPreferences.leftSidebarCompact) {\n                                body.classList.add('left-sidebar-compact');\n                            }\n                        } catch (error) {\n                            console.error('Error while loading user preferences:', error);\n                        }\n                    }\n                    observer.disconnect();\n                    break;\n                }\n            }\n        }\n    });\n    observer.observe(document.documentElement, {\n        childList: true,\n        subtree: true\n    });\n}\nuserPreferencesLoader();","import { getTenantName } from '@orchardcore/bloom/helpers/globals';\nimport Cookies from 'js-cookie';\nlet isCompactExplicit = false;\nconst setCompactExplicit = (value: boolean) => {\n    isCompactExplicit = value;\n}\nconst getAdminPreferenceKey = () => getTenantName() + '-adminPreferences';\nconst getAdminPreferences = () => {\n    const storedValue = localStorage.getItem(getAdminPreferenceKey());\n    if (!storedValue) {\n        return {};\n    }\n    try {\n        return JSON.parse(storedValue);\n    } catch (ex) {\n        console.error('Error retrieving admin preferences', ex);\n        return {};\n    }\n};\nconst setAdminPreferences = (adminPreferences) => {\n    if (adminPreferences == null) {\n        console.error('Error setting admin preferences, argument is null');\n        return;\n    }\n    const key = getAdminPreferenceKey();\n    try {\n        localStorage.setItem(key, JSON.stringify(adminPreferences));\n        Cookies.set(key, JSON.stringify(adminPreferences), { expires: 360 });\n    } catch (ex) {\n        console.error('Error setting admin preferences', ex);\n    }\n};\nexport {\n    isCompactExplicit,\n    setCompactExplicit,\n    getAdminPreferences,\n    setAdminPreferences\n}\n","const getTenantName = () => document.documentElement.getAttribute(\"data-tenant\") || \"default\";\nexport { getTenantName };\n","exports.interopDefault = function (a) {\n  return a && a.__esModule ? a : {default: a};\n};\nexports.defineInteropFlag = function (a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n};\nexports.exportAll = function (source, dest) {\n  Object.keys(source).forEach(function (key) {\n    if (\n      key === 'default' ||\n      key === '__esModule' ||\n      Object.prototype.hasOwnProperty.call(dest, key)\n    ) {\n      return;\n    }\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function () {\n        return source[key];\n      },\n    });\n  });\n  return dest;\n};\nexports.export = function (dest, destName, get) {\n  Object.defineProperty(dest, destName, {\n    enumerable: true,\n    get: get,\n  });\n};\n","/*! js-cookie v3.0.5 | MIT */\n;\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, (function () {\n    var current = global.Cookies;\n    var exports = global.Cookies = factory();\n    exports.noConflict = function () { global.Cookies = current; return exports; };\n  })());\n})(this, (function () { 'use strict';\n  /* eslint-disable no-var */\n  function assign (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        target[key] = source[key];\n      }\n    }\n    return target\n  }\n  /* eslint-enable no-var */\n  /* eslint-disable no-var */\n  var defaultConverter = {\n    read: function (value) {\n      if (value[0] === '\"') {\n        value = value.slice(1, -1);\n      }\n      return value.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent)\n    },\n    write: function (value) {\n      return encodeURIComponent(value).replace(\n        /%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,\n        decodeURIComponent\n      )\n    }\n  };\n  /* eslint-enable no-var */\n  /* eslint-disable no-var */\n  function init (converter, defaultAttributes) {\n    function set (name, value, attributes) {\n      if (typeof document === 'undefined') {\n        return\n      }\n      attributes = assign({}, defaultAttributes, attributes);\n      if (typeof attributes.expires === 'number') {\n        attributes.expires = new Date(Date.now() + attributes.expires * 864e5);\n      }\n      if (attributes.expires) {\n        attributes.expires = attributes.expires.toUTCString();\n      }\n      name = encodeURIComponent(name)\n        .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n        .replace(/[()]/g, escape);\n      var stringifiedAttributes = '';\n      for (var attributeName in attributes) {\n        if (!attributes[attributeName]) {\n          continue\n        }\n        stringifiedAttributes += '; ' + attributeName;\n        if (attributes[attributeName] === true) {\n          continue\n        }\n        // Considers RFC 6265 section 5.2:\n        // ...\n        // 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n        //     character:\n        // Consume the characters of the unparsed-attributes up to,\n        // not including, the first %x3B (\";\") character.\n        // ...\n        stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n      }\n      return (document.cookie =\n        name + '=' + converter.write(value, name) + stringifiedAttributes)\n    }\n    function get (name) {\n      if (typeof document === 'undefined' || (arguments.length && !name)) {\n        return\n      }\n      // To prevent the for loop in the first place assign an empty array\n      // in case there are no cookies at all.\n      var cookies = document.cookie ? document.cookie.split('; ') : [];\n      var jar = {};\n      for (var i = 0; i < cookies.length; i++) {\n        var parts = cookies[i].split('=');\n        var value = parts.slice(1).join('=');\n        try {\n          var found = decodeURIComponent(parts[0]);\n          jar[found] = converter.read(value, found);\n          if (name === found) {\n            break\n          }\n        } catch (e) {}\n      }\n      return name ? jar[name] : jar\n    }\n    return Object.create(\n      {\n        set,\n        get,\n        remove: function (name, attributes) {\n          set(\n            name,\n            '',\n            assign({}, attributes, {\n              expires: -1\n            })\n          );\n        },\n        withAttributes: function (attributes) {\n          return init(this.converter, assign({}, this.attributes, attributes))\n        },\n        withConverter: function (converter) {\n          return init(assign({}, this.converter, converter), this.attributes)\n        }\n      },\n      {\n        attributes: { value: Object.freeze(defaultAttributes) },\n        converter: { value: Object.freeze(converter) }\n      }\n    )\n  }\n  var api = init(defaultConverter, { path: '/' });\n  /* eslint-enable no-var */\n  return api;\n}));\n"],"names":["_constants","require","observer","MutationObserver","mutations","mutation","node","addedNodes","HTMLElement","tagName","body","adminPreferences","getAdminPreferences","setCompactExplicit","isCompactExplicit","leftSidebarCompact","classList","add","error","console","disconnect","observe","document","documentElement","childList","subtree","userPreferencesLoader","parcelHelpers","export","exports","setAdminPreferences","_globals","_jsCookie","value","getAdminPreferenceKey","getTenantName","storedValue","localStorage","getItem","JSON","parse","ex","key","setItem","stringify","_jsCookieDefault","default","set","expires","getAttribute","interopDefault","a","__esModule","defineInteropFlag","Object","defineProperty","exportAll","source","dest","keys","forEach","prototype","hasOwnProperty","call","enumerable","get","destName","module","assign","target","i","arguments","length","init","converter","defaultAttributes","name","attributes","Date","now","toUTCString","encodeURIComponent","replace","decodeURIComponent","escape","stringifiedAttributes","attributeName","split","cookie","write","cookies","jar","parts","slice","join","found","read","e","create","remove","withAttributes","this","withConverter","freeze","path","factory"],"version":3,"file":"TheAdmin-main.js.map"}