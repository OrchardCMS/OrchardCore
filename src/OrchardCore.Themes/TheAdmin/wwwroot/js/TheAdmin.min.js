function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}var _excluded=["callback"];function ownKeys(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,a)}return o}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(o),!0).forEach((function(t){_defineProperty(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function _defineProperty(e,t,o){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var a=o.call(e,t||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _objectWithoutProperties(e,t){if(null==e)return{};var o,a,n=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)o=i[a],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var o,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)o=i[a],t.indexOf(o)>=0||(n[o]=e[o]);return n}function confirmDialog(e){var t=e.callback,o=_objectWithoutProperties(e,_excluded),a=$("#confirmRemoveModalMetadata").data(),n=$.extend({},a,o),i=n.title,r=n.message,s=n.okText,l=n.cancelText,c=n.okClass,d=n.cancelClass;$('<div id="confirmRemoveModal" class="modal" tabindex="-1" role="dialog">        <div class="modal-dialog modal-dialog-centered" role="document">            <div class="modal-content">                <div class="modal-header">                    <h5 class="modal-title">'+i+'</h5>                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>                </div>                <div class="modal-body">                    <p>'+r+'</p>                </div>                <div class="modal-footer">                    <button id="modalOkButton" type="button" class="btn '+c+'">'+s+'</button>                    <button id="modalCancelButton" type="button" class="btn '+d+'" data-bs-dismiss="modal">'+l+"</button>                </div>            </div>        </div>    </div>").appendTo("body");var u=new bootstrap.Modal($("#confirmRemoveModal"),{backdrop:"static",keyboard:!1});u.show(),document.getElementById("confirmRemoveModal").addEventListener("hidden.bs.modal",(function(){document.getElementById("confirmRemoveModal").remove(),u.dispose()})),$("#modalOkButton").click((function(){t(!0),u.hide()})),$("#modalCancelButton").click((function(){t(!1),u.hide()}))}function getTechnicalName(e){var t,o="";if(!e||0==e.length)return"";for(e=removeDiacritics(e),i=0;i<e.length;i++)(isLetter(t=e[i])||isNumber(t)&&i>0)&&(o+=t);return o}function isLetter(e){return 1===e.length&&e.match(/[a-z]/i)}function isNumber(e){return 1===e.length&&e.match(/[0-9]/i)}document.addEventListener("DOMContentLoaded",(function(){document.body.classList.remove("preload")})),$((function(){$("body").on("click",'[data-url-af~="RemoveUrl"], a[itemprop~="RemoveUrl"]',(function(){var e=$(this);return 1==e.filter('a[itemprop~="UnsafeUrl"]').length&&console.warn("Please use data-url-af instead of itemprop attribute for confirm modals. Using itemprop will eventually become deprecated."),1==e.filter('[data-url-af~="UnsafeUrl"], a[itemprop~="UnsafeUrl"]').length||confirmDialog(_objectSpread(_objectSpread({},e.data()),{},{callback:function(t){if(t){var o=e.attr("href");if(null==o){var a=e.parents("form");a.append($('<input type="hidden" name="'+e.attr("name")+'" value="'+e.attr("value")+'" />')),a.submit()}else window.location=o}}})),!1}))})),$((function(){var e=$("input[name=__RequestVerificationToken]").first();e&&$("body").on("click",'a[data-url-af~="UnsafeUrl"], a[itemprop~="UnsafeUrl"]',(function(){var t=$(this);1==t.filter('a[itemprop~="UnsafeUrl"]').length&&console.warn("Please use data-url-af instead of itemprop attribute for confirm modals. Using itemprop will eventually become deprecated.");var o=t.attr("href").split("?"),a=$('<form action="'+o[0]+'" method="POST" />');if(a.append(e.clone()),o.length>1)for(var n=o[1].split("&"),i=0;i<n.length;i++){var r=n[i].split("=");a.append($('<input type="hidden" name="'+decodeURIComponent(r[0])+'" value="'+decodeURIComponent(r[1])+'" />'))}a.css({position:"absolute",left:"-9999em"}),$("body").append(a);var s=t.data("unsafe-url");return s&&s.length>0||1==t.filter('[data-url-af~="RemoveUrl"], a[itemprop~="RemoveUrl"]').length?(confirmDialog(_objectSpread(_objectSpread({},t.data()),{},{callback:function(e){e&&a.submit()}})),!1):(a.submit(),!1)}))})),[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map((function(e){return new bootstrap.Tooltip(e)})),$("body").on("submit","form.no-multisubmit",(function(e){var t="submitting";form=$(this),form.hasClass(t)?e.preventDefault():(form.addClass(t),setTimeout((function(){form.removeClass(t)}),5e3))})),$((function(){($("body").hasClass("left-sidebar-compact")||$("body").hasClass("no-admin-preferences")&&$(window).width()<768)&&setCompactStatus()})),$("span.title").each((function(){$(this).prev(".icon").prop("title",$(this).text())})),$(".leftbar-compactor").click((function(){$("body").hasClass("left-sidebar-compact")?unSetCompactStatus():setCompactStatus(!0)})),$("#left-nav li.has-items").click((function(){$("#left-nav li.has-items").removeClass("visible"),$(this).addClass("visible")})),$(document).on("click",(function(e){var t=$("#left-nav li.has-items");t===e.target||t.has(e.target).length||$("#left-nav li.has-items").removeClass("visible")}));var subMenuArray=new Array;function setCompactStatus(e){if(!$("body").hasClass("left-sidebar-compact")){var t=$("#left-nav ul.menu-admin > li > figure > figcaption > .item-label");t.css("background-color","transparent"),setTimeout((function(){t.css("background-color","")}),200)}$("body").addClass("left-sidebar-compact"),$("#left-nav ul.menu-admin > li > figure > ul").removeClass("collapse"),$("#left-nav ul.menu-admin > li > figure > figcaption > a").attr("data-bs-toggle",""),$("#left-nav li.has-items").removeClass("visible"),setTimeout((function(){$("#left-nav > ul > li").css("transition","none")}),200),1==e&&(isCompactExplicit=!0),persistAdminPreferences()}function unSetCompactStatus(){$("body").removeClass("left-sidebar-compact"),$("#left-nav ul.menu-admin > li > figure > ul").addClass("collapse"),$("#left-nav ul.menu-admin > li > figure > figcaption a").attr("data-bs-toggle","collapse"),$("#left-nav li.has-items").removeClass("visible"),$("#left-nav > ul > li").css("transition",""),isCompactExplicit=!1,persistAdminPreferences()}var leftNav=document.getElementById("left-nav"),resizeObserver=new ResizeObserver((function(e){isCompactExplicit&&leftNav.scrollHeight>leftNav.clientHeight?document.body.classList.add("scroll"):document.body.classList.remove("scroll")}));null!=leftNav&&resizeObserver.observe(leftNav);for(var defaultDiacriticsRemovalMap=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"OE",letters:"Œ"},{base:"oe",letters:"œ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],diacriticsMap={},i=0;i<defaultDiacriticsRemovalMap.length;i++)for(var letters=defaultDiacriticsRemovalMap[i].letters,j=0;j<letters.length;j++)diacriticsMap[letters[j]]=defaultDiacriticsRemovalMap[i].base;function removeDiacritics(e){return e.replace(/[^\u0000-\u007E]/g,(function(e){return diacriticsMap[e]||e}))}function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)
/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @license MIT
 */}function persistAdminPreferences(){setTimeout((function(){var e={};e.leftSidebarCompact=!!document.body.classList.contains("left-sidebar-compact"),e.isCompactExplicit=isCompactExplicit,setAdminPreferences(e)}),200)}!function(){var e="",t="",o=!1,a=document.body.clientWidth;window.addEventListener("resize",(function(){var n=document.body.clientWidth,i=n<a?"reducing":"increasing";i!==e&&(o=!1),0==o&&i!=t&&("reducing"==i&&n<768&&(setCompactStatus(),t=i,o=!0),"increasing"==i&&n>768&&(0==isCompactExplicit&&unSetCompactStatus(),t=i,o=!0)),e=i,a=n}))}(),function(e){"use strict";"function"==typeof define&&define.amd?define(e):"undefined"!=typeof module&&void 0!==module.exports?module.exports=e():"undefined"!=typeof Package?Sortable=e():window.Sortable=e()}((function(){"use strict";if("undefined"==typeof window||void 0===window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var e,t,o,a,n,i,r,s,l,c,d,u,f,p,m,h,b,g,v={},y=/\s+/g,_="Sortable"+(new Date).getTime(),D=window,w=D.document,S=D.parseInt,C=!!("draggable"in w.createElement("div")),E=((g=w.createElement("x")).style.cssText="pointer-events:auto","auto"===g.style.pointerEvents),O=!1,T=Math.abs,x=[],$=V((function(e,t,o){if(o&&t.scroll){var a,n,i,l,c=t.scrollSensitivity,d=t.scrollSpeed,u=e.clientX,f=e.clientY,p=window.innerWidth,m=window.innerHeight;if(s!==o&&(r=t.scroll,s=o,!0===r)){r=o;do{if(r.offsetWidth<r.scrollWidth||r.offsetHeight<r.scrollHeight)break}while(r=r.parentNode)}r&&(a=r,n=r.getBoundingClientRect(),i=(T(n.right-u)<=c)-(T(n.left-u)<=c),l=(T(n.bottom-f)<=c)-(T(n.top-f)<=c)),i||l||(l=(m-f<=c)-(f<=c),((i=(p-u<=c)-(u<=c))||l)&&(a=D)),v.vx===i&&v.vy===l&&v.el===a||(v.el=a,v.vx=i,v.vy=l,clearInterval(v.pid),a&&(v.pid=setInterval((function(){a===D?D.scrollTo(D.pageXOffset+i*d,D.pageYOffset+l*d):(l&&(a.scrollTop+=l*d),i&&(a.scrollLeft+=i*d))}),24)))}}),30),j=function(e){var t=e.group;t&&"object"==_typeof(t)||(t=e.group={name:t}),["pull","put"].forEach((function(e){e in t||(t[e]=!0)})),e.groups=" "+t.name+(t.put.join?" "+t.put.join(" "):"")+" "};function P(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(e);this.el=e,this.options=t=K({},t),e[_]=this;var o={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(e.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",ignore:"a, img",filter:null,animation:0,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1};for(var a in o)!(a in t)&&(t[a]=o[a]);for(var n in j(t),this)"_"===n.charAt(0)&&(this[n]=this[n].bind(this));this.nativeDraggable=!t.forceFallback&&C,R(e,"mousedown",this._onTapStart),R(e,"touchstart",this._onTapStart),this.nativeDraggable&&(R(e,"dragover",this),R(e,"dragenter",this)),x.push(this._onDragOver),t.store&&this.sort(t.store.get(this))}function N(t){a&&a.state!==t&&(B(a,"display",t?"none":""),!t&&a.state&&n.insertBefore(a,e),a.state=t)}function k(e,t,o){if(e){o=o||w;do{if(">*"===t&&e.parentNode===o||H(e,t))return e}while(e!==o&&(e=e.parentNode))}return null}function R(e,t,o){e.addEventListener(t,o,!1)}function U(e,t,o){e.removeEventListener(t,o,!1)}function A(e,t,o){if(e)if(e.classList)e.classList[o?"add":"remove"](t);else{var a=(" "+e.className+" ").replace(y," ").replace(" "+t+" "," ");e.className=(a+(o?" "+t:"")).replace(y," ")}}function B(e,t,o){var a=e&&e.style;if(a){if(void 0===o)return w.defaultView&&w.defaultView.getComputedStyle?o=w.defaultView.getComputedStyle(e,""):e.currentStyle&&(o=e.currentStyle),void 0===t?o:o[t];t in a||(t="-webkit-"+t),a[t]=o+("string"==typeof o?"":"px")}}function M(e,t,o){if(e){var a=e.getElementsByTagName(t),n=0,i=a.length;if(o)for(;n<i;n++)o(a[n],n);return a}return[]}function L(e,t,o,n,i,r,s){var l=w.createEvent("Event"),c=(e||t[_]).options,d="on"+o.charAt(0).toUpperCase()+o.substr(1);l.initEvent(o,!0,!0),l.to=t,l.from=i||t,l.item=n||t,l.clone=a,l.oldIndex=r,l.newIndex=s,t.dispatchEvent(l),c[d]&&c[d].call(e,l)}function I(e,t,o,a,n,i){var r,s,l=e[_],c=l.options.onMove;return(r=w.createEvent("Event")).initEvent("move",!0,!0),r.to=t,r.from=e,r.dragged=o,r.draggedRect=a,r.related=n||t,r.relatedRect=i||t.getBoundingClientRect(),e.dispatchEvent(r),c&&(s=c.call(l,r)),s}function Y(e){e.draggable=!1}function X(){O=!1}function W(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,o=t.length,a=0;o--;)a+=t.charCodeAt(o);return a.toString(36)}function z(e,t){var o=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)"TEMPLATE"!==e.nodeName.toUpperCase()&&H(e,t)&&o++;return o}function H(e,t){if(e){var o=(t=t.split(".")).shift().toUpperCase(),a=new RegExp("\\s("+t.join("|")+")(?=\\s)","g");return!(""!==o&&e.nodeName.toUpperCase()!=o||t.length&&((" "+e.className+" ").match(a)||[]).length!=t.length)}return!1}function V(e,t){var o,a;return function(){void 0===o&&(o=arguments,a=this,setTimeout((function(){1===o.length?e.call(a,o[0]):e.apply(a,o),o=void 0}),t))}}function K(e,t){if(e&&t)for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e}return P.prototype={constructor:P,_onTapStart:function(e){var t=this,o=this.el,a=this.options,n=e.type,i=e.touches&&e.touches[0],r=(i||e).target,s=r,l=a.filter;if(!("mousedown"===n&&0!==e.button||a.disabled)&&(r=k(r,a.draggable,o))){if(u=z(r,a.draggable),"function"==typeof l){if(l.call(this,e,r,this))return L(t,s,"filter",r,o,u),void e.preventDefault()}else if(l&&(l=l.split(",").some((function(e){if(e=k(s,e.trim(),o))return L(t,e,"filter",r,o,u),!0}))))return void e.preventDefault();a.handle&&!k(s,a.handle,o)||this._prepareDragStart(e,i,r)}},_prepareDragStart:function(o,a,r){var s,l=this,c=l.el,d=l.options,u=c.ownerDocument;r&&!e&&r.parentNode===c&&(m=o,n=c,t=(e=r).parentNode,i=e.nextSibling,p=d.group,s=function(){l._disableDelayedDrag(),e.draggable=!0,A(e,l.options.chosenClass,!0),l._triggerDragStart(a)},d.ignore.split(",").forEach((function(t){M(e,t.trim(),Y)})),R(u,"mouseup",l._onDrop),R(u,"touchend",l._onDrop),R(u,"touchcancel",l._onDrop),d.delay?(R(u,"mouseup",l._disableDelayedDrag),R(u,"touchend",l._disableDelayedDrag),R(u,"touchcancel",l._disableDelayedDrag),R(u,"mousemove",l._disableDelayedDrag),R(u,"touchmove",l._disableDelayedDrag),l._dragStartTimer=setTimeout(s,d.delay)):s())},_disableDelayedDrag:function(){var e=this.el.ownerDocument;clearTimeout(this._dragStartTimer),U(e,"mouseup",this._disableDelayedDrag),U(e,"touchend",this._disableDelayedDrag),U(e,"touchcancel",this._disableDelayedDrag),U(e,"mousemove",this._disableDelayedDrag),U(e,"touchmove",this._disableDelayedDrag)},_triggerDragStart:function(t){t?(m={target:e,clientX:t.clientX,clientY:t.clientY},this._onDragStart(m,"touch")):this.nativeDraggable?(R(e,"dragend",this),R(n,"dragstart",this._onDragStart)):this._onDragStart(m,!0);try{w.selection?setTimeout((function(){w.selection.empty()})):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(){n&&e&&(A(e,this.options.ghostClass,!0),P.active=this,L(this,n,"start",e,n,u))},_emulateDragOver:function(){if(h){if(this._lastX===h.clientX&&this._lastY===h.clientY)return;this._lastX=h.clientX,this._lastY=h.clientY,E||B(o,"display","none");var e=w.elementFromPoint(h.clientX,h.clientY),t=e,a=" "+this.options.group.name,n=x.length;if(t)do{if(t[_]&&t[_].options.groups.indexOf(a)>-1){for(;n--;)x[n]({clientX:h.clientX,clientY:h.clientY,target:e,rootEl:t});break}e=t}while(t=t.parentNode);E||B(o,"display","")}},_onTouchMove:function(e){if(m){P.active||this._dragStarted(),this._appendGhost();var t=e.touches?e.touches[0]:e,a=t.clientX-m.clientX,n=t.clientY-m.clientY,i=e.touches?"translate3d("+a+"px,"+n+"px,0)":"translate("+a+"px,"+n+"px)";b=!0,h=t,B(o,"webkitTransform",i),B(o,"mozTransform",i),B(o,"msTransform",i),B(o,"transform",i),e.preventDefault()}},_appendGhost:function(){if(!o){var t,a=e.getBoundingClientRect(),i=B(e),r=this.options;A(o=e.cloneNode(!0),r.ghostClass,!1),A(o,r.fallbackClass,!0),B(o,"top",a.top-S(i.marginTop,10)),B(o,"left",a.left-S(i.marginLeft,10)),B(o,"width",a.width),B(o,"height",a.height),B(o,"opacity","0.8"),B(o,"position","fixed"),B(o,"zIndex","100000"),B(o,"pointerEvents","none"),r.fallbackOnBody&&w.body.appendChild(o)||n.appendChild(o),t=o.getBoundingClientRect(),B(o,"width",2*a.width-t.width),B(o,"height",2*a.height-t.height)}},_onDragStart:function(t,o){var i=t.dataTransfer,r=this.options;this._offUpEvents(),"clone"==p.pull&&(B(a=e.cloneNode(!0),"display","none"),n.insertBefore(a,e)),o?("touch"===o?(R(w,"touchmove",this._onTouchMove),R(w,"touchend",this._onDrop),R(w,"touchcancel",this._onDrop)):(R(w,"mousemove",this._onTouchMove),R(w,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(i&&(i.effectAllowed="move",r.setData&&r.setData.call(this,i,e)),R(w,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(r){var s,u,f,m=this.el,h=this.options,g=h.group,v=g.put,y=p===g,D=h.sort;if(void 0!==r.preventDefault&&(r.preventDefault(),!h.dragoverBubble&&r.stopPropagation()),b=!0,p&&!h.disabled&&(y?D||(f=!n.contains(e)):p.pull&&v&&(p.name===g.name||v.indexOf&&~v.indexOf(p.name)))&&(void 0===r.rootEl||r.rootEl===this.el)){if($(r,h,this.el),O)return;if(s=k(r.target,h.draggable,m),u=e.getBoundingClientRect(),f)return N(!0),void(a||i?n.insertBefore(e,a||i):D||n.appendChild(e));if(0===m.children.length||m.children[0]===o||m===r.target&&(s=function(e,t){var o=e.lastElementChild,a=o.getBoundingClientRect();return(t.clientY-(a.top+a.height)>5||t.clientX-(a.right+a.width)>5)&&o}(m,r))){if(s){if(s.animated)return;S=s.getBoundingClientRect()}N(y),!1!==I(n,m,e,u,s,S)&&(e.contains(m)||(m.appendChild(e),t=m),this._animate(u,e),s&&this._animate(S,s))}else if(s&&!s.animated&&s!==e&&void 0!==s.parentNode[_]){l!==s&&(l=s,c=B(s),d=B(s.parentNode));var w,S=s.getBoundingClientRect(),C=S.right-S.left,E=S.bottom-S.top,T=/left|right|inline/.test(c.cssFloat+c.display)||"flex"==d.display&&0===d["flex-direction"].indexOf("row"),x=s.offsetWidth>e.offsetWidth,j=s.offsetHeight>e.offsetHeight,P=(T?(r.clientX-S.left)/C:(r.clientY-S.top)/E)>.5,R=s.nextElementSibling,U=I(n,m,e,u,s,S);if(!1!==U){if(O=!0,setTimeout(X,30),N(y),1===U||-1===U)w=1===U;else if(T){var A=e.offsetTop,M=s.offsetTop;w=A===M?s.previousElementSibling===e&&!x||P&&x:M>A}else w=R!==e&&!j||P&&j;e.contains(m)||(w&&!R?m.appendChild(e):s.parentNode.insertBefore(e,w?R:s)),t=e.parentNode,this._animate(u,e),this._animate(S,s)}}}},_animate:function(e,t){var o=this.options.animation;if(o){var a=t.getBoundingClientRect();B(t,"transition","none"),B(t,"transform","translate3d("+(e.left-a.left)+"px,"+(e.top-a.top)+"px,0)"),t.offsetWidth,B(t,"transition","all "+o+"ms"),B(t,"transform","translate3d(0,0,0)"),clearTimeout(t.animated),t.animated=setTimeout((function(){B(t,"transition",""),B(t,"transform",""),t.animated=!1}),o)}},_offUpEvents:function(){var e=this.el.ownerDocument;U(w,"touchmove",this._onTouchMove),U(e,"mouseup",this._onDrop),U(e,"touchend",this._onDrop),U(e,"touchcancel",this._onDrop)},_onDrop:function(r){var s=this.el,l=this.options;clearInterval(this._loopId),clearInterval(v.pid),clearTimeout(this._dragStartTimer),U(w,"mousemove",this._onTouchMove),this.nativeDraggable&&(U(w,"drop",this),U(s,"dragstart",this._onDragStart)),this._offUpEvents(),r&&(b&&(r.preventDefault(),!l.dropBubble&&r.stopPropagation()),o&&o.parentNode.removeChild(o),e&&(this.nativeDraggable&&U(e,"dragend",this),Y(e),A(e,this.options.ghostClass,!1),A(e,this.options.chosenClass,!1),n!==t?(f=z(e,l.draggable))>=0&&(L(null,t,"sort",e,n,u,f),L(this,n,"sort",e,n,u,f),L(null,t,"add",e,n,u,f),L(this,n,"remove",e,n,u,f)):(a&&a.parentNode.removeChild(a),e.nextSibling!==i&&(f=z(e,l.draggable))>=0&&(L(this,n,"update",e,n,u,f),L(this,n,"sort",e,n,u,f))),P.active&&(null!=f&&-1!==f||(f=u),L(this,n,"end",e,n,u,f),this.save()))),this._nulling()},_nulling:function(){P.active===this&&(n=e=t=o=i=a=r=s=m=h=b=f=l=c=p=P.active=null)},handleEvent:function(t){var o=t.type;"dragover"===o||"dragenter"===o?e&&(this._onDragOver(t),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.preventDefault()}(t)):"drop"!==o&&"dragend"!==o||this._onDrop(t)},toArray:function(){for(var e,t=[],o=this.el.children,a=0,n=o.length,i=this.options;a<n;a++)k(e=o[a],i.draggable,this.el)&&t.push(e.getAttribute(i.dataIdAttr)||W(e));return t},sort:function(e){var t={},o=this.el;this.toArray().forEach((function(e,a){var n=o.children[a];k(n,this.options.draggable,o)&&(t[e]=n)}),this),e.forEach((function(e){t[e]&&(o.removeChild(t[e]),o.appendChild(t[e]))}))},save:function(){var e=this.options.store;e&&e.set(this)},closest:function(e,t){return k(e,t||this.options.draggable,this.el)},option:function(e,t){var o=this.options;if(void 0===t)return o[e];o[e]=t,"group"===e&&j(o)},destroy:function(){var e=this.el;e[_]=null,U(e,"mousedown",this._onTapStart),U(e,"touchstart",this._onTapStart),this.nativeDraggable&&(U(e,"dragover",this),U(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),x.splice(x.indexOf(this._onDragOver),1),this._onDrop(),this.el=e=null}},P.utils={on:R,off:U,css:B,find:M,is:function(e,t){return!!k(e,t,e)},extend:K,throttle:V,closest:k,toggleClass:A,index:z},P.create=function(e,t){return new P(e,t)},P.version="1.4.2",P}));
